!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TelerikBlazor=e():t.TelerikBlazor=e()}(self,(function(){return(()=>{var t={840:(t,e,i)=>{var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(n,o,s,a){"use strict";var l,h=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),p=Math.round,u=Math.abs,d=Date.now;function f(t,e,i){return setTimeout(x(t,i),e)}function v(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function g(t,e,i){var r="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=n.console&&(n.console.warn||n.console.log);return o&&o.call(n.console,r,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==a&&null!==r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}:Object.assign;var y=g((function(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;)(!i||i&&t[r[n]]===a)&&(t[r[n]]=e[r[n]]),n++;return t}),"extend","Use `assign`."),b=g((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function w(t,e,i){var r,n=e.prototype;(r=t.prototype=Object.create(n)).constructor=t,r._super=n,i&&l(r,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function _(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function k(t,e){return t===a?e:t}function S(t,e,i){m(A(e),(function(e){t.addEventListener(e,i,!1)}))}function C(t,e,i){m(A(e),(function(e){t.removeEventListener(e,i,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function M(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var r=0;r<t.length;){if(i&&t[r][i]==e||!i&&t[r]===e)return r;r++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function D(t,e,i){for(var r=[],n=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(n,s)<0&&r.push(t[o]),n[o]=s,o++}return i&&(r=e?r.sort((function(t,i){return t[e]>i[e]})):r.sort()),r}function P(t,e){for(var i,r,n=e[0].toUpperCase()+e.slice(1),o=0;o<h.length;){if((r=(i=h[o])?i+n:e)in t)return r;o++}return a}var R=1;function I(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var L="ontouchstart"in n,z=P(n,"PointerEvent")!==a,B=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N="touch",j="mouse",F=24,V=["x","y"],H=["clientX","clientY"];function W(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&i.handler(e)},this.init()}function U(t,e,i){var r=i.pointers.length,n=i.changedPointers.length,o=1&e&&r-n==0,s=12&e&&r-n==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,n=r.length;i.firstInput||(i.firstInput=q(e));n>1&&!i.firstMultiple?i.firstMultiple=q(e):1===n&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,l=s?s.center:o.center,h=e.center=G(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,h),e.distance=X(l,h),function(t,e){var i=e.center,r=t.offsetDelta||{},n=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(n=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y});e.deltaX=n.x+(i.x-r.x),e.deltaY=n.y+(i.y-r.y)}(i,e),e.offsetDirection=K(e.deltaX,e.deltaY);var c=$(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=u(c.x)>u(c.y)?c.x:c.y,e.scale=s?(p=s.pointers,f=r,X(f[0],f[1],H)/X(p[0],p[1],H)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],H)+Y(t[1],t[0],H)}(s.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,r,n,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var h=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,p=$(l,h,c);r=p.x,n=p.y,i=u(p.x)>u(p.y)?p.x:p.y,o=K(h,c),t.lastInterval=e}else i=s.velocity,r=s.velocityX,n=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=r,e.velocityY=n,e.direction=o}(i,e);var p,f;var v=t.element;E(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:p(t.pointers[i].clientX),clientY:p(t.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:e,center:G(e),deltaX:t.deltaX,deltaY:t.deltaY}}function G(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var i=0,r=0,n=0;n<e;)i+=t[n].clientX,r+=t[n].clientY,n++;return{x:p(i/e),y:p(r/e)}}function $(t,e,i){return{x:e/t||0,y:i/t||0}}function K(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function X(t,e,i){i||(i=V);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(r*r+n*n)}function Y(t,e,i){i||(i=V);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,r)/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(I(this.element),this.evWin,this.domHandler)}};var Z={mousedown:1,mousemove:2,mouseup:4},J="mousedown",Q="mousemove mouseup";function tt(){this.evEl=J,this.evWin=Q,this.pressed=!1,W.apply(this,arguments)}w(tt,W,{handler:function(t){var e=Z[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},it={2:N,3:"pen",4:j,5:"kinect"},rt="pointerdown",nt="pointermove pointerup pointercancel";function ot(){this.evEl=rt,this.evWin=nt,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(rt="MSPointerDown",nt="MSPointerMove MSPointerUp MSPointerCancel"),w(ot,W,{handler:function(t){var e=this.store,i=!1,r=t.type.toLowerCase().replace("ms",""),n=et[r],o=it[t.pointerType]||t.pointerType,s=o==N,a=M(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",lt="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=at,this.evWin=lt,this.started=!1,W.apply(this,arguments)}function ct(t,e){var i=O(t.touches),r=O(t.changedTouches);return 12&e&&(i=D(i.concat(r),"identifier",!0)),[i,r]}w(ht,W,{handler:function(t){var e=st[t.type];if(1===e&&(this.started=!0),this.started){var i=ct.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}}});var pt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ut="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ut,this.targetIds={},W.apply(this,arguments)}function ft(t,e){var i=O(t.touches),r=this.targetIds;if(3&e&&1===i.length)return r[i[0].identifier]=!0,[i,i];var n,o,s=O(t.changedTouches),a=[],l=this.target;if(o=i.filter((function(t){return E(t.target,l)})),1===e)for(n=0;n<o.length;)r[o[n].identifier]=!0,n++;for(n=0;n<s.length;)r[s[n].identifier]&&a.push(s[n]),12&e&&delete r[s[n].identifier],n++;return a.length?[D(o.concat(a),"identifier",!0),a]:void 0}w(dt,W,{handler:function(t){var e=pt[t.type],i=ft.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}});function vt(){W.apply(this,arguments);var t=x(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(i);t>-1&&r.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],o=Math.abs(e-n.x),s=Math.abs(i-n.y);if(o<=25&&s<=25)return!0}return!1}w(vt,W,{handler:function(t,e,i){var r=i.pointerType==N,n=i.pointerType==j;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)mt.call(this,e,i);else if(n&&yt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var bt=P(c.style,"touchAction"),wt=bt!==a,xt="compute",_t="auto",kt="manipulation",St="none",Ct="pan-x",Et="pan-y",Tt=function(){if(!wt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||n.CSS.supports("touch-action",i)})),t}();function At(t,e){this.manager=t,this.set(e)}At.prototype={set:function(t){t==xt&&(t=this.compute()),wt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,St))return St;var e=T(t,Ct),i=T(t,Et);if(e&&i)return St;if(e||i)return e?Ct:Et;if(T(t,kt))return kt;return _t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,n=T(r,St)&&!Tt.none,o=T(r,Et)&&!Tt["pan-y"],s=T(r,Ct)&&!Tt["pan-x"];if(n){var a=1===t.pointers.length,l=t.distance<2,h=t.deltaTime<250;if(a&&l&&h)return}if(!s||!o)return n||o&&6&i||s&&i&F?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=32;function Ot(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Dt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Pt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Rt(t,e){var i=e.manager;return i?i.get(t):t}function It(){Ot.apply(this,arguments)}function Lt(){It.apply(this,arguments),this.pX=null,this.pY=null}function zt(){It.apply(this,arguments)}function Bt(){Ot.apply(this,arguments),this._timer=null,this._input=null}function Nt(){It.apply(this,arguments)}function jt(){It.apply(this,arguments)}function Ft(){Ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Vt(t,e){return(e=e||{}).recognizers=k(e.recognizers,Vt.defaults.preset),new Ht(t,e)}Ot.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Rt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)||(t=Rt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Rt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Rt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function r(i){e.manager.emit(i,t)}i<8&&r(e.options.event+Dt(i)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),i>=8&&r(e.options.event+Dt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Mt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!_(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(It,Ot,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,r=6&e,n=this.attrTest(t);return r&&(8&i||!n)?16|e:r||n?4&i?8|e:2&e?4|e:2:Mt}}),w(Lt,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Et),t&F&&e.push(Ct),e},directionTest:function(t){var e=this.options,i=!0,r=t.distance,n=t.direction,o=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===o?1:o<0?2:4,i=o!=this.pX,r=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:16,i=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=n,i&&r>e.threshold&&n&e.direction},attrTest:function(t){return It.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Pt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(zt,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Bt,Ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!r||!i||12&t.eventType&&!n)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Mt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(Nt,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(jt,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Lt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&F&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Pt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Ft,Ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&n&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Mt},failTimeout:function(){return this._timer=f((function(){this.state=Mt}),this.options.interval,this),Mt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Vt.VERSION="2.0.7",Vt.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Nt,{enable:!1}],[zt,{enable:!1},["rotate"]],[jt,{direction:6}],[Lt,{direction:6},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[Bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ht(t,e){var i;this.options=l({},Vt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ot:B?dt:L?vt:tt))(i,U),this.touchAction=new At(this,this.options.touchAction),Wt(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Wt(t,e){var i,r=t.element;r.style&&(m(t.options.cssProps,(function(n,o){i=P(r.style,o),e?(t.oldCssProps[i]=r.style[i],r.style[i]=n):r.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}Ht.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var r=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(n=e.curRecognizer=null);for(var o=0;o<r.length;)i=r[o],2===e.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(n=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Ot)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=M(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return m(A(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return m(A(t),(function(t){e?i[t]&&i[t].splice(M(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Vt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Mt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:F,DIRECTION_ALL:30,Manager:Ht,Input:W,TouchAction:At,TouchInput:dt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:vt,SingleTouchInput:ht,Recognizer:Ot,AttrRecognizer:It,Tap:Ft,Pan:Lt,Swipe:jt,Pinch:zt,Rotate:Nt,Press:Bt,on:S,off:C,each:m,merge:b,extend:y,assign:l,inherit:w,bindFn:x,prefixed:P}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=Vt,(r=function(){return Vt}.call(e,i,e,t))===a||(t.exports=r)}(window,document)}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";i.r(r),i.d(r,{Component:()=>V,FormKeyTrap:()=>le,GridBase:()=>fi,Key:()=>Jt,KeyCode:()=>Zt,KeyModifiers:()=>Qt,NavigationService:()=>ie,Platform:()=>he,ScrollSync:()=>fe,Shortcut:()=>te,TabKeyTrap:()=>ne,addClass:()=>K,addComponentSuffix:()=>Gt,areElementsOverlapping:()=>Mt,clamp:()=>Xt,closestDivisibleTo:()=>Yt,columnResizableAutoFitAllColumns:()=>QO,columnResizableAutoFitColumns:()=>JO,columnResizableSetColumns:()=>tD,converToKeyboardEventArgs:()=>D,convertToHtml:()=>j,convertToMouseEventArgs:()=>P,createCancellableTimerPromise:()=>C,debounce:()=>p,deepExtend:()=>y,delay:()=>S,destroyChart:()=>WA,destroyColumnDraggable:()=>DO,destroyColumnReorderable:()=>BO,destroyColumnResizable:()=>ZO,destroyComponent:()=>jt,destroyGrid:()=>sH,destroyGroupable:()=>bO,destroyTileLayout:()=>rq,destroyTreeList:()=>_q,destroyVirtualColumnScroller:()=>aG,disableFormTabKeyTrap:()=>ae,enableFormTabKeyTrap:()=>se,extend:()=>f,findEditable:()=>at,findFocusable:()=>st,findNextSiblings:()=>ut,findPreviousSiblings:()=>pt,firstVisibleItem:()=>At,focusElement:()=>it,focusElementInNextFrame:()=>et,focusFirstFocusableChild:()=>lt,focusInNextFrameAsync:()=>tt,focusTimePickerInput:()=>UM,getComponentInstance:()=>Ht,getElementByDataId:()=>q,getElementIndex:()=>Rt,getElementScrollHeight:()=>U,getIntersectionRect:()=>Ot,getLocationHost:()=>d,getMaxScrollLeft:()=>Tt,getScrollBarHeight:()=>bt,getScrollBarWidth:()=>yt,getSiblings:()=>ft,getSlotMetrics:()=>NU,groupBy:()=>F,guid:()=>b,hasAncestor:()=>nt,hasAnyClass:()=>Z,hasClass:()=>Y,hasValue:()=>k,haveSameParent:()=>Pt,hideAnimationGroup:()=>Ri,hideAnimationGroupAsync:()=>Pi,hideElement:()=>$,htmlEncode:()=>E,initAnimationGroup:()=>Oi,initAutoComplete:()=>mD,initBreadcrumb:()=>MA,initCalendar:()=>eO,initCheckBox:()=>pH,initColorGradient:()=>tM,initColorPalette:()=>$A,initColorPicker:()=>YA,initColumnDraggable:()=>OO,initColumnMenu:()=>aM,initColumnReorderable:()=>zO,initColumnResizable:()=>YO,initComboBox:()=>bD,initComponent:()=>Nt,initComponentLoaderContainer:()=>mi,initContextMenu:()=>cM,initDateInput:()=>RM,initDatePicker:()=>NM,initDateRangePicker:()=>hO,initDateTimePicker:()=>nO,initDayTable:()=>LU,initDialog:()=>uO,initDrawer:()=>oD,initDropDownGroupHeader:()=>LD,initDropDownList:()=>AD,initDropDownListFilter:()=>MD,initEditor:()=>IV,initFileSelect:()=>eG,initFilterMenu:()=>jV,initFlatColorPicker:()=>rM,initGantt:()=>UV,initGanttTimeline:()=>qV,initGrid:()=>oH,initGroupable:()=>yO,initMaskedTextBox:()=>SH,initMediaQuery:()=>AW,initMenuItem:()=>YH,initMonthTable:()=>zU,initMultiSelect:()=>PD,initNumericTextBox:()=>OH,initOrUpdateArcGauge:()=>ZV,initOrUpdateBarcode:()=>SA,initOrUpdateChart:()=>HA,initOrUpdateCircularGauge:()=>QV,initOrUpdateLinearGauge:()=>eH,initOrUpdateMap:()=>_W,initOrUpdateQRCode:()=>EA,initOrUpdateRadialGauge:()=>rH,initPager:()=>RW,initPanelBar:()=>BW,initPopup:()=>xU,initRangeSlider:()=>GH,initScheduler:()=>IU,initSlider:()=>HH,initSplitter:()=>JU,initStepper:()=>tW,initSwitch:()=>BH,initTabStrip:()=>aW,initTextArea:()=>RH,initTextBox:()=>IH,initTileLayout:()=>iq,initTimeCarousel:()=>qM,initTimePicker:()=>WM,initTimelineTable:()=>BU,initToggleButton:()=>aq,initToolBar:()=>yW,initTooltip:()=>bq,initTreeList:()=>xq,initTreeView:()=>dW,initUpload:()=>tG,initVirtualColumnScroller:()=>sG,initVirtualScroller:()=>cG,initWindow:()=>dG,invokeComponentMethod:()=>Kt,isChild:()=>J,isDefined:()=>x,isDomElement:()=>g,isFocusable:()=>ot,isFunction:()=>w,isHtmlElement:()=>m,isNotNull:()=>_,isObject:()=>v,isTargetAfterElement:()=>Dt,isWholeElementInView:()=>Et,noop:()=>T,ownsElement:()=>H,ownsElementOrSelf:()=>W,parseAttrToInt:()=>B,parseStyleAttrToInt:()=>N,removeClass:()=>X,removeComponentInstance:()=>Ut,removeComponentSuffix:()=>$t,runInNextFrameAsync:()=>Q,saveFile:()=>A,scrollListToItem:()=>gt,setCarouselSelectedIndex:()=>GM,setComponentInstance:()=>Wt,setComponentOptions:()=>Ft,setElementValue:()=>rt,setIndeterminate:()=>vt,setOptions:()=>Vt,setPosition:()=>mt,setScrollbarSizeCssVariables:()=>It,showAnimationGroup:()=>Ii,showAnimationGroupAsync:()=>Di,showElement:()=>G,stringifyToStyle:()=>M,supportsTouchEvents:()=>u,throttle:()=>c,toAttrQuerySelector:()=>I,toAttrValueQuerySelector:()=>L,toClassSelector:()=>z,toDataAttr:()=>R,updateDateInputValue:()=>IM});var t={};i.r(t),i.d(t,{IntlError:()=>Ni,cldr:()=>Hi,currencyDisplay:()=>zr,currencyDisplays:()=>Lr,currencyFractionOptions:()=>Br,dateFieldName:()=>kr,dateFormatNames:()=>Sr,errors:()=>Vi,firstDay:()=>Wr,format:()=>To,formatDate:()=>Jn,formatNumber:()=>vn,load:()=>xr,localeCurrency:()=>jr,localeInfo:()=>Ui,numberSymbols:()=>Gr,parseDate:()=>bo,parseNumber:()=>wn,setData:()=>_r,splitDateFormat:()=>So,territoryCurrencyCode:()=>Nr,toIntlErrors:()=>Fi,toString:()=>Eo,weekendRange:()=>qr});var e={};i.r(e),i.d(e,{DEG_TO_RAD:()=>oa,LRUCache:()=>La,MAX_NUM:()=>sa,MIN_NUM:()=>aa,TextMetrics:()=>Wa,append:()=>Qs,arabicToRoman:()=>ea,bindEvents:()=>_a,createPromise:()=>ia,defined:()=>ds,definitionId:()=>na,deg:()=>la,elementOffset:()=>ka,elementPadding:()=>Aa,elementScale:()=>Ra,elementSize:()=>Ea,elementStyles:()=>Sa,encodeBase64:()=>pa,eventCoordinates:()=>ua,eventElement:()=>da,hashKey:()=>ja,isTransparent:()=>fa,last:()=>va,limitValue:()=>ma,measureText:()=>Ua,mergeSort:()=>ga,normalizeText:()=>Ba,now:()=>ya,objectKey:()=>Na,promiseAll:()=>ba,rad:()=>wa,round:()=>Vs,unbindEvents:()=>Ta,valueOrDefault:()=>xa});var n={};i.r(n),i.d(n,{easeOutElastic:()=>_c,linear:()=>xc,swing:()=>wc});var o=function(){return document.createElement("a")},s=function(){return"download"in o()};function a(t,e){var i=t;if("string"==typeof t){for(var r=t.split(";base64,"),n=r[0],o=atob(r[1]),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);i=new Blob([s.buffer],{type:n})}navigator.msSaveBlob(i,e)}function l(t,e){var i=t;window.Blob&&t instanceof Blob&&(i=URL.createObjectURL(t));var r=o();r.download=e,r.href=i;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n),setTimeout((function(){return URL.revokeObjectURL(i)}))}function h(t,e,i){if(i.proxyURL){var r=document.createElement("form");r.setAttribute("action",i.proxyURL),r.setAttribute("method","POST"),r.setAttribute("target",i.proxyTarget||"_self");var n=i.proxyData||{};n.fileName=e;var o=t.split(";base64,");for(var s in n.contentType=o[0].replace("data:",""),n.base64=o[1],n)if(n.hasOwnProperty(s)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",n[s]),r.appendChild(a)}document.body.appendChild(r),r.submit(),document.body.removeChild(r)}}String.fromCharCode;var c=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;return!i||i<=0?t:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=this,l=0,h=()=>{t.call(a,...o),r=performance.now()};if(r||(r=performance.now(),e=setTimeout(h,i)),(l=performance.now()-r)>3*i)return clearTimeout(e),void(r=0);clearTimeout(e),l>i?h():e=setTimeout(h,i-l)}},p=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var s=this;clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),t.call(s,...n)}),i)}},u=()=>{var t="ontouchstart"in window;return Boolean(t)},d=()=>window.location.host,f=function(){return Object.assign(...arguments)},v=t=>t&&"object"==typeof t&&!Array.isArray(t),m=t=>t instanceof HTMLElement,g=t=>t instanceof Element,y=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(!r.length)return e;var o=r.shift();if(v(e)&&v(o))for(var s in o)m(o[s])?e[s]=o[s]:v(o[s])?(e[s]||f(e,{[s]:{}}),t(e[s],o[s])):f(e,{[s]:o[s]});return t(e,...r)},b=()=>{var t,e,i="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(i+="-"),i+=(12===t?4:16===t?3&e|8:e).toString(16);return i},w=t=>"function"==typeof t,x=t=>void 0!==t,_=t=>null!==t,k=t=>x(t)&&_(t),S=t=>new Promise((e=>setTimeout(e,t))),C=t=>{var e,i;return{promise:new Promise((function(r,n){i=n,e=setTimeout((function(){r("timer done")}),t)})),cancel:function(){clearTimeout(e),i()}}},E=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),T=function(){},A=(t,e)=>{!function(t,e,i){void 0===i&&(i={});var r=h;if(i.forceProxy&&!i.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");i.forceProxy||(s()&&(r=l),navigator.msSaveBlob&&(r=a)),r(t,e,i)}(e,t)},M=t=>{var e=[],i=Object.entries(t);for(var[r,n]of i)if(x(n)){var o="".concat(O(r),": ").concat(n);e.push(o.toLowerCase())}return e.join("; ")},O=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2"),D=t=>({type:t.type,key:t.key,code:(t.keyCode||"").toString(),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),P=t=>({type:t.type,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),R=t=>"data-".concat(t),I=t=>"[".concat(t,"]"),L=(t,e)=>"[".concat(t,'="').concat(e,'"]'),z=t=>".".concat(t),B=(t,e)=>{if(!e)return-1;var i=e.getAttribute(t),r=parseInt(i,10);return Number.isNaN(r)?-1:r},N=(t,e)=>{if(!e)return 0;var i=e.style[t],r=parseInt(i,10);return Number.isNaN(r)?0:r},j=t=>{var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild},F=(t,e)=>t.reduce((function(t,i){var r=e instanceof Function?e(i):i[e];return(t[r]=t[r]||[]).push(i),t}),{});class V{constructor(t,e){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,events:{}}),this.element=t,this.dotNetInstance=e.dotNetInstance}destroy(){this.element=null,this.dotNetInstance=null}extendOptions(t){this.options=y(this.options,t)}setOptions(t){this.options=t}invokeMethodAsync(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.dotNetInstance;if(i&&i.invokeMethodAsync&&t)return i.invokeMethodAsync(t,e)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={defaultPrevented:!1,preventDefault:()=>{i.defaultPrevented=!0}};if(w(this.options.events[t]))return this.options.events[t](f(i,e,{sender:this})),i.defaultPrevented}}function H(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}function W(t,e){return t===e||H(t,e)}function U(t){return(q(t)||document.getElementById(t)).scrollHeight.toString()}function q(t){return document.querySelector('[data-id="'.concat(t,'"]'))}var G=t=>{t instanceof HTMLElement&&(t.style.display="")},$=t=>{t instanceof HTMLElement&&(t.style.display="none")},K=(t,e)=>{e.classList.add(t)},X=(t,e)=>{e.classList.remove(t)},Y=(t,e)=>{if(e instanceof HTMLElement)return e.classList.contains(t)},Z=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=0;i<t.length;i++)if(Y(t[i],e))return!0},J=(t,e)=>{for(var i=t;i&&i!==document;){if(e.indexOf(i)>=0)return!0;i=i.parentElement}return!1},Q=t=>S(33).then((()=>t())),tt=t=>Q((()=>{t&&t.focus&&t.focus()})),et=t=>{var e=q(t);e&&tt(e)},it=(t,e)=>{var i=q(t);i instanceof HTMLElement&&i.focus({preventScroll:e})},rt=(t,e)=>{var i=q(t);i instanceof HTMLElement&&(i.value=e)},nt=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t instanceof HTMLElement&&t.closest(e);return i?Boolean(r):r&&!t.matches(e)},ot=t=>{var e=t.nodeName.toLowerCase(),i=/input|^a$|area|iframe|select|textarea|button|object/.test(e),r=t.tabIndex>-1,n="none"!==window.getComputedStyle(t).display;return(i||r)&&n&&!t.disabled},st=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ct(t,ot,e);return i},at=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ct(t,ht,e);return i},lt=(t,e)=>{var i=q(t)||document.getElementById(t);if(i){var r=st(i,!1);r instanceof HTMLElement&&setTimeout((()=>{r.focus({preventScroll:e})}),33)}},ht=t=>{var e=ot(t),i=(t.tagName||"").toLowerCase(),r="span"===i&&t.classList.contains("k-switch");return e&&i&&(/input|^a$|area|select|textarea/.test(i)||r)},ct=function t(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;if(r&&i(e))return e;for(e=e.firstElementChild;e;){var n=t(e,i,!0);if(n)return n;e=e.nextElementSibling}},pt=(t,e)=>dt(t,e,"previousElementSibling"),ut=(t,e)=>dt(t,e,"nextElementSibling"),dt=(t,e,i)=>{if(!t)return null;for(var r=[],n=t[i];n;)(!e||w(e)&&e(n))&&r.push(n),n=n[i];return r},ft=t=>t&&t.parentNode?Array.from(t.parentNode.children):[],vt=(t,e)=>{var i=q(t)||document.getElementById(t);i&&(i.indeterminate=e)},mt=(t,e,i)=>{var r=q(t)||document.getElementById(t);r&&(r.style.top=e,r.style.left=i)},gt=(t,e)=>{var i=q(t)||document.getElementById(t),r="UL"===i.tagName?i:i.getElementsByTagName("ul")[0],n=r.getElementsByTagName("li")[e],o=r.offsetParent;if(n&&o){var s=o.scrollTop,a=s+o.offsetHeight,l=n.offsetTop,h=l+n.offsetHeight;h>a?o.scrollTop+=h-a:l<s&&(o.scrollTop=l)}},yt=t=>!t||t&&_t(t)?wt().width:0,bt=t=>!t||t&&xt(t)?wt().height:0,wt=()=>{var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth,r=t.offsetHeight-e.offsetHeight;return t.parentNode.removeChild(t),{width:i,height:r}},xt=t=>kt(t)&&t.clientWidth<t.scrollWidth,_t=t=>St(t)&&t.clientHeight<t.scrollHeight,kt=t=>Ct(t,"overflow-x"),St=t=>Ct(t,"overflow-y"),Ct=(t,e)=>{var i=window.getComputedStyle(t)[e];return i.indexOf("auto")>-1||i.indexOf("scroll")>-1},Et=(t,e)=>{if(!t||!e)return!1;var i=t.getBoundingClientRect(),r=e.getBoundingClientRect();return i.top+i.height>=r.top&&i.bottom<=r.bottom&&i.left+i.width>=r.left&&i.right<=r.right},Tt=t=>m(t)?t.scrollWidth-t.clientWidth:0,At=(t,e)=>{for(var i,r=t.scrollTop,n=t.querySelectorAll(e),o=0;o<n.length;o++)if(n[o].offsetTop+n[o].clientHeight>r){i=n[o];break}return i},Mt=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t||!e||t===e)return!1;var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=r.top+i<=n.bottom&&r.bottom-i>=n.top&&r.left+i<=n.right&&r.right-i>=n.left;return o},Ot=(t,e)=>{var i=Mt(t,e);if(!t||!e||t===e||!i)return{width:0,height:0};var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=Math.max(r.left,n.left),s=Math.max(r.top,n.top),a=Math.min(r.right,n.right),l=Math.min(r.bottom,n.bottom);return{x:o,y:s,top:s,left:o,right:a,bottom:l,width:a-o,height:l-s}},Dt=(t,e)=>!(!t||!e)&&(Pt(t,e)&&Rt(t)>Rt(e)),Pt=(t,e)=>!(!m(t)||!m(e))&&t.parentNode===e.parentNode,Rt=(t,e)=>{if(!t)return[].indexOf(t);var i=Array.from(t.parentElement.children);return e&&(i=i.filter((t=>t.matches(e)))),Array.from(i).indexOf(t)},It=()=>{var t=wt();Lt("--kendo-scrollbar-width","".concat(t.width,"px")),Lt("--kendo-scrollbar-height","".concat(t.height,"px"))},Lt=(t,e)=>{var i=document.documentElement;i&&i.style.setProperty(t,e)},zt="telerik",Bt=new RegExp("-".concat(zt,"-.*$"),"ig");function Nt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$t(e),n=q(r),o=Ht(e);if(!o){var s=new t(n,i);Wt(e,s)}}function jt(t){var e=Ht(t);e&&e.destroy&&(e.destroy(),e=null),Ut(t)}function Ft(t,e){t&&t.setOptions&&t.setOptions(e)}function Vt(t,e){Ft(qt()[t],e)}function Ht(t){return qt()[t]}function Wt(t,e){qt()[t]=e}function Ut(t){delete(window.TelerikBlazor._instances||{})[t]}var qt=()=>{if(void 0===window.TelerikBlazor)throw new Error("The telerik-blazor.js script is not loaded");return window.TelerikBlazor._instances=window.TelerikBlazor._instances||{},window.TelerikBlazor._instances},Gt=(t,e)=>"".concat(t,"-").concat(zt,"-").concat(e),$t=t=>t.replace(Bt,"");function Kt(t,e,i){var r=Ht(e);if(r&&w(r[t]))return r[t](i)}var Xt=(t,e,i)=>Math.min(i,Math.max(e,t));function Yt(t,e){var i=t%e,r=t-i,n=t+e-i;return r+n<2*t?n:r}var Zt={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34,PAGEUP:33,PAGEDOWN:34},Jt={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESC:"Escape",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SPACE:"Space",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},Qt={CTRL:"CTRL",ALT:"ALT",SHIFT:"SHIFT"};class te{static equals(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift&&t.code===e.code}constructor(t){"string"==typeof t?this._initFromString(t):t instanceof KeyboardEvent&&this._initFromEvent(t)}_initFromString(t){var e=t.toUpperCase().split(/[\t-\r \+\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/);for(var i of e)switch(i){case Qt.CTRL:this.ctrl=!0;break;case Qt.ALT:this.alt=!0;break;case Qt.SHIFT:this.shift=!0;break;default:this.code=this._toNormalizedCode(i)}this.name=t}_initFromEvent(t){this.name="",t.ctrlKey&&(this.ctrl=t.ctrlKey,this.name+="".concat(Qt.CTRL," ")),t.shiftKey&&(this.shift=t.shiftKey,this.name+="".concat(Qt.SHIFT," ")),t.altKey&&(this.alt=t.altKey,this.name+="".concat(Qt.ALT," ")),this.code=t.keyCode,this.name+=t.key}_toNormalizedCode(t){return Zt[t.toUpperCase()]}}var ee="keydown";class ie{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onNavigate",(t=>{var e=new te(t),i=1===e.name.length,r=this.shortcuts.find((t=>te.equals(t,e)))||i&&this.shortcuts.find((t=>"printableKey"===t.name));r&&this.callbacks[r.name].forEach((i=>{i(e,t)||(t.preventDefault(),t.stopPropagation())}))})),this.element=t,this.callbacks={},this.shortcuts=[],this.bindEvents()}destroy(){this.unbindEvents(),this.element=this.callbacks=this.shortcuts=null}bindEvents(){this.element.addEventListener(ee,this.onNavigate)}unbindEvents(){this.element.removeEventListener(ee,this.onNavigate)}bind(t,e){var i=Array.isArray(t)?t:[t];for(var r of i){var n=new te(r);this.callbacks[n.name]=this.callbacks[n.name]||[],this.shortcuts.push(n),this.callbacks[n.name].push(e)}}}function re(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ne{constructor(t){re(this,"disableTabKeyTrap",(()=>{this.element&&this.element.removeEventListener("keydown",this.onKeyDown)})),re(this,"onKeyDown",(t=>{this.tryFindEdgeElements()?t.keyCode===Zt.TAB&&(t.shiftKey?document.activeElement===this.firstElement&&(this.lastElement.focus(),t.preventDefault()):document.activeElement===this.lastElement&&(this.firstElement.focus(),t.preventDefault())):this.element.removeEventListener("keydown",this.onKeyDown)})),this.element=t}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}tryFindEdgeElements(){return this.findEdgeElements(),this.firstElement&&this.lastElement}findEdgeElements(){var t=this.element.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]");this.firstElement=t[0],this.lastElement=t[t.length-1]}}function oe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var se=t=>{le&&le.instanceMap&&Q((()=>{var e=q(t);if(e&&!le.instanceMap[t]){var i=new le(e);le.instanceMap[t]=i,i.enableKeyTrap()}}))},ae=t=>{if(le&&le.instanceMap){var e=le.instanceMap[t];e&&e.disableTabKeyTrap()}};class le{constructor(t){oe(this,"disableTabKeyTrap",(()=>{this.firstElement&&this.firstElement.removeEventListener("keydown",this.onFirstElementKeyDown),this.lastElement&&this.lastElement.removeEventListener("keydown",this.onLastElementKeyDown)})),oe(this,"onFirstElementKeyDown",(t=>{t.keyCode===Zt.TAB&&t.shiftKey&&(t.preventDefault(),this.lastElement&&this.lastElement.focus())})),oe(this,"onLastElementKeyDown",(t=>{t.keyCode!==Zt.TAB||t.shiftKey||(t.preventDefault(),this.firstElement&&this.firstElement.focus())})),t&&(this.element=t,this.firstElement=st(t,!1),this.lastElement=(t=>{if(t.length)return t[t.length-1]})(t.querySelectorAll("button, .k-button")))}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.firstElement&&this.lastElement&&(this.firstElement.addEventListener("keydown",this.onFirstElementKeyDown),this.lastElement.addEventListener("keydown",this.onLastElementKeyDown))}}oe(le,"instanceMap",{});class he{static get webAssembly(){return Boolean(window.Blazor&&window.Blazor.platform)}static get serverSideBlazor(){return Boolean(window.Blazor&&window.Blazor.reconnect)}static get firefox(){return Boolean(/Firefox/i.test(navigator.userAgent))}}function ce(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pe="scroll",ue="scrollLeft",de="horizontal";class fe extends V{constructor(t,e){super(t,e),ce(this,"options",{horizontal:!0,vertical:!0,minScrollDelta:1,syncFromConnections:!1,connections:[]}),ce(this,"onScroll",(t=>{var e=t.currentTarget;(this.options.syncFromConnections?this.scrollableElements:this.connections).filter((t=>t!==e)).forEach((t=>{this.syncScroll(e,t,{orientation:de}),this.syncScroll(e,t,{orientation:"vertical"})}))})),this.extendOptions(e),this.connections=this.options.connections.filter(m),this.scrollableElements=this.getScrollableElements(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.forEachScrollableElement((t=>{t.addEventListener(pe,this.onScroll)}))}unbindEvents(){this.forEachScrollableElement((t=>{t.removeEventListener(pe,this.onScroll)}))}syncScroll(t,e,i){var{orientation:r=de}=i,n=r===de?ue:"scrollTop",o=n===ue?"dataScrollLeft":"dataScrollTop",s=t[n],a=t[o]||0,l=e[n],h=e[o],c=a!==s||h!==s,p=Tt(this.element)>0;if(this.options[r]&&c&&p){var u=Math.abs(a-s),d=Math.abs(l-s),f=this.options.minScrollDelta;(u>=f||d>=10*f)&&(e[o]=s,e[n]=s)}}getScrollableElements(){var t=[];return this.options.syncFromConnections&&(t=this.connections),[this.element,...t]}forEachScrollableElement(t){this.forEachElement(this.scrollableElements,t)}forEachConnection(t){this.forEachElement(this.connections,t)}forEachElement(){var t=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{m(e)&&w(t)&&t(e)}))}}var ve=t=>Z(["k-grid-content-sticky","k-grid-header-sticky","k-grid-footer-sticky"],t);function me(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ge="data-col-index",ye="data-render-row-index",be="nearest",we=Array.from,xe="right",_e="left";class ke extends V{constructor(t,e){super(t,e),me(this,"options",{navigable:!1,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,events:{removeFocus:null,blur:null,incellEditBlur:null},rowSelector:t=>"tr[data-render-row-index='".concat(t,"']"),columnSelector:t=>"[".concat(ge,"='").concat(t,"']"),cellNavigationSelector:t=>"[".concat("data-cell-navigation-id","='").concat(t,"']"),groupRowClass:"k-grouping-row",headerClass:"k-grid-header",contentClass:"k-grid-content",editRowClass:"k-grid-edit-row",filterRowClass:"k-filter-row",lockedHeaderClass:"k-grid-header-sticky"}),me(this,"onClick",(t=>{"input"===t.target.tagName.toLowerCase()&&t.stopPropagation()})),me(this,"onKeyDown",(t=>{var e=this.options.navigable&&[Zt.ARROWRIGHT,Zt.ARROWLEFT,Zt.ARROWUP,Zt.ARROWDOWN,Zt.PAGE_DOWN,Zt.PAGE_UP,Zt.HOME,Zt.END,Zt.SPACE].includes(t.keyCode),i=t.keyCode===Zt.SPACE&&Y("k-checkbox",t.target),r=e&&!i&&(t.target.matches("td")||t.target.matches("th")),n=t.keyCode===Zt.TAB&&this.options.incellEdit&&t.target.closest(".k-grid-edit-row");(r||n)&&t.preventDefault()})),me(this,"onFocusOut",(t=>{var e=t.target.closest("[".concat(ge,"]")),i=e?e.closest("tr"):null,r=i&&i.hasAttribute(ye)?parseInt(i.getAttribute(ye)):null,n=e&&e.hasAttribute(ge)?parseInt(e.getAttribute(ge)):null,o={originalEvent:t};null!==r&&null!==n&&(o.rowIndex=r,o.columnIndex=n,o.isChildFocused=e&&!t.target.hasAttribute(ge)),this.options.incellEdit&&t.target&&t.target.closest(".k-grid-edit-cell")&&(!t.relatedTarget&&document.activeElement===document.body||t.relatedTarget&&!this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-popup")||t.relatedTarget&&t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row"))&&this.triggerIncellEditBlur(o),this.options.navigable&&(!t.relatedTarget||this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-detail-row")||t.relatedTarget.closest(".k-window")||t.relatedTarget.closest(".k-grid-filter-popup")?this.triggerBlur(o):this.triggerRemoveFocus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.removeEventListener("click",this.onClick)}focusCell(t){var{rowIndex:e,columnIndex:i,isChildFocused:r,cellNavigationId:n,keyboardEventArgs:o}=t,s=this.getRow(e),a=n>=0?this.element.querySelector(this.options.cellNavigationSelector(n)):null;if(a)this.focusElement(a);else if(s){if(Y("k-grouping-row",s))a=s.querySelector("td[role='gridcell']");else if(!(a=s.querySelector(this.options.columnSelector(i)))){if(this.hasNavigableVirtualColumns())return;var l=s.querySelector("[".concat(ge,"]"));parseInt(l.attributes["".concat(ge)].value)>i&&(a=l)}if(a)if(this.hasNavigableVirtualColumns()){var h=this.hasEditRow(),c=this.isCellInFilterRow(e,i);if(r&&(h||c))this.focusEditable({rowIndex:e,columnIndex:i});else{var p=this.getKeyboardDirection(o);this.scrollIntoView(a,p),this.focusElement(a)}}else this.focusElement(a)}}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}selectElement(t){t instanceof HTMLElement&&w(t.select)&&t.select()}selectAndFocusElement(t){t!==document.activeElement&&(this.selectElement(t),this.focusElement(t))}focusEditable(t){var{rowIndex:e,columnIndex:i}=t;clearTimeout(this.selectAndFocusTimeout),setTimeout((()=>{var t=this.getCell(e,i),r=at(t,!1);if(m(r)&&r.tabIndex<0){var n=st(t,!1);r=n||t}this.scrollIntoView(t),this.options.columnVirtualization?this.selectAndFocusTimeout=setTimeout((()=>{this.selectAndFocusElement(r)}),2*this.options.virtualScrollDelay):this.selectAndFocusElement(r)}),1)}focusFirstFocusable(t){var{rowIndex:e,columnIndex:i}=t;setTimeout((()=>{this.focusCellChild(e,i,st)}),1)}focusCellChild(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st,r=this.getCell(t,e),n=r?i(r,!1):null;this.focusElement(n)}getRow(t){var e=this.element.parentElement.closest(".k-grid");return e&&e!==this.element?this.element.querySelector(this.options.rowSelector(t)):Array.from(this.element.querySelectorAll(this.options.rowSelector(t))).filter((t=>null===t.closest(".k-detail-row")))[0]}getCell(t,e){var i=this.getRow(t);if(i)return i.querySelector(this.options.columnSelector(e))}triggerRemoveFocus(){this.trigger("removeFocus")}triggerBlur(t){this.trigger("blur",t)}triggerIncellEditBlur(t){this.trigger("incellEditBlur",t)}scrollIntoView(t,e){if(this.preventScrollIntoView)this.preventScrollIntoView=!1;else{var i=t.closest(I(ge)),r=i?i.closest("tr"):null;if(t&&i&&!ve(i)&&r){var n=this.getClosestOverlappingLockedCell(i),o=this.hasSpaceToScrollIntoView(i),s=Et(i,this.getContentElement());n&&o?(s||this.scrollElementIntoView(i),this.scrollToLockedCell(n,i,e)):!this.hasLockedColumns()||s||o?n||!o?this.scrollToCell(i):this.scrollElementIntoView(t):this.scrollToCell(i)}}}scrollToCell(t){var e=this.getContentElement(),i=pt(t,(t=>!ve(t))),r=this.getTotalCellsWidth(i);r!==e.scrollLeft&&(this.preventScrollIntoView=!0,e.scrollLeft=r)}scrollToLockedCell(t,e,i){var r=this.getContentElement(),n=this.getIntersectionOffset(e,t,i);0!==n&&(this.preventScrollIntoView=!0,r.scrollLeft+=n)}scrollElementIntoView(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{horizontalAlign:be,verticalAlign:be};t&&t.scrollIntoView&&t.scrollIntoView({inline:e.horizontalAlign||be,block:e.verticalAlign||be})}scrollAndFocusFirstCell(t){this.scrollAndFocusCell({scrollLeft:0,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusLastCell(t){var e=this.getContentElement(),i=Tt(e);this.scrollAndFocusCell({scrollLeft:i,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusCell(t){var{scrollLeft:e,rowIndex:i,columnIndex:r}=t;this.getContentElement().scrollLeft=e,setTimeout((()=>{this.focusCell({rowIndex:i,columnIndex:r})}),2*this.options.virtualScrollDelay)}getHeaderElement(){return this.element.querySelector(z(this.options.headerClass))}getContentElement(){return this.element.querySelector(z(this.options.contentClass))}hasEditRow(){var t=this.getContentElement();return t&&t.querySelector(z(this.options.editRowClass))}isCellInFilterRow(t,e){var i=this.getHeaderElement(),r=i?i.querySelector(z(this.options.filterRowClass)):null;if(!k(r))return!1;if(B(ye,r)===t){var n=we(r.querySelectorAll("th[".concat(ge,"]")));return k(n[e])}return!1}hasLockedColumns(){var t=this.getHeaderElement();return t&&t.querySelector(z(this.options.lockedHeaderClass))}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}hasSpaceToScrollIntoView(t){var e=ft(t).filter(ve),i=this.getContentElement();return this.getTotalCellsWidth(e)+t.getBoundingClientRect().width<i.clientWidth}getTotalCellsWidth(t){return t.reduce(((t,e)=>t+e.getBoundingClientRect().width),0)}getClosestOverlappingLockedCell(t){if(!this.hasLockedColumns())return null;var e=pt(t),i=ut(t),r=e.concat(i).filter(ve),n=null;for(var o of r)if(Mt(t,o)){n=o;break}return n}getKeyboardDirection(t){if(!t)return null;var e=t.key;return e===Jt.ARROWRIGHT||e===Jt.END?xe:e===Jt.ARROWLEFT||e===Jt.HOME?_e:null}getIntersectionOffset(t,e,i){if(!Pt(t,e))return 0;var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=n.left<=r.left&&n.right<=r.right,s=r.left<=n.left&&r.right<=n.right,a=n.left<r.left&&n.right>r.right,l=r.left<n.left&&r.right>n.right,h=r.left===n.left&&r.right===n.right,c=Ot(t,e).width,p=r.width,u=n.width,d=0;return h?i===_e?d=-1*c:i===xe&&(d=c):o?d=-1*c:s?d=-1*(p-c+u):a?d=n.right-r.right+p:l&&(d=-1*(n.right-r.left)),d}}var Se="col-initialization-index",Ce="cell-navigation-id",Ee=t=>L(R(Se),t),Te=t=>{if(t.length)return t[t.length-1]},Ae=t=>{var{clientX:e,clientY:i}=t;if(x(e)&&x(i))return document.elementFromPoint(e,i)},Me=t=>{var e=B(R("level"),t);return e>=0?e:1},Oe=t=>(t.getAttribute(R("has-children"))||"").toLowerCase()===(!0).toString(),De=t=>Re(t,R(Se)),Pe=t=>Re(t,R("parent-col-initialization-index")),Re=(t,e)=>t?B(e,t):[].indexOf(t),Ie=(t,e)=>{for(var i=De(t),r=Le(e),n=[],o=0;o<e.length;o++){var s=e[o],a=Pe(s),l=De(s),h=r.indexOf(s);if(a===i){n.push({parentIndex:a,index:l,leafIndex:h,element:s});var c=Ie(s,e);n=n.concat(c)}}return n},Le=t=>t.filter((e=>t.every((t=>!Ne(e,t))))),ze=(t,e)=>{var i=B(R(Ce),t),r=B(R(Ce),e);return i>r?1:i<r?-1:0},Be=(t,e)=>{var i=De(t),r=De(e);return i>r?1:i<r?-1:0},Ne=(t,e)=>De(t)===Pe(e),je=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()},Fe=t=>{var{clientTop:e,clientLeft:i}=(t=>t.ownerDocument.documentElement)(t),{pageYOffset:r,pageXOffset:n}=(t=>t.ownerDocument.defaultView)(t),{top:o,left:s}=t.getBoundingClientRect();return{top:o+r-e,left:s+n-i}},Ve=t=>".".concat(t),He=function(t,e){return function(i){return e(t(i))}},We=function(t,e,i){return t.addEventListener&&t.addEventListener(e,i)},Ue=function(t,e,i){return t&&t.removeEventListener&&t.removeEventListener(e,i)},qe=function(){},Ge=function(t){return t.preventDefault()},$e=/touch/;function Ke(t){return t.type.match($e)?{pageX:t.changedTouches[0].pageX,pageY:t.changedTouches[0].pageY,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,type:t.type,originalEvent:t,isTouch:!0}:{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,type:t.type,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,originalEvent:t}}var Xe=function(t){var e=this,i=t.press;void 0===i&&(i=qe);var r=t.drag;void 0===r&&(r=qe);var n=t.release;void 0===n&&(n=qe);var o=t.mouseOnly;void 0===o&&(o=!1),this._pressHandler=He(Ke,i),this._dragHandler=He(Ke,r),this._releaseHandler=He(Ke,n),this._ignoreMouse=!1,this._mouseOnly=o,this._touchstart=function(t){1===t.touches.length&&e._pressHandler(t)},this._touchmove=function(t){1===t.touches.length&&e._dragHandler(t)},this._touchend=function(t){0===t.touches.length&&1===t.changedTouches.length&&(e._releaseHandler(t),e._ignoreMouse=!0,setTimeout(e._restoreMouse,2e3))},this._restoreMouse=function(){e._ignoreMouse=!1},this._mousedown=function(t){var i=t.which;i&&i>1||e._ignoreMouse||(We(document,"mousemove",e._mousemove),We(document,"mouseup",e._mouseup),e._pressHandler(t))},this._mousemove=function(t){e._dragHandler(t)},this._mouseup=function(t){Ue(document,"mousemove",e._mousemove),Ue(document,"mouseup",e._mouseup),e._releaseHandler(t)},this._pointerdown=function(t){t.isPrimary&&0===t.button&&(We(document,"pointermove",e._pointermove),We(document,"pointerup",e._pointerup),We(document,"pointercancel",e._pointerup),We(document,"contextmenu",Ge),e._pressHandler(t))},this._pointermove=function(t){t.isPrimary&&e._dragHandler(t)},this._pointerup=function(t){t.isPrimary&&(Ue(document,"pointermove",e._pointermove),Ue(document,"pointerup",e._pointerup),Ue(document,"pointercancel",e._pointerup),Ue(document,"contextmenu",Ge),e._releaseHandler(t))}};Xe.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},Xe.prototype.bindTo=function(t){t!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=t,this._bindToCurrent())},Xe.prototype._bindToCurrent=function(){var t=this._element;this._usePointers()?We(t,"pointerdown",this._pointerdown):(We(t,"mousedown",this._mousedown),this._mouseOnly||(We(t,"touchstart",this._touchstart),We(t,"touchmove",this._touchmove),We(t,"touchend",this._touchend)))},Xe.prototype._unbindFromCurrent=function(){var t=this._element;if(this._usePointers())return Ue(t,"pointerdown",this._pointerdown),Ue(document,"pointermove",this._pointermove),Ue(document,"pointerup",this._pointerup),Ue(document,"contextmenu",Ge),void Ue(document,"pointercancel",this._pointerup);Ue(t,"mousedown",this._mousedown),this._mouseOnly||(Ue(t,"touchstart",this._touchstart),Ue(t,"touchmove",this._touchmove),Ue(t,"touchend",this._touchend))},Xe.prototype._usePointers=function(){return!this._mouseOnly&&Xe.supportPointerEvent()},Xe.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Xe.default=Xe;function Ye(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Ze extends V{constructor(t,e){super(t,e),Ye(this,"options",{id:b(),group:null,itemSelector:"",allowsDragFrom:()=>!0,allowsDropFrom:()=>!0,events:{dragEnter:null,dragLeave:null,dragOver:null,drop:null}}),this.extendOptions(e),Wt(this.options.id,this),Ze.InstancesByGroup[this.options.group]||(Ze.InstancesByGroup[this.options.group]=new Set),Ze.InstancesByGroup[this.options.group].add(this)}destroy(){Ze.InstancesByGroup[this.options.group]&&Ze.InstancesByGroup[this.options.group].delete(this),Ut(this.options.id),super.destroy()}triggerDragEnter(t){this.trigger("dragEnter",t)}triggerDragLeave(t){this.trigger("dragLeave",t)}triggerDragOver(t){this.trigger("dragOver",t)}triggerDrop(t){this.trigger("drop",t)}allowsDragFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDragFrom(t,e)}allowsDropFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDropFrom(t,e)}}function Je(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Ye(Ze,"InstancesByGroup",{}),Ye(Ze,"forEachInstanceInGroup",((t,e)=>{var i=Ze.InstancesByGroup[t]||new Set;for(var r of i)r&&r instanceof Ze&&e(r)}));var Qe=(t,e)=>!!(e&&t&&t.closest(e));class ti extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),Je(this,"options",{events:{dragStart:null,drag:null,dragEnd:null,dropTargetEnter:null},offset:{x:0,y:0},filter:null,ignore:"",hint:null,group:null,ignoreElementUnderCursor:()=>!1}),Je(this,"onPress",(t=>{this.dragStarted=!1,Qe(t.originalEvent.target,this.options.ignore)?this.originalCurrentTarget=null:Qe(t.originalEvent.target,this.options.filter)?(je(t),this.originalCurrentTarget=t.originalEvent.target.closest(this.options.filter),this.dragStarted=!0,this.triggerDragStart(t)):this.originalCurrentTarget=null})),Je(this,"onDrag",(t=>{var e=f(t,{originalCurrentTarget:this.originalCurrentTarget});if(this.originalCurrentTarget&&(je(e),this.dragStarted&&(this.processDropTargetIntersection(e),!this.triggerDrag(f(e,{dropTarget:this.getLastDropTarget()}))))){!this.hint&&this.options.hint&&(this.createHint(this.originalCurrentTarget),this.appendHint());var i=this.getOffset();this.dragHint({top:e.pageY+i.y,left:e.pageX+i.x}),this.triggerDropTargetDragOver(e)}})),Je(this,"onRelease",(t=>{this.originalCurrentTarget&&(je(t),this.processDropTargetDrop(t),this.destroyHint(),this.triggerDragEnd(t))})),this.extendOptions(e),this.initDraggableEvents(t)}destroy(){this.destroyDraggableEvents(),this.destroyHint(),this.lastDropTargetId=null,this.originalCurrentTarget=null,super.destroy()}initDraggableEvents(){this.destroyDraggableEvents(),this.draggableEvents=new Xe({press:this.onPress,drag:this.onDrag,release:this.onRelease}),this.draggableEvents.bindTo(this.element)}destroyDraggableEvents(){this.draggableEvents&&this.draggableEvents.destroy&&this.draggableEvents.destroy()}triggerDragStart(t){this.trigger("dragStart",t)}triggerDrag(t){return this.trigger("drag",t)}triggerDragEnd(t){this.trigger("dragEnd",t)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,f(e,{originalCurrentTarget:this.originalCurrentTarget,elementUnderCursor:this.getElementUnderCursor(e)}))}triggerDropTargetDragEnter(t,e){t&&(t.triggerDragEnter(f(e,{draggable:this})),this.triggerDropTargetEnter(f(e,{dropTarget:t})))}triggerDropTargetEnter(t){this.trigger("dropTargetEnter",t)}triggerDropTargetDragLeave(t,e){t&&(t.triggerDragLeave(f(e,{draggable:this})),this.triggerDropTargetLeave(f(e,{dropTarget:t})))}triggerDropTargetLeave(t){this.trigger("dropTargetLeave",f(t,{dropTarget:this.dropTarget}))}triggerDropTargetDragOver(t){if(this.lastDropTargetId){var e=Ht(this.lastDropTargetId);if(!e)return;e.triggerDragOver(f(t,{draggable:this})),this.triggerDropTargetOver(f(t,{dropTarget:e}))}}triggerDropTargetOver(t){this.trigger("dropTargetOver",t)}triggerDropTargetDrop(t,e){var i=f(e,{elementUnderCursor:this.getElementUnderCursor(e)});t&&(t.allowsDropFrom(this,i)&&t.triggerDrop(f(i,{draggable:this})),this.triggerDrop(f(i,{dropTarget:t})))}triggerDrop(t){this.trigger("drop",t)}processDropTargetIntersection(t){var e=this.getElementUnderCursor(t),i=!1;this.forEachDropTarget((r=>{var n=r.element.contains(e),o=Ht(this.lastDropTargetId);i=i||n,n&&this.lastDropTargetId!==r.options.id&&(this.triggerDropTargetDragLeave(o,t),this.lastDropTargetId=r.options.id,this.triggerDropTargetDragEnter(r,t))})),i||(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=null)}processDropTargetDrop(t){this.forEachDropTarget((e=>{var i=this.getElementUnderCursor(t);e.element.contains(i)&&(this.lastDropTargetId=null,this.triggerDropTargetDrop(e,t))}))}getOffset(){return w(this.options.offset)?this.options.offset(this.hint):this.options.offset}createHint(t){this.hint=w(this.options.hint)?this.options.hint(t):this.options.hint}destroyHint(){this.hint&&(this.removeHint(),this.hint=null)}showHint(){G(this.hint)}hideHint(){$(this.hint)}appendHint(){document.body.appendChild(this.hint)}removeHint(){document.body.removeChild(this.hint)}dragHint(t){var{top:e,left:i}=t;this.setHintState({top:e,left:i})}setHintState(t){var{top:e,left:i}=t;this.hint&&this.setHintPosition({top:e,left:i})}setHintPosition(t){var{top:e=0,left:i=0}=t,{width:r,height:n}=this.hint.getBoundingClientRect(),o=e-n/2,s=i-r/2;this.hint.style.top="".concat(o,"px"),this.hint.style.left="".concat(s,"px")}getElementUnderCursor(t){var e=Ae(t);if(this.hint&&this.hint.contains(e)){if(this.hideHint(),e=Ae(t),this.options.ignoreElementUnderCursor(e)){var i=e;$(i);var r=Ae(t);r&&(e=r),G(i)}this.showHint()}return e}forEachDropTarget(t){Ze.forEachInstanceInGroup(this.options.group,t)}getLastDropTarget(){return Ht(this.lastDropTargetId)}}class ei{constructor(t){var e;!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{appendTo:document.body,template:(e=M({position:"absolute","z-index":1e4}),'<div class="k-grouping-dropclue" style="'.concat(e,'" />'))}),this.extendOptions(t),this.initElement(),this.append()}destroy(){this.remove()}extendOptions(t){this.options=f(this.options,t)}initElement(){this.element=j(this.options.template)}append(){this.hide(),this.options.appendTo.appendChild(this.element)}remove(){this.options.appendTo.removeChild(this.element),this.element=null}show(){G(this.element)}hide(){$(this.element)}setState(t){var{top:e,left:i,height:r,visible:n}=t;this.setPosition({top:e,left:i}),this.setVisibility(n),this.setSize({height:r})}setSize(t){var{height:e}=t;this.element.style.height="".concat(e,"px")}getSize(){var t=this.element.style.display,e=this.element.style.visibility;this.element.style.visibility="hidden",this.element.style.display="block";var i=this.element.offsetWidth,r=this.element.offsetHeight;return this.element.style.display=t,this.element.style.visibility=e,{width:i,height:r}}setVisibility(t){t?this.show():this.hide()}setPosition(t){var{top:e=0,left:i=0}=t;this.element.style.top="".concat(e,"px"),this.element.style.left="".concat(i,"px")}getOffsetState(t,e){var i=Fe(t),{offsetWidth:r,offsetHeight:n}=t;return{top:i.top,left:i.left+(e?r:0),height:n}}}function ii(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ri={forbidden:"k-i-cancel",before:"k-i-insert-middle",after:"k-i-insert-middle",over:"k-i-plus"},ni="forbidden",oi="before",si="after",ai="over";class li extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),ii(this,"options",{componentSelector:"",group:"",filter:"",dropClueTargetSelector:"",dropClueEmptySelector:"",itemSelector:"",dropClueTemplate:'<div class="k-drop-hint k-drop-hint-h" style="position: absolute; z-index: 10000;">\n                               <div class="k-drop-hint-start"></div>\n                               <div class="k-drop-hint-line"></div>\n                           </div>',hint:null,allowDropOver:!0,offsetDropClue:!1,events:{itemDragStart:null,itemDrop:null}}),ii(this,"onDragStart",(t=>{var e=this.getItem(t.originalCurrentTarget);e.closest(this.options.componentSelector)===this.element?(this.dragging=!0,this.trigger("itemDragStart",f(t,{sourceItem:e})),this.createDropClue()):this.dragging=!1})),ii(this,"onDrag",(t=>{if(this.dragging){this.lastDropPosition=this.getDropPosition(t),this.updateDragClueState(this.draggable.hint);var e=this.getElementUnderCursor(t),i=e&&e.closest(this.options.dropClueTargetSelector);this.updateDropClueState(i)}})),ii(this,"onDragEnd",(t=>{if(this.dragging&&(this.destroyDropClue(),this.lastDropPosition!==ni)){var e=this.getItem(t.originalCurrentTarget),i=this.getElementUnderCursor(t),r=this.getItem(i);e&&e!==r&&this.trigger("itemDrop",f(t,{sourceItem:e,destinationItem:r,destinationElement:i,dropPosition:this.lastDropPosition}))}})),this.extendOptions(e),this.createDraggable()}destroy(){this.draggable&&this.draggable.destroy(),super.destroy()}createDraggable(){if(this.element){var t=this.options.hint;this.draggable=new ti(this.element,y(this.options,{offset:t=>{var e=t.getBoundingClientRect();return{x:e.width/2+10,y:e.height/2+10}},hint:e=>{var i=t(e);return this.updateDragClueState(i),i},events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}}getItem(t){return t.closest(this.options.itemSelector)}createDropClue(){this.dropClue||(this.dropClue=new ei({template:this.options.dropClueTemplate}))}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}getDropPosition(t){var e=this.getElementUnderCursor(t),i=e&&e.closest(this.options.dropClueTargetSelector);if(this.options.dropClueEmptySelector&&e&&e.closest(this.options.dropClueEmptySelector))return ai;if(!i||i===t.originalCurrentTarget.closest(this.options.dropClueTargetSelector))return ni;var r=i.getBoundingClientRect(),n=this.options.allowDropOver?4:2,o=r.height/n,s=t.clientY,a=r.top;return s<a+o?oi:s>=a+r.height-o?si:ai}updateDragClueState(t){if(t){var e=t.querySelector(".k-icon");X(this.dropStatusClass,e),this.dropStatusClass=ri[this.lastDropPosition],K(this.dropStatusClass,e)}}updateDropClueState(t){if(!this.shouldHideDropClue()&&t){this.dropClue.show();var e=Fe(t),i=e.top,r=e.left;this.lastDropPosition===si&&(i+=t.offsetHeight),this.options.offsetDropClue||(r+=this.dropClue.element.offsetWidth/2),this.dropClue.setPosition({top:i,left:r})}else this.dropClue.hide()}shouldHideDropClue(){return this.lastDropPosition===ai||this.lastDropPosition===ni}getElementUnderCursor(t){var e;return this.dropClue&&this.dropClue.hide(),e=document.elementFromPoint(t.clientX,t.clientY),this.dropClue&&this.dropClue.show(),e}}function hi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ci="k-grid-header-wrap",pi="k-grid-footer-wrap",ui="k-grid-content",di="mousedown";class fi extends V{constructor(t,e){super(t,e),hi(this,"options",{dotNetInstance:null,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},componentSelector:"",jsinterop:{removeFocus:"",blur:"",incellEditBlur:"",rowDragStart:"",rowDrop:""}}),hi(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),hi(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),hi(this,"onNavigationBlur",(t=>{this.blur(t)})),hi(this,"onIncellEditBlur",(t=>{this.incellEditBlur(t)})),hi(this,"createHint",(t=>{var e=this.getDragHintText(t);return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),hi(this,"getDragHintText",(t=>{if(Y("k-state-selected",t.closest("tr"))){var e=this.element.querySelectorAll("tr.k-master-row.k-state-selected").length;if(e>1)return e+" "+this.options.draggedItemsHint}return t.closest("td").getAttribute("data-drag-clue-text")})),hi(this,"onItemDragStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDragStart,{sourceIndex:this.getItemIndex(t.sourceItem)})})),hi(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDrop,{destinationIndex:this.getItemIndex(t.destinationItem),dotNetInstance:this.getDestinationComponent(t.destinationElement),dropPosition:t.dropPosition})})),hi(this,"setSearchBoxValue",(t=>{var e=this.element.querySelector(".k-grid-search input");e&&(e.value=t)})),this.extendOptions(e),this.content=this.getChildElement(ui),this.header=this.getChildElement(ci),this.adjustScrollbarPadding(),this.bindEvents(),this.createNavigationService(),this.setSearchBoxValue(e.searchString)}getChildElement(t){return this.element.getElementsByClassName(t)[0]}destroy(){this.rowDraggable&&this.rowDraggable.destroy(),this.unbindEvents(),this.destroyNavigationService(),this.content=null,this.header=null,super.destroy()}adjustScrollbarPadding(){It()}bindEvents(){this.createContentScrollSync(),this.content.addEventListener(di,this.onMouseDown)}unbindEvents(){this.destroyContentScrollSync(),this.content.removeEventListener(di,this.onMouseDown)}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync();var t=this.element.querySelector(Ve(pi));this.contentScrollSync=new fe(this.content,{horizontal:!0,vertical:!1,syncFromConnections:this.hasNavigableVirtualColumns(),connections:[this.header,t]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null)}createNavigationService(){this.navigationService=new ke(this.element,{navigable:this.options.navigable,incellEdit:this.options.incellEdit,columnVirtualization:this.options.columnVirtualization,virtualScrollDelay:this.options.virtualScrollDelay,events:{removeFocus:this.onNavigationRemoveFocus,blur:this.onNavigationBlur,incellEditBlur:this.onIncellEditBlur}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}focusCell(t){this.navigationService.focusCell(t)}focusEditable(t){this.navigationService.focusEditable(t)}focusFirstFocusable(t){this.navigationService.focusFirstFocusable(t)}scrollAndFocusFirstCell(t){this.navigationService.scrollAndFocusFirstCell(t)}scrollAndFocusLastCell(t){this.navigationService.scrollAndFocusLastCell(t)}scrollContent(t){this.content.scrollLeft=t}removeFocus(){this.invokeMethodAsync(this.options.jsinterop.removeFocus)}blur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.blur,t)}incellEditBlur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.incellEditBlur,t)}invokeDefferedMethodAsync(t,e){he.webAssembly?setTimeout((()=>{e.deferred=!0,document.body.contains(e.originalEvent.target)&&this.invokeMethodAsync(t,e)}),1):this.invokeMethodAsync(t,e)}createRowDraggable(){this.element&&(this.rowDraggable=new li(this.element,y(this.options.rowDraggableOptions,{componentSelector:".k-grid",group:".k-grid-table",filter:".k-i-reorder",dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",itemSelector:"tr.k-master-row",offsetDropClue:!1,hint:this.createHint,events:{itemDragStart:this.onItemDragStart,itemDrop:this.onItemDrop}})))}getItemIndex(t){return t?parseInt(t.getAttribute("data-render-row-index")):-1}getDestinationComponent(t){var e=this.element,i=t.closest(this.options.componentSelector);if(i&&e!==i){var r=Ht(i.getAttribute("data-id"));return r&&r.dotNetInstance}return this.dotNetInstance}}class vi extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"_loaderIntervals",[])}startLoaderShowTimer(){this._loaderIntervals.push(setTimeout((()=>this.showLoader()),600))}showLoader(){G(this.element)}hideLoader(){clearTimeout(this._loaderIntervals.shift()),this._loaderIntervals.length||$(this.element)}}function mi(t,e){Nt(vi,t,e)}function gi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function yi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(i),!0).forEach((function(e){bi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function bi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var wi="none",xi="k-animation-container-shown",_i="reveal-vertical",ki="reveal-horizontal",Si={"slide-down":"slide-up","push-down":"push-up"},Ci={appear:"appear",exit:"exit"},Ei=()=>S(20),Ti=(t,e)=>"k-".concat(t,"-").concat(e),Ai=t=>Object.keys(Ci).reduce(((e,i)=>yi(yi({},e),{},{[i]:{base:Ti(t,i),active:Ti(t,"".concat(i,"-active"))}})),{});class Mi extends V{constructor(t,e){super(t,e),bi(this,"options",{dotNetInstance:null,animationName:"slide-down",duration:300,showDelay:10,hideDelay:10,jsinterop:{showStart:null,hideStart:null}}),this.extendOptions(e),this.element.parentElement.style.display=wi,this.animationClasses=Ai(this.options.animationName)}setOptions(t){super.setOptions(t),this.animationClasses=Ai(this.options.animationName)}destroy(){this.cancelCallback(),this.parentComponent=null,super.destroy()}showAsync(){return this.cancelCallback(),this.onAppearStart().then((()=>this.onAppearing())).then((()=>this.onTransitionEnd(this.onAppearEnd.bind(this))))}hideAsync(){return this.cancelCallback(),this.onExitStart().then(this.onExiting()).then((()=>this.onTransitionEnd(this.onExitEnd.bind(this))))}show(){this.cancelCallback(),this.removeClasses(Ci.exit),this.removeClasses(Ci.appear),this.element.style.display=null,this.element.parentElement.style.display=null,this.triggerOpen()}hide(){this.cancelCallback(),this.removeClasses(Ci.exit),this.removeClasses(Ci.appear),this.element.style.display=wi,this.element.parentElement.style.display=wi,this.triggerClose()}onAppearStart(){return this.updateAppearStartState().then((()=>{var t=this.getParentPosition(),e=this.options.animationName;return this.maxDimensions(),t&&t.flipped&&Si[e]?(this.element.style.display=wi,this.element.parentElement.style.display=wi,Ei().then((()=>(this.removeClasses(Ci.appear),this.animationClasses=Ai(Si[e]),this.updateAppearStartState())))):Promise.resolve()}))}updateAppearStartState(){return this.removeClasses(Ci.exit),this.addClasses(this.animationClasses[Ci.appear].base),this.addClasses(this.options.class),Ei().then((()=>{this.element&&(this.element.style.display=null,this.element.parentElement.style.display=null)}))}onAppearing(){return this.triggerOpen(),Ei().then((()=>{this.addClasses(this.animationClasses[Ci.appear].active)}))}onAppearEnd(){var t=Ci.appear;Ei().then((()=>{this.removeClasses(t),this.removeMaxDimensions(),this.isPopup()&&K(xi,this.element.parentElement)}))}onExitStart(){return Ei().then((()=>{var t=this.getParentPosition(),e=this.options.animationName;t&&t.flipped&&Si[e]&&(this.animationClasses=Ai(Si[e])),this.removeClasses(Ci.appear),this.addClasses(this.animationClasses[Ci.exit].base)}))}onExiting(){return this.triggerClose(),this.maxDimensions(),Ei().then((()=>{this.addClasses(this.animationClasses[Ci.exit].active),this.isPopup()&&X(xi,this.element.parentElement)}))}onExitEnd(){this.removeClasses(Ci.exit),this.removeMaxDimensions(),this.element.style.display=wi,this.element.parentElement.style.display=wi}onTransitionEnd(t){var e=this.options,i=e.duration+e.showDelay;return this.timer=C(i),this.timer.promise.then(t)}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}getParentComponent(){if(this.parentComponent)return this.parentComponent;if(!this.element)return null;var t=this.element.closest(".k-animation-container");if(!t)return null;var e=t.getAttribute("data-id");return this.parentComponent=Ht(e),this.parentComponent}callParentMethod(t,e){var i=this.getParentComponent();if(i&&w(i[t]))return i[t](e)}getParentPosition(){return this.callParentMethod("getElementPosition")}triggerOpen(){this.invokeMethodAsync(this.options.jsinterop.showStart),this.callParentMethod("onOpen")}triggerClose(){this.invokeMethodAsync(this.options.jsinterop.hideStart),this.callParentMethod("onClose")}removeClasses(t){var e=this.animationClasses[t];this.element&&(this.element.classList.remove(e.base),this.element.classList.remove(e.active))}addClasses(t){var e=this;t&&t.split(/\s+/).forEach((t=>{e.element&&e.element.classList.add(t)}))}maxDimensions(){var t=this.options,e=this.element,i="".concat(e.scrollHeight,"px"),r="".concat(e.scrollWidth,"px");return t.animationName.includes(_i)?(e.style.maxHeight=i,"max-height: ".concat(i)):t.animationName.includes(ki)?(e.style.maxWidth=r,"max-width: ".concat(r)):""}removeMaxDimensions(){var t=this.options.animationName.includes(_i)||this.options.animationName.includes(ki);this.element&&t&&(this.element.style.maxHeight=null,this.element.style.maxWidth=null)}isPopup(){return this.element&&this.element.classList.contains("k-popup")&&this.element.parentElement}}function Oi(t,e){Nt(Mi,t,e)}function Di(t,e){var i=Ht(t);return i?(i.setOptions(e),i.showAsync().catch(T)):null}function Pi(t,e){var i=Ht(t);return i?(i.setOptions(e),i.hideAsync().catch(T)):null}function Ri(t){var e=Ht(t);e&&e.hide()}function Ii(t){var e=Ht(t);e&&e.show()}const Li={en:{name:"en",identity:{version:{_number:"$Revision: 12418 $",_cldrVersion:"29"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"€","symbol-alt-narrow":"€"},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},day:{wide:"day",short:"day",narrow:"day"},weekday:{wide:"day of the week"},dayperiod:{wide:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function zi(t){return"string"==typeof t}var Bi=/\{(\d+)}?\}/g,Ni=function(t){var e=t.name,i=t.message;if(!e||!i)throw new Error("{ name: string, message: string } object is required!");this.name=e,this.message=i};Ni.prototype.formatMessage=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=ji(t),r=this.message.replace(Bi,(function(t,e){return i[parseInt(e,10)]}));return this.name+": "+r},Ni.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Error(this.formatMessage(t))};var ji=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},Fi=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new Ni({name:i,message:t[i]}),e}),{})},Vi=Fi({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."});var Hi=Li;function Wi(t){return zi(t)?Ui(t):t}function Ui(t){if(Hi[t])return Hi[t];if(Hi.supplemental.likelySubtags){var e=t.split("-"),i=e[0],r=e.slice(1),n=function(t,e){for(var i=Hi.supplemental.likelySubtags,r=0;r<e.length;r++){var n=i[t+"-"+e[r]];if(n)return n}if(i[t])return i[t]}(i,r),o=n?function(t,e){var i=t.split("-"),r=i[0],n=i[1],o=i[2];return Hi[t]||-1!==e.indexOf(o)&&Hi[r+"-"+o]||-1!==e.indexOf(n)&&Hi[r+"-"+n]||Hi[r]}(n,r):null;if(o)return o}throw Vi.NoLocale.error(t)}var qi="decimal",Gi="currency",$i="accounting",Ki="percent",Xi="scientific",Yi="$",Zi="n",Ji=".",Qi="",tr="en",er="Formats-numberSystem-latn",ir=/([#,0.]+)/g,rr=/¤/g;function nr(t){return ir.lastIndex=0,t.replace(rr,Yi).replace(ir,Zi).split(";")}function or(t){return ir.lastIndex=0,ir.exec(t.split(";")[0])[0].split(Ji)[0].split(",").slice(1).map((function(t){return t.length})).reverse()}function sr(t,e){for(var i in e)i.startsWith("unitPattern")&&(t[i]=e[i].replace("{0}",Zi).replace("{1}",Yi))}function ar(t,e){var i=Hi[t],r=i.numbers=i.numbers||{};for(var n in r.symbols=r.symbols||{},e)if("symbols-numberSystem-latn"===n)Object.assign(r.symbols,e[n]);else if(n.includes(er)){var o=n.substr(0,n.indexOf(er)),s=e[n].standard;r[o]={patterns:nr(s)},o===Gi?(r[o].groupSize=or((e[qi+er]||e[n]).standard),sr(r[o],e[n]),r.accounting={patterns:nr(e[n].accounting),groupSize:r[o].groupSize}):r[o].groupSize=or(s)}else"currencies"===n&&(r.currencies=e[n])}var lr={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},hr=/y+/g,cr=[["dateFormats","short"]],pr={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function ur(t){for(var e=[],i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++){var n=t[i[r]];e.push(n)}return e}function dr(t,e){var i={};for(var r in t){var n=i[r]={};for(var o in t[r]){var s=t[r][o];n[o]=e?s:ur(s)}}return i}function fr(t,e){var i=Hi[t].calendar;i.days=dr(e.days),i.months=dr(e.months),i.quarters=dr(e.quarters),i.dayPeriods=dr(e.dayPeriods,!0),i.eras=function(t){var e={},i=e.format={},r={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(var n in t)i[r[n]]=t[n];return e}(e.eras)}function vr(t,e){var i=Hi[t].calendar,r={};for(var n in e){var o=n.split("-"),s=o[0],a=o[1];void 0===a&&(a="wide");var l=r[s]||{},h=e[n].displayName;h&&(l[a]=h,r[s]=l)}i.dateFields=r}function mr(t,e){for(var i=[],r=0;r<t.length;r++){for(var n=t[r],o=e,s=0;s<n.length;s++)o=o[n[s]];i.push(o)}return i.join(" ")}function gr(t,e){var i=Hi[t].calendar,r=i.patterns={};for(var n in r.d=mr(cr,e).replace(hr,"y"),pr)r[n]=mr(pr[n],e);for(var o in lr)r[o]=lr[o];var s=e.dateTimeFormats;i.dateTimeFormats={full:s.full,long:s.long,medium:s.medium,short:s.short,availableFormats:s.availableFormats},i.timeFormats=e.timeFormats,i.dateFormats=e.dateFormats}function yr(t,e){var i=Hi[t].calendar=Hi[t].calendar||{};for(var r in e)"timeZoneNames"===r?(i.gmtFormat=e[r].gmtFormat,i.gmtZeroFormat=e[r].gmtZeroFormat):"calendars"===r&&e[r].gregorian?(gr(t,e[r].gregorian),fr(t,e[r].gregorian)):"fields"===r&&vr(t,e.fields)}function br(t){if(t.territory)return t.territory;var e,i=t.name,r=t.identity;return e=r&&r.territory?r.territory:function(t,e){var i=Hi.supplemental.likelySubtags,r=t.split("-");if(i){var n=i[t]||i[r[0]];n&&(r=n.split("-"))}if(e)for(var o=r.length-1;o>=1;o--){var s=r[o];s!==e.variant&&s!==e.script||r.splice(o,1)}var a=r.length;if(a>1)return r[a-1].toUpperCase()}(i,r),t.territory=e,e}function wr(t,e){for(var i in e)"numbers"===i?ar(t,e[i]):"dates"===i&&yr(t,e[i])}function xr(){for(var t=arguments,e=arguments.length,i=0;i<e;i++){var r=t[i];if(r.main){var n=Object.keys(r.main)[0],o=r.main[n],s=Hi[n]=Hi[n]||{};s.name=s.name||n,s.identity=s.identity||o.identity,br(s),wr(n,o)}else r.supplemental&&(r.supplemental.weekData?Hi.supplemental.weekData={firstDay:r.supplemental.weekData.firstDay,weekendStart:r.supplemental.weekData.weekendStart,weekendEnd:r.supplemental.weekData.weekendEnd}:Object.assign(Hi.supplemental,r.supplemental))}}function _r(t){var e=t.name,i=Hi[e]=Hi[e]||{};if(t.likelySubtags){var r=Hi.supplemental=Hi.supplemental||{};r.likelySubtags=Object.assign(r.likelySubtags||{},t.likelySubtags)}var n=i.numbers;Object.assign(i,t),n&&t.numbers&&(i.numbers=Object.assign({},n,t.numbers))}function kr(t,e){void 0===e&&(e=tr);var i=Ui(e).calendar.dateFields;if(!i)throw Vi.NoDateFieldNames.error();var r=i[t.type]||{};return r[t.nameType]||r.wide}function Sr(t,e){var i=e.type,r=e.nameType,n=e.standAlone,o=e.lower,s=Wi(t),a=n?"stand-alone":"format",l=(o?"lower-":Qi)+r,h=s.calendar[i][a],c=h[l];return!c&&o&&(c=h[l]=function(t){var e=Array.isArray(t)?function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toLowerCase());return e}(t):function(t){var e={};for(var i in t)e[i]=t[i].toLowerCase();return e}(t);return e}(h[r])),c}function Cr(t){var e=t.split("-"),i=parseInt(e[0],10),r=parseInt(e[1],10)-1,n=parseInt(e[2],10);return new Date(i,r,n)}var Er=Vi.NoCurrency,Tr=Vi.NoCurrencyDisplay,Ar=Vi.NoSupplementalCurrency,Mr=Vi.NoCurrencyRegion,Or=Vi.NoValidCurrency,Dr="symbol",Pr={"001":"USD",150:"EUR"};function Rr(t,e,i){var r=Wi(t).numbers.currencies;if(r){var n=r[e];if(n)return n;if(i)throw Tr.error()}else if(i)throw Er.error()}function Ir(t,e){return e.length-t.length}function Lr(t,e,i){void 0===i&&(i=!0);var r=Rr(t,e,i);if(r){if(!r.displays){var n=[e];for(var o in r)n.push(r[o]);n.sort(Ir),r.displays=n}return r.displays}}function zr(t,e){var i=e.value,r=e.currency,n=e.currencyDisplay;if(void 0===n&&(n=Dr),"code"===n)return r;var o=Rr(t,r,!0);return n===Dr?o["symbol-alt-narrow"]||o.symbol:void 0===typeof i||1!==i?o["displayName-count-other"]:o["displayName-count-one"]}function Br(t){var e=2,i=2,r=((Hi.supplemental.currencyData||{}).fractions||{})[t];return r&&r._digits&&(i=e=parseInt(r._digits,10)),{minimumFractionDigits:e,maximumFractionDigits:i}}function Nr(t,e){if(void 0===e&&(e=!0),Pr[t])return Pr[t];var i=Hi.supplemental.currencyData;if(i){var r=i.region[t];if(r){var n=function(t){for(var e,i,r,n,o=0;o<t.length;o++){var s=t[o],a=Object.keys(s)[0],l=s[a];if("XXX"!==a&&"false"!==l._tender&&l._from)if(l._to){if(!r){var h=Cr(l._from),c=Cr(l._to);(!i||i.to<c||i.from<h)&&(e=a,i={from:h,to:c})}}else{var p=Cr(l._from);(!n||n<p)&&(r=a,n=p)}}return r||e}(r);return n}if(e)throw Mr.error(t)}else if(e)throw Ar.error()}function jr(t,e){var i=Wi(t),r=i.numbers;if(!r.localeCurrency){var n=Nr(br(i),e);if(!n&&e)throw Or.error(i.name);r.localeCurrency=n}return r.localeCurrency}var Fr=["sun","mon","tue","wed","thu","fri","sat"],Vr=Vi.NoWeekData,Hr=Vi.NoFirstDay;function Wr(t){var e=Wi(t);if(!isNaN(e.firstDay))return e.firstDay;var i=Hi.supplemental.weekData;if(!i)throw Vr.error();var r=i.firstDay[br(e)]||i.firstDay["001"];if(!r)throw Hr.error();return e.firstDay=Fr.indexOf(r),e.firstDay}var Ur=Vi.NoWeekData;function qr(t){var e=Wi(t);if(e.weekendRange)return e.weekendRange;var i=Hi.supplemental.weekData;if(!i)throw Ur.error();var r=br(e),n=i.weekendStart[r]||i.weekendStart["001"],o=i.weekendEnd[r]||i.weekendEnd["001"];return e.weekendRange={start:Fr.indexOf(n),end:Fr.indexOf(o)},e.weekendRange}function Gr(t){return Wi(t).numbers.symbols}function $r(t,e){return void 0===e&&(e={}),e.currency||(e.currency=jr(t,!0)),zr(t,e)}function Kr(t,e,i,r,n){var o=n.numbers.symbols,s=t.indexOf(o.decimal),a=r.groupSize.slice(),l=a.shift(),h=-1!==s?s:i+1,c=t.substring(e,h),p=t,u=c.length;if(u>=l){for(var d=u,f=[];d>-1;){var v=c.substring(d-l,d);v&&f.push(v),d-=l;var m=a.shift();if(0===(l=void 0!==m?m:l)){(v=c.substring(0,d))&&f.push(v);break}}c=f.reverse().join(o.group),p=t.substring(0,e)+c+t.substring(h)}return p}function Xr(t){return t===Gi||t===$i}function Yr(t,e,i){void 0===e&&(e=2),void 0===i&&(i=!1);var r=e-String(t).length,n=t;if(r>0){var o=new Array(r+1).join("0");n=i?t+o:o+t}return n}function Zr(t,e){var i=t,r=e||0;return i=i.toString().split("e"),i=(i=Math.round(Number(i[0]+"e"+(i[1]?Number(i[1])+r:r)))).toString().split("e"),(i=Number(i[0]+"e"+(i[1]?Number(i[1])-r:-r))).toFixed(Math.min(r,20))}var Jr=/0+$/;function Qr(t,e,i){var r=i.numbers.symbols,n=e.style,o=Xr(n);if(n===Xi)return(void 0!==e.minimumFractionDigits?t.toExponential(e.minimumFractionDigits):t.toExponential()).replace(Ji,r.decimal);var s,a=t;o&&(e.value=a,s=$r(i,e)),n===Ki&&(a*=100,s=r.percentSign);var l=function(t){var e,i=t.minimumFractionDigits,r=t.maximumFractionDigits,n=t.style,o=Xr(n);return o&&(e=Br(t.currency)),void 0===i&&(i=o?e.minimumFractionDigits:0),void 0===r&&(r=n===Ki?Math.max(i,0):o?Math.max(i,e.maximumFractionDigits):Math.max(i,3)),{minimumFractionDigits:i,maximumFractionDigits:r}}(e),h=l.minimumFractionDigits,c=(a=Zr(a,l.maximumFractionDigits))<0,p=a.split(Ji),u=p[0],d=Yr(p[1]?p[1].replace(Jr,Qi):Qi,h,!0);c&&(u=u.substring(1)),e.minimumIntegerDigits&&(u=Yr(u,e.minimumIntegerDigits));var f,v=!1!==e.useGrouping?Kr(u,0,u.length,e,i):u;if(d&&(v+=r.decimal+d),o&&"name"===e.currencyDisplay)f=function(t,e){var i=t.numbers.currency,r=1!==e?i["unitPattern-count-other"]:i["unitPattern-count-one"];return e<0&&(r=r.replace(Zi,"-n")),r}(i,t);else{var m=e.patterns;f=c?m[1]||"-"+m[0]:m[0]}if(f===Zi&&!c)return v;var g=function(t,e,i){for(var r=Qi,n=0,o=e.length;n<o;n++){var s=e.charAt(n);r+=s===Zi?t:s===Yi||"%"===s?i:s}return r}(v,f,s);return g}var tn="__??__",en="#",rn="0",nn=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,on=/(\.(?:[0-9]*[1-9])?)0+$/g,sn=/\.$/,an=/\,/g;function ln(t){var e,i,r,n=t.number,o=t.format,s=o.indexOf(Ji);if(-1!==s){var a=o.lastIndexOf(rn)-s,l=o.lastIndexOf(en)-s,h=a>-1,c=l>-1,p=n.toString().split("e"),u=(p=(p=p[1]?Zr(n,Math.abs(p[1])):p[0]).split(Ji)[1]||Qi).length,d=-1;h||c?h&&a>l?u=a:l>a&&(c&&u>l?u=l:h&&u<a&&(u=a),d=h?a:0):(t.format=o.substring(0,s)+o.substring(s+1),s=-1,u=0),u>-1&&(n=Zr(n,u),d>-1&&(e=n,r=0===(i=d)?on:new RegExp("(\\.[0-9]{"+i+"}[1-9]*)0+$","g"),n=e.replace(r,"$1").replace(sn,Qi)))}else n=Zr(n);t.negative&&-1*n>=0&&(t.negative=!1),t.number=n,t.decimalIndex=s}function hn(t){var e=t.number,i=t.format;if(i=i.split(";"),t.negative&&i[1])i=i[1],t.hasNegativeFormat=!0;else if(0===e){var r=i[2];i=r||i[0],r&&function(t){return-1===t.indexOf(en)&&-1===t.indexOf(rn)}(r)&&(t.constant=r)}else i=i[0];t.format=i}function cn(t,e,i){return-1===t&&-1!==e?e:-1!==t&&-1===e?t:i?Math.min(t,e):Math.max(t,e)}function pn(t,e){var i=t.number;return-1!==t.start&&(i=function(t,e){var i=t.start,r=t.end,n=t.negative,o=t.format,s=t.decimalIndex,a=t.lastZeroIndex,l=t.hasNegativeFormat,h=t.hasGroup,c=t.number,p=c.toString().split(Ji),u=o.length,d=p[0],f=p[1]||Qi,v=d.length,m=Qi;c=o.substring(0,i),n&&!l&&(c+="-");for(var g=i;g<u;g++){var y=o.charAt(g);if(-1===s){if(r-g<v){c+=d;break}}else if(-1!==a&&a<g&&(m=Qi),s-g<=v&&s-g>-1&&(c+=d,g=s),s===g){c+=(f?e.numbers.symbols.decimal:Qi)+f,g+=r-s+1;continue}y===rn?(c+=y,m=y):y===en&&(c+=m)}return h&&(c=Kr(c,i+(n&&!l?1:0),Math.max(r,v+i),e.numbers.decimal,e)),r>=i&&(c+=o.substring(r+1)),c}(t,e),i=function(t,e,i){var r=t;if(e===Gi||e===Ki){r=Qi;for(var n=0,o=t.length;n<o;n++){var s=t.charAt(n);r+=s===Yi||"%"===s?i:s}}return r}(i,t.style,t.symbol),i=function(t,e){var i=t;if(e)for(var r=e.length,n=0;n<r;n++)i=i.replace(tn,e[n]);return i}(i,t.literals)),i}function un(t,e,i){var r={negative:t<0,number:Math.abs(t),format:e};return hn(r),r.constant?r.constant:(function(t){var e=t.format;if(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1){var i=t.literals=[];t.format=e.replace(nn,(function(t){var e=t.charAt(0).replace("\\",Qi),r=t.slice(1).replace(e,Qi);return i.push(r),tn}))}}(r),function(t,e){var i=t.format;-1!==i.indexOf("%")&&(t.style=Ki,t.symbol=e.numbers.symbols.percentSign,t.number*=100),-1!==i.indexOf(Yi)&&(t.style=Gi,t.symbol=$r(e))}(r,i),function(t){t.hasGroup=t.format.indexOf(",")>-1,t.hasGroup&&(t.format=t.format.replace(an,Qi))}(r),ln(r),function(t){var e=t.format,i=e.indexOf(en),r=e.indexOf(rn),n=cn(i,r,!0),o=cn(i=e.lastIndexOf(en),r=e.lastIndexOf(rn));n===e.length&&(o=n),t.start=n,t.end=o,t.lastZeroIndex=r}(r),pn(r,i))}var dn=/^(n|c|p|e|a)(\d*)$/i;function fn(t){var e;return e=zi(t)?function(t){var e=dn.exec(t);if(e){var i={style:qi},r=e[1].toLowerCase();return"c"===r?i.style=Gi:"a"===r?i.style=$i:"p"===r?i.style=Ki:"e"===r&&(i.style=Xi),e[2]&&(i.minimumFractionDigits=i.maximumFractionDigits=parseInt(e[2],10)),i}}(t):t,e}function vn(t,e,i){if(void 0===e&&(e=Zi),void 0===i&&(i=tr),null==t)return Qi;if(!isFinite(t))return String(t);var r,n=Ui(i),o=fn(e);if(o){var s=o.style||qi;r=Qr(t,Object.assign({},n.numbers[s],o),n)}else r=un(t,e,n);return r}function mn(t){return"number"==typeof t}var gn=/[eE][\-+]?[0-9]+/,yn=/\u00A0/g;function bn(t,e){if(e.length>1){var i=(e[1]||Qi).replace(Yi,Qi).split(Zi);if(t.indexOf(i[0])>-1&&t.indexOf(i[1])>-1)return t.replace(i[0],Qi).replace(i[1],Qi)}}function wn(t,e,i){if(void 0===e&&(e=tr),void 0===i&&(i={}),!t&&0!==t)return null;if(mn(t))return t;var r,n=Ui(e),o=n.numbers.symbols,s=t.toString();if(gn.test(s))return s=parseFloat(s.replace(o.decimal,Ji)),isNaN(s)?null:s;var a=s.indexOf("-");if(a>0)return null;var l=a>-1,h=function(t,e,i){var r,n=fn(i)||{},o=Xr(n.style),s=t,a=n.currency||jr(e,o);if(a){var l=Lr(e,a,o);if(l)for(var h=0;h<l.length;h++){var c=l[h];if(s.includes(c)){s=s.replace(c,Qi),o=!0;break}}if(o){var p=bn(s,e.numbers.currency.patterns)||bn(s,e.numbers.accounting.patterns);p&&(r=!0,s=p)}}return{number:s,negative:r}}(s,n,i),c=h.negative;return s=h.number,l=void 0!==c?c:l,(i.style===Ki||s.indexOf(o.percentSign)>-1)&&(s=s.replace(o.percentSign,Qi),r=!0),s=s.replace("-",Qi).replace(yn," ").split(o.group.replace(yn," ")).join(Qi).replace(o.decimal,Ji),s=parseFloat(s),isNaN(s)?s=null:l&&(s*=-1),s&&r&&(s/=100),s}var xn=/\{(\d+)}/g;function _n(t){var e=arguments;return t.replace(xn,(function(t,i){return e[parseInt(i,10)+1]}))}var kn=[2,1,5,3,4],Sn={};Sn[(-2).toString()]=8,Sn[(-1).toString()]=6,Sn[2..toString()]=6,Sn[1..toString()]=3;var Cn={numeric:1,"2-digit":2,short:3,long:4,narrow:5},En=/[hHmsSzZoOvVxX]/;var Tn=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(t){return t.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],An={e:"c",E:"c",M:"L",Q:"q"},Mn={},On={};function Dn(t){return Mn[t]||(Mn[t]=new RegExp(t+"+")),Mn[t]}function Pn(t){for(var e=[],i=t.charAt(0),r=i,n=1;n<t.length;n++){var o=t.charAt(n);o===r?i+=o:(e.push(i),i=r=o)}return e.push(i),e}function Rn(t,e){var i,r,n=t.length,o=-Number.MAX_VALUE;for(var s in e){for(var a=[],l=s.replace("v","z"),h=0,c=0;c<n;c++){var p=t[c],u=(Dn(p[0]).exec(l)||[])[0];if(u){if(l=l.replace(u,Qi),u.length!==p.length){var d=Math.max(Math.min(kn[u.length]-kn[p.length],2),-2);h-=Sn[d]}}else h-=120;if(a.push(u),h<o)break}l.length&&(h-=20*Pn(l).length),h>o&&(o=h,i=a,r=e[s])}r=r.replace("v","z");for(var f=0;f<n;f++){var v=i[f];if(v&&v!==t[f]){var m=i[f][0];r=r.replace(Dn(m),t[f]),An[m]&&(r=r.replace(Dn(An[m]),t[f]))}}return r}function In(t,e){var i=e.calendar.dateTimeFormats.availableFormats;if(i[t])return i[t];if(On[e.name]&&On[e.name][t])return On[e.name][t];var r,n=t.search(En);if(n>0){var o=t.substr(0,n),s=t.substr(n);r=_n(e.calendar.dateTimeFormats.short,i[s]||Rn(Pn(s),i),i[o]||Rn(Pn(o),i))}else r=Rn(Pn(t),i);return function(t,e,i){On[i]||(On[i]={}),On[i][t]=e}(t,r,e.name),r}function Ln(t,e){var i,r=e.calendar;if(zi(t))i=r.patterns[t]?r.patterns[t]:t;else if(t){if(t.pattern)return t.pattern;var n=t.skeleton;n||(t.datetime?i=_n(r.dateTimeFormats[t.datetime],r.timeFormats[t.datetime],r.dateFormats[t.datetime]):t.date?i=r.dateFormats[t.date]:t.time?i=r.timeFormats[t.time]:n=function(t){for(var e=[],i=0;i<Tn.length;i++){var r=Tn[i],n=t[r.key];if(n){var o=r.specifier||r.getSpecifier(t);e.push(o.repeat(Cn[n]))}}return e.join(Qi)}(t)),n&&(i=In(n,e))}return i||(i=r.patterns.d),i}function zn(t){var e;return t<=3?e="abbreviated":4===t?e="wide":5===t?e="narrow":6===t&&(e="short"),e}function Bn(t,e,i,r,n){return Sr(t,{type:e,nameType:zn(i),standAlone:r,lower:n})}function Nn(t){return"function"==typeof t}function jn(t){return Boolean(t)&&Nn(t.getTime)&&Nn(t.getMonth)}var Fn="month",Vn="hour",Hn="zone",Wn="weekday",Un="quarter",qn={G:"era",y:"year",q:Un,Q:Un,M:Fn,L:Fn,d:"day",E:Wn,c:Wn,e:Wn,h:Vn,H:Vn,k:Vn,K:Vn,m:"minute",s:"second",a:"dayperiod",x:Hn,X:Hn,z:Hn,Z:Hn},Gn=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function $n(t,e,i,r){return e<=2?Yr(t+1,e):Bn(i,"months",e,r)[t]}function Kn(t,e,i,r){var n=Math.floor(t.getMonth()/3);return e<3?n+1:Bn(i,"quarters",e,r)[n]}function Xn(t,e,i){var r=i.shortHours,n=i.optionalMinutes,o=i.separator,s=i.localizedName,a=i.zZeroOffset,l=t.getTimezoneOffset()/60;if(0===l&&a)return"Z";var h=l<=0?"+":"-",c=Math.abs(l).toString().split("."),p=c[1]||0,u=h+(r?c[0]:Yr(c[0],2));(!p&&n||(u+=(o?":":Qi)+Yr(p,2)),s)&&(u=_n(0===l?e.calendar.gmtZeroFormat:e.calendar.gmtFormat,u));return u}function Yn(t,e,i,r){var n;return n=e<3?function(t,e,i){var r=Wr(i);return(t<r?7-r+t:t-r)+1}(t.getDay(),0,i):Bn(i,"days",e,r)[t.getDay()],n}var Zn={};function Jn(t,e,i){if(void 0===i&&(i=tr),!jn(t))return null==t?Qi:t;var r=Ui(i);return Ln(e,r).replace(Gn,(function(e){var i=e.length;return e.includes("'")||e.includes('"')?e.slice(1,i-1):Zn[e[0]](t,i,r)}))}function Qn(t,e,i){var r=t.getTimezoneOffset(),n=new Date(t.getTime()+6e4*(e-i)),o=n.getTimezoneOffset();return new Date(n.getTime()+6e4*(o-r))}Zn.d=function(t,e){return Yr(t.getDate(),e)},Zn.E=function(t,e,i){return Bn(i,"days",e)[t.getDay()]},Zn.M=function(t,e,i){return $n(t.getMonth(),e,i,!1)},Zn.L=function(t,e,i){return $n(t.getMonth(),e,i,!0)},Zn.y=function(t,e){var i=t.getFullYear();return 2===e&&(i%=100),Yr(i,e)},Zn.h=function(t,e){return Yr(t.getHours()%12||12,e)},Zn.H=function(t,e){return Yr(t.getHours(),e)},Zn.k=function(t,e){return Yr(t.getHours()||24,e)},Zn.K=function(t,e){return Yr(t.getHours()%12,e)},Zn.m=function(t,e){return Yr(t.getMinutes(),e)},Zn.s=function(t,e){return Yr(t.getSeconds(),e)},Zn.S=function(t,e){return 0!==t.getMilliseconds()?String(t.getMilliseconds()/1e3).split(".")[1].substr(0,e):Yr(Qi,e)},Zn.a=function(t,e,i){return Bn(i,"dayPeriods",e)[t.getHours()<12?"am":"pm"]},Zn.z=function(t,e,i){return Xn(t,i,{shortHours:e<4,optionalMinutes:e<4,separator:!0,localizedName:!0})},Zn.Z=function(t,e,i){return Xn(t,i,{separator:e>3,localizedName:4===e,zZeroOffset:5===e})},Zn.x=function(t,e,i){return Xn(t,i,{optionalMinutes:1===e,separator:3===e||5===e})},Zn.X=function(t,e,i){return Xn(t,i,{optionalMinutes:1===e,separator:3===e||5===e,zZeroOffset:!0})},Zn.G=function(t,e,i){var r=t.getFullYear()>=0?1:0;return Bn(i,"eras",e)[r]},Zn.e=Yn,Zn.c=function(t,e,i){return Yn(t,e,i,!0)},Zn.q=function(t,e,i){return Kn(t,e,i,!0)},Zn.Q=Kn;var to=/([+|\-]\d{1,2})(:?)(\d{2})?/,eo=/^\/Date\((.*?)\)\/$/,io=/[+-]\d*/,ro={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},no=/\d+/,oo=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],so=["G","g","F","Y","y","M","m","D","d","y","T","t"];function ao(t,e,i){return!(t>=e&&t<=i)}function lo(t,e){for(var i=e.format,r=e.idx,n=0;i[r]===t;)n++,r++;return n>0&&(r-=1),e.idx=r,n}function ho(t,e){var i=t?ro[t]||new RegExp("^\\d{1,"+t+"}"):no,r=e.value.substr(e.valueIdx,t).match(i);return r?(r=r[0],e.valueIdx+=r.length,parseInt(r,10)):null}function co(t,e,i){for(var r,n,o,s=0,a=t.length,l=0,h=0;s<a;s++)n=(r=t[s]).length,o=e.value.substr(e.valueIdx,n),i&&(o=o.toLowerCase()),o===r&&n>l&&(l=n,h=s);return l?(e.valueIdx+=l,h+1):null}function po(t){var e=!1;return t.value.charAt(t.valueIdx)===t.format[t.idx]&&(t.valueIdx++,e=!0),e}function uo(t,e,i){var r=i.shortHours,n=i.noSeparator,o=i.optionalMinutes,s=i.localizedName,a=i.zLiteral;if(t.UTC=!0,a&&"Z"===t.value.charAt(t.valueIdx))return t.valueIdx++,!1;if(s&&!co(function(t){var e=t.gmtFormat,i=t.gmtZeroFormat;if(!e)throw Vi.NoGMTInfo.error();return[e.replace("{0}",Qi).toLowerCase(),i.replace("{0}",Qi).toLowerCase()]}(e.calendar),t,!0))return!0;var l=to.exec(t.value.substr(t.valueIdx,6));if(!l)return!s;var h=l[1],c=l[3],p=parseInt(h,10),u=l[2],d=parseInt(c,10);return!!(isNaN(p)||!r&&3!==h.length||!o&&isNaN(d)||n&&u)||(isNaN(d)&&(d=null),!!(ao(p,-12,13)||d&&ao(d,0,59))||(t.valueIdx+=l[0].length,t.hoursOffset=p,void(t.minutesOffset=d)))}function fo(t,e,i){var r=lo(t,e),n=Bn(i,"months",r,"L"===t,!0),o=r<3?ho(2,e):co(n,e,!0);if(null===o||ao(o,1,12))return!0;e.month=o-1}function vo(t,e,i){var r=lo(t,e),n=Bn(i,"days",r,"c"===t,!0),o=r<3?ho(1,e):co(n,e,!0);if(!o&&0!==o||ao(o,1,7))return!0}var mo={};function go(t,e,i){for(var r=Ln(e,i).split(Qi),n={format:r,idx:0,value:t,valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},o=r.length,s=!1;n.idx<o;n.idx++){var a=r[n.idx];if(s)"'"===a&&(s=!1),po(n);else if(mo[a]){if(mo[a](n,i))return null}else if("'"===a)s=!0,po(n);else if(!po(n))return null}return n.valueIdx<t.length?null:function(t){var e,i=t.year,r=t.month,n=t.day,o=t.hours,s=t.minutes,a=t.seconds,l=t.milliseconds,h=t.pmHour,c=t.UTC,p=t.hoursOffset,u=t.minutesOffset,d=null!==o||null!==s||a||null,f=new Date;return null===i&&null===r&&null===n&&d?(i=f.getFullYear(),r=f.getMonth(),n=f.getDate()):(null===i&&(i=f.getFullYear()),null===n&&(n=1)),h&&o<12&&(o+=12),c?(p&&(o+=-p),u&&(s+=-u*(p<0?-1:1)),e=new Date(Date.UTC(i,r,n,o,s,a,l))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(e=new Date(i,r,n,o,s,a,l),o),i<100&&e.setFullYear(i),e.getDate()!==n&&void 0===c?null:e}(n)||null}function yo(t){if(t&&0===t.indexOf("/D")){var e=eo.exec(t);if(e){e=e[1];var i=io.exec(e.substring(1));return e=new Date(parseInt(e,10)),i&&(i=function(t){var e="-"===t.substr(0,1)?-1:1,i=t.substring(1);return e*(60*parseInt(i.substr(0,2),10)+parseInt(i.substring(2),10))}(i[0]),e=Qn(e,e.getTimezoneOffset(),0),e=Qn(e,0,-1*i)),e}}}function bo(t,e,i){if(void 0===i&&(i=tr),!t)return null;if(jn(t))return t;var r=String(t).trim(),n=yo(r);if(n)return n;for(var o=Ui(i),s=e||function(t){for(var e=[],i=t.patterns,r=so.length,n=0;n<r;n++)e.push(i[so[n]]);return e.concat(oo)}(o.calendar),a=(s=Array.isArray(s)?s:[s]).length,l=0;l<a;l++)if(n=go(r,s[l],o))return n;return n}mo.d=function(t){lo("d",t);var e=ho(2,t);if(null===e||ao(e,1,31))return!0;null===t.day&&(t.day=e)},mo.E=function(t,e){if(null===co(Bn(e,"days",lo("E",t),!1,!0),t,!0))return!0},mo.M=function(t,e){return fo("M",t,e)},mo.L=function(t,e){return fo("L",t,e)},mo.y=function(t){var e=lo("y",t),i=ho(1===e?void 0:e,t);if(null===i)return!0;if(2===e){var r=(new Date).getFullYear();(i=r-r%100+i)>2029&&(i-=100)}t.year=i},mo.h=function(t){lo("h",t);var e=ho(2,t);if(12===e&&(e=0),null===e||ao(e,0,11))return!0;t.hours=e},mo.K=function(t){lo("K",t);var e=ho(2,t);if(null===e||ao(e,0,11))return!0;t.hours=e},mo.a=function(t,e){var i=Bn(e,"dayPeriods",lo("a",t),!1,!0),r=co([i.pm],t,!0);if(!r&&!co([i.am],t,!0))return!0;t.pmHour=r},mo.H=function(t){lo("H",t);var e=ho(2,t);if(null===e||ao(e,0,23))return!0;t.hours=e},mo.k=function(t){lo("k",t);var e=ho(2,t);if(null===e||ao(e,1,24))return!0;t.hours=24===e?0:e},mo.m=function(t){lo("m",t);var e=ho(2,t);if(null===e||ao(e,0,59))return!0;t.minutes=e},mo.s=function(t){lo("s",t);var e=ho(2,t);if(null===e||ao(e,0,59))return!0;t.seconds=e},mo.S=function(t){var e=lo("S",t),i=t.value.substr(t.valueIdx,e),r=null;if(isNaN(parseInt(i,10))||(r=Zr(r=parseFloat("0."+i,10),3),r*=1e3,t.valueIdx+=e),null===r||ao(r,0,999))return!0;t.milliseconds=r},mo.z=function(t,e){var i=lo("z",t)<4,r=uo(t,e,{shortHours:i,optionalMinutes:i,localizedName:!0});if(r)return r},mo.Z=function(t,e){var i=lo("Z",t),r=uo(t,e,{noSeparator:i<4,zLiteral:5===i,localizedName:4===i});if(r)return r},mo.x=function(t,e){var i=lo("x",t),r=uo(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i});if(r)return r},mo.X=function(t,e){var i=lo("X",t),r=uo(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i,zLiteral:!0});if(r)return r},mo.G=function(t,e){var i=Bn(e,"eras",lo("G",t),!1,!0);if(null===co([i[0],i[1]],t,!0))return!0},mo.e=function(t,e){return vo("e",t,e)},mo.c=function(t,e){return vo("c",t,e)};var wo={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},xo="literal";function _o(t,e){var i=t[t.length-1];i&&i.type===xo?i.pattern+=e:t.push({type:xo,pattern:e})}function ko(t){return"h"===t||"K"===t}function So(t,e){void 0===e&&(e=tr);for(var i=Ln(t,Ui(e)),r=[],n=Gn.lastIndex=0,o=Gn.exec(i);o;){var s=o[0];if(n<o.index&&_o(r,i.substring(n,o.index)),s.startsWith('"')||s.startsWith("'"))_o(r,s);else{var a=s[0],l=qn[a],h={type:l,pattern:s};"hour"===l&&(h.hour12=ko(s));var c=wo[l];if(c){var p=mn(c.minLength)?c.minLength:c.minLength[a],u=s.length;u>=p&&(h.names={type:c.type,nameType:zn(u),standAlone:c.standAlone===a})}r.push(h)}n=Gn.lastIndex,o=Gn.exec(i)}return n<i.length&&_o(r,i.substring(n)),r}var Co=/\{(\d+)(:[^\}]+)?\}/g;function Eo(t,e,i){if(e){if(jn(t))return Jn(t,e,i);if(mn(t))return vn(t,e,i)}return null!=t?t:Qi}function To(t,e,i){return t.replace(Co,(function(t,r,n){return Eo(e[parseInt(r,10)],n?n.substring(1):Qi,i)}))}class Ao{static setLocale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_r(y({},Ui("en"),t)),this.localeId=t.name}static format(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return To(t,i,this.localeId)}static toString(t,e,i){var r=t;return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(t)&&(r=new Date(t)),Eo(r,e,this.localeId||i)}static parseDate(t,e,i){return bo(t,e,this.localeId||i)}}var Mo=/\$\{([^}]*)\}/g,Oo=/\\\}/g,Do=/__CURLY__/g,Po=/\\#/g,Ro=/__SHARP__/g;class Io{static htmlEncode(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static render(t,e){var i,r,n="";for(i=0,r=e.length;i<r;i++)n+=t(e[i]);return n}static compile(t){var e,i,r="var $kendoOutput, $kendoHtmlEncode = htmlEncode;",n=Io.options.paramName,o=Io.options.useWithBlock;if("function"==typeof t)return t;for(r+=o?"with("+n+"){":"",r+="$kendoOutput=",e=t.replace(Oo,"__CURLY__").replace(Mo,"#=$kendoHtmlEncode($1)#").replace(Do,"}").replace(Po,"__SHARP__").split("#"),i=0;i<e.length;i++)r+=Io.compilePart(e[i],i%2==0);r+=o?";}":";",r=(r+="return $kendoOutput;").replace(Ro,"#");try{var s=new Function(n,"htmlEncode",r);return function(t){return s(t,Io.htmlEncode)}}catch(e){throw new Error("Invalid template:'"+t+"' Generated code:'"+r+"'")}}static compilePart(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),r=t.substring(1);return"="===i?"+("+r+")+":":"===i?"+$kendoHtmlEncode("+r+")+":";"+t+";$kendoOutput+="}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Io,"options",{useWithBlock:!0,paramName:"dataItem"});class Lo{static compile(t){return Io.compile(t)}}var zo="arc",Bo="#000",No="bottom",jo="center",Fo="circle",Vo="cross",Ho="date",Wo="12px sans-serif",Uo=10,qo=/\{\d+:?/,Go="height",$o="inside",Ko="left",Xo=Number.MAX_VALUE,Yo=-Number.MAX_VALUE,Zo="none",Jo="object",Qo="outside",ts="right",es="roundedRect",is="string",rs="top",ns="value",ss="#fff",as="width",ls="x",hs="y";function cs(t){return Array.isArray(t)}function ps(t,e){for(var i=cs(e)?e:[e],r=0;r<i.length;r++){var n=i[r];-1===t.className.indexOf(n)&&(t.className+=" "+n)}}var us=/\s+/g;function ds(t){return void 0!==t}function fs(t){var e=.5;t.options.stroke&&ds(t.options.stroke.width)&&t.options.stroke.width%2==0&&(e=0);for(var i=0;i<t.segments.length;i++)t.segments[i].anchor().round(0).translate(e,e);return t}function vs(t,e){return-t.x*e.y+t.y*e.x<0}function ms(t){return"number"==typeof t&&!isNaN(t)}function gs(t){return typeof t===is}function ys(t){return ms(t)||gs(t)&&isFinite(t)}function bs(t){return"function"==typeof t}var ws="object";function xs(t,e){for(var i in e){var r=e[i],n=typeof r,o=void 0;if((o=n===ws&&null!==r?r.constructor:null)&&o!==Array)if(r instanceof Date)t[i]=new Date(r.getTime());else if(bs(r.clone))t[i]=r.clone();else{var s=t[i];t[i]=typeof s===ws&&s||{},xs(t[i],r)}else"undefined"!==n&&(t[i]=r)}return t}function _s(t){for(var e=arguments,i=arguments.length,r=1;r<i;r++)xs(t,e[r]);return t}function ks(t){return"object"==typeof t}function Ss(t){return ms(t)?t+"px":t}var Cs=/width|height|top|left|bottom|right/i;function Es(t){return Cs.test(t)}function Ts(t,e){var i=gs(e)?[e]:e;if(cs(i)){for(var r={},n=window.getComputedStyle(t),o=0;o<i.length;o++){var s=i[o];r[s]=Es(s)?parseFloat(n[s]):n[s]}return r}if(ks(e))for(var a in e)t.style[a]=Ss(e[a])}function As(t,e){void 0===e&&(e=0);var i={top:0,right:0,bottom:0,left:0};return"number"==typeof t?i.top=i.right=i.bottom=i.left=t:(i.top=t.top||e,i.right=t.right||e,i.bottom=t.bottom||e,i.left=t.left||e),i}var Ms={compile:function(t){return t}},Os=function(){};Os.register=function(t){Ms=t},Os.compile=function(t){return Ms.compile(t)};const Ds=Os;function Ps(t){var e;return void 0===t&&(t={}),t.template?t.template=e=Ds.compile(t.template):bs(t.content)&&(e=t.content),e}var Rs=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,Is={};function Ls(t){if(Is[t])return Is[t];var e=[];return t.replace(Rs,(function(t,i,r,n){e.push(ds(i)?i:r||n)})),Is[t]=function(t){for(var i=t,r=0;r<e.length&&i;r++)i=i[e[r]];return i},Is[t]}function zs(t,e){for(var i=t.length,r=[],n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r}function Bs(t,e){if(t.className)for(var i=e.split(" "),r=0;r<i.length;r++)if(-1!==t.className.indexOf(i[r]))return!0}Is[void 0]=function(t){return t};var Ns=function(){this._map={}};Ns.prototype.get=function(t){return this._map[this._key(t)]},Ns.prototype.set=function(t,e){this._map[this._key(t)]=e},Ns.prototype._key=function(t){return t instanceof Date?t.getTime():t};const js=Ns;function Fs(t,e){if(e)return-1!==e.indexOf(t)}function Vs(t,e){var i,r=(i=e)?Math.pow(10,i):1;return Math.round(t*r)/r}function Hs(t,e,i){return Vs(t+(e-t)*i,3)}var Ws="trigger",Us=function(t,e){this.observer=t,this.handlerMap=_s({},this.handlerMap,e)};Us.prototype.trigger=function(t,e){var i,r=this.observer,n=this.handlerMap;return n[t]?i=this.callObserver(n[t],e):r.trigger&&(i=this.callObserver(Ws,t,e)),i},Us.prototype.callObserver=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return this.observer[t].apply(this.observer,e)},Us.prototype.requiresHandlers=function(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(var e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0};const qs=Us;function Gs(t,e){for(var i=t.length,r=[],n=0;n<i;n++){var o=e(t[n]);ds(o)&&r.push(o)}return r}var $s={};const Ks={get browser(){return"undefined"==typeof window||$s?$s:$s=function(t){var e,i={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in i)if(i.hasOwnProperty(r)){var n=t.match(i[r]);if(n){(e={})[r]=!0,e[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||n[2],10);break}}return e}(window.navigator.userAgent)}};var Xs=Ks.browser||{};function Ys(t){var e=0;return t.wheelDelta?(e=-t.wheelDelta/120,Xs.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)}const Zs=function(){};function Js(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}function Qs(t,e){return t.push.apply(t,e),t}var ta={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function ea(t){for(var e=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";t>0;)t<e[0]?e.shift():(i+=ta[e[0]],t-=e[0]);return i}function ia(){var t,e,i=new Promise((function(r,n){t=function(t){return i._state="resolved",r(t),i},e=function(t){return i._state="rejected",n(t),i}}));return i._state="pending",i.resolve=t,i.reject=e,i.state=function(){return i._state},i}var ra=1;function na(){return"kdef"+ra++}var oa=Math.PI/180,sa=Number.MAX_VALUE,aa=-Number.MAX_VALUE;function la(t){return t/oa}var ha=String.fromCharCode;var ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function pa(t){for(var e="",i=0,r=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);if(55296<=r&&r<=56319){var n=r,o=t.charCodeAt(++i);isNaN(o)||(r=1024*(n-55296)+(o-56320)+65536)}r<128?e+=ha(r):r<2048?(e+=ha(192|r>>>6),e+=ha(128|63&r)):r<65536?(e+=ha(224|r>>>12),e+=ha(128|r>>>6&63),e+=ha(128|63&r)):r<1114111&&(e+=ha(240|r>>>18),e+=ha(128|r>>>12&63),e+=ha(128|r>>>6&63),e+=ha(128|63&r))}return e}(t);i<r.length;){var n=r.charCodeAt(i++),o=r.charCodeAt(i++),s=r.charCodeAt(i++),a=n>>2,l=(3&n)<<4|o>>4,h=(15&o)<<2|s>>6,c=63&s;isNaN(o)?h=c=64:isNaN(s)&&(c=64),e=e+ca.charAt(a)+ca.charAt(l)+ca.charAt(h)+ca.charAt(c)}return e}function ua(t){return ds((t.x||{}).location)?{x:t.x.location,y:t.y.location}:{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}}function da(t){return void 0===t&&(t={}),t.touch?t.touch.initialTouch:t.target}function fa(t){return""===t||null===t||"none"===t||"transparent"===t||!ds(t)}function va(t){if(t)return t[t.length-1]}function ma(t,e,i){return Math.max(Math.min(t,i),e)}function ga(t,e){if(t.length<2)return t.slice();return function t(i){if(i.length<=1)return i;var r=Math.floor(i.length/2),n=i.slice(0,r),o=i.slice(r);return function(t,i){for(var r=[],n=0,o=0,s=0;n<t.length&&o<i.length;)e(t[n],i[o])<=0?r[s++]=t[n++]:r[s++]=i[o++];return n<t.length&&r.push.apply(r,t.slice(n)),o<i.length&&r.push.apply(r,i.slice(o)),r}(n=t(n),o=t(o))}(t)}const ya=Date.now||function(){return(new Date).getTime()};function ba(t){return Promise.all(t)}function wa(t){return t*oa}function xa(t,e){return ds(t)?t:e}function _a(t,e){for(var i in e)for(var r=i.trim().split(" "),n=0;n<r.length;n++)t.addEventListener(r[n],e[i],!1)}function ka(t){var e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:e.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function Sa(t,e){for(var i={},r=window.getComputedStyle(t)||{},n=Array.isArray(e)?e:[e],o=0;o<n.length;o++){var s=n[o];i[s]=r[s]}return i}function Ca(t){return isNaN(t)?t:t+"px"}function Ea(t,e){if(!e){var i=Sa(t,["width","height"]);return{width:parseInt(i.width,10),height:parseInt(i.height,10)}}var r=e.width,n=e.height;ds(r)&&(t.style.width=Ca(r)),ds(n)&&(t.style.height=Ca(n))}function Ta(t,e){for(var i in void 0===e&&(e={}),e)for(var r=i.trim().split(" "),n=0;n<r.length;n++)t.removeEventListener(r[n],e[i],!1)}function Aa(t){var e=Sa(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,r=e.paddingTop;return{top:parseFloat(r),left:parseFloat(i)}}var Ma=function(t){function e(e,i,r,n,o,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),t.call(this),this.a=e,this.b=i,this.c=r,this.d=n,this.e=o,this.f=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.multiplyCopy=function(t){return new e(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},e.prototype.invert=function(){var t=this,i=t.a,r=t.b,n=t.c,o=t.d,s=t.e,a=t.f,l=i*o-r*n;return 0===l?null:new e(o/l,-r/l,-n/l,i/l,(n*a-o*s)/l,(r*s-i*a)/l)},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.equals=function(t){return!!t&&(this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f)},e.prototype.round=function(t){return this.a=Vs(this.a,t),this.b=Vs(this.b,t),this.c=Vs(this.c,t),this.d=Vs(this.d,t),this.e=Vs(this.e,t),this.f=Vs(this.f,t),this},e.prototype.toArray=function(t){var e=[this.a,this.b,this.c,this.d,this.e,this.f];if(ds(t))for(var i=0;i<e.length;i++)e[i]=Vs(e[i],t);return e},e.prototype.toString=function(t,e){return void 0===e&&(e=","),this.toArray(t).join(e)},e.translate=function(t,i){return new e(1,0,0,1,t,i)},e.unit=function(){return new e(1,0,0,1,0,0)},e.rotate=function(t,i,r){var n=new e;return n.a=Math.cos(wa(t)),n.b=Math.sin(wa(t)),n.c=-n.b,n.d=n.a,n.e=i-i*n.a+r*n.b||0,n.f=r-r*n.a-i*n.b||0,n},e.scale=function(t,i){return new e(t,0,0,i,0,0)},e}(Zs);Ma.IDENTITY=Ma.unit();const Oa=Ma;var Da=/matrix\((.*)\)/;function Pa(t){var e=getComputedStyle(t).transform;return"none"===e?Oa.unit():function(t){var e=t.match(Da);if(null===e||2!==e.length)return Oa.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(Oa,[null].concat(i)))}(e)}function Ra(t){if(!t)return Oa.unit();for(var e=Pa(t),i=t.parentElement;i;){var r=Pa(i);e=e.multiplyCopy(r),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}var Ia=function(t){function e(e){t.call(this),this._size=e,this._length=0,this._map={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e){var i=this._map,r={key:t,value:e};i[t]=r,this._head?(this._tail.newer=r,r.older=this._tail,this._tail=r):this._head=this._tail=r,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},e.prototype.get=function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value},e}(Zs);const La=Ia;var za=/\r?\n|\r|\t/g;function Ba(t){return String(t).replace(za," ")}function Na(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join("")}function ja(t){for(var e=2166136261,i=0;i<t.length;++i)e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e^=t.charCodeAt(i);return e>>>0}var Fa,Va={baselineMarkerSize:1};"undefined"!=typeof document&&((Fa=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var Ha=function(t){function e(e){t.call(this),this._cache=new La(1e3),this.options=Object.assign({},Va,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.measure=function(t,e,i){if(void 0===i&&(i={}),null==t)return{width:0,height:0,baseline:0};var r=ja(t+Na(e)),n=this._cache.get(r);if(n)return n;var o={width:0,height:0,baseline:0},s=i.box||Fa,a=this._baselineMarker().cloneNode(!1);for(var l in e){var h=e[l];void 0!==h&&(s.style[l]=h)}var c=!1!==i.normalizeText?Ba(t):String(t);return s.textContent=c,s.appendChild(a),document.body.appendChild(s),c.length&&(o.width=s.offsetWidth-this.options.baselineMarkerSize,o.height=s.offsetHeight,o.baseline=a.offsetTop+this.options.baselineMarkerSize),o.width>0&&o.height>0&&this._cache.put(r,o),s.parentNode.removeChild(s),o},e.prototype._baselineMarker=function(){var t=document.createElement("div");return t.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",t},e}(Zs);Ha.current=new Ha;const Wa=Ha;function Ua(t,e,i){return Wa.current.measure(t,e,i)}var qa=e.append,Ga=e.bindEvents,$a=e.defined,Ka=e.deg,Xa=e.elementOffset,Ya=e.elementSize,Za=e.eventCoordinates,Ja=e.eventElement,Qa=e.hashKey,tl=e.last,el=e.limitValue,il=e.objectKey,rl=e.rad,nl=e.round,ol=e.unbindEvents,sl=e.valueOrDefault,al=function(){};al.fetchFonts=function(t,e,i){void 0===i&&(i={depth:0});!t||i.depth>5||!document.fonts||Object.keys(t).forEach((function(r){var n=t[r];"dataSource"!==r&&"$"!==r[0]&&n&&("font"===r?e.push(n):"object"==typeof n&&(i.depth++,al.fetchFonts(n,e,i),i.depth--))}))},al.loadFonts=function(t,e){var i=[];if(t.length>0&&document.fonts){try{i=t.map((function(t){return document.fonts.load(t)}))}catch(t){Js(t)}Promise.all(i).then(e,e)}else e()},al.preloadFonts=function(t,e){var i=[];al.fetchFonts(t,i),al.loadFonts(i,e)};const ll=al;function hl(t,e){var i=t.prototype;i.options?i.options=_s({},i.options,e):i.options=e}function cl(t){for(var e=Xo,i=Yo,r=0,n=t.length;r<n;r++){var o=t[r];null!==o&&isFinite(o)&&(e=Math.min(e,o),i=Math.max(i,o))}return{min:e===Xo?void 0:e,max:i===Yo?void 0:i}}function pl(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(e(r,i,t))return r}}var ul=Oa,dl=/matrix\((.*)\)/;function fl(t){var e=getComputedStyle(t).transform;return"none"===e?ul.unit():function(t){var e=t.match(dl);if(null===e||2!==e.length)return ul.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(ul,[null].concat(i)))}(e)}const vl={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var ml=Ks.browser,gl=function(t){var e=Object.keys(vl);e.push("transparent");var i=new RegExp("^("+e.join("|")+")(\\W|$)","i");return gl=function(t){return i.exec(t)},i.exec(t)},yl=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){return this},e.prototype.toRGB=function(){return this},e.prototype.toHex=function(t){return this.toBytes().toHex(t)},e.prototype.toBytes=function(){return this},e.prototype.toCss=function(t){return"#"+this.toHex(t)},e.prototype.toCssRgba=function(){var t=this.toBytes();return"rgba("+t.r+", "+t.g+", "+t.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},e.prototype.toDisplay=function(){return ml.msie&&ml.version<9?this.toCss():this.toCssRgba()},e.prototype.equals=function(t){return t===this||null!==t&&this.toCssRgba()===El(t).toCssRgba()},e.prototype.diff=function(t){if(null===t)return NaN;var e=this.toBytes(),i=t.toBytes();return Math.sqrt(Math.pow(.3*(e.r-i.r),2)+Math.pow(.59*(e.g-i.g),2)+Math.pow(.11*(e.b-i.b),2))},e.prototype.clone=function(){var t=this.toBytes();return t===this&&(t=new wl(t.r,t.g,t.b,t.a)),t},e}(Zs),bl=function(t){function e(e,i,r,n){t.call(this),this.r=e,this.g=i,this.b=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){var t,e,i=this,r=i.r,n=i.g,o=i.b,s=Math.min(r,n,o),a=Math.max(r,n,o),l=a-s,h=a;return 0===l?new _l(0,0,h,this.a):(0!==a?(e=l/a,t=r===a?(n-o)/l:n===a?2+(o-r)/l:4+(r-n)/l,(t*=60)<0&&(t+=360)):(e=0,t=-1),new _l(t,e,h,this.a))},e.prototype.toHSL=function(){var t,e,i=this,r=i.r,n=i.g,o=i.b,s=Math.max(r,n,o),a=Math.min(r,n,o),l=(s+a)/2;if(s===a)t=e=0;else{var h=s-a;switch(e=l>.5?h/(2-s-a):h/(s+a),s){case r:t=(n-o)/h+(n<o?6:0);break;case n:t=(o-r)/h+2;break;case o:t=(r-n)/h+4}}return new kl(60*t,100*e,100*l,this.a)},e.prototype.toBytes=function(){return new wl(255*this.r,255*this.g,255*this.b,this.a)},e}(yl),wl=function(t){function e(e,i,r,n){t.call(this,Math.round(e),Math.round(i),Math.round(r),n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){return new t(this.r/255,this.g/255,this.b/255,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toHex=function(t){var e=xl(this.r,2)+xl(this.g,2)+xl(this.b,2);return t&&t.alpha&&(e+=xl(Math.round(255*this.a),2)),e},e.prototype.toBytes=function(){return this},e}(bl);function xl(t,e,i){void 0===i&&(i="0");for(var r=t.toString(16);e>r.length;)r=i+r;return r}var _l=function(t){function e(e,i,r,n){t.call(this),this.h=e,this.s=i,this.v=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,r=this,n=r.h,o=r.s,s=r.v;if(0===o)t=e=i=s;else{n/=60;var a=Math.floor(n),l=n-a,h=s*(1-o),c=s*(1-o*l),p=s*(1-o*(1-l));switch(a){case 0:t=s,e=p,i=h;break;case 1:t=c,e=s,i=h;break;case 2:t=h,e=s,i=p;break;case 3:t=h,e=c,i=s;break;case 4:t=p,e=h,i=s;break;default:t=s,e=h,i=c}}return new bl(t,e,i,this.a)},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(yl),kl=function(t){function e(e,i,r,n){t.call(this),this.h=e,this.s=i,this.l=r,this.a=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,r=this.h/360,n=this.s/100,o=this.l/100;if(0===n)t=e=i=o;else{var s=o<.5?o*(1+n):o+n-o*n,a=2*o-s;t=Sl(a,s,r+1/3),e=Sl(a,s,r),i=Sl(a,s,r-1/3)}return new bl(t,e,i,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(yl);function Sl(t,e,i){var r=i;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Cl(t){return parseFloat(parseFloat(parseInt(t,16)/255).toFixed(3))}function El(t,e){var i,r;if(null==t||"none"===t)return null;if(t instanceof yl)return t;var n=t.toLowerCase();if(i=gl(n))return(n="transparent"===i[1]?new bl(1,1,1,0):El(vl[i[1]],e)).match=[i[1]],n;if((i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(n))?r=new wl(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(n))?r=new wl(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(n))?r=new wl(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),Cl(i[4]+i[4])):(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(n))?r=new wl(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Cl(i[4])):(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(n))?r=new wl(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1):(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(n))?r=new wl(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4])):(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(n))?r=new bl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1):(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(n))&&(r=new bl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))),r)r.match=i;else if(!e)throw new Error("Cannot parse color: "+n);return r}var Tl=function(t){function e(i){var r=this;if(t.call(this),1===arguments.length)for(var n=e.formats,o=this.resolveColor(i),s=0;s<n.length;s++){var a=n[s].re,l=n[s].process,h=a.exec(o);if(h){var c=l(h);r.r=c[0],r.g=c[1],r.b=c[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHex=function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return"#"+t(e)+t(i)+t(r)},e.prototype.resolveColor=function(t){var i=t||"black";return"#"===i.charAt(0)&&(i=i.substr(1,6)),i=(i=i.replace(/ /g,"")).toLowerCase(),i=e.namedColors[i]||i},e.prototype.normalizeByte=function(t){return t<0||isNaN(t)?0:t>255?255:t},e.prototype.padDigit=function(t){return 1===t.length?"0"+t:t},e.prototype.brightness=function(t){var e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},e.prototype.percBrightness=function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},e.prototype.isDark=function(){return this.percBrightness()<180},e.fromBytes=function(t,e,i,r){return new wl(t,e,i,null!=r?r:1)},e.fromRGB=function(t,e,i,r){return new bl(t,e,i,null!=r?r:1)},e.fromHSV=function(t,e,i,r){return new _l(t,e,i,null!=r?r:1)},e.fromHSL=function(t,e,i,r){return new kl(t,e,i,null!=r?r:1)},e}(Zs);Tl.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],Tl.namedColors=vl;const Al=Tl;const Ml=function(t){return new Al(t).isDark()?ss:Bo};var Ol={},Dl=function(t){this._index={},this._values=t?t.slice(0):[];for(var e=0;e<this._values.length;e++)this._index[this._values[e]]=e},Pl={size:{configurable:!0}};Dl.prototype.values=function(){return this._values.filter((function(t){return t!==Ol}))},Dl.prototype.has=function(t){return void 0!==this._index[t]},Dl.prototype.add=function(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))},Dl.prototype.delete=function(t){var e=this._index[t];void 0!==e&&(this._values[e]=Ol,delete this._index[t])},Dl.prototype.clear=function(){this._index={},this._values=[]},Pl.size.get=function(){return this._values.length},Object.defineProperties(Dl.prototype,Pl);var Rl=function(t){this._set=new Set(t)},Il={size:{configurable:!0}};Rl.prototype.values=function(){return Array.from(this._set)},Rl.prototype.has=function(t){return this._set.has(t)},Rl.prototype.add=function(t){this._set.add(t)},Rl.prototype.delete=function(t){this._set.delete(t)},Rl.prototype.clear=function(){this._set.clear()},Il.size.get=function(){return this._set.size},Object.defineProperties(Rl.prototype,Il);function Ll(t){return e=!1,"function"==typeof Set&&(e=new Set([1]).has(1)),e?new Rl(t):new Dl(t);var e}function zl(t){throw t}const Bl={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function Nl(t,e){var i=nl(e-t,9);if(0===i){if(0===e)return.1;i=Math.abs(e)}var r=Math.pow(10,Math.floor(Math.log(i)/Math.log(10))),n=nl(i/r,Uo);return nl(r*(n<1.904762?.2:n<4.761904?.5:n<9.523809?1:2),Uo)}var jl=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.rotate=function(t,e){var i=rl(e),r=Math.cos(i),n=Math.sin(i),o=t.x,s=t.y,a=this.x,l=this.y;return this.x=nl(o+(a-o)*r+(l-s)*n,3),this.y=nl(s+(l-s)*r-(a-o)*n,3),this},e.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.onCircle=function(t,i,r){var n=rl(i);return new e(t.x-r*Math.cos(n),t.y-r*Math.sin(n))},e}(Zs);const Fl=jl;var Vl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observers=function(){return this._observers=this._observers||[],this._observers},e.prototype.addObserver=function(t){return this._observers?this._observers.push(t):this._observers=[t],this},e.prototype.removeObserver=function(t){var e=this.observers(),i=e.indexOf(t);return-1!==i&&e.splice(i,1),this},e.prototype.trigger=function(t,e){var i=this._observers;if(i&&!this._suspended)for(var r=0;r<i.length;r++){var n=i[r];n[t]&&n[t](e)}return this},e.prototype.optionsChange=function(t){void 0===t&&(t={}),t.element=this,this.trigger("optionsChange",t)},e.prototype.geometryChange=function(){this.trigger("geometryChange",{element:this})},e.prototype.suspend=function(){return this._suspended=(this._suspended||0)+1,this},e.prototype.resume=function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},e.prototype._observerField=function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)},e}(Zs);const Hl=Vl;function Wl(t){return function(e){return this[t]!==e&&(this[t]=e,this.geometryChange()),this}}function Ul(t){return function(){return this[t]}}const ql=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++){var r=e[i],n=r.charAt(0).toUpperCase()+r.substring(1,r.length);t["set"+n]=Wl(r),t["get"+n]=Ul(r)}}(i.prototype,e),i};function Gl(t){return t&&"function"==typeof t.matrix?t.matrix():t}var $l=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.x===this.x&&t.y===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(t,i){var r=e.create(i)||e.ZERO;return this.transform(Oa.rotate(t,r.x,r.y))},e.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this},e.prototype.translateWith=function(t){return this.translate(t.x,t.y)},e.prototype.move=function(t,e){return this.x=this.y=0,this.translate(t,e)},e.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this.geometryChange(),this},e.prototype.scaleCopy=function(t,e){return this.clone().scale(t,e)},e.prototype.transform=function(t){var e=Gl(t),i=this.x,r=this.y;return this.x=e.a*i+e.c*r+e.e,this.y=e.b*i+e.d*r+e.f,this.geometryChange(),this},e.prototype.transformCopy=function(t){var e=this.clone();return t&&e.transform(t),e},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.prototype.round=function(t){return this.x=Vs(this.x,t),this.y=Vs(this.y,t),this.geometryChange(),this},e.prototype.toArray=function(t){var e=ds(t);return[e?Vs(this.x,t):this.x,e?Vs(this.y,t):this.y]},e.prototype.toString=function(t,e){void 0===e&&(e=" ");var i=this.x,r=this.y;return ds(t)&&(i=Vs(i,t),r=Vs(r,t)),i+e+r},e.create=function(t,i){if(ds(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},e.min=function(){for(var t=arguments,i=sa,r=sa,n=0;n<arguments.length;n++){var o=t[n];i=Math.min(o.x,i),r=Math.min(o.y,r)}return new e(i,r)},e.max=function(){for(var t=arguments,i=aa,r=aa,n=0;n<arguments.length;n++){var o=t[n];i=Math.max(o.x,i),r=Math.max(o.y,r)}return new e(i,r)},e.minPoint=function(){return new e(aa,aa)},e.maxPoint=function(){return new e(sa,sa)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(ql(Hl,["x","y"]));const Kl=$l;var Xl=function(t){function e(e,i){t.call(this),this.width=e||0,this.height=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.width===this.width&&t.height===this.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toArray=function(t){var e=ds(t);return[e?Vs(this.width,t):this.width,e?Vs(this.height,t):this.height]},e.create=function(t,i){if(ds(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(ql(Hl,["width","height"]));const Yl=Xl;var Zl=function(t){function e(e,i,r){void 0===e&&(e=new Kl),void 0===i&&(i=new Yl),void 0===r&&(r=0),t.call(this),this.setOrigin(e),this.setSize(i),this.setCornerRadius(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.origin.clone(),this.size.clone())},e.prototype.equals=function(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)},e.prototype.setOrigin=function(t){return this._observerField("origin",Kl.create(t)),this.geometryChange(),this},e.prototype.getOrigin=function(){return this.origin},e.prototype.setCornerRadius=function(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this},e.prototype.getCornerRadius=function(){return this.cornerRadius},e.prototype.setSize=function(t){return this._observerField("size",Yl.create(t)),this.geometryChange(),this},e.prototype.getSize=function(){return this.size},e.prototype.width=function(){return this.size.width},e.prototype.height=function(){return this.size.height},e.prototype.topLeft=function(){return this.origin.clone()},e.prototype.bottomRight=function(){return this.origin.clone().translate(this.width(),this.height())},e.prototype.topRight=function(){return this.origin.clone().translate(this.width(),0)},e.prototype.bottomLeft=function(){return this.origin.clone().translate(0,this.height())},e.prototype.center=function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},e.prototype.bbox=function(t){var i=this.topLeft().transformCopy(t),r=this.topRight().transformCopy(t),n=this.bottomRight().transformCopy(t),o=this.bottomLeft().transformCopy(t);return e.fromPoints(i,r,n,o)},e.prototype.transformCopy=function(t){return e.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))},e.prototype.expand=function(t,e){return void 0===e&&(e=t),this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this},e.prototype.expandCopy=function(t,e){return this.clone().expand(t,e)},e.prototype.containsPoint=function(t){var e=this.origin,i=this.bottomRight();return!(t.x<e.x||t.y<e.y||i.x<t.x||i.y<t.y)},e.prototype._isOnPath=function(t,e){var i=this.expandCopy(e,e),r=this.expandCopy(-e,-e);return i.containsPoint(t)&&!r.containsPoint(t)},e.fromPoints=function(){var t=Kl.min.apply(null,arguments),i=Kl.max.apply(null,arguments),r=new Yl(i.x-t.x,i.y-t.y);return new e(t,r)},e.union=function(t,i){return e.fromPoints(Kl.min(t.topLeft(),i.topLeft()),Kl.max(t.bottomRight(),i.bottomRight()))},e.intersect=function(t,i){var r={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},n={left:i.topLeft().x,top:i.topLeft().y,right:i.bottomRight().x,bottom:i.bottomRight().y};if(r.left<=n.right&&n.left<=r.right&&r.top<=n.bottom&&n.top<=r.bottom)return e.fromPoints(new Kl(Math.max(r.left,n.left),Math.max(r.top,n.top)),new Kl(Math.min(r.right,n.right),Math.min(r.bottom,n.bottom)))},e}(Hl);const Jl=Zl;var Ql=function(t){function e(e,i,r,n){t.call(this),this.x1=e||0,this.y1=i||0,this.x2=r||0,this.y2=n||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.equals=function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},e.prototype.width=function(){return this.x2-this.x1},e.prototype.height=function(){return this.y2-this.y1},e.prototype.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},e.prototype.move=function(t,e){var i=this.height(),r=this.width();return $a(t)&&(this.x1=t,this.x2=this.x1+r),$a(e)&&(this.y1=e,this.y2=this.y1+i),this},e.prototype.wrap=function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},e.prototype.wrapPoint=function(t){var i=cs(t),r=i?t[0]:t.x,n=i?t[1]:t.y;return this.wrap(new e(r,n,r,n)),this},e.prototype.snapTo=function(t,e){return e!==ls&&e||(this.x1=t.x1,this.x2=t.x2),e!==hs&&e||(this.y1=t.y1,this.y2=t.y2),this},e.prototype.alignTo=function(t,e){var i=this.height(),r=this.width(),n=e===rs||e===No?hs:ls,o=n===hs?i:r;if(e===jo){var s=t.center(),a=this.center();this.x1+=s.x-a.x,this.y1+=s.y-a.y}else this[n+1]=e===rs||e===Ko?t[n+1]-o:t[n+2];return this.x2=this.x1+r,this.y2=this.y1+i,this},e.prototype.shrink=function(t,e){return this.x2-=t,this.y2-=e,this},e.prototype.expand=function(t,e){return this.shrink(-t,-e),this},e.prototype.pad=function(t){var e=As(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},e.prototype.unpad=function(t){var e=As(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},e.prototype.clone=function(){return new e(this.x1,this.y1,this.x2,this.y2)},e.prototype.center=function(){return new Fl(this.x1+this.width()/2,this.y1+this.height()/2)},e.prototype.containsPoint=function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},e.prototype.points=function(){return[new Fl(this.x1,this.y1),new Fl(this.x2,this.y1),new Fl(this.x2,this.y2),new Fl(this.x1,this.y2)]},e.prototype.getHash=function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},e.prototype.overlaps=function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},e.prototype.rotate=function(t){var e=this.width(),i=this.height(),r=this.center(),n=r.x,o=r.y,s=th(0,0,n,o,t),a=th(e,0,n,o,t),l=th(e,i,n,o,t),h=th(0,i,n,o,t);return e=Math.max(s.x,a.x,l.x,h.x)-Math.min(s.x,a.x,l.x,h.x),i=Math.max(s.y,a.y,l.y,h.y)-Math.min(s.y,a.y,l.y,h.y),this.x2=this.x1+e,this.y2=this.y1+i,this},e.prototype.toRect=function(){return new Jl([this.x1,this.y1],[this.width(),this.height()])},e.prototype.hasSize=function(){return 0!==this.width()&&0!==this.height()},e.prototype.align=function(t,e,i){var r=e+1,n=e+2,o=e===ls?as:Go,s=this[o]();Fs(i,[Ko,rs])?(this[r]=t[r],this[n]=this[r]+s):Fs(i,[ts,No])?(this[n]=t[n],this[r]=this[n]-s):i===jo&&(this[r]=t[r]+(t[o]()-s)/2,this[n]=this[r]+s)},e}(Zs);function th(t,e,i,r,n){var o=rl(n);return new Fl(i+(t-i)*Math.cos(o)+(e-r)*Math.sin(o),r-(t-i)*Math.sin(o)+(e-r)*Math.cos(o))}const eh=Ql;var ih=function(t){function e(e,i,r,n,o){t.call(this),this.center=e,this.innerRadius=i,this.radius=r,this.startAngle=n,this.angle=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},e.prototype.middle=function(){return this.startAngle+this.angle/2},e.prototype.setRadius=function(t,e){return e?this.innerRadius=t:this.radius=t,this},e.prototype.point=function(t,e){var i=rl(t),r=Math.cos(i),n=Math.sin(i),o=e?this.innerRadius:this.radius,s=nl(this.center.x-r*o,3),a=nl(this.center.y-n*o,3);return new Fl(s,a)},e.prototype.adjacentBox=function(t,e,i){var r=this.clone().expand(t),n=r.middle(),o=r.point(n),s=e/2,a=i/2,l=Math.sin(rl(n)),h=Math.cos(rl(n)),c=o.x-s,p=o.y-a;return Math.abs(l)<.9&&(c+=s*-h/Math.abs(h)),Math.abs(h)<.9&&(p+=a*-l/Math.abs(l)),new eh(c,p,c+e,p+i)},e.prototype.containsPoint=function(t){var e=this.center,i=this.innerRadius,r=this.radius,n=this.startAngle,o=this.startAngle+this.angle,s=t.x-e.x,a=t.y-e.y,l=new Fl(s,a),h=this.point(n),c=new Fl(h.x-e.x,h.y-e.y),p=this.point(o),u=new Fl(p.x-e.x,p.y-e.y),d=nl(s*s+a*a,3);return(c.equals(l)||vs(c,l))&&!vs(u,l)&&d>=i*i&&d<=r*r},e.prototype.getBBox=function(){var t,e=new eh(Xo,Xo,Yo,Yo),i=nl(this.startAngle%360),r=nl((i+this.angle)%360),n=this.innerRadius,o=[0,90,180,270,i,r].sort(rh),s=o.indexOf(i),a=o.indexOf(r);t=i===r?o:s<a?o.slice(s,a+1):[].concat(o.slice(0,a+1),o.slice(s,o.length));for(var l=0;l<t.length;l++){var h=this.point(t[l]);e.wrapPoint(h),e.wrapPoint(h,n)}return n||e.wrapPoint(this.center),e},e.prototype.expand=function(t){return this.radius+=t,this},e}(Zs);function rh(t,e){return t-e}const nh=ih;!function(t){function e(e,i,r,n){t.call(this,e,0,i,r,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expand=function(e){return t.prototype.expand.call(this,e)},e.prototype.clone=function(){return new e(this.center,this.radius,this.startAngle,this.angle)},e.prototype.setRadius=function(t){return this.radius=t,this}}(nh);var oh=10;function sh(t,e,i){return void 0===i&&(i=oh),0===Vs(Math.abs(t-e),i)}function ah(t,e,i){return t<e||sh(t,e,i)}function lh(t,e,i,r){var n=0,o=0;return r&&(n=Math.atan2(r.c*i,r.a*e),0!==r.b&&(o=Math.atan2(r.d*i,r.b*e))),{x:n,y:o}}var hh=function(t){function e(e){void 0===e&&(e=Oa.unit()),t.call(this),this._matrix=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this._matrix.clone())},e.prototype.equals=function(t){return t&&t._matrix.equals(this._matrix)},e.prototype.translate=function(t,e){return this._matrix=this._matrix.multiplyCopy(Oa.translate(t,e)),this._optionsChange(),this},e.prototype.scale=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=null);var r=i;return r&&(r=Kl.create(r),this._matrix=this._matrix.multiplyCopy(Oa.translate(r.x,r.y))),this._matrix=this._matrix.multiplyCopy(Oa.scale(t,e)),r&&(this._matrix=this._matrix.multiplyCopy(Oa.translate(-r.x,-r.y))),this._optionsChange(),this},e.prototype.rotate=function(t,e){var i=Kl.create(e)||Kl.ZERO;return this._matrix=this._matrix.multiplyCopy(Oa.rotate(t,i.x,i.y)),this._optionsChange(),this},e.prototype.multiply=function(t){var e=Gl(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this},e.prototype.matrix=function(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix},e.prototype._optionsChange=function(){this.optionsChange({field:"transform",value:this})},e}(Hl);const ch=hh;function ph(t){return null===t?null:t instanceof ch?t:new ch(t)}var uh=Math.pow,dh=function(t){function e(e,i){void 0===e&&(e=new Kl),void 0===i&&(i={}),t.call(this),this.setCenter(e),this.radiusX=i.radiusX,this.radiusY=i.radiusY||i.radiusX,this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.anticlockwise=i.anticlockwise||!1,this.xRotation=i.xRotation}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},e.prototype.setCenter=function(t){return this._observerField("center",Kl.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.pointAt=function(t){var e=this.center,i=wa(t);return new Kl(e.x+this.radiusX*Math.cos(i),e.y+this.radiusY*Math.sin(i))},e.prototype.curvePoints=function(){var t,e=this.startAngle,i=this.anticlockwise?-1:1,r=[this.pointAt(e)],n=this._arcInterval(),o=n.endAngle-n.startAngle,s=Math.ceil(o/45),a=o/s,l=e;this.xRotation&&(t=ph().rotate(this.xRotation,this.center));for(var h=1;h<=s;h++){var c=l+i*a,p=this._intervalCurvePoints(l,c,t);r.push(p.cp1,p.cp2,p.p2),l=c}return r},e.prototype.bbox=function(t){for(var e=this._arcInterval(),i=e.startAngle,r=e.endAngle,n=lh(this.center,this.radiusX,this.radiusY,t),o=la(n.x),s=la(n.y),a=this.pointAt(r).transformCopy(t),l=vh(o,i),h=vh(s,i),c=this.pointAt(i).transformCopy(t),p=Kl.min(c,a),u=Kl.max(c,a);l<r||h<r;){var d=void 0;l<r&&(d=this.pointAt(l).transformCopy(t),l+=90);var f=void 0;h<r&&(f=this.pointAt(h).transformCopy(t),h+=90),c=new Kl(d.x,f.y),p=Kl.min(p,c),u=Kl.max(u,c)}return Jl.fromPoints(p,u)},e.prototype._arcInterval=function(){var t=this,e=t.startAngle,i=t.endAngle,r=t.anticlockwise;if(r){var n=e;e=i,i=n}return(e>i||r&&e===i)&&(i+=360),{startAngle:e,endAngle:i}},e.prototype._intervalCurvePoints=function(t,e,i){var r=this.pointAt(t),n=this.pointAt(e),o=this._derivativeAt(t),s=this._derivativeAt(e),a=(wa(e)-wa(t))/3,l=new Kl(r.x+a*o.x,r.y+a*o.y),h=new Kl(n.x-a*s.x,n.y-a*s.y);return i&&(r.transform(i),n.transform(i),l.transform(i),h.transform(i)),{p1:r,cp1:l,cp2:h,p2:n}},e.prototype._derivativeAt=function(t){var e=wa(t);return new Kl(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))},e.prototype.containsPoint=function(t){var e,i=this._arcInterval(),r=i.endAngle-i.startAngle,n=this,o=n.center,s=n.radiusX,a=n.radiusY,l=o.distanceTo(t),h=Math.atan2(t.y-o.y,t.x-o.x),c=s*a/Math.sqrt(uh(s,2)*uh(Math.sin(h),2)+uh(a,2)*uh(Math.cos(h),2)),p=this.pointAt(this.startAngle).round(oh),u=this.pointAt(this.endAngle).round(oh),d=function(t,e,i,r){var n=e.x-t.x,o=r.x-i.x,s=e.y-t.y,a=r.y-i.y,l=t.x-i.x,h=t.y-i.y,c=n*a-o*s,p=(n*h-s*l)/c,u=(o*h-a*l)/c;if(p>=0&&p<=1&&u>=0&&u<=1)return new Kl(t.x+u*n,t.y+u*s)}(o,t.round(oh),p,u);if(r<180)e=d&&ah(o.distanceTo(d),l)&&ah(l,c);else{var f=fh(o.x,o.y,s,a,t.x,t.y);360!==f&&(f=(360+f)%360);var v=i.startAngle<=f&&f<=i.endAngle;e=v&&ah(l,c)||!v&&(!d||d.equals(t))}return e},e.prototype._isOnPath=function(t,e){var i=this._arcInterval(),r=this.center,n=fh(r.x,r.y,this.radiusX,this.radiusY,t.x,t.y);return 360!==n&&(n=(360+n)%360),i.startAngle<=n&&n<=i.endAngle&&this.pointAt(n).distanceTo(t)<=e},e.fromPoints=function(t,i,r,n,o,s,a){var l=function(t){var e=t.x1,i=t.y1,r=t.x2,n=t.y2,o=t.rx,s=t.ry,a=t.largeArc,l=t.swipe,h=t.rotation;void 0===h&&(h=0);var c=wa(h),p=Math.cos(c),u=Math.sin(c),d=p*(e-r)/2+u*(i-n)/2,f=-u*(e-r)/2+p*(i-n)/2,v=a!==l?1:-1,m=Math.pow(d,2),g=Math.pow(f,2),y=Math.pow(o,2),b=Math.pow(s,2),w=m/y+g/b;w>1&&(o*=w=Math.sqrt(m/y+g/b),y=Math.pow(o,2),s*=w,b=Math.pow(s,2));var x=v*Math.sqrt((y*b-y*g-b*m)/(y*g+b*m));isNaN(x)&&(x=0);var _=x*(o*f)/s,k=s*d*-x/o,S=p*_-u*k+(e+r)/2,C=u*_+p*k+(i+n)/2,E=(d-_)/o,T=(f-k)/s,A=-(d+_)/o,M=-(f+k)/s,O=(T>=0?1:-1)*la(Math.acos(E/Math.sqrt(E*E+T*T))),D=Vs((E*A+T*M)/(Math.sqrt(E*E+T*T)*Math.sqrt(A*A+M*M)),10),P=(E*M-T*A>=0?1:-1)*la(Math.acos(D));!l&&P>0&&(P-=360);l&&P<0&&(P+=360);var R=O+P,I=R>=0?1:-1;return R=Math.abs(R)%360*I,{center:new Kl(S,C),startAngle:O,endAngle:R,radiusX:o,radiusY:s,xRotation:h}}({x1:t.x,y1:t.y,x2:i.x,y2:i.y,rx:r,ry:n,largeArc:o,swipe:s,rotation:a});return new e(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:0===s})},e}(ql(Hl,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]));function fh(t,e,i,r,n,o){var s=Vs((n-t)/i,3),a=Vs((o-e)/r,3);return Vs(la(Math.atan2(a,s)))}function vh(t,e){for(var i=t;i<e;)i+=90;return i}const mh=dh;var gh=[].push,yh=[].pop,bh=[].splice,wh=[].shift,xh=[].slice,_h=[].unshift,kh=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.length=0,this._splice(0,e.length,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.elements=function(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)},e.prototype.push=function(){var t=arguments,e=gh.apply(this,t);return this._add(t),e},e.prototype.slice=function(){return xh.call(this)},e.prototype.pop=function(){var t=this.length,e=yh.apply(this);return t&&this._remove([e]),e},e.prototype.splice=function(t,e){var i=xh.call(arguments,2),r=this._splice(t,e,i);return this._change(),r},e.prototype.shift=function(){var t=this.length,e=wh.apply(this);return t&&this._remove([e]),e},e.prototype.unshift=function(){var t=arguments,e=_h.apply(this,t);return this._add(t),e},e.prototype.indexOf=function(t){for(var e=this.length,i=0;i<e;i++)if(this[i]===t)return i;return-1},e.prototype._splice=function(t,e,i){var r=bh.apply(this,[t,e].concat(i));return this._clearObserver(r),this._setObserver(i),r},e.prototype._add=function(t){this._setObserver(t),this._change()},e.prototype._remove=function(t){this._clearObserver(t),this._change()},e.prototype._setObserver=function(t){for(var e=0;e<t.length;e++)t[e].addObserver(this)},e.prototype._clearObserver=function(t){for(var e=0;e<t.length;e++)t[e].removeObserver(this)},e.prototype._change=function(){},e}(Hl);const Sh=kh;var Ch=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.geometryChange()},e}(Sh);const Eh=Ch;var Th={}.toString,Ah=function(t){function e(e,i){for(var r in void 0===i&&(i=""),t.call(this),this.prefix=i,e){var n=e[r];n=this._wrap(n,r),this[r]=n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){for(var e=t.split("."),i=this;e.length&&i;){i=i[e.shift()]}return i},e.prototype.set=function(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))},e.prototype._set=function(t,i){var r=t.indexOf(".")>=0,n=this,o=t;if(r){for(var s=o.split("."),a=this.prefix;s.length>1;){a+=(o=s.shift())+".";var l=n[o];l||((l=new e({},a)).addObserver(this),n[o]=l),n=l}o=s[0]}n._clear(o),n[o]=i},e.prototype._clear=function(t){var e=this[t];e&&e.removeObserver&&e.removeObserver(this)},e.prototype._wrap=function(t,i){var r=Th.call(t),n=t;return null!==n&&ds(n)&&"[object Object]"===r&&(t instanceof e||t instanceof Zs||(n=new e(n,this.prefix+i+".")),n.addObserver(this)),n},e}(Hl);const Mh=Ah;var Oh=function(t){function e(e){t.call(this),this._initOptions(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Rect"},e.prototype._initOptions=function(t){void 0===t&&(t={});var e=t.clip,i=t.transform;i&&(t.transform=ph(i)),e&&!e.id&&(e.id=na()),this.options=new Mh(t),this.options.addObserver(this)},e.prototype.transform=function(t){if(!ds(t))return this.options.get("transform");this.options.set("transform",ph(t))},e.prototype.parentTransform=function(){for(var t,e=this;e.parent;){var i=(e=e.parent).transform();i&&(t=i.matrix().multiplyCopy(t||Oa.unit()))}if(t)return ph(t)},e.prototype.currentTransform=function(t){void 0===t&&(t=this.parentTransform());var e,i=Gl(this.transform()),r=Gl(t);if(e=i&&r?r.multiplyCopy(i):i||r)return ph(e)},e.prototype.visible=function(t){return ds(t)?(this.options.set("visible",t),this):!1!==this.options.get("visible")},e.prototype.clip=function(t){var e=this.options;return ds(t)?(t&&!t.id&&(t.id=na()),e.set("clip",t),this):e.get("clip")},e.prototype.opacity=function(t){return ds(t)?(this.options.set("opacity",t),this):xa(this.options.get("opacity"),1)},e.prototype.clippedBBox=function(t){var e=this._clippedBBox(t);if(e){var i=this.clip();return i?Jl.intersect(e,i.bbox(t)):e}},e.prototype.containsPoint=function(t,e){if(this.visible()){var i=this.currentTransform(e),r=t;return i&&(r=t.transformCopy(i.matrix().invert())),this._hasFill()&&this._containsPoint(r)||this._isOnPath&&this._hasStroke()&&this._isOnPath(r)}return!1},e.prototype._hasFill=function(){var t=this.options.fill;return t&&!fa(t.color)},e.prototype._hasStroke=function(){var t=this.options.stroke;return t&&t.width>0&&!fa(t.color)},e.prototype._clippedBBox=function(t){return this.bbox(t)},Object.defineProperties(e.prototype,i),e}(Hl);const Dh=Oh;const Ph=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fill=function(t,e){var i=this.options;if(ds(t)){if(t&&"Gradient"!==t.nodeType){var r={color:t};ds(e)&&(r.opacity=e),i.set("fill",r)}else i.set("fill",t);return this}return i.get("fill")},e.prototype.stroke=function(t,e,i){return ds(t)?(this.options.set("stroke.color",t),ds(e)&&this.options.set("stroke.width",e),ds(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")},e}(t)};var Rh=Oa.IDENTITY.toString();const Ih=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bbox=function(t){var e,i=Gl(this.currentTransform(t)),r=i?i.toString():Rh;this._bboxCache&&this._matrixHash===r?e=this._bboxCache.clone():(e=this._bbox(i),this._bboxCache=e?e.clone():null,this._matrixHash=r);var n=this.options.get("stroke.width");return n&&e&&e.expand(n/2),e},e.prototype.geometryChange=function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})},e}(t)};function Lh(t,e,i){var r=la(Math.atan2(e.y-t.y,e.x-t.x));return i.transformCopy(ph().rotate(-r,t)).x<t.x}function zh(t,e,i){var r=1-t;return Math.pow(r,3)*i[0][e]+3*Math.pow(r,2)*t*i[1][e]+3*Math.pow(t,2)*r*i[2][e]+Math.pow(t,3)*i[3][e]}function Bh(t,e){return[-t[0][e]+3*t[1][e]-3*t[2][e]+t[3][e],3*(t[0][e]-2*t[1][e]+t[2][e]),3*(-t[0][e]+t[1][e]),t[0][e]]}var Nh=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.real=e,this.img=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return new e(Vs(this.real+t.real,oh),Vs(this.img+t.img,oh))},e.prototype.addConstant=function(t){return new e(this.real+t,this.img)},e.prototype.negate=function(){return new e(-this.real,-this.img)},e.prototype.multiply=function(t){return new e(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)},e.prototype.multiplyConstant=function(t){return new e(this.real*t,this.img*t)},e.prototype.nthRoot=function(t){var i=Math.atan2(this.img,this.real),r=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),n=Math.pow(r,1/t);return new e(n*Math.cos(i/t),n*Math.sin(i/t))},e.prototype.equals=function(t){return this.real===t.real&&this.img===t.img},e.prototype.isReal=function(){return 0===this.img},e}(Zs);const jh=Nh;function Fh(t){return t<0?-1:1}function Vh(t,e,i,r){if(0===t)return function(t,e,i){var r=Math.sqrt(Math.pow(e,2)-4*t*i);return[(-e+r)/(2*t),(-e-r)/(2*t)]}(e,i,r);var n,o,s,a,l,h,c,p=(3*t*i-Math.pow(e,2))/(3*Math.pow(t,2)),u=(2*Math.pow(e,3)-9*t*e*i+27*Math.pow(t,2)*r)/(27*Math.pow(t,3)),d=Math.pow(p/3,3)+Math.pow(u/2,2),f=new jh(0,1),v=-e/(3*t);d<0?(n=new jh(-u/2,Math.sqrt(-d)).nthRoot(3),o=new jh(-u/2,-Math.sqrt(-d)).nthRoot(3)):(n=-u/2+Math.sqrt(d),n=new jh(Fh(n)*Math.pow(Math.abs(n),1/3)),o=-u/2-Math.sqrt(d),o=new jh(Fh(o)*Math.pow(Math.abs(o),1/3))),s=n.add(o),h=n.add(o).multiplyConstant(-.5),c=n.add(o.negate()).multiplyConstant(Math.sqrt(3)/2),a=h.add(f.multiply(c)),l=h.add(f.negate().multiply(c));var m=[];return s.isReal()&&m.push(Vs(s.real+v,oh)),a.isReal()&&m.push(Vs(a.real+v,oh)),l.isReal()&&m.push(Vs(l.real+v,oh)),m}function Hh(t,e,i,r,n){for(var o,s=Bh(t,r),a=Vh(s[0],s[1],s[2],s[3]-e[r]),l=0;l<a.length;l++)if(0<=a[l]&&a[l]<=1&&(o=zh(a[l],i,t),Math.abs(o-e[i])<=n))return!0}function Wh(t,e,i){var r;if(t.x!==e.x){var n=Math.min(t.x,e.x),o=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=n<=i.x&&i.x<o;r=s===a?i.y<=s&&l:l&&(a-s)*((t.x-e.x)*(t.y-e.y)>0?i.x-n:o-i.x)/(o-n)+s-i.y>=0}return r?1:0}function Uh(t){var e="_"+t;return function(t){return ds(t)?(this._observerField(e,Kl.create(t)),this.geometryChange(),this):this[e]}}const qh=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Uh(e[i])}(i.prototype,e),i};var Gh=function(t){function e(e,i,r){t.call(this),this.anchor(e||new Kl),this.controlIn(i),this.controlOut(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bboxTo=function(t,e){var i=this.anchor().transformCopy(e),r=t.anchor().transformCopy(e);return this.controlOut()&&t.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),r):this._lineBoundingBox(i,r)},e.prototype._lineBoundingBox=function(t,e){return Jl.fromPoints(t,e)},e.prototype._curveBoundingBox=function(t,e,i,r){var n=[t,e,i,r],o=this._curveExtremesFor(n,"x"),s=this._curveExtremesFor(n,"y"),a=$h([o.min,o.max,t.x,r.x]),l=$h([s.min,s.max,t.y,r.y]);return Jl.fromPoints(new Kl(a.min,l.min),new Kl(a.max,l.max))},e.prototype._curveExtremesFor=function(t,e){var i=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:zh(i.min,e,t),max:zh(i.max,e,t)}},e.prototype._curveExtremes=function(t,e,i,r){var n=t-3*e+3*i-r,o=-2*(t-2*e+i),s=t-e,a=Math.sqrt(o*o-4*n*s),l=0,h=1;0===n?0!==o&&(l=h=-s/o):isNaN(a)||(l=(-o+a)/(2*n),h=(-o-a)/(2*n));var c=Math.max(Math.min(l,h),0);(c<0||c>1)&&(c=0);var p=Math.min(Math.max(l,h),1);return(p>1||p<0)&&(p=1),{min:c,max:p}},e.prototype._intersectionsTo=function(t,e){var i;return i=this.controlOut()&&t.controlIn()?function(t,e,i){for(var r,n=Bh(t,"x"),o=Vh(n[0],n[1],n[2],n[3]-e.x),s=0,a=0;a<o.length;a++)(sh(r=zh(o[a],"y",t),e.y)||r>e.y)&&((0===o[a]||1===o[a])&&i.bottomRight().x>e.x||0<o[a]&&o[a]<1)&&s++;return s}([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):Wh(this.anchor(),t.anchor(),e),i},e.prototype._isOnCurveTo=function(t,e,i,r){if(this.bboxTo(t).expand(i,i).containsPoint(e)){var n=this.anchor(),o=this.controlOut(),s=t.controlIn(),a=t.anchor();if("start"===r&&n.distanceTo(e)<=i)return!Lh(n,o,e);if("end"===r&&a.distanceTo(e)<=i)return!Lh(a,s,e);var l=[n,o,s,a];if(Hh(l,e,"x","y",i)||Hh(l,e,"y","x",i))return!0;var h=ph().rotate(45,e),c=[n.transformCopy(h),o.transformCopy(h),s.transformCopy(h),a.transformCopy(h)];return Hh(c,e,"x","y",i)||Hh(c,e,"y","x",i)}},e.prototype._isOnLineTo=function(t,e,i){var r=this.anchor(),n=t.anchor(),o=la(Math.atan2(n.y-r.y,n.x-r.x));return new Jl([r.x,r.y-i/2],[r.distanceTo(n),i]).containsPoint(e.transformCopy(ph().rotate(-o,r)))},e.prototype._isOnPathTo=function(t,e,i,r){return this.controlOut()&&t.controlIn()?this._isOnCurveTo(t,e,i/2,r):this._isOnLineTo(t,e,i)},e}(qh(Hl,["anchor","controlIn","controlOut"]));function $h(t){for(var e=t.length,i=sa,r=aa,n=0;n<e;n++)r=Math.max(r,t[n]),i=Math.min(i,t[n]);return{min:i,max:r}}const Kh=Gh;var Xh={l:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=2){var o=new Kl(i[n],i[n+1]);e.isRelative&&o.translateWith(r),t.lineTo(o.x,o.y),r.x=o.x,r.y=o.y}},c:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=6){var o=new Kl(i[n],i[n+1]),s=new Kl(i[n+2],i[n+3]),a=new Kl(i[n+4],i[n+5]);e.isRelative&&(s.translateWith(r),o.translateWith(r),a.translateWith(r)),t.curveTo(o,s,a),r.x=a.x,r.y=a.y}},v:function(t,e){var i=e.isRelative?0:e.position.x;Yh(e.parameters,!0,i),this.l(t,e)},h:function(t,e){var i=e.isRelative?0:e.position.y;Yh(e.parameters,!1,i),this.l(t,e)},a:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=7){var o=i[n],s=i[n+1],a=i[n+2],l=i[n+3],h=i[n+4],c=new Kl(i[n+5],i[n+6]);e.isRelative&&c.translateWith(r),r.x===c.x&&r.y===c.y||(t.arcTo(c,o,s,l,h,a),r.x=c.x,r.y=c.y)}},s:function(t,e){var i,r=e.parameters,n=e.position,o=e.previousCommand;"s"!==o&&"c"!==o||(i=va(va(t.paths).segments).controlIn());for(var s=0;s<r.length;s+=4){var a=new Kl(r[s],r[s+1]),l=new Kl(r[s+2],r[s+3]),h=void 0;e.isRelative&&(a.translateWith(n),l.translateWith(n)),h=i?Zh(i,n):n.clone(),i=a,t.curveTo(h,a,l),n.x=l.x,n.y=l.y}},q:function(t,e){for(var i=e.parameters,r=e.position,n=0;n<i.length;n+=4){var o=new Kl(i[n],i[n+1]),s=new Kl(i[n+2],i[n+3]);e.isRelative&&(o.translateWith(r),s.translateWith(r));var a=Qh(r,o,s);t.curveTo(a.controlOut,a.controlIn,s),r.x=s.x,r.y=s.y}},t:function(t,e){var i,r=e.parameters,n=e.position,o=e.previousCommand;"q"!==o&&"t"!==o||(i=va(va(t.paths).segments).controlIn().clone().translateWith(n.scaleCopy(-1/3)).scale(1.5));for(var s=0;s<r.length;s+=2){var a=new Kl(r[s],r[s+1]);e.isRelative&&a.translateWith(n),i=i?Zh(i,n):n.clone();var l=Qh(n,i,a);t.curveTo(l.controlOut,l.controlIn,a),n.x=a.x,n.y=a.y}}};function Yh(t,e,i){for(var r=e?0:1,n=0;n<t.length;n+=2)t.splice(n+r,0,i)}function Zh(t,e){if(t&&e)return e.scaleCopy(2).translate(-t.x,-t.y)}var Jh=1/3;function Qh(t,e,i){var r=e.clone().scale(2/3);return{controlOut:r.clone().translateWith(t.scaleCopy(Jh)),controlIn:r.translateWith(i.scaleCopy(Jh))}}const tc=Xh;var ec=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,ic=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;const rc=function(t,e){var i,r=new Kl;return e.replace(ec,(function(e,n,o,s){var a=n.toLowerCase(),l=a===n,h=function(t){var e=[];return t.replace(ic,(function(t,i){e.push(parseFloat(i))})),e}(o.trim());if("m"===a&&(l?(r.x+=h[0],r.y+=h[1]):(r.x=h[0],r.y=h[1]),t.moveTo(r.x,r.y),h.length>2&&(a="l",h.splice(0,2))),tc[a])tc[a](t,{parameters:h,position:r,isRelative:l,previousCommand:i}),s&&"z"===s.toLowerCase()&&t.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);i=a})),t};function nc(t,e,i){for(var r,n=0;n<t.length;n++){var o=t[n];if(o.visible()){var s=e?o.bbox(i):o.rawBBox();s&&(r=r?Jl.union(r,s):s)}}return r}function oc(t,e){for(var i,r=0;r<t.length;r++){var n=t[r];if(n.visible()){var o=n.clippedBBox(e);o&&(i=i?Jl.union(i,o):o)}}return i}var sc=function(t){function e(e){t.call(this,e),this.segments=new Eh,this.segments.addObserver(this),ds(this.options.stroke)||(this.stroke("#000"),ds(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,e){return ac.parse(t,e)},i.nodeType.get=function(){return"Path"},e.prototype.moveTo=function(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this},e.prototype.lineTo=function(t,e){var i=ds(e)?new Kl(t,e):t,r=new Kh(i);return this.segments.push(r),this},e.prototype.curveTo=function(t,e,i){if(this.segments.length>0){var r=va(this.segments),n=new Kh(i,e);this.suspend(),r.controlOut(t),this.resume(),this.segments.push(n)}return this},e.prototype.arc=function(t,e,i,r,n){if(this.segments.length>0){var o=va(this.segments).anchor(),s=wa(t),a=new Kl(o.x-i*Math.cos(s),o.y-r*Math.sin(s)),l=new mh(a,{startAngle:t,endAngle:e,radiusX:i,radiusY:r,anticlockwise:n});this._addArcSegments(l)}return this},e.prototype.arcTo=function(t,e,i,r,n,o){if(this.segments.length>0){var s=va(this.segments).anchor(),a=mh.fromPoints(s,Kl.create(t),e,i,r,n,o);this._addArcSegments(a)}return this},e.prototype._addArcSegments=function(t){this.suspend();for(var e=t.curvePoints(),i=1;i<e.length;i+=3)this.curveTo(e[i],e[i+1],e[i+2]);this.resume(),this.geometryChange()},e.prototype.close=function(){return this.options.closed=!0,this.geometryChange(),this},e.prototype.rawBBox=function(){return this._bbox()},e.prototype._containsPoint=function(t){for(var e,i,r=this.segments,n=r.length,o=0,s=1;s<n;s++)e=r[s-1],i=r[s],o+=e._intersectionsTo(i,t);return!this.options.closed&&r[0].anchor().equals(r[n-1].anchor())||(o+=Wh(r[0].anchor(),r[n-1].anchor(),t)),o%2!=0},e.prototype._isOnPath=function(t,e){var i=this.segments,r=i.length,n=e||this.options.stroke.width;if(r>1){if(i[0]._isOnPathTo(i[1],t,n,"start"))return!0;for(var o=2;o<=r-2;o++)if(i[o-1]._isOnPathTo(i[o],t,n))return!0;if(i[r-2]._isOnPathTo(i[r-1],t,n,"end"))return!0}return!1},e.prototype._bbox=function(t){var e,i=this.segments,r=i.length;if(1===r){var n=i[0].anchor().transformCopy(t);e=new Jl(n,Yl.ZERO)}else if(r>0)for(var o=1;o<r;o++){var s=i[o-1].bboxTo(i[o],t);e=e?Jl.union(e,s):s}return e},e.fromRect=function(t,i){var r=new e(i),n=t.cornerRadius,o=n[0],s=n[1];if(0===o&&0===s)r.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{var a=t.origin,l=a.x,h=a.y,c=t.width(),p=t.height();o=ma(o,0,c/2),s=ma(s,0,p/2),r.moveTo(l+o,h).lineTo(l+c-o,h).arcTo([l+c,h+s],o,s,!1).lineTo(l+c,h+p-s).arcTo([l+c-o,h+p],o,s,!1).lineTo(l+o,h+p).arcTo([l,h+p-s],o,s,!1).lineTo(l,h+s).arcTo([l+o,h],o,s,!1)}return r},e.fromPoints=function(t,i){if(t){for(var r=new e(i),n=0;n<t.length;n++){var o=Kl.create(t[n]);o&&(0===n?r.moveTo(o):r.lineTo(o))}return r}},e.fromArc=function(t,i){var r=new e(i),n=t.startAngle,o=t.pointAt(n);return r.moveTo(o.x,o.y),r.arc(n,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),r},Object.defineProperties(e.prototype,i),e}(Ph(Ih(Dh))),ac=function(t){function e(e){t.call(this,e),this.paths=new Eh,this.paths.addObserver(this),ds(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,i){var r=new e(i);return rc(r,t)},i.nodeType.get=function(){return"MultiPath"},e.prototype.moveTo=function(t,e){var i=new sc;return i.moveTo(t,e),this.paths.push(i),this},e.prototype.lineTo=function(t,e){return this.paths.length>0&&va(this.paths).lineTo(t,e),this},e.prototype.curveTo=function(t,e,i){return this.paths.length>0&&va(this.paths).curveTo(t,e,i),this},e.prototype.arc=function(t,e,i,r,n){return this.paths.length>0&&va(this.paths).arc(t,e,i,r,n),this},e.prototype.arcTo=function(t,e,i,r,n,o){return this.paths.length>0&&va(this.paths).arcTo(t,e,i,r,n,o),this},e.prototype.close=function(){return this.paths.length>0&&va(this.paths).close(),this},e.prototype._bbox=function(t){return nc(this.paths,!0,t)},e.prototype.rawBBox=function(){return nc(this.paths,!1)},e.prototype._containsPoint=function(t){for(var e=this.paths,i=0;i<e.length;i++)if(e[i]._containsPoint(t))return!0;return!1},e.prototype._isOnPath=function(t){for(var e=this.paths,i=this.options.stroke.width,r=0;r<e.length;r++)if(e[r]._isOnPath(t,i))return!0;return!1},e.prototype._clippedBBox=function(t){return oc(this.paths,this.currentTransform(t))},Object.defineProperties(e.prototype,i),e}(Ph(Ih(Dh))),lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRing=function(t,e){var i=t.startAngle+180,r=t.angle+i;t.angle>0&&i===r&&(r+=.001);var n=new Kl(t.center.x,t.center.y),o=Math.max(t.radius,0),s=Math.max(t.innerRadius,0),a=new mh(n,{startAngle:i,endAngle:r,radiusX:o,radiusY:o}),l=sc.fromArc(a,e).close();if(s){a.radiusX=a.radiusY=s;var h=a.pointAt(r);l.lineTo(h.x,h.y),l.arc(r,i,s,s,!0)}else l.lineTo(n.x,n.y);return l},e}(Zs);lc.current=new lc;const hc=lc;var cc=Math.PI/2,pc=function(t){function e(e,i){void 0===e&&(e=new Kl),void 0===i&&(i=0),t.call(this),this.setCenter(e),this.setRadius(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setCenter=function(t){return this._observerField("center",Kl.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.equals=function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},e.prototype.clone=function(){return new e(this.center.clone(),this.radius)},e.prototype.pointAt=function(t){return this._pointAt(wa(t))},e.prototype.bbox=function(t){for(var e=lh(this.center,this.radius,this.radius,t),i=Kl.maxPoint(),r=Kl.minPoint(),n=0;n<4;n++){var o=this._pointAt(e.x+n*cc).transformCopy(t),s=this._pointAt(e.y+n*cc).transformCopy(t),a=new Kl(o.x,s.y);i=Kl.min(i,a),r=Kl.max(r,a)}return Jl.fromPoints(i,r)},e.prototype._pointAt=function(t){var e=this.center,i=this.radius;return new Kl(e.x+i*Math.cos(t),e.y+i*Math.sin(t))},e.prototype.containsPoint=function(t){var e=this.center,i=this.radius;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)},e.prototype._isOnPath=function(t,e){var i=this.center,r=this.radius,n=i.distanceTo(t);return r-e<=n&&n<=r+e},e}(ql(Hl,["radius"]));const uc=pc;function dc(t){var e="_"+t;return function(t){return ds(t)?(this._observerField(e,t),this.geometryChange(),this):this[e]}}const fc=function(t,e){void 0===e&&(e=["geometry"]);var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=dc(e[i])}(i.prototype,e),i};var vc=function(t){function e(e,i){void 0===e&&(e=new uc),void 0===i&&(i={}),t.call(this,i),this.geometry(e),ds(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Circle"},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Ph(Ih(fc(Dh))));const mc=vc;const gc=function(t,e){return function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.traverse=function(t){for(var i=this[e],r=0;r<i.length;r++){var n=i[r];n.traverse?n.traverse(t):t(n)}return this},i}(t)};var yc=function(t){function e(e){t.call(this,e),this.children=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Group"},e.prototype.childrenChange=function(t,e,i){this.trigger("childrenChange",{action:t,items:e,index:i})},e.prototype.append=function(){return Qs(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},e.prototype.insert=function(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},e.prototype.insertAt=function(t,e){return this.insert(e,t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this},e.prototype.removeAt=function(t){if(0<=t&&t<this.children.length){var e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this},e.prototype.clear=function(){var t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this},e.prototype.bbox=function(t){return nc(this.children,!0,this.currentTransform(t))},e.prototype.rawBBox=function(){return nc(this.children,!1)},e.prototype._clippedBBox=function(t){return oc(this.children,this.currentTransform(t))},e.prototype.currentTransform=function(t){return Dh.prototype.currentTransform.call(this,t)||null},e.prototype.containsPoint=function(t,e){if(this.visible())for(var i=this.children,r=this.currentTransform(e),n=0;n<i.length;n++)if(i[n].containsPoint(t,r))return!0;return!1},e.prototype._reparent=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=r.parent;n&&n!==this&&n.remove&&n.remove(r),r.parent=e}},Object.defineProperties(e.prototype,i),e}(gc(Dh,"children"));const bc=yc;function wc(t){return.5-Math.cos(t*Math.PI)/2}function xc(t){return t}function _c(t,e,i,r){var n=1.70158,o=0,s=r;return 0===t?i:1===t?i+r:(o||(o=.5),s<Math.abs(r)?(s=r,n=o/4):n=o/(2*Math.PI)*Math.asin(r/s),s*Math.pow(2,-10*t)*Math.sin((Number(t)-n)*(1.1*Math.PI)/o)+r+i)}var kc=function(t){var e="undefined"!=typeof window?window:{},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};kc=function(t){return i.call(e,t)},kc(t)};const Sc=kc;var Cc,Ec=function(t){function e(){t.call(this),this._items=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={current:{configurable:!0}};return i.current.get=function(){return Cc||(Cc=new e),Cc},e.prototype.register=function(t,e){this._items.push({name:t,type:e})},e.prototype.create=function(t,e){var i,r=this._items;if(e&&e.type)for(var n=e.type.toLowerCase(),o=0;o<r.length;o++)if(r[o].name.toLowerCase()===n){i=r[o];break}if(i)return new i.type(t,e)},Object.defineProperties(e,i),e}(Zs);const Tc=Ec;var Ac=function(t){function e(e,i){t.call(this),this.options=Object.assign({},this.options,i),this.element=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={options:{configurable:!0}};return e.create=function(t,e,i){return Tc.current.create(t,e,i)},i.options.get=function(){return this._options||{duration:500,easing:"swing"}},i.options.set=function(t){this._options=t},e.prototype.setup=function(){},e.prototype.step=function(){},e.prototype.play=function(){var t=this,e=this.options,i=e.duration,r=e.delay;void 0===r&&(r=0);var o=n[e.easing],s=ya()+r,a=s+i;0===i?(this.step(1),this.abort()):setTimeout((function(){var e=function(){if(!t._stopped){var r=ya(),n=ma(r-s,0,i),l=o(n/i,n,0,1,i);t.step(l),r<a?Sc(e):t.abort()}};e()}),r)},e.prototype.abort=function(){this._stopped=!0},e.prototype.destroy=function(){this.abort()},Object.defineProperties(e.prototype,i),e}(Zs);const Mc=Ac;var Oc=function(t){function e(e){t.call(this),this.children=[],this.options=_s({},this.options,this.initUserOptions(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){return t},e.prototype.reflow=function(t){for(var e,i=this.children,r=0;r<i.length;r++){var n=i[r];n.reflow(t),e=e?e.wrap(n.box):n.box.clone()}this.box=e||t},e.prototype.destroy=function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},e.prototype.getRoot=function(){var t=this.parent;return t?t.getRoot():null},e.prototype.getSender=function(){var t=this.getService();if(t)return t.sender},e.prototype.getService=function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},e.prototype.translateChildren=function(t,e){for(var i=this.children,r=i.length,n=0;n<r;n++)i[n].box.translate(t,e)},e.prototype.append=function(){for(var t=arguments,e=this,i=0;i<arguments.length;i++){var r=t[i];e.children.push(r),r.parent=e}},e.prototype.renderVisual=function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},e.prototype.addVisual=function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},e.prototype.renderChildren=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].renderVisual()},e.prototype.createVisual=function(){this.visual=new bc({zIndex:this.options.zIndex,visible:sl(this.options.visible,!0)})},e.prototype.createAnimation=function(){this.visual&&this.options.animation&&(this.animation=Mc.create(this.visual,this.options.animation))},e.prototype.appendVisual=function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):$a(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},e.prototype.clipRoot=function(){return this.parent?this.parent.clipRoot():this},e.prototype.stackRoot=function(){return this.parent?this.parent.stackRoot():this},e.prototype.stackVisual=function(t){var e,i=t.options.zIndex||0,r=this.visual.children,n=r.length;for(e=0;e<n;e++){var o=r[e];if(sl(o.options.zIndex,0)>i)break}this.visual.insert(e,t)},e.prototype.traverse=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++){var n=e[r];t(n),n.traverse&&n.traverse(t)}},e.prototype.closest=function(t){for(var e=this,i=!1;e&&!i;)(i=t(e))||(e=e.parent);if(i)return e},e.prototype.renderComplete=function(){},e.prototype.hasHighlight=function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible)},e.prototype.toggleHighlight=function(t,e){var i=this,r=(this.options||{}).highlight||{},n=r.visual,o=this._highlight;if(!o){var s={fill:{color:ss,opacity:e||.2},stroke:{color:ss,width:1,opacity:e||.2}};if(n){if(!(o=this._highlight=n(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(s)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else o=this._highlight=this.createHighlight(s);$a(o.options.zIndex)||(o.options.zIndex=sl(r.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(t)},e.prototype.createGradientOverlay=function(t,e,i){var r=new sc(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},e));return r.segments.elements(t.segments.elements()),r},e.prototype.createGradient=function(t){if(this.parent)return this.parent.createGradient(t)},e.prototype.supportsPointInactiveOpacity=function(){return!0},e}(Zs);Oc.prototype.options={};const Dc=Oc;var Pc=function(t){function e(e){t.call(this,e),this.options.margin=As(this.options.margin),this.options.padding=As(this.options.padding)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){var i,r=this,n=this.options,o=n.width,s=n.height,a=n.shrinkToFit,l=o&&s,h=n.margin,c=n.padding,p=n.border.width,u=function(){r.align(e,ls,n.align),r.align(e,hs,n.vAlign),r.paddingBox=i.clone().unpad(h).unpad(p)},d=e.clone();l&&(d.x2=d.x1+o,d.y2=d.y1+s),a&&d.unpad(h).unpad(p).unpad(c),t.prototype.reflow.call(this,d),i=l?this.box=new eh(0,0,o,s):this.box,a&&l?(u(),d=this.contentBox=this.paddingBox.clone().unpad(c)):(d=this.contentBox=i.clone(),i.pad(c).pad(p).pad(h),u()),this.translateChildren(i.x1-d.x1+h.left+p+c.left,i.y1-d.y1+h.top+p+c.top);for(var f=this.children,v=0;v<f.length;v++){var m=f[v];m.reflow(m.box)}},e.prototype.align=function(t,e,i){this.box.align(t,e,i)},e.prototype.hasBox=function(){var t=this.options;return t.border.width||t.background},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(sc.fromRect(this.paddingBox.toRect(),this.visualStyle()))},e.prototype.visualStyle=function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:sl(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e}(Dc);hl(Pc,{align:Ko,vAlign:rs,margin:{},padding:{},border:{color:Bo,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const Rc=Pc;var Ic=function(t){function e(e,i){t.call(this,e),this.pointData=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=this.paddingBox,i=t.type,r=t.rotation,n=e.center(),o=e.width()/2,s=e.height()/2;if(!t.visible||!this.hasBox())return null;var a,l=this.visualStyle();if(i===Fo)a=new mc(new uc([nl(e.x1+o,3),nl(e.y1+s,3)],Math.min(o,s)),l);else if("triangle"===i)a=sc.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(i===Vo)(a=new ac(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),a.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var h=e.toRect();if(i===es){var c=sl(t.borderRadius,h.width()/5);h.setCornerRadius(c)}a=sc.fromRect(h,l)}return r&&a.transform(ph().rotate(-r,[n.x,n.y])),a.options.zIndex=t.zIndex,a},e.prototype.createElement=function(){var t=this,e=this.options.visual,i=this.pointData||{};return e?e({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.visualOptions=function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},e.prototype.createVisual=function(){this.visual=this.createElement()},e}(Rc);hl(Ic,{type:Fo,align:jo,vAlign:jo});const Lc=Ic;var zc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.optionsChange({field:"stops"})},e}(Sh);const Bc=zc;function Nc(t){return function(e){return ds(e)?(this.options.set(t,e),this):this.options.get(t)}}const jc=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Nc(e[i])}(i.prototype,e),i};var Fc=function(t){function e(e,i,r){t.call(this),this.options=new Mh({offset:e,color:i,opacity:ds(r)?r:1}),this.options.addObserver(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(ds(t))return t instanceof e?t:t.length>1?new e(t[0],t[1],t[2]):new e(t.offset,t.color,t.opacity)},e}(jc(Hl,["offset","color","opacity"]));const Vc=Fc;var Hc=function(t){function e(e){void 0===e&&(e={}),t.call(this),this.stops=new Bc(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=na()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Gradient"},e.prototype.userSpace=function(t){return ds(t)?(this._userSpace=t,this.optionsChange(),this):this._userSpace},e.prototype._createStops=function(t){void 0===t&&(t=[]);for(var e=[],i=0;i<t.length;i++)e.push(Vc.create(t[i]));return e},e.prototype.addStop=function(t,e,i){this.stops.push(new Vc(t,e,i))},e.prototype.removeStop=function(t){var e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)},e.prototype.optionsChange=function(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})},e.prototype.geometryChange=function(){this.optionsChange()},Object.defineProperties(e.prototype,i),e}(Hl);const Wc=Hc;var Uc=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.start(e.start||new Kl),this.end(e.end||new Kl(1,0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(qh(Wc,["start","end"]));const qc=Uc;var Gc=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.center(e.center||new Kl),this._radius=ds(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radius=function(t){return ds(t)?(this._radius=t,this.geometryChange(),this):this._radius},e.prototype.fallbackFill=function(t){return ds(t)?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill},e}(qh(Wc,["center"]));const $c=Gc;var Kc="radial";const Xc={glass:{type:"linear",rotation:0,stops:[{offset:0,color:ss,opacity:0},{offset:.25,color:ss,opacity:.3},{offset:1,color:ss,opacity:0}]},sharpBevel:{type:Kc,stops:[{offset:0,color:ss,opacity:.55},{offset:.65,color:ss,opacity:0},{offset:.95,color:ss,opacity:.25}]},roundedBevel:{type:Kc,stops:[{offset:.33,color:ss,opacity:.06},{offset:.83,color:ss,opacity:.2},{offset:.95,color:ss,opacity:0}]},roundedGlass:{type:Kc,supportVML:!1,stops:[{offset:0,color:ss,opacity:0},{offset:.5,color:ss,opacity:.3},{offset:.99,color:ss,opacity:0}]},sharpGlass:{type:Kc,supportVML:!1,stops:[{offset:0,color:ss,opacity:.2},{offset:.15,color:ss,opacity:.15},{offset:.17,color:ss,opacity:.35},{offset:.85,color:ss,opacity:.05},{offset:.87,color:ss,opacity:.15},{offset:.99,color:ss,opacity:0}]},bubbleShadow:{type:Kc,center:[.5,.5],radius:.5}};function Yc(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;var i=Math.min(t.x1,e.x1),r=Math.max(t.x1,e.x1),n=Math.min(t.x2,e.x2),o=Math.max(t.x2,e.x2),s=Math.min(t.y1,e.y1),a=Math.max(t.y1,e.y1),l=Math.min(t.y2,e.y2),h=Math.max(t.y2,e.y2),c=[];return c[0]=new eh(r,s,n,a),c[1]=new eh(i,a,r,l),c[2]=new eh(n,a,o,l),c[3]=new eh(r,l,n,h),t.x1===i&&t.y1===s||e.x1===i&&e.y1===s?(c[4]=new eh(i,s,r,a),c[5]=new eh(n,l,o,h)):(c[4]=new eh(n,s,o,a),c[5]=new eh(i,l,r,h)),zs(c,(function(t){return t.height()>0&&t.width()>0}))[0]}var Zc=function(t){function e(e){t.call(this,e);var i=this.options;i.width=parseInt(i.width,10),i.height=parseInt(i.height,10),this.gradients={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t=this.options,e=this.children,i=new eh(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var r=0;r<e.length;r++)e[r].reflow(i),i=Yc(i,e[r].box)||new eh},e.prototype.createVisual=function(){this.visual=new bc,this.createBackground()},e.prototype.createBackground=function(){var t=this.options,e=t.border||{},i=this.box.clone().pad(t.margin).unpad(e.width),r=sc.fromRect(i.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(r)},e.prototype.getRoot=function(){return this},e.prototype.createGradient=function(t){var e,i=this.gradients,r=il(t),n=Xc[t.gradient];if(i[r])e=i[r];else{var o=Object.assign({},n,t);"linear"===n.type?e=new qc(o):(t.innerRadius&&(o.stops=function(t){for(var e=t.stops,i=t.innerRadius/t.radius*100,r=e.length,n=[],o=0;o<r;o++){var s=Object.assign({},e[o]);s.offset=(s.offset*(100-i)+i)/100,n.push(s)}return n}(o)),(e=new $c(o)).supportVML=!1!==n.supportVML),i[r]=e}return e},e.prototype.cleanGradients=function(){var t=this.gradients;for(var e in t)t[e]._observers=[]},e.prototype.size=function(){var t=this.options;return new eh(0,0,t.width,t.height)},e}(Dc);hl(Zc,{width:600,height:400,background:ss,border:{color:Bo,width:0},margin:As(5),zIndex:-2});const Jc=Zc;var Qc=function(t){function e(e){t.call(this,e),this._initDirection()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initDirection=function(){var t=this.options;t.vertical?(this.groupAxis=ls,this.elementAxis=hs,this.groupSizeField=as,this.elementSizeField=Go,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=hs,this.elementAxis=ls,this.groupSizeField=Go,this.elementSizeField=as,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)},e.prototype.reflow=function(t){this.box=t.clone(),this.reflowChildren()},e.prototype.reflowChildren=function(){var t=this,e=this,i=e.box,r=e.elementAxis,n=e.groupAxis,o=e.elementSizeField,s=e.groupSizeField,a=this.groupOptions(),l=a.groups,h=a.groupsSize,c=a.maxGroupElementsSize,p=l.length,u=i[n+1]+this.alignStart(h,i[s]());if(p){for(var d=u,f=0;f<p;f++){for(var v=l[f],m=v.groupElements,g=i[r+1],y=m.length,b=0;b<y;b++){var w=m[b],x=t.elementSize(w),_=d+t.alignStart(x[s],v.groupSize),k=new eh;k[n+1]=_,k[n+2]=_+x[s],k[r+1]=g,k[r+2]=g+x[o],w.reflow(k),g+=x[o]+t.elementSpacing}d+=v.groupSize+t.groupSpacing}i[n+1]=u,i[n+2]=u+h,i[r+2]=i[r+1]+c}},e.prototype.alignStart=function(t,e){var i=0,r=this.options.align;return r===ts||r===No?i=e-t:r===jo&&(i=(e-t)/2),i},e.prototype.groupOptions=function(){for(var t=this,e=t.box,i=t.children,r=t.elementSizeField,n=t.groupSizeField,o=t.elementSpacing,s=t.groupSpacing,a=nl(e[r]()),l=i.length,h=[],c=0,p=0,u=0,d=0,f=[],v=0;v<l;v++){var m=i[v];m.box||m.reflow(e);var g=this.elementSize(m);this.options.wrap&&nl(p+o+g[r])>a&&(h.push({groupElements:f,groupSize:c,groupElementsSize:p}),d=Math.max(d,p),u+=s+c,c=0,p=0,f=[]),c=Math.max(c,g[n]),p>0&&(p+=o),p+=g[r],f.push(m)}return h.push({groupElements:f,groupSize:c,groupElementsSize:p}),{groups:h,groupsSize:u+=c,maxGroupElementsSize:d=Math.max(d,p)}},e.prototype.elementSize=function(t){return{width:t.box.width(),height:t.box.height()}},e.prototype.createVisual=function(){},e}(Dc);hl(Qc,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const tp=Qc;var ep=function(t){function e(e,i,r){void 0===i&&(i=new Kl),void 0===r&&(r={}),t.call(this,r),this.content(e),this.position(i),this.options.font||(this.options.font="12px sans-serif"),ds(this.options.fill)||this.fill("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Text"},e.prototype.content=function(t){return ds(t)?(this.options.set("content",t),this):this.options.get("content")},e.prototype.measure=function(){return Ua(this.content(),{font:this.options.get("font")})},e.prototype.rect=function(){var t=this.measure(),e=this.position().clone();return new Jl(e,[t.width,t.height])},e.prototype.bbox=function(t){var e=Gl(this.currentTransform(t));return this.rect().bbox(e)},e.prototype.rawBBox=function(){return this.rect().bbox()},e.prototype._containsPoint=function(t){return this.rect().containsPoint(t)},Object.defineProperties(e.prototype,i),e}(Ph(qh(Dh,["position"])));const ip=ep;var rp=ip,np=function(t){function e(e,i){t.call(this,i),this.content=e,this.reflow(new eh)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.size=Ua(this.content,{font:e.font});this.baseline=i.baseline,this.box=new eh(t.x1,t.y1,t.x1+i.width,t.y1+i.height)},e.prototype.createVisual=function(){var t=this.options,e=t.font,i=t.color,r=t.opacity,n=t.cursor;this.visual=new rp(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:i,opacity:r},cursor:n})},e}(Dc);hl(np,{font:Wo,color:Bo});const op=np;function sp(t){var e=t.origin,i=t.bottomRight();return new eh(e.x,e.y,i.x,i.y)}var ap=/\n/m,lp=function(t){function e(e,i,r){t.call(this,i),this.content=e,this.data=r,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new eh)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initContainer=function(){var t=this.options,e=String(this.content).split(ap),i=new tp({vertical:!0,align:t.align,wrap:!1}),r=_s({},t,{opacity:1,animation:null});this.container=i,this.append(i);for(var n=0;n<e.length;n++){var o=new op(e[n].trim(),r);i.append(o)}},e.prototype.reflow=function(e){var i=this.options,r=i.visual;if(this.container.options.align=i.align,r&&!this._boxReflow){var n=e;n.hasSize()||(this._boxReflow=!0,this.reflow(n),this._boxReflow=!1,n=this.box);var o=this.visual=r(this.visualContext(n));o&&(n=sp(o.clippedBBox()||new Jl),o.options.zIndex=i.zIndex),this.box=this.contentBox=this.paddingBox=n}else if(t.prototype.reflow.call(this,e),i.rotation){var s=As(i.margin),a=this.box.unpad(s);this.targetBox=e,this.normalBox=a.clone(),(a=this.rotate()).translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=a.clone(),a.pad(s)}},e.prototype.createVisual=function(){var t=this.options;if(this.visual=new bc({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){var e=sc.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}},e.prototype.renderVisual=function(){if(this.options.visible)if(this.options.visual){var e=this.visual;e&&!$a(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else t.prototype.renderVisual.call(this)},e.prototype.visualContext=function(t){var e=this,i={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return e._boxReflow=!0,e.reflow(t),e._boxReflow=!1,e.getDefaultVisual()}};return this.data&&Object.assign(i,this.data),i},e.prototype.getDefaultVisual=function(){this.createVisual(),this.renderChildren();var t=this.visual;return delete this.visual,t},e.prototype.rotate=function(){var t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,ls,t.align),this.align(this.targetBox,hs,t.vAlign),this.box},e.prototype.rotationTransform=function(){var t=this.options.rotation;if(!t)return null;var e=this.normalBox.center(),i=e.x,r=e.y,n=this.rotatedBox.center();return ph().translate(n.x-i,n.y-r).rotate(t,[i,r])},e}(Rc);const hp=lp;var cp=function(t){function e(e){t.call(this,e),this.append(new hp(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){t.prototype.reflow.call(this,e),this.box.snapTo(e,ls)},e.buildTitle=function(t,i,r){var n,o=t;return"string"==typeof t&&(o={text:t}),(o=Object.assign({visible:!0},r,o))&&o.visible&&o.text&&(n=new e(o),i.append(n)),n},e}(Dc);hl(cp,{color:Bo,position:rs,align:jo,margin:As(5),padding:As(5)});const pp=cp;var up=function(t){function e(e,i,r,n,o){t.call(this,i,o),this.text=i,this.value=e,this.index=r,this.dataItem=n,this.reflow(new eh)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualContext=function(e){var i=t.prototype.visualContext.call(this,e);return i.value=this.value,i.dataItem=this.dataItem,i.format=this.options.format,i.culture=this.options.culture,i},e.prototype.click=function(t,e){t.trigger("axisLabelClick",{element:Ja(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},e.prototype.rotate=function(){if(this.options.alignRotation!==jo){var e=this.normalBox.toRect(),i=this.rotationTransform();this.box=sp(e.bbox(i.matrix()))}else t.prototype.rotate.call(this);return this.box},e.prototype.rotationTransform=function(){var e=this.options,i=e.rotation;if(!i)return null;if(e.alignRotation===jo)return t.prototype.rotationTransform.call(this);var r=ph().rotate(i).matrix(),n=this.normalBox.toRect(),o=this.targetBox.toRect(),s=e.rotationOrigin||rs,a=s===rs||s===No?ls:hs,l=s===rs||s===No?hs:ls,h=s===rs||s===Ko?o.origin:o.bottomRight(),c=n.topLeft().transformCopy(r),p=n.topRight().transformCopy(r),u=n.bottomRight().transformCopy(r),d=n.bottomLeft().transformCopy(r),f=Jl.fromPoints(c,p,u,d),v={};v[l]=o.origin[l]-f.origin[l];var m,g,y=Math.abs(c[l]+v[l]-h[l]),b=Math.abs(p[l]+v[l]-h[l]);nl(y,Uo)===nl(b,Uo)?(m=c,g=p):b<y?(m=p,g=u):(m=c,g=d);var w=m[a]+(g[a]-m[a])/2;return v[a]=o.center()[a]-w,ph().translate(v.x,v.y).rotate(i)},e}(hp);hl(up,{_autoReflow:!1});const dp=up;var fp=function(t){function e(e,i,r){t.call(this,i),this.fields=e,this.chartService=r,this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hide=function(){this.options.visible=!1},e.prototype.show=function(){this.options.visible=!0},e.prototype.render=function(){var t=this,e=this.options;if(e.visible){var i,r,n=e.label,o=e.icon,s=new eh,a=function(){return t},l=o.size,h=this.fields.text;if($a(n)&&n.visible){var c=Ps(n);c?h=c(this.fields):n.format&&(h=this.chartService.format.auto(n.format,h)),n.color||(n.color=n.position===$o?"#fff":o.background),this.label=new hp(h,_s({},n)),this.label.aliasFor=a,n.position!==$o||$a(l)||(o.type===Fo?l=Math.max(this.label.box.width(),this.label.box.height()):(i=this.label.box.width(),r=this.label.box.height()),s.wrap(this.label.box))}o.width=i||l||7,o.height=r||l||7;var p=new Lc(_s({},o));p.aliasFor=a,this.marker=p,this.append(p),this.label&&this.append(this.label),p.reflow(new eh),this.wrapperBox=s.wrap(p.box)}},e.prototype.reflow=function(t){var e,i,r,n=this,o=n.options,s=n.label,a=n.marker,l=n.wrapperBox,h=t.center(),c=o.line.length,p=o.position;o.visible&&(Fs(p,[Ko,ts])?p===Ko?(r=l.alignTo(t,p).translate(-c,t.center().y-l.center().y),o.line.visible&&(e=[t.x1,h.y],this.linePoints=[e,[r.x2,h.y]],i=r.clone().wrapPoint(e))):(r=l.alignTo(t,p).translate(c,t.center().y-l.center().y),o.line.visible&&(e=[t.x2,h.y],this.linePoints=[e,[r.x1,h.y]],i=r.clone().wrapPoint(e))):p===No?(r=l.alignTo(t,p).translate(t.center().x-l.center().x,c),o.line.visible&&(e=[h.x,t.y2],this.linePoints=[e,[h.x,r.y1]],i=r.clone().wrapPoint(e))):(r=l.alignTo(t,p).translate(t.center().x-l.center().x,-c),o.line.visible&&(e=[h.x,t.y1],this.linePoints=[e,[h.x,r.y2]],i=r.clone().wrapPoint(e))),a&&a.reflow(r),s&&(s.reflow(r),a&&(o.label.position===Qo&&s.box.alignTo(a.box,p),s.reflow(s.box))),this.contentBox=r,this.targetBox=t,this.box=i||r)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},e.prototype.renderVisual=function(){var e=this,i=this.options,r=i.visual;i.visible&&r?(this.visual=r(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:i.background,border:i.background,icon:i.icon,label:i.label,line:i.line,position:i.position,visible:i.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}})),this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createLine=function(){var t=this.options.line;if(this.linePoints){var e=sc.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});fs(e),this.visual.append(e)}},e.prototype.click=function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},e.prototype.out=function(t,e){var i=this.eventArgs(e);t.trigger("noteLeave",i)},e.prototype.eventArgs=function(t){var e=this.options;return Object.assign(this.fields,{element:Ja(t),text:$a(e.label)?e.label.text:"",visual:this.visual})},e}(Rc);hl(fp,{icon:{visible:!0,type:Fo},label:{position:$o,visible:!0,align:jo,vAlign:jo},line:{visible:!0},visible:!0,position:rs,zIndex:2});const vp=fp;var mp={format:function(t,e){return e},toString:function(t){return t},parseDate:function(t){return new Date(t)},firstDay:function(){return 0}},gp=function(){},yp={implementation:{configurable:!0}};gp.register=function(t){mp=t},yp.implementation.get=function(){return mp},Object.defineProperties(gp,yp);const bp=gp;var wp=/\{(\d+)(:[^\}]+)?\}/g,xp=function(t){this._intlService=t},_p={intl:{configurable:!0}};_p.intl.get=function(){return this._intlService||bp.implementation},_p.intl.set=function(t){this._intlService=t},xp.prototype.auto=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=this.intl;return gs(t)&&t.match(qo)?r.format.apply(r,[t].concat(e)):r.toString(e[0],t)},xp.prototype.localeAuto=function(t,e,i){var r=this.intl;return gs(t)&&t.match(qo)?t.replace(wp,(function(t,n,o){var s=e[parseInt(n,10)];return r.toString(s,o?o.substring(1):"",i)})):r.toString(e[0],t,i)},Object.defineProperties(xp.prototype,_p);const kp=xp;var Sp=function(t,e){void 0===e&&(e={}),this._intlService=e.intlService,this.sender=e.sender||t,this.format=new kp(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)},Cp={intl:{configurable:!0}};Cp.intl.get=function(){return this._intlService||bp.implementation},Cp.intl.set=function(t){this._intlService=t,this.format.intl=t},Sp.prototype.notify=function(t,e){this.chart&&this.chart.trigger(t,e)},Sp.prototype.isPannable=function(t){var e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t},Object.defineProperties(Sp.prototype,Cp);const Ep=Sp;var Tp,Ap=function(){};Ap.register=function(t){Tp=t},Ap.create=function(t,e){if(Tp)return Tp.create(t,e)};const Mp=Ap;function Op(t,e){var i=t.tickX,r=t.tickY,n=t.position,o=new sc({stroke:{width:e.width,color:e.color}});return t.vertical?o.moveTo(i,n).lineTo(i+e.size,n):o.moveTo(n,r).lineTo(n,r+e.size),fs(o),o}function Dp(t,e){var i=t.lineStart,r=t.lineEnd,n=t.position,o=new sc({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return t.vertical?o.moveTo(i,n).lineTo(r,n):o.moveTo(n,i).lineTo(n,r),fs(o),o}var Pp=function(t){function e(e,i){void 0===i&&(i=new Ep),t.call(this,e),this.chartService=i,this.options.visible||(this.options=_s({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=_s({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==Zo},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=_s({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==Zo},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.labelsCount()}},e.prototype.normalizeLabelRotation=function(t){var e=t.rotation;ks(e)&&(t.alignRotation=e.align,t.rotation=e.angle)},e.prototype.createLabels=function(){var t=this,e=this.options,i=e.vertical?ts:jo,r=_s({},e.labels,{align:i,zIndex:e.zIndex}),n=Math.max(1,r.step);if(this.clearLabels(),r.visible){this.normalizeLabelRotation(r),"auto"===r.rotation&&(r.rotation=0,e.autoRotateLabels=!0);for(var o=this.labelsRange(),s=o.min;s<o.max;s+=n){var a={index:s,count:o.max},l=t.createAxisLabel(s,r,a);l&&(t.append(l),t.labels.push(l))}}},e.prototype.clearLabels=function(){this.children=zs(this.children,(function(t){return!(t instanceof dp)})),this.labels=[]},e.prototype.clearTitle=function(){var t=this;this.title&&(this.children=zs(this.children,(function(e){return e!==t.title})),this.title=void 0)},e.prototype.clear=function(){this.clearLabels(),this.clearTitle()},e.prototype.lineBox=function(){var t=this.options,e=this.box,i=t.vertical,r=t.labels.mirror,n=r?e.x1:e.x2,o=r?e.y2:e.y1,s=t.line.width||0;return i?new eh(n,e.y1,n,e.y2-s):new eh(e.x1,o,e.x2-s,o)},e.prototype.createTitle=function(){var t=this.options,e=_s({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){var i=new hp(e.text,e);this.append(i),this.title=i}},e.prototype.createNotes=function(){var t=this,e=this.options,i=e.notes,r=i.data||[];this.notes=[];for(var n=0;n<r.length;n++){var o=_s({},i,r[n]);o.value=t.parseNoteValue(o.value);var s=new vp({value:o.value,text:o.label.text,dataItem:o},o,t.chartService);s.options.visible&&($a(s.options.position)?e.vertical&&!Fs(s.options.position,[Ko,ts])?s.options.position=e.reverse?Ko:ts:e.vertical||Fs(s.options.position,[rs,No])||(s.options.position=e.reverse?No:rs):e.vertical?s.options.position=e.reverse?Ko:ts:s.options.position=e.reverse?No:rs,t.append(s),t.notes.push(s))}},e.prototype.parseNoteValue=function(t){return t},e.prototype.renderVisual=function(){t.prototype.renderVisual.call(this),this.createPlotBands()},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.createBackground(),this.createLine()},e.prototype.gridLinesVisual=function(){var t=this._gridLines;return t||(t=this._gridLines=new bc({zIndex:-2}),this.appendVisual(this._gridLines)),t},e.prototype.createTicks=function(t){var e=this.options,i=this.lineBox(),r=e.labels.mirror,n=e.majorTicks.visible?e.majorUnit:0,o={vertical:e.vertical};function s(e,n,s){var a=e.length,l=Math.max(1,n.step);if(n.visible)for(var h=n.skip;h<a;h+=l)$a(s)&&h%s==0||(o.tickX=r?i.x2:i.x2-n.size,o.tickY=r?i.y1-n.size:i.y1,o.position=e[h],t.append(Op(o,n)))}s(this.getMajorTickPositions(),e.majorTicks),s(this.getMinorTickPositions(),e.minorTicks,n/e.minorUnit)},e.prototype.createLine=function(){var t=this.options,e=t.line,i=this.lineBox();if(e.width>0&&e.visible){var r=new sc({stroke:{width:e.width,color:e.color,dashType:e.dashType}});r.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&fs(r);var n=this._lineGroup=new bc;n.append(r),this.visual.append(n),this.createTicks(n)}},e.prototype.getActualTickSize=function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},e.prototype.createBackground=function(){var t=this.options,e=this.box,i=t.background;i&&(this._backgroundPath=sc.fromRect(e.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))},e.prototype.createPlotBands=function(){var t=this,e=this.options,i=e.plotBands||[],r=e.vertical,n=this.plotArea;if(0!==i.length){for(var o=this._plotbandGroup=new bc({zIndex:-1}),s=zs(this.pane.axes,(function(e){return e.options.vertical!==t.options.vertical}))[0],a=0;a<i.length;a++){var l=i[a],h=void 0,c=void 0,p=l.label,u=void 0;if(r?(h=(s||n.axisX).lineBox(),c=t.getSlot(l.from,l.to,!0)):(h=t.getSlot(l.from,l.to,!0),c=(s||n.axisY).lineBox()),p&&(p.vAlign=p.position||Ko,u=t.createPlotBandLabel(p,l,new eh(h.x1,c.y1,h.x2,c.y2))),0!==h.width()&&0!==c.height()){var d=new Jl([h.x1,c.y1],[h.width(),c.height()]),f=sc.fromRect(d,{fill:{color:l.color,opacity:l.opacity},stroke:null});o.append(f),u&&o.append(u)}}this.appendVisual(o)}},e.prototype.createPlotBandLabel=function(t,e,i){if(!1===t.visible)return null;var r,n=t.text;if($a(t)&&t.visible){var o=Ps(t);o?n=o({text:n,item:e}):t.format&&(n=this.chartService.format.auto(t.format,n)),t.color||(t.color=this.options.labels.color)}return(r=new hp(n,t)).reflow(i),r.renderVisual(),r.visual},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,r=e.majorGridLines,n=e.minorUnit,o=e.vertical,s=t.options.line.visible,a=r.visible?e.majorUnit:0,l=t.lineBox(),h=l[o?"y1":"x1"],c={lineStart:l[o?"x1":"y1"],lineEnd:l[o?"x2":"y2"],vertical:o},p=[],u=this.gridLinesVisual();function d(t,e,i){var r=t.length,n=Math.max(1,e.step);if(e.visible)for(var o=e.skip;o<r;o+=n){var a=nl(t[o]);Fs(a,p)||o%i==0||s&&h===a||(c.position=a,u.append(Dp(c,e)),p.push(a))}}return d(this.getMajorTickPositions(),r),d(this.getMinorTickPositions(),i,a/n),u.children},e.prototype.reflow=function(t){for(var e=this,i=e.options,r=e.labels,n=e.title,o=i.vertical,s=r.length,a=o?as:Go,l=n?n.box[a]():0,h=this.getActualTickSize()+i.margin+l,c=((this.getRoot()||{}).box||t)[a](),p=0,u=0;u<s;u++){var d=r[u].box[a]();d+h<=c&&(p=Math.max(p,d))}this.box=o?new eh(t.x1,t.y1,t.x1+p+h,t.y2):new eh(t.x1,t.y1,t.x2,t.y1+p+h),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},e.prototype.getLabelsTickPositions=function(){return this.getMajorTickPositions()},e.prototype.labelTickIndex=function(t){return t.index},e.prototype.arrangeLabels=function(){for(var t=this.options,e=this.labels,i=this.labelsBetweenTicks(),r=t.vertical,n=t.labels.mirror,o=this.getLabelsTickPositions(),s=0;s<e.length;s++){var a=e[s],l=this.labelTickIndex(a),h=r?a.box.height():a.box.width(),c=o[l],p=o[l+1],u=void 0,d=void 0;if(r){if(i)u=c+(p-c)/2-h/2;else u=c-h/2;d=u}else i?(u=c,d=p):d=(u=c-h/2)+h;this.positionLabel(a,n,u,d)}},e.prototype.positionLabel=function(t,e,i,r){void 0===r&&(r=i);var n,o=this.options,s=o.vertical,a=this.lineBox(),l=this.getActualTickSize()+o.margin;if(s){var h=a.x2;e?(h+=l,t.options.rotationOrigin=Ko):(h-=l+t.box.width(),t.options.rotationOrigin=ts),n=t.box.move(h,i)}else{var c=a.y1;e?(c-=l+t.box.height(),t.options.rotationOrigin=No):(c+=l,t.options.rotationOrigin=rs),n=new eh(i,c,r,c+t.box.height())}t.reflow(n)},e.prototype.autoRotateLabelAngle=function(t,e){return t.width()<e?0:t.height()>e?-90:-45},e.prototype.autoRotateLabels=function(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var t=this.getMajorTickPositions(),e=this.labels,i=Math.min(e.length,t.length-1),r=0,n=0;n<i;n++){var o=Math.abs(t[n+1]-t[n]),s=e[n].box,a=this.autoRotateLabelAngle(s,o);if(0!==a&&(r=a),-90===r)break}if(0!==r){for(var l=0;l<e.length;l++)e[l].options.rotation=r,e[l].reflow(new eh);return!0}},e.prototype.arrangeTitle=function(){var t=this.options,e=this.title,i=t.labels.mirror,r=t.vertical;e&&(r?(e.options.align=i?ts:Ko,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=i?rs:No),e.reflow(this.box))},e.prototype.arrangeNotes=function(){for(var t=this,e=0;e<this.notes.length;e++){var i=t.notes[e],r=i.options.value,n=void 0;$a(r)?(t.shouldRenderNote(r)?i.show():i.hide(),n=t.noteSlot(r)):i.hide(),i.reflow(n||t.lineBox())}},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.alignTo=function(t){var e=t.lineBox(),i=this.options.vertical,r=i?hs:ls;this.box.snapTo(e,r),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[r+1]-=this.lineBox()[r+1]-e[r+1],this.box[r+2]-=this.lineBox()[r+2]-e[r+2]},e.prototype.axisLabelText=function(t,e,i){var r,n=this,o=Ps(e),s=function(){return e.format?n.chartService.format.localeAuto(e.format,[t],e.culture):t};o?r=o(Object.assign({},i,{get text(){return s()},value:t,format:e.format,culture:e.culture})):r=s();return r},e.prototype.slot=function(t,e,i){var r=this.getSlot(t,e,i);if(r)return r.toRect()},e.prototype.contentBox=function(){var t=this.box.clone(),e=this.labels;if(e.length){var i=this.options.vertical?hs:ls;if(this.chartService.isPannable(i)){var r=this.maxLabelOffset();t[i+1]-=r.start,t[i+2]+=r.end}else{e[0].options.visible&&t.wrap(e[0].box);var n=e[e.length-1];n.options.visible&&t.wrap(n.box)}}return t},e.prototype.maxLabelOffset=function(){for(var t=this.options,e=t.vertical,i=t.reverse,r=this.labelsBetweenTicks(),n=this.getLabelsTickPositions(),o=e?hs:ls,s=this.labels,a=i?1:0,l=i?0:1,h=0,c=0,p=0;p<s.length;p++){var u=s[p],d=this.labelTickIndex(u),f=void 0,v=void 0;r?(f=n[d+a],v=n[d+l]):f=v=n[d],h=Math.max(h,f-u.box[o+1]),c=Math.max(c,u.box[o+2]-v)}return{start:h,end:c}},e.prototype.limitRange=function(t,e,i,r,n){var o=this.options;if(t<i&&n<0&&(!$a(o.min)||o.min<=i)||r<e&&n>0&&(!$a(o.max)||r<=o.max))return null;if(e<i&&n>0||r<t&&n<0)return{min:t,max:e};var s=e-t,a=t,l=e;return t<i&&n<0?(a=el(t,i,r),l=el(t+s,i+s,r)):e>r&&n>0&&(l=el(e,i,r),a=el(e-s,i,r-s)),{min:a,max:l}},e.prototype.valueRange=function(){return{min:this.seriesMin,max:this.seriesMax}},e.prototype.lineDir=function(){var t=this.options;return(t.vertical?-1:1)*(t.reverse?-1:1)},e.prototype.lineInfo=function(){var t=this.options.vertical,e=this.lineBox(),i=t?e.height():e.width(),r=t?hs:ls,n=this.lineDir(),o=r+(1===n?1:2).toString();return{axis:r,axisOrigin:o,axisDir:n,lineBox:e,lineSize:i,lineStart:e[o]}},e.prototype.pointOffset=function(t){var e=this.lineInfo(),i=e.axis,r=e.axisDir,n=e.axisOrigin,o=e.lineBox,s=e.lineSize;return(r>0?t[i]-o[n]:o[n]-t[i])/s},e.prototype.scaleToDelta=function(t,e){var i=el(t,-.999,.999);return i>0?e*Math.min(1,i):e-e/(1+i)},e.prototype.labelsBetweenTicks=function(){return!this.options.justified},e.prototype.prepareUserOptions=function(){},e}(Dc);hl(Pp,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:Bo,visible:!0},title:{visible:!0,position:jo},majorTicks:{align:Qo,size:4,skip:0,step:1},minorTicks:{align:Qo,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:Qo,minorTickType:Zo,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:Bo,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const Rp=Pp;var Ip="milliseconds",Lp="seconds",zp="minutes",Bp="hours",Np="days",jp="weeks",Fp="months",Vp="years",Hp=1e3,Wp=6e4,Up=36e5,qp=864e5,Gp=6048e5,$p=26784e5,Kp=31536e6,Xp={years:Kp,months:$p,weeks:Gp,days:qp,hours:Up,minutes:Wp,seconds:Hp,milliseconds:1};function Yp(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Wp}function Zp(t,e){return new Date(t.getTime()+e)}function Jp(t){var e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function Qp(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function tu(t,e,i,r){var n=t;if(t){var o=Jp(t),s=o.getHours();i===Vp?Qp(n=new Date(o.getFullYear()+e,0,1),0):i===Fp?Qp(n=new Date(o.getFullYear(),o.getMonth()+e,1),s):i===jp?(n=tu(function(t,e){void 0===e&&(e=0);var i=0,r=t.getDay();if(!isNaN(r))for(;r!==e;)0===r?r=6:r--,i++;return Zp(t,-i*qp)}(o,r),7*e,Np),Qp(n,s)):i===Np?Qp(n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+e),s):i===Bp?n=function(t,e){var i=new Date(t);i.setMinutes(0,0,0);var r=(t.getTimezoneOffset()-i.getTimezoneOffset())*Wp;return Zp(i,r+e*Up)}(o,e):i===zp?(n=Zp(o,e*Wp)).getSeconds()>0&&n.setSeconds(0):i===Lp?n=Zp(o,e*Hp):i===Ip&&(n=Zp(o,e)),i!==Ip&&n.getMilliseconds()>0&&n.setMilliseconds(0)}return n}function eu(t,e,i){return tu(Jp(t),0,e,i)}function iu(t,e,i){var r=Jp(t);return r&&eu(r,e,i).getTime()===r.getTime()?r:tu(r,1,e,i)}function ru(t,e){return t&&e?t.getTime()-e.getTime():-1}function nu(t,e){return t.getTime()-e}function ou(t){if(cs(t)){for(var e=[],i=0;i<t.length;i++)e.push(ou(t[i]));return e}if(t)return Jp(t).getTime()}function su(t,e){return t&&e?ou(t)===ou(e):t===e}function au(t,e,i){return Yp(t,e)/Xp[i]}function lu(t,e,i,r){var n=Jp(t),o=Jp(e);return(i===Fp?n.getMonth()-o.getMonth()+12*(n.getFullYear()-o.getFullYear())+au(n,new Date(n.getFullYear(),n.getMonth()),Np)/new Date(n.getFullYear(),n.getMonth()+1,0).getDate():i===Vp?n.getFullYear()-o.getFullYear()+lu(n,new Date(n.getFullYear(),0),Fp,1)/12:i===Np||i===jp?au(n,o,i):nu(n,e)/Xp[i])/r}function hu(t,e,i){return i===Vp?e.getFullYear()-t.getFullYear():i===Fp?12*hu(t,e,Vp)+e.getMonth()-t.getMonth():i===Np?Math.floor(nu(e,t)/qp):Math.floor(nu(e,t)/Xp[i])}function cu(t,e){return gs(e)&&t.parseDate(e)||Jp(e)}function pu(t,e){if(cs(e)){for(var i=[],r=0;r<e.length;r++)i.push(cu(t,e[r]));return i}return cu(t,e)}function uu(t,e){return ms(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}var du=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this._ticks={}},e.prototype.categoriesHash=function(){return""},e.prototype.clone=function(){var t=new e(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t},e.prototype.initUserOptions=function(t){var e=t.categories||[],i=$a(t.min),r=$a(t.max);if(t.srcCategories=t.categories=e,(i||r)&&e.length){var n,o=i?Math.floor(t.min):0;n=r?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(o,n)}return t},e.prototype.rangeIndices=function(){var t=this.options,e=t.categories.length||1;return{min:ms(t.min)?t.min%1:0,max:ms(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0)}},e.prototype.totalRangeIndices=function(t){var e,i=this.options,r=ms(i.min)?i.min:0;if(e=ms(i.max)?i.max:ms(i.min)?r+i.categories.length:this.totalRange().max||1,t){var n=this.totalRange();r=el(r,0,n.max),e=el(e,0,n.max)}return{min:r,max:e}},e.prototype.range=function(){var t=this.options;return{min:ms(t.min)?t.min:0,max:ms(t.max)?t.max:this.totalRange().max}},e.prototype.roundedRange=function(){return this.range()},e.prototype.totalRange=function(){var t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}},e.prototype.scaleOptions=function(){var t=this.rangeIndices(),e=t.min,i=t.max,r=this.lineBox();return{scale:(this.options.vertical?r.height():r.width())/(i-e||1)*(this.options.reverse?-1:1),box:r,min:e,max:i}},e.prototype.arrangeLabels=function(){t.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){var t=this.box,e=this.labels;if(e.length>0){var i=this.options.vertical?hs:ls,r=t[i+1],n=t[i+2],o=e[0],s=tl(e);(o.box[i+1]>n||o.box[i+2]<r)&&(o.options.visible=!1),(s.box[i+1]>n||s.box[i+2]<r)&&(s.options.visible=!1)}},e.prototype.getMajorTickPositions=function(){return this.getTicks().majorTicks},e.prototype.getMinorTickPositions=function(){return this.getTicks().minorTicks},e.prototype.getLabelsTickPositions=function(){return this.getTicks().labelTicks},e.prototype.tickIndices=function(t){for(var e=this.rangeIndices(),i=e.min,r=e.max,n=Math.ceil(r),o=Math.floor(i),s=[];o<=n;)s.push(o),o+=t;return s},e.prototype.getTickPositions=function(t){for(var e=this.options,i=e.vertical,r=e.reverse,n=this.scaleOptions(),o=n.scale,s=n.box,a=n.min,l=s[(i?hs:ls)+(r?2:1)],h=this.tickIndices(t),c=[],p=0;p<h.length;p++)c.push(l+nl(o*(h[p]-a),3));return c},e.prototype.getTicks=function(){var t=this.options,e=this._ticks,i=this.rangeIndices(),r=this.lineBox(),n=r.getHash()+i.min+","+i.max+t.reverse+t.justified;if(e._hash!==n){var o=t.minorTicks.visible||t.minorGridLines.visible;e._hash=n,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,r),e.minorTicks=o?this.filterOutOfRangePositions(this.getTickPositions(.5),r):[]}return e},e.prototype.filterOutOfRangePositions=function(t,e){if(!t.length)return t;for(var i=this.options.vertical?hs:ls,r=function(t){return e[i+1]<=t&&t<=e[i+2]},n=t.length-1,o=0;!r(t[o])&&o<=n;)o++;for(var s=n;!r(t[s])&&s>=0;)s--;return t.slice(o,s+1)},e.prototype.lineInfo=function(){var t=this.options,e=t.vertical,i=t.reverse,r=this.lineBox(),n=e?r.height():r.width(),o=e?hs:ls,s=i?-1:1,a=o+(1===s?1:2).toString();return{axis:o,axisOrigin:a,axisDir:s,lineBox:r,lineSize:n,lineStart:r[a]}},e.prototype.lineDir=function(){return this.options.reverse?-1:1},e.prototype.getSlot=function(t,e,i){var r=this.options,n=r.reverse,o=r.justified,s=this.scaleOptions(),a=s.scale,l=s.box,h=s.min,c=this.lineInfo(),p=c.axis,u=c.lineStart,d=l.clone(),f=!$a(e),v=sl(t,0),m=sl(e,v);m=Math.max(m-1,v);var g=u+(v-h)*a,y=u+((m=Math.max(v,m))+1-h)*a;return f&&o&&(y=g),i&&(g=el(g,l[p+1],l[p+2]),y=el(y,l[p+1],l[p+2])),d[p+1]=n?y:g,d[p+2]=n?g:y,d},e.prototype.limitSlot=function(t){var e=this.options.vertical?hs:ls,i=this.lineBox(),r=t.clone();return r[e+1]=el(t[e+1],i[e+1],i[e+2]),r[e+2]=el(t[e+2],i[e+1],i[e+2]),r},e.prototype.slot=function(e,i,r){var n=Math.floor(this.options.min||0),o=e,s=i;return"string"==typeof o?o=this.categoryIndex(o):ms(o)&&(o-=n),"string"==typeof s?s=this.categoryIndex(s):ms(s)&&(s-=n),t.prototype.slot.call(this,o,s,r)},e.prototype.pointCategoryIndex=function(t){var e=this.options,i=e.reverse,r=e.justified,n=e.vertical?hs:ls,o=this.scaleOptions(),s=o.scale,a=o.box,l=o.min,h=o.max,c=i?h:l,p=a[n+1],u=a[n+2],d=t[n];if(d<p||d>u)return null;var f=c+(d-p)/s,v=f%1;return r?f=Math.round(f):0===v&&f>0&&f--,Math.floor(f)},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},e.prototype.categoryIndex=function(t){return this.totalIndex(t)-Math.floor(this.options.min||0)},e.prototype.categoryAt=function(t,e){var i=this.options;return(e?i.srcCategories:i.categories)[t]},e.prototype.categoriesCount=function(){return(this.options.categories||[]).length},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),r=e.vertical?i.height():i.width(),n=e.categories.length,o=nl(t/(r/n),Uo);return{min:o,max:n+o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.totalRangeIndices(),n=r.max-r.min,o=this.scaleToDelta(t,n),s=i*o,a=(1-i)*o,l=r.min+s,h=r.max-a;return h-l<.1&&(h=l+.1),{min:l,max:h}},e.prototype.zoomRange=function(t,e){var i=this.totalRange(),r=i.min,n=i.max,o=this.scaleRange(t,e);return{min:el(o.min,r,n),max:el(o.max,r,n)}},e.prototype.labelsCount=function(){var t=this.labelsRange();return t.max-t.min},e.prototype.labelsRange=function(){var t=this.options,e=t.justified,i=t.labels,r=this.totalRangeIndices(!0),n=r.min,o=r.max,s=Math.floor(n);return e?(n=Math.ceil(n),o=Math.floor(o)):(n=Math.floor(n),o=Math.ceil(o)),{min:(n>i.skip?i.skip+i.step*Math.ceil((n-i.skip)/i.step):i.skip)-s,max:(t.categories.length?o+(e?1:0):0)-s}},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=r.dataItems?r.dataItems[t]:null,o=sl(r.categories[t],"");i.dataItem=n;var s=this.axisLabelText(o,e,i);return new dp(o,s,t,n,e)},e.prototype.shouldRenderNote=function(t){var e=this.totalRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)},e.prototype.noteSlot=function(t){var e=this.options,i=t-Math.floor(e.min||0);return this.getSlot(i)},e.prototype.arrangeNotes=function(){t.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},e.prototype.hideOutOfRangeNotes=function(){var t=this.notes,e=this.box;if(t&&t.length)for(var i=this.options.vertical?hs:ls,r=e[i+1],n=e[i+2],o=0;o<t.length;o++){var s=t[o];s.box&&(n<s.box[i+1]||s.box[i+2]<r)&&s.hide()}},e.prototype.pan=function(t){var e=this.totalRangeIndices(!0),i=this.scaleOptions().scale,r=nl(t/i,Uo),n=this.totalRange(),o=e.min+r,s=e.max+r;return this.limitRange(o,s,0,n.max,r)},e.prototype.pointsRange=function(t,e){var i=this.options,r=i.reverse,n=i.vertical?hs:ls,o=this.totalRangeIndices(!0),s=this.scaleOptions(),a=s.scale,l=s.box[n+(r?2:1)],h=t[n]-l,c=e[n]-l,p=o.min+h/a,u=o.min+c/a,d=Math.min(p,u),f=Math.max(p,u);if(f-d>=.01)return{min:d,max:f}},e.prototype.valueRange=function(){return this.range()},e.prototype.totalIndex=function(t){var e=this.options,i=this._categoriesMap?this._categoriesMap.get(t):function(t,e){if(t instanceof Date){for(var i=e.length,r=0;r<i;r++)if(su(e[r],t))return r;return-1}return e.indexOf(t)}(t,e.srcCategories);return i},e.prototype.currentRangeIndices=function(){var t=this.options,e=0;return ms(t.min)&&(e=Math.floor(t.min)),{min:e,max:ms(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1}},e.prototype.mapCategories=function(){if(!this._categoriesMap)for(var t=this._categoriesMap=new js,e=this.options.srcCategories,i=0;i<e.length;i++)t.set(e[i],i)},e.prototype.totalCount=function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},e}(Rp);hl(du,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:Bo},labels:{zIndex:1},justified:!1,_deferLabels:!0});const fu=du;var vu=3e5,mu={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},gu=[Ip,Lp,zp,Bp,Np,jp,Fp,Vp],yu="fit";function bu(t){var e=t._range;return e||((e=t._range=cl(t)).min=Jp(e.min),e.max=Jp(e.max)),e}var wu=function(t){this.options=t};wu.prototype.displayIndices=function(){return{min:0,max:1}},wu.prototype.displayRange=function(){return{}},wu.prototype.total=function(){return{}},wu.prototype.valueRange=function(){return{}},wu.prototype.valueIndex=function(){return-1},wu.prototype.values=function(){return[]},wu.prototype.totalIndex=function(){return-1},wu.prototype.valuesCount=function(){return 0},wu.prototype.totalCount=function(){return 0},wu.prototype.dateAt=function(){return null};var xu=function(t,e,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;var r=i.roundToBaseUnit,n=i.justified;this.start=tu(t,0,i.baseUnit,i.weekStartDay);var o=this.roundToTotalStep(e),s=!n&&su(e,o)&&!i.justifyEnd;this.end=this.roundToTotalStep(e,!n,s?1:0);var a=i.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=r?this.valueStart:a;var l=i.max;if(l){var h=!n&&su(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,h),this.displayEnd=r?this.roundToTotalStep(l,!n):i.max}else this.valueEnd=o,this.displayEnd=r||s?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function _u(t,e,i){for(var r,n,o,s=bu(t.categories),a=(t.max||s.max)-(t.min||s.min),l=t.autoBaseUnitSteps,h=t.maxDateGroups,c=t.baseUnit===yu,p=e?gu.indexOf(e):0,u=c?gu[p++]:t.baseUnit,d=a/Xp[u],f=d;!n||d>=h;){r=r||l[u].slice(0);do{o=r.shift()}while(o&&e===u&&o<i);if(o)d=f/(n=o);else{if(u===tl(gu)){n=Math.ceil(f/h);break}if(!c){d>h&&(n=Math.ceil(f/h));break}u=gu[p++]||tl(gu),f=a/Xp[u],r=null}}t.baseUnitStep=n,t.baseUnit=u}function ku(t){var e=(t.baseUnit||"").toLowerCase();return e!==yu&&!Fs(e,gu)&&function(t){for(var e,i,r=t.categories,n=$a(r)?r.length:0,o=Xo,s=0;s<n;s++){var a=r[s];if(a&&e){var l=Yp(a,e);l>0&&(i=(o=Math.min(o,l))>=Kp?Vp:o>=24192e5?Fp:o>=Gp?jp:o>=qp?Np:o>=Up?Bp:o>=Wp?zp:Lp)}e=a}t.baseUnit=i||Np}(t),e!==yu&&"auto"!==t.baseUnitStep||_u(t),t}xu.prototype.displayRange=function(){return{min:this.displayStart,max:this.displayEnd}},xu.prototype.displayIndices=function(){if(!this._indices){var t=this.options,e=t.baseUnit,i=t.baseUnitStep,r=lu(this.displayStart,this.valueStart,e,i),n=lu(this.displayEnd,this.valueStart,e,i);this._indices={min:r,max:n}}return this._indices},xu.prototype.total=function(){return{min:this.start,max:this.end}},xu.prototype.totalCount=function(){return this.totalIndex(this.end)+(this.options.justified?1:0)},xu.prototype.valueRange=function(){return{min:this.valueStart,max:this.valueEnd}},xu.prototype.valueIndex=function(t){var e=this.options;return Math.floor(lu(t,this.valueStart,e.baseUnit,e.baseUnitStep))},xu.prototype.totalIndex=function(t){var e=this.options;return Math.floor(lu(t,this.start,e.baseUnit,e.baseUnitStep))},xu.prototype.dateIndex=function(t){var e=this.options;return lu(t,this.valueStart,e.baseUnit,e.baseUnitStep)},xu.prototype.valuesCount=function(){return this.valueIndex(this.valueEnd)+1},xu.prototype.values=function(){var t=this._values;if(!t){var e=this.options,i=this.valueRange();this._values=t=[];for(var r=i.min;r<=i.max;)t.push(r),r=tu(r,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t},xu.prototype.dateAt=function(t,e){var i=this.options;return tu(e?this.start:this.valueStart,i.baseUnitStep*t,i.baseUnit,i.weekStartDay)},xu.prototype.roundToTotalStep=function(t,e,i){var r=this.options,n=r.baseUnit,o=r.baseUnitStep,s=r.weekStartDay,a=this.start,l=lu(t,a,n,o),h=e?Math.ceil(l):Math.floor(l);return i&&(h+=i),tu(a,h*o,n,s)};var Su=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(Object.assign({},this.options),this.chartService);return t.createLabels(),t},e.prototype.categoriesHash=function(){var t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t},e.prototype.initUserOptions=function(t){return t},e.prototype.initFields=function(){t.prototype.initFields.call(this);var e=this.chartService,i=e.intl,r=this.options,n=r.categories||[];if(n._parsed||((n=pu(i,n))._parsed=!0),r=_s({roundToBaseUnit:!0},r,{categories:n,min:cu(i,r.min),max:cu(i,r.max),weekStartDay:uu(r,i)}),e.panning&&e.isPannable(r.vertical?hs:ls)&&(r.roundToBaseUnit=!1),r.userSetBaseUnit=r.userSetBaseUnit||r.baseUnit,r.userSetBaseUnitStep=r.userSetBaseUnitStep||r.baseUnitStep,this.options=r,r.srcCategories=n,n.length>0){var o=bu(n),s=r.maxDivisions;if(this.dataRange=new xu(o.min,o.max,ku(r)),s){var a=this.dataRange.displayRange(),l=Object.assign({},r,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:a.min,max:a.max,maxDateGroups:s}),h=this.dataRange.options;_u(l,h.baseUnit,h.baseUnitStep),this.divisionRange=new xu(o.min,o.max,l)}else this.divisionRange=this.dataRange}else r.baseUnit=r.baseUnit||Np,this.dataRange=this.divisionRange=new wu(r);this.rangeLabels=[]},e.prototype.tickIndices=function(e){var i=this.dataRange,r=this.divisionRange,n=r.valuesCount();if(!this.options.maxDivisions||!n)return t.prototype.tickIndices.call(this,e);var o=[],s=r.values(),a=0;this.options.justified||(s=s.concat(r.dateAt(n)),a=.5);for(var l=0;l<s.length;l++)if(o.push(i.dateIndex(s[l])+a),1!==e&&l>=1){var h=o.length-1;o.splice(l,0,o[h-1]+(o[h]-o[h-1])*e)}return o},e.prototype.shouldRenderNote=function(t){var e=this.range(),i=this.options.categories||[];return ru(t,e.min)>=0&&ru(t,e.max)<=0&&i.length},e.prototype.parseNoteValue=function(t){return cu(this.chartService.intl,t)},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.translateRange=function(t){var e=this.options,i=e.baseUnit,r=e.weekStartDay,n=e.vertical,o=this.lineBox(),s=n?o.height():o.width(),a=this.range(),l=s/(a.max-a.min),h=nl(t/l,Uo);if(a.min&&a.max){var c=Zp(e.min||a.min,h),p=Zp(e.max||a.max,h);a={min:tu(c,0,i,r),max:tu(p,0,i,r)}}return a},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},e.prototype.pan=function(t){if(this.isEmpty())return null;var e=this.options,i=this.lineBox(),r=e.vertical?i.height():i.width(),n=this.dataRange.displayRange(),o=n.min,s=n.max,a=this.dataRange.total(),l=nl(t/(r/(s-o)),Uo)*(e.reverse?-1:1),h=Zp(o,l),c=Zp(s,l),p=this.limitRange(ou(h),ou(c),ou(a.min),ou(a.max),l);return p?(p.min=Jp(p.min),p.max=Jp(p.max),p.baseUnit=e.baseUnit,p.baseUnitStep=e.baseUnitStep||1,p.userSetBaseUnit=e.userSetBaseUnit,p.userSetBaseUnitStep=e.userSetBaseUnitStep,p):void 0},e.prototype.pointsRange=function(e,i){if(this.isEmpty())return null;var r=t.prototype.pointsRange.call(this,e,i),n=this.dataRange.displayRange(),o=this.dataRange.displayIndices(),s=nu(n.max,n.min)/(o.max-o.min),a=this.options;return{min:Zp(n.min,r.min*s),max:Zp(n.min,r.max*s),baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}},e.prototype.scaleRange=function(t,e){if(this.isEmpty())return{};var i=this.options,r=i.userSetBaseUnit===yu,n=this.dataRange.total(),o=this.dataRange.displayRange(),s=o.min,a=o.max,l=Math.abs(this.pointOffset(e)),h=a-s,c=this.scaleToDelta(t,h),p=Math.round(l*c),u=Math.round((1-l)*c),d=this.dataRange.options.baseUnit,f=new Date(s.getTime()+p),v=new Date(a.getTime()-u);if(r){var m,g,y=i.autoBaseUnitSteps,b=i.maxDateGroups,w=tl(y[d])*b*Xp[d],x=nu(a,s),_=nu(v,f),k=gu.indexOf(d);if(_<Xp[d]&&d!==Ip)d=gu[k-1],f=Zp(s,g=(x-(b-1)*(m=tl(y[d]))*Xp[d])/2),v=Zp(a,-g);else if(_>w&&d!==Vp){var S=0;do{k++,d=gu[k],S=0,g=2*Xp[d];do{m=y[d][S],S++}while(S<y[d].length&&g*m<x)}while(d!==Vp&&g*m<x);(g=(g*m-x)/2)>0&&(f=Zp(s,-g),v=Zp(a,g),f=Zp(f,el(v,n.min,n.max)-v),v=Zp(v,el(f,n.min,n.max)-f))}}return f&&v&&nu(v,f)>0?{min:f,max:v,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0},e.prototype.zoomRange=function(t,e){var i=this.dataRange.total(),r=this.scaleRange(t,e);return r&&(r.min<i.min&&(r.min=i.min),r.max>i.max&&(r.max=i.max)),r},e.prototype.range=function(){return this.dataRange.displayRange()},e.prototype.createLabels=function(){t.prototype.createLabels.call(this),this.createRangeLabels()},e.prototype.clearLabels=function(){t.prototype.clearLabels.call(this),this.rangeLabels=[]},e.prototype.arrangeLabels=function(){this.arrangeRangeLabels(),t.prototype.arrangeLabels.call(this)},e.prototype.arrangeRangeLabels=function(){var t=this.options,e=this.rangeLabels;if(0!==e.length){var i=this.lineBox(),r=t.vertical,n=t.rangeLabels.mirror||t.labels.mirror,o=e[0];if(o){var s=r?i.y1-o.box.height()/2:i.x1;this.positionLabel(o,n,s)}var a=e[1];if(a){var l=r?i.y2-a.box.height()/2:i.x2;this.positionLabel(a,n,l)}}},e.prototype.autoRotateLabels=function(){t.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){t.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},e.prototype.hideOverlappingLabels=function(){var t=this.rangeLabels,e=this.labels;if(0!==t.length){var i=t[0];if(i&&i.options.visible)for(var r=0;r<e.length;r++){if(!s(i,e[r]))break}var n=t[1];if(n&&n.options.visible)for(var o=e.length-1;o>0;--o){if(!s(n,e[o]))break}}function s(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}},e.prototype.contentBox=function(){for(var e=t.prototype.contentBox.call(this),i=this.rangeLabels,r=0;r<i.length;r++){var n=i[r];n.options.visible&&e.wrap(n.box)}return e},e.prototype.createAxisLabel=function(t,e,i){void 0===i&&(i={});var r=this.options,n=r.dataItems&&!r.maxDivisions?r.dataItems[t]:null,o=this.divisionRange.dateAt(t),s=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||s,i.dataItem=n;var a=this.axisLabelText(o,e,i);if(a)return new dp(o,a,t,n,e)},e.prototype.createRangeLabels=function(){var t=this,e=this.divisionRange,i=e.displayStart,r=e.displayEnd,n=this.options,o=Object.assign({},n.labels,n.rangeLabels,{align:jo,zIndex:n.zIndex});if(!0===o.visible){this.normalizeLabelRotation(o),o.alignRotation=jo,"auto"===o.rotation&&(o.rotation=0,n.autoRotateRangeLabels=!0);var s=o.dateFormats[this.divisionRange.options.baseUnit];o.format=o.format||s;var a=function(e,i,r){if(r){var n=new dp(i,r,e,null,o);t.append(n),t.rangeLabels.push(n)}};a(0,i,this.axisLabelText(i,o,{index:0,count:2})),a(1,r,this.axisLabelText(r,o,{index:1,count:2}))}},e.prototype.autoRotateRangeLabels=function(){var t=this,e=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===e.length){var i=function(e,i,r){var n=2*Math.abs(i[r+1]-i[r]),o=t.autoRotateLabelAngle(e.box,n);0!==o&&(e.options.rotation=o,e.reflow(new eh))},r=this.getMajorTickPositions();i(e[0],r,0),i(e[1],r,r.length-2)}},e.prototype.categoryIndex=function(t){return this.dataRange.valueIndex(t)},e.prototype.slot=function(t,e,i){var r=this.dataRange,n=t,o=e;n instanceof Date&&(n=r.dateIndex(n)),o instanceof Date&&(o=r.dateIndex(o));var s=this.getSlot(n,o,i);if(s)return s.toRect()},e.prototype.getSlot=function(e,i,r){var n=e,o=i;return typeof n===Jo&&(n=this.categoryIndex(n)),typeof o===Jo&&(o=this.categoryIndex(o)),t.prototype.getSlot.call(this,n,o,r)},e.prototype.valueRange=function(){var t=bu(this.options.srcCategories);return{min:Jp(t.min),max:Jp(t.max)}},e.prototype.categoryAt=function(t,e){return this.dataRange.dateAt(t,e)},e.prototype.categoriesCount=function(){return this.dataRange.valuesCount()},e.prototype.rangeIndices=function(){return this.dataRange.displayIndices()},e.prototype.labelsBetweenTicks=function(){return!this.divisionRange.options.justified},e.prototype.prepareUserOptions=function(){this.isEmpty()||(this.options.categories=this.dataRange.values())},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)},e.prototype.totalIndex=function(t){return this.dataRange.totalIndex(t)},e.prototype.currentRangeIndices=function(){var t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalRange=function(){return this.dataRange.total()},e.prototype.totalCount=function(){return this.dataRange.totalCount()},e.prototype.isEmpty=function(){return!this.options.srcCategories.length},e.prototype.roundedRange=function(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var t=this.options,e=bu(t.srcCategories);return new xu(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:t.justified})).displayRange()},e}(fu);hl(Su,{type:Ho,labels:{dateFormats:mu},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const Cu=Su;function Eu(t,e){return nl(Math.floor(t/e)*e,Uo)}function Tu(t,e){return nl(Math.ceil(t/e)*e,Uo)}function Au(t){return Math.max(Math.min(t,vu),-3e5)}var Mu=Math.pow(10,-9),Ou=function(t){function e(e,i,r,n){t.call(this,Object.assign({},r,{seriesMin:e,seriesMax:i}),n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=function(t,e,i){var r=i.narrowRange,n=function(t,e,i){if(!t&&!e)return 0;var r;if(t>=0&&e>=0){var n=t===e?0:t;if(!1===i||!i&&(e-n)/e>.2)return 0;r=Math.max(0,n-(e-n)/2)}else r=t;return r}(t,e,r),o=function(t,e,i){if(!t&&!e)return 1;var r;if(t<=0&&e<=0){var n=t===e?0:e,o=Math.abs((n-t)/n);if(!1===i||!i&&o>.2)return 0;r=Math.min(0,n-(t-n)/2)}else r=e;return r}(t,e,r),s=Nl(n,o),a={majorUnit:s};!1!==i.roundToMajorUnit&&(n<0&&Du(n,s,1/3)&&(n-=s),o>0&&Du(o,s,1/3)&&(o+=s));return a.min=Eu(n,s),a.max=Tu(o,s),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:$a(e.min)?Math.min(t.min,e.min):t.min,max:$a(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){var i,r,n=e;if(e){!function(t,e){for(var i=0;i<e.length;i++){var r=e[i];null===t[r]&&(t[r]=void 0)}}(e,["min","max"]),i=$a(e.min),r=$a(e.max);var o=i||r;o&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=Eu(t.min,e.majorUnit),t.max=Tu(t.max,e.majorUnit)):o&&(n=_s(t,e),t.majorUnit=Nl(n.min,n.max))}t.minorUnit=(n.majorUnit||t.majorUnit)/5;var s=_s(t,n);s.min>=s.max&&(i&&!r?s.max=s.min+s.majorUnit:!i&&r&&(s.min=s.max-s.majorUnit));return s}(e,t)},e.prototype.initFields=function(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return 0},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){if(0===t)return 1;var e=this.options,i=e.max-e.min;return Math.floor(nl(i/t,3))+1},e.prototype.getTickPositions=function(t,e){var i=this.options,r=this.lineInfo(),n=r.axisDir,o=r.axisOrigin,s=r.lineBox,a=t*(r.lineSize/(i.max-i.min)),l=this.getDivisions(t),h=[],c=s[o],p=0;e&&(p=e/t);for(var u=0;u<l;u++)u%p!=0&&h.push(nl(c,3)),c+=a*n;return h},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){void 0===i&&(i=!1);var r=this.options,n=this.lineInfo(),o=n.axis,s=n.axisDir,a=n.lineBox,l=n.lineSize,h=n.lineStart,c=s*(l/(r.max-r.min)),p=sl(t,e||0),u=sl(e,t||0);i&&(p=el(p,r.min,r.max),u=el(u,r.min,r.max));var d=Math.min(p,u)-r.min,f=Math.max(p,u)-r.min,v=new eh(a.x1,a.y1,a.x1,a.y1);return v[o+1]=Au(h+c*(s>0?d:f)),v[o+2]=Au(h+c*(s>0?f:d)),v},e.prototype.getValue=function(t){var e=this.options,i=Number(e.max),r=Number(e.min),n=this.pointOffset(t);return n<0||n>1?null:nl(r+n*(i-r),Uo)},e.prototype.translateRange=function(t){var e=this.options,i=e.vertical,r=e.reverse,n=e.max,o=e.min,s=this.lineInfo().lineSize,a=nl(t/(s/(n-o)),Uo);return!i&&!r||i&&r||(a=-a),{min:o+a,max:n+a,offset:a}},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=nl(r.min+t*r.majorUnit,Uo),o=this.axisLabelText(n,e,i);return new dp(n,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e),n=Math.min(i,r),o=Math.max(i,r);if(this.isValidRange(n,o))return{min:n,max:o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.options.max-this.options.min,n=this.scaleToDelta(t,r),o=i*n,s=(1-i)*n,a=nl(this.options.min+o,Uo),l=nl(this.options.max-s,Uo);return l-a<Mu&&(l=a+Mu),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.totalMin,r=this.totalMax,n=this.scaleRange(t,e);return{min:el(n.min,i,r),max:el(n.max,i,r),narrowRange:!1}},e.prototype.isValidRange=function(t,e){return e-t>Mu},e}(Rp);function Du(t,e,i){var r=nl(Math.abs(t%e),Uo);return 0===r||r>e*(1-i)}hl(Ou,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:Bo},labels:{format:"#.####################"},zIndex:1});const Pu=Ou;var Ru=function(t){function e(e,i,r,n){var o=Jp(e),s=Jp(i),a=n.intl,l=r||{};l=function(t,e,i){var r=i.min||t,n=i.max||e,o=i.baseUnit||(n&&r?function(t){var e=Bp;t>=Kp?e=Vp:t>=$p?e=Fp:t>=Gp?e=jp:t>=qp&&(e=Np);return e}(Yp(n,r)):Bp),s=Xp[o],a=i.weekStartDay||0,l=eu(ou(r)-1,o,a)||Jp(n),h=iu(ou(n)+1,o,a),c=(i.majorUnit?i.majorUnit:void 0)||Tu(Nl(l.getTime(),h.getTime()),s)/s,p=hu(l,h,o),u=Tu(p,c)-p,d=Math.floor(u/2),f=u-d;i.baseUnit||delete i.baseUnit;return i.baseUnit=i.baseUnit||o,i.min=i.min||tu(l,-d,o,a),i.max=i.max||tu(h,f,o,a),i.minorUnit=i.minorUnit||c/5,i.majorUnit=c,i}(o,s,l=_s(l||{},{min:cu(a,l.min),max:cu(a,l.max),axisCrossingValue:pu(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:uu(l,a)})),t.call(this,l,n),this.intlService=a,this.seriesMin=o,this.seriesMax=s;var h=l.weekStartDay||0;this.totalMin=ou(eu(ou(o)-1,l.baseUnit,h)),this.totalMax=ou(iu(ou(s)+1,l.baseUnit,h))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){var e=this.options;return Math.floor(hu(e.min,e.max,e.baseUnit)/t+1)},e.prototype.getTickPositions=function(t){for(var e=this.options,i=this.lineInfo(),r=i.axisDir,n=i.lineSize,o=i.lineStart,s=this.getDivisions(t),a=n/nu(e.max,e.min),l=e.weekStartDay||0,h=[o],c=1;c<s;c++){var p=o+nu(tu(e.min,c*t,e.baseUnit,l),e.min)*a*r;h.push(nl(p,3))}return h},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){return Pu.prototype.getSlot.call(this,cu(this.intlService,t),cu(this.intlService,e),i)},e.prototype.getValue=function(t){var e=Pu.prototype.getValue.call(this,t);return null!==e?Jp(e):null},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var r=this.options,n=t*r.majorUnit,o=r.weekStartDay||0,s=r.min;n>0&&(s=tu(s,n,r.baseUnit,o));var a=e.dateFormats[r.baseUnit];e.format=e.format||a;var l=this.axisLabelText(s,e,i);return new dp(s,l,t,null,e)},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),r=e.vertical,n=e.reverse,o=r?i.height():i.width(),s=this.range(),a=o/nu(s.max,s.min),l=nl(t/a,Uo);return!r&&!n||r&&n||(l=-l),{min:Zp(e.min,l),max:Zp(e.max,l),offset:l}},e.prototype.shouldRenderNote=function(t){var e=this.range();return ru(t,e.min)>=0&&ru(t,e.max)<=0},e.prototype.pan=function(t){var e=this.translateRange(t,!0),i=this.limitRange(ou(e.min),ou(e.max),this.totalMin,this.totalMax,e.offset);if(i)return{min:Jp(i.min),max:Jp(i.max)}},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e),n=Math.min(i,r),o=Math.max(i,r);return{min:Jp(n),max:Jp(o)}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),r=this.options.max-this.options.min,n=this.scaleToDelta(t,r),o=i*n,s=(1-i)*n,a=Jp(ou(this.options.min)+o),l=Jp(ou(this.options.max)-s);return l-a<1e3&&(l=Jp(ou(a)+1e3)),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e);return{min:Jp(el(ou(i.min),this.totalMin,this.totalMax)),max:Jp(el(ou(i.max),this.totalMin,this.totalMax))}},e}(Rp);hl(Ru,{type:Ho,majorGridLines:{visible:!0,width:1,color:Bo},labels:{dateFormats:mu}});const Iu=Ru;var Lu=1e-6,zu=function(t){function e(e,i,r,n){var o=_s({majorUnit:10,min:e,max:i},r),s=o.majorUnit,a=function(t,e){var i,r=nl(Nu(t,e),Uo)%1;i=t<=0?e:0!==r&&(r<.3||r>.9)?Math.pow(e,Nu(t,e)+.2):Math.pow(e,Math.ceil(Nu(t,e)));return i}(i,s),l=function(t,e,i){var r=i.majorUnit,n=t;t<=0?n=e<=1?Math.pow(r,-2):1:i.narrowRange||(n=Math.pow(r,Math.floor(Nu(t,r))));return n}(e,i,o),h=function(t,e,i,r){var n=i.min,o=i.max;$a(i.axisCrossingValue)&&i.axisCrossingValue<=0&&Bu();$a(r.max)?r.max<=0&&Bu():o=e;$a(r.min)?r.min<=0&&Bu():n=t;return{min:n,max:o}}(l,a,o,r);o.max=h.max,o.min=h.min,o.minorUnit=r.minorUnit||nl(s-1,Uo),t.call(this,o,n),this.totalMin=$a(r.min)?Math.min(l,r.min):l,this.totalMax=$a(r.max)?Math.max(a,r.max):a,this.logMin=nl(Nu(h.min,s),Uo),this.logMax=nl(Nu(h.max,s),Uo),this.seriesMin=e,this.seriesMax=i,this.createLabels()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return this.options.min},e.prototype.getSlot=function(t,e,i){var r=this,n=r.options,o=r.logMin,s=r.logMax,a=n.majorUnit,l=n.min,h=n.max,c=this.lineInfo(),p=c.axis,u=c.axisDir,d=c.lineBox,f=c.lineSize,v=c.lineStart,m=u*(f/(s-o)),g=sl(t,e||1),y=sl(e,t||1);if(g<=0||y<=0)return null;i&&(g=el(g,l,h),y=el(y,l,h)),g=Nu(g,a),y=Nu(y,a);var b=Math.min(g,y)-o,w=Math.max(g,y)-o,x=new eh(d.x1,d.y1,d.x1,d.y1);return x[p+1]=Au(v+m*(u>0?b:w)),x[p+2]=Au(v+m*(u>0?w:b)),x},e.prototype.getValue=function(t){var e=this,i=e.options,r=e.logMin,n=e.logMax,o=i.majorUnit,s=this.lineInfo(),a=s.axis,l=s.axisDir,h=s.lineStart,c=s.lineSize,p=(n-r)/c,u=l*(t[a]-h);if(u<0||u>c)return null;var d=r+u*p;return nl(Math.pow(o,d),Uo)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.translateRange=function(t){var e=this,i=e.options,r=e.logMin,n=e.logMax,o=i.reverse,s=i.vertical,a=i.majorUnit,l=this.lineBox(),h=s?l.height():l.width(),c=nl(t/(h/(n-r)),Uo);return!s&&!o||s&&o||(c=-c),{min:Math.pow(a,r+c),max:Math.pow(a,n+c),offset:c}},e.prototype.labelsCount=function(){var t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1},e.prototype.getMajorTickPositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},e.prototype.createTicks=function(t){var e=this.options,i=e.majorTicks,r=e.minorTicks,n=e.vertical,o=e.labels.mirror,s=this.lineBox(),a={vertical:n};function l(e,i){a.tickX=o?s.x2:s.x2-i.size,a.tickY=o?s.y1-i.size:s.y1,a.position=e,t.append(Op(a,i))}return i.visible&&this.traverseMajorTicksPositions(l,i),r.visible&&this.traverseMinorTicksPositions(l,r),[]},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,r=e.majorGridLines,n=e.vertical,o=t.lineBox(),s={lineStart:o[n?"x1":"y1"],lineEnd:o[n?"x2":"y2"],vertical:n},a=[],l=this.gridLinesVisual();function h(t,e){Fs(t,a)||(s.position=t,l.append(Dp(s,e)),a.push(t))}return r.visible&&this.traverseMajorTicksPositions(h,r),i.visible&&this.traverseMinorTicksPositions(h,i),l.children},e.prototype.traverseMajorTicksPositions=function(t,e){for(var i=this.lineInfo(),r=i.lineStart,n=i.step,o=this.logMin,s=this.logMax,a=Math.ceil(o)+e.skip;a<=s;a+=e.step){t(nl(r+n*(a-o),Uo),e)}},e.prototype.traverseMinorTicksPositions=function(t,e){for(var i=this.options,r=i.min,n=i.max,o=i.minorUnit,s=i.majorUnit,a=this.lineInfo(),l=a.lineStart,h=a.step,c=this.logMin,p=this.logMax,u=Math.floor(c);u<p;u++)for(var d=this._minorIntervalOptions(u),f=e.skip;f<o;f+=e.step){var v=d.value+f*d.minorStep;if(v>n)break;if(v>=r)t(nl(l+h*(Nu(v,s)-c),Uo),e)}},e.prototype.createAxisLabel=function(t,e,i){var r=Math.ceil(this.logMin+t),n=Math.pow(this.options.majorUnit,r),o=this.axisLabelText(n,e,i);return new dp(n,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),r=this.getValue(e);return{min:Math.min(i,r),max:Math.max(i,r)}},e.prototype.scaleRange=function(t,e){var i=this.options.majorUnit,r=Nu(this.options.min,i),n=Nu(this.options.max,i),o=Math.abs(this.pointOffset(e)),s=n-r,a=this.scaleToDelta(t,s),l=Math.pow(i,r+o*a),h=Math.pow(i,n-(1-o)*a);return h-l<Lu&&(h=l+Lu),{min:l,max:h}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e),r=this.totalMin,n=this.totalMax;return{min:el(i.min,r,n),max:el(i.max,r,n)}},e.prototype._minorIntervalOptions=function(t){var e=this.options,i=e.minorUnit,r=e.majorUnit,n=Math.pow(r,t);return{value:n,minorStep:(Math.pow(r,t+1)-n)/i}},e.prototype.lineInfo=function(){var e=t.prototype.lineInfo.call(this);return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e},e}(Rp);function Bu(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function Nu(t,e){return Math.log(t)/Math.log(e)}hl(zu,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:Bo},zIndex:1,_deferLabels:!0});const ju=zu;var Fu={createGridLines:function(t){var e,i,r=this.options,n=Math.abs(this.box.center().y-t.lineBox().y1),o=[],s=!1;return r.majorGridLines.visible&&(e=this.majorGridLineAngles(t),s=!0,o=this.renderMajorGridLines(e,n,r.majorGridLines)),r.minorGridLines.visible&&(i=this.minorGridLineAngles(t,s),qa(o,this.renderMinorGridLines(i,n,r.minorGridLines,t,s))),o},renderMajorGridLines:function(t,e,i){return this.renderGridLines(t,e,i)},renderMinorGridLines:function(t,e,i,r,n){var o=this.radiusCallback&&this.radiusCallback(e,r,n);return this.renderGridLines(t,e,i,o)},renderGridLines:function(t,e,i,r){for(var n={stroke:{width:i.width,color:i.color,dashType:i.dashType}},o=this.box.center(),s=new uc([o.x,o.y],e),a=this.gridLinesVisual(),l=0;l<t.length;l++){var h=new sc(n);r&&(s.radius=r(t[l])),h.moveTo(s.center).lineTo(s.pointAt(t[l]+180)),a.append(h)}return a.children},gridLineAngles:function(t,e,i,r,n){var o=this,s=this.intervals(e,i,r,n),a=t.options,l=a.visible&&!1!==(a.line||{}).visible;return Gs(s,(function(t){var e=o.intervalAngle(t);if(!l||90!==e)return e}))}};const Vu=Fu;var Hu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.range=function(){return{min:0,max:this.options.categories.length}},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.lineBox=function(){return this.box},e.prototype.reflowLabels=function(){for(var t=this.labels,e=this.options.labels,i=e.skip||0,r=e.step||1,n=new eh,o=0;o<t.length;o++){t[o].reflow(n);var s=t[o].box;t[o].reflow(this.getSlot(i+o*r).adjacentBox(0,s.width(),s.height()))}},e.prototype.intervals=function(t,e,i,r){void 0===r&&(r=!1);for(var n=this.options,o=n.categories.length/t||1,s=360/o,a=i||1,l=[],h=0,c=e||0;c<o;c+=a)h=n.reverse?360-c*s:c*s,h=nl(h,3)%360,r&&Fs(h,r)||l.push(h);return l},e.prototype.majorIntervals=function(){return this.intervals(1)},e.prototype.minorIntervals=function(){return this.intervals(.5)},e.prototype.intervalAngle=function(t){return(360+t+this.options.startAngle)%360},e.prototype.majorAngles=function(){var t=this;return Gs(this.majorIntervals(),(function(e){return t.intervalAngle(e)}))},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,r=i.minorGridLines,n=i.majorGridLines,o=e?this.intervals(1,n.skip,n.step):null;return this.gridLineAngles(t,.5,r.skip,r.step,o)},e.prototype.radiusCallback=function(t,e,i){if(e.options.type!==zo){var r=rl(360/(2*this.options.categories.length)),n=Math.cos(r)*t,o=this.majorAngles(),s=function(e){return!i&&Fs(e,o)?t:n};return s}},e.prototype.createPlotBands=function(){for(var t=this.options.plotBands||[],e=this._plotbandGroup=new bc({zIndex:-1}),i=0;i<t.length;i++){var r=t[i],n=this.plotBandSlot(r),o=this.getSlot(r.from),s=r.from-Math.floor(r.from);n.startAngle+=s*o.angle;var a=Math.ceil(r.to)-r.to;n.angle-=(a+s)*o.angle;var l=hc.current.createRing(n,{fill:{color:r.color,opacity:r.opacity},stroke:{opacity:r.opacity}});e.append(l)}this.appendVisual(e)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to-1)},e.prototype.getSlot=function(t,e){var i=this.options,r=i.justified,n=this.box,o=this.majorAngles(),s=o.length,a=360/s,l=t;i.reverse&&!r&&(l=(l+1)%s);var h=o[l=el(Math.floor(l),0,s-1)];r&&(h-=a/2)<0&&(h+=360);var c=a*(el(Math.ceil(e||l),l,s-1)-l+1);return new nh(n.center(),0,n.height()/2,h,c)},e.prototype.slot=function(t,e){var i=this.getSlot(t,e),r=i.startAngle+180,n=r+i.angle;return new mh([i.center.x,i.center.y],{startAngle:r,endAngle:n,radiusX:i.radius,radiusY:i.radius})},e.prototype.pointCategoryIndex=function(t){for(var e=this.options.categories.length,i=null,r=0;r<e;r++){if(this.getSlot(r).containsPoint(t)){i=r;break}}return i},e}(fu);hl(Hu,{startAngle:90,labels:{margin:As(10)},majorGridLines:{visible:!0},justified:!0}),_s(Hu.prototype,Vu);const Wu=Hu;var Uu=function(t){function e(e,i){t.call(this,e,i);var r=this.options;r.minorUnit=r.minorUnit||r.majorUnit/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDivisions=function(t){return Pu.prototype.getDivisions.call(this,t)-1},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.reflowLabels=function(){for(var t=this,e=t.options,i=t.labels,r=t.options.labels,n=r.skip||0,o=r.step||1,s=new eh,a=this.intervals(e.majorUnit,n,o),l=0;l<i.length;l++){i[l].reflow(s);var h=i[l].box;i[l].reflow(this.getSlot(a[l]).adjacentBox(0,h.width(),h.height()))}},e.prototype.lineBox=function(){return this.box},e.prototype.intervals=function(t,e,i,r){void 0===r&&(r=!1);for(var n=this.options.min,o=this.getDivisions(t),s=[],a=i||1,l=e||0;l<o;l+=a){var h=(360+n+l*t)%360;r&&Fs(h,r)||s.push(h)}return s},e.prototype.majorIntervals=function(){return this.intervals(this.options.majorUnit)},e.prototype.minorIntervals=function(){return this.intervals(this.options.minorUnit)},e.prototype.intervalAngle=function(t){return(540-t-this.options.startAngle)%360},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,r=i.minorGridLines,n=i.majorGridLines,o=e?this.intervals(i.majorUnit,n.skip,n.step):null;return this.gridLineAngles(t,i.minorUnit,r.skip,r.step,o)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to)},e.prototype.getSlot=function(t,e){var i=this.options,r=this.box,n=i.startAngle,o=el(t,i.min,i.max),s=el(e||o,o,i.max);if(i.reverse&&(o*=-1,s*=-1),(s=(540-s-n)%360)<(o=(540-o-n)%360)){var a=o;o=s,s=a}return new nh(r.center(),0,r.height()/2,o,s-o)},e.prototype.slot=function(t,e){void 0===e&&(e=t);var i,r,n=this.options,o=360-n.startAngle,s=this.getSlot(t,e),a=Math.min(t,e),l=Math.max(t,e);return n.reverse?(i=a,r=l):(i=360-l,r=360-a),i=(i+o)%360,r=(r+o)%360,new mh([s.center.x,s.center.y],{startAngle:i,endAngle:r,radiusX:s.radius,radiusY:s.radius})},e.prototype.getValue=function(t){var e=this.options,i=this.box.center(),r=t.x-i.x,n=t.y-i.y,o=Math.round(Ka(Math.atan2(n,r))),s=e.startAngle;return e.reverse||(o*=-1,s*=-1),(o+s+360)%360},e.prototype.valueRange=function(){return{min:0,max:2*Math.PI}},e}(Rp);hl(Uu,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:As(10)},majorGridLines:{color:Bo,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),_s(Uu.prototype,Vu,{createPlotBands:Wu.prototype.createPlotBands,majorAngles:Wu.prototype.majorAngles,range:Pu.prototype.range,labelsCount:Pu.prototype.labelsCount,createAxisLabel:Pu.prototype.createAxisLabel});const qu=Uu;var Gu={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var t=this.options,e=t.majorGridLines.type,i=t.plotBands;void 0===i&&(i=[]);for(var r=this.plotArea.polarAxis,n=r.majorAngles(),o=r.box.center(),s=this._plotbandGroup=new bc({zIndex:-1}),a=0;a<i.length;a++){var l=i[a],h={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},c=this.getSlot(l.from,l.to,!0),p=new nh(o,o.y-c.y2,o.y-c.y1,0,360),u=void 0;u=e===zo?hc.current.createRing(p,h):sc.fromPoints(this.plotBandPoints(p,n),h).close(),s.append(u)}this.appendVisual(s)},plotBandPoints:function(t,e){for(var i=[],r=[],n=[t.center.x,t.center.y],o=new uc(n,t.innerRadius),s=new uc(n,t.radius),a=0;a<e.length;a++)i.push(o.pointAt(e[a]+180)),r.push(s.pointAt(e[a]+180));return i.reverse(),i.push(i[0]),r.push(r[0]),r.concat(i)},createGridLines:function(t){var e=this.options,i=this.radarMajorGridLinePositions(),r=t.majorAngles(),n=t.box.center(),o=[];if(e.majorGridLines.visible&&(o=this.renderGridLines(n,i,r,e.majorGridLines)),e.minorGridLines.visible){var s=this.radarMinorGridLinePositions();qa(o,this.renderGridLines(n,s,r,e.minorGridLines))}return o},renderGridLines:function(t,e,i,r){var n={stroke:{width:r.width,color:r.color,dashType:r.dashType}},o=r.skip;void 0===o&&(o=0);var s=r.step;void 0===s&&(s=0);for(var a=this.gridLinesVisual(),l=o;l<e.length;l+=s){var h=t.y-e[l];if(h>0){var c=new uc([t.x,t.y],h);if(r.type===zo)a.append(new mc(c,n));else{for(var p=new sc(n),u=0;u<i.length;u++)p.lineTo(c.pointAt(i[u]+180));p.close(),a.append(p)}}}return a.children},getValue:function(t){var e=this.lineBox(),i=this.plotArea.polarAxis,r=i.majorAngles(),n=i.box.center(),o=t.distanceTo(n),s=o;if(this.options.majorGridLines.type!==zo&&r.length>1){var a=t.x-n.x,l=t.y-n.y,h=(Ka(Math.atan2(l,a))+540)%360;r.sort((function(t,e){return $u(t,h)-$u(e,h)}));var c=90-$u(r[0],r[1])/2,p=180-$u(h,r[0])-c;s=o*(Math.sin(rl(p))/Math.sin(rl(c)))}return this.axisType().prototype.getValue.call(this,new Fl(e.x1,e.y2-s))}};function $u(t,e){return 180-Math.abs(Math.abs(t-e)-180)}const Ku=Gu;var Xu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.radarMinorGridLinePositions=function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},e.prototype.axisType=function(){return t},e}(Pu);_s(Xu.prototype,Ku);const Yu=Xu;var Zu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},e.prototype.radarMinorGridLinePositions=function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},e.prototype.axisType=function(){return t},e}(ju);_s(Zu.prototype,Ku);const Ju=Zu;var Qu=function(t){function e(e){t.call(this),this.closed=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){var e=t.slice(0),i=[],r=this.closed,n=e.length;if(n>2&&(this.removeDuplicates(0,e),n=e.length),n<2||2===n&&e[0].equals(e[1]))return i;var o,s,a=e[0],l=e[1],h=e[2];for(i.push(new Kh(a));a.equals(e[n-1]);)r=!0,e.pop(),n--;if(2===n){var c=this.tangent(a,l,ls,hs);return tl(i).controlOut(this.firstControlPoint(c,a,l,ls,hs)),i.push(new Kh(l,this.secondControlPoint(c,a,l,ls,hs))),i}if(r){a=e[n-1],l=e[0],h=e[1];var p=this.controlPoints(a,l,h);o=p[1],s=p[0]}else{var u=this.tangent(a,l,ls,hs);o=this.firstControlPoint(u,a,l,ls,hs)}for(var d=o,f=0;f<=n-3;f++)if(this.removeDuplicates(f,e),f+3<=(n=e.length)){a=e[f],l=e[f+1],h=e[f+2];var v=this.controlPoints(a,l,h);tl(i).controlOut(d),d=v[1];var m=v[0];i.push(new Kh(l,m))}if(r){a=e[n-2],l=e[n-1],h=e[0];var g=this.controlPoints(a,l,h);tl(i).controlOut(d),i.push(new Kh(l,g[0])),tl(i).controlOut(g[1]),i.push(new Kh(h,s))}else{var y=this.tangent(l,h,ls,hs);tl(i).controlOut(d),i.push(new Kh(h,this.secondControlPoint(y,l,h,ls,hs)))}return i},e.prototype.removeDuplicates=function(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)},e.prototype.invertAxis=function(t,e,i){var r=!1;if(t.x===e.x)r=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(r=!0);else{var n=this.lineFunction(t,e),o=this.calculateFunction(n,i.x);t.y<=e.y&&i.y<=o||e.y<=t.y&&i.y>=o||(r=!0)}return r},e.prototype.isLine=function(t,e,i){var r=this.lineFunction(t,e),n=this.calculateFunction(r,i.x);return t.x===e.x&&e.x===i.x||nl(n,1)===nl(i.y,1)},e.prototype.lineFunction=function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},e.prototype.controlPoints=function(t,e,i){var r,n=ls,o=hs,s=!1,a=!1;if(this.isLine(t,e,i))r=this.tangent(t,e,ls,hs);else{var l={x:this.isMonotonicByField(t,e,i,ls),y:this.isMonotonicByField(t,e,i,hs)};if(l.x&&l.y)r=this.tangent(t,i,ls,hs),s=!0;else if(this.invertAxis(t,e,i)&&(n=hs,o=ls),l[n])r=0;else r=.01*(i[o]<t[o]&&t[o]<=e[o]||t[o]<i[o]&&e[o]<=t[o]?td((i[o]-t[o])*(e[n]-t[n])):-td((i[n]-t[n])*(e[o]-t[o]))),a=!0}var h=this.secondControlPoint(r,t,e,n,o);if(a){var c=n;n=o,o=c}var p=this.firstControlPoint(r,e,i,n,o);return s&&(this.restrictControlPoint(t,e,h,r),this.restrictControlPoint(e,i,p,r)),[h,p]},e.prototype.restrictControlPoint=function(t,e,i,r){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/r,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/r,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/r,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/r,i.y=t.y)},e.prototype.tangent=function(t,e,i,r){var n,o=e[i]-t[i],s=e[r]-t[r];return n=0===o?0:s/o,n},e.prototype.isMonotonicByField=function(t,e,i,r){return i[r]>e[r]&&e[r]>t[r]||i[r]<e[r]&&e[r]<t[r]},e.prototype.firstControlPoint=function(t,e,i,r,n){var o=e[r],s=.333*(i[r]-o);return this.point(o+s,e[n]+s*t,r,n)},e.prototype.secondControlPoint=function(t,e,i,r,n){var o=e[r],s=i[r],a=.333*(s-o);return this.point(s-a,i[n]-a*t,r,n)},e.prototype.point=function(t,e,i,r){var n=new Kl;return n[i]=t,n[r]=e,n},e.prototype.calculateFunction=function(t,e){for(var i=t.length,r=0,n=0;n<i;n++)r+=Math.pow(e,n)*t[n];return r},e}(Zs);function td(t){return t<=0?-1:1}const ed=Qu;var id=function(t){function e(e){t.call(this),this._axis=e,this.options=e.options}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this._axis,i=e.getCategory?e.getCategory(t):e.getValue(t);return i},e.prototype.slot=function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},e.prototype.range=function(){return this._axis.range()},e.prototype.valueRange=function(){return this._axis.valueRange()},e}(Zs);const rd=id;function nd(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new rd(e[i])}var od=function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t};od.prototype.findAxisByName=function(t){return nd(t,this._pane.axes)};const sd=od;var ad=function(t){function e(e){t.call(this),this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Zs);const ld=ad;function hd(t){for(var e=t.length,i=0,r=0;r<e;r++){ms(t[r])&&i++}return i}var cd={min:function(t){for(var e=t.length,i=Xo,r=0;r<e;r++){var n=t[r];ms(n)&&(i=Math.min(i,n))}return i===Xo?t[0]:i},max:function(t){for(var e=t.length,i=Yo,r=0;r<e;r++){var n=t[r];ms(n)&&(i=Math.max(i,n))}return i===Yo?t[0]:i},sum:function(t){for(var e=t.length,i=0,r=0;r<e;r++){var n=t[r];ms(n)&&(i+=n)}return i},sumOrNull:function(t){var e=null;return hd(t)&&(e=cd.sum(t)),e},count:function(t){for(var e=t.length,i=0,r=0;r<e;r++){var n=t[r];null!==n&&$a(n)&&i++}return i},avg:function(t){var e=hd(t),i=t[0];return e>0&&(i=cd.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var r=t[i];if(null!==r&&$a(r))return r}return t[0]}};const pd=cd;function ud(t,e){return null===e?e:Ls(t)(e)}var dd=function(t){function e(){t.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e,i){var r=this;void 0===e&&(e=[ns]),void 0===i&&(i={});for(var n=0;n<t.length;n++){var o=t[n];r._valueFields[o]=e,r._otherFields[o]=i,r._nullValue[o]=r._makeValue(e,null),r._undefinedValue[o]=r._makeValue(e,void 0)}},e.prototype.canonicalFields=function(t){return this.valueFields(t).concat(this.otherFields(t))},e.prototype.valueFields=function(t){return this._valueFields[t.type]||[ns]},e.prototype.otherFields=function(t){return this._otherFields[t.type]||[ns]},e.prototype.bindPoint=function(t,e,i){var r,n,o=t.data,s=$a(i)?i:o[e],a={valueFields:{value:s}},l=this.valueFields(t),h=this._otherFields[t.type];if(null===s)n=this._nullValue[t.type];else if($a(s)){if(Array.isArray(s)){var c=s.slice(l.length);n=this._bindFromArray(s,l),r=this._bindFromArray(c,h)}else if("object"==typeof s){var p=this.sourceFields(t,l),u=this.sourceFields(t,h);n=this._bindFromObject(s,l,p),r=this._bindFromObject(s,h,u)}}else n=this._undefinedValue[t.type];return $a(n)&&(1===l.length?a.valueFields.value=n[l[0]]:a.valueFields=n),a.fields=r||{},a},e.prototype._makeValue=function(t,e){for(var i={},r=t.length,n=0;n<r;n++){i[t[n]]=e}return i},e.prototype._bindFromArray=function(t,e){var i={};if(e)for(var r=Math.min(e.length,t.length),n=0;n<r;n++)i[e[n]]=t[n];return i},e.prototype._bindFromObject=function(t,e,i){void 0===i&&(i=e);var r={};if(e)for(var n=e.length,o=0;o<n;o++){var s=e[o],a=i[o];null!==a&&(r[s]=ud(a,t))}return r},e.prototype.sourceFields=function(t,e){var i=[];if(e)for(var r=e.length,n=0;n<r;n++){var o=e[n],s=o===ns?"field":o+"Field";i.push(null!==t[s]?t[s]||o:null)}return i},e}(Zs);dd.current=new dd;const fd=dd;var vd=/percent(?:\w*)\((\d+)\)/,md=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),gd=function(t){function e(e,i,r){t.call(this),this.initGlobalRanges(e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initGlobalRanges=function(t,e,i){var r=e.data,n=md.exec(t);if(n){this.valueGetter=this.createValueGetter(e,i);var o=this.getAverage(r),s=this.getStandardDeviation(r,o,!1),a=n[1]?parseFloat(n[1]):1,l={low:o.value-s*a,high:o.value+s*a};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var h=this.getStandardError(r,this.getAverage(r));this.globalRange=function(t){return{low:t-h,high:t+h}}}},e.prototype.createValueGetter=function(t,e){var i,r=t.data,n=fd.current,o=n.valueFields(t),s=$a(r[0])?r[0]:{};if(cs(s))i=Ls("["+(e?o.indexOf(e):0)+"]");else if(ms(s))i=Ls();else if(typeof s===Jo){i=Ls(n.sourceFields(t,o)[o.indexOf(e)])}return i},e.prototype.getErrorRange=function(t,e){var i,r,n;if(!$a(e))return null;if(this.globalRange)return this.globalRange(t);if(cs(e))i=t-e[0],r=t+e[1];else if(ms(n=parseFloat(e)))i=t-n,r=t+n;else{if(!(n=vd.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(n[1])/100);i=t-Math.abs(o),r=t+Math.abs(o)}return{low:i,high:r}},e.prototype.getStandardError=function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},e.prototype.getStandardDeviation=function(t,e,i){for(var r=t.length,n=i?e.count-1:e.count,o=0,s=0;s<r;s++){var a=this.valueGetter(t[s]);ms(a)&&(o+=Math.pow(a-e.value,2))}return Math.sqrt(o/n)},e.prototype.getAverage=function(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++){var o=this.valueGetter(t[n]);ms(o)&&(i+=o,r++)}return{value:i/r,count:r}},e}(Zs);const yd=gd;var bd=Ks.browser||{},wd=600,xd="fadeIn",_d=.8,kd=bd.msie?.001:0,Sd="errorLow",Cd="errorHigh",Ed="zero",Td="interpolate",Ad="above",Md="below",Od="smooth",Dd="step",Pd="area",Rd="bar",Id="boxPlot",Ld="bubble",zd="bullet",Bd="candlestick",Nd="column",jd="donut",Fd="funnel",Vd="heatmap",Hd="horizontalWaterfall",Wd="line",Ud="ohlc",qd="pie",Gd="polarArea",$d="polarLine",Kd="polarScatter",Xd="radarArea",Yd="radarColumn",Zd="radarLine",Jd="rangeArea",Qd="rangeBar",tf="rangeColumn",ef="scatter",rf="scatterLine",nf="verticalArea",of="verticalBoxPlot",sf="verticalBullet",af="verticalLine",lf="verticalRangeArea",hf="waterfall",cf=[Rd,Nd,Ud,Bd,Id,of,zd,tf,Qd,hf,Hd],pf="seriesHover",uf="plotAreaHover",df="plotAreaLeave",ff="drag",vf="dragEnd",mf="dragStart",gf="zoomStart",yf="zoom",bf="zoomEnd",wf="selectStart",xf="select",_f="selectEnd",kf="showTooltip",Sf="hideTooltip",Cf="log",Ef="category",Tf="insideEnd",Af="outsideEnd",Mf="DOMMouseScroll mousewheel",Of=function(t){function e(e,i,r,n,o,s){t.call(this,s),this.low=e,this.high=i,this.isVertical=r,this.chart=n,this.series=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i=this.options.endCaps,r=this.isVertical,n=this.getAxis().getSlot(this.low,this.high),o=t.center(),s=this.getCapsWidth(t,r),a=r?o.x:o.y,l=a-s,h=a+s;r?(e=[new Fl(o.x,n.y1),new Fl(o.x,n.y2)],i&&e.push(new Fl(l,n.y1),new Fl(h,n.y1),new Fl(l,n.y2),new Fl(h,n.y2)),this.box=new eh(l,n.y1,h,n.y2)):(e=[new Fl(n.x1,o.y),new Fl(n.x2,o.y)],i&&e.push(new Fl(n.x1,l),new Fl(n.x1,h),new Fl(n.x2,l),new Fl(n.x2,h)),this.box=new eh(n.x1,l,n.x2,h)),this.linePoints=e},e.prototype.getCapsWidth=function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},e.prototype.createVisual=function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},e.prototype.createDefaultVisual=function(){var e=this.options,i=this.linePoints,r={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};t.prototype.createVisual.call(this);for(var n=0;n<i.length;n+=2){var o=new sc(r).moveTo(i[n].x,i[n].y).lineTo(i[n+1].x,i[n+1].y);fs(o),this.visual.append(o)}},e}(Dc);hl(Of,{animation:{type:xd,delay:wd},endCaps:!0,line:{width:2},zIndex:1});const Df=Of;var Pf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){return this.chart.seriesValueAxis(this.series)},e}(Df);const Rf=Pf;function If(t,e,i,r){void 0===i&&(i={}),void 0===r&&(r=!1);var n=i.defaults=i.defaults||{},o=i.depth=i.depth||0,s=!1;if(i.excluded=i.excluded||[],o>5)return null;for(var a in t)if(!Fs(a,i.excluded)&&t.hasOwnProperty(a)){var l=t[a];bs(l)?(s=!0,r||(t[a]=sl(l(e),n[a]))):ks(l)&&(r||(i.defaults=n[a]),i.depth++,s=If(l,e,i,r)||s,i.depth--)}return s}function Lf(t){for(var e=t.length,i=0,r=0;r<e;r++)i=Math.max(i,t[r].data.length);return i}var zf=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(i.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=_s({},r,{vertical:!this.options.invertAxes},t)}return i},e.prototype.plotValue=function(t){if(!t)return 0;if(this.options.isStacked100&&ms(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],r=[],n=0,o=0;o<i.length;o++){var s=i[o];if(s){var a=t.series.stack,l=s.series.stack;if(a&&l&&a.group!==l.group)continue;ms(s.value)&&(n+=Math.abs(s.value),r.push(Math.abs(s.value)))}}if(n>0)return t.value/n}return t.value},e.prototype.plotRange=function(t,e){void 0===e&&(e=0);var i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){for(var r=this.plotValue(t),n=r>=0,o=e,s=!1,a=0;a<i.length;a++){var l=i[a];if(t===l)break;var h=t.series.stack,c=l.series.stack;if(h&&c){if(typeof h===is&&h!==c)continue;if(h.group&&h.group!==c.group)continue}var p=this.plotValue(l);(p>=0&&n||p<0&&!n)&&(o+=p,r+=p,s=!0,this.options.isStacked100&&(r=Math.min(r,1)))}return s&&(o-=e),[o,r]}var u=t.series,d=this.seriesValueAxis(u),f=this.categoryAxisCrossingValue(d);return[f,ys(t.value)?t.value:f]},e.prototype.stackLimits=function(t,e){for(var i=Xo,r=Yo,n=0;n<this.categoryPoints.length;n++){var o=this.categoryPoints[n];if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a&&(a.series.stack===e||a.series.axis===t)){var l=this.plotRange(a,0)[1];$a(l)&&isFinite(l)&&(r=Math.max(r,l),i=Math.min(i,l))}}}return{min:i,max:r}},e.prototype.updateStackRange=function(){var t=this,e=this.options,i=e.isStacked,r=e.series,n={};if(i)for(var o=0;o<r.length;o++){var s=r[o],a=s.axis,l=a+s.stack,h=n[l];if(!h){h=t.stackLimits(a,s.stack);var c=t.errorTotals;c&&(c.negative.length&&(h.min=Math.min(h.min,cl(c.negative).min)),c.positive.length&&(h.max=Math.max(h.max,cl(c.positive).max))),h.min!==Xo||h.max!==Yo?n[l]=h:h=null}h&&(t.valueAxisRanges[a]=h)}},e.prototype.addErrorBar=function(t,e,i){var r,n=t.value,o=t.series,s=t.seriesIx,a=t.options.errorBars,l=e.fields.errorLow,h=e.fields.errorHigh;ms(l)&&ms(h)?r={low:l,high:h}:a&&$a(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[s]=this.seriesErrorRanges[s]||new yd(a.value,o,ns),r=this.seriesErrorRanges[s].getErrorRange(n,a.value)),r&&(t.low=r.low,t.high=r.high,this.addPointErrorBar(t,i))},e.prototype.addPointErrorBar=function(t,e){var i=!this.options.invertAxes,r=t.options.errorBars,n=t.series,o=t.low,s=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);o=a.low,s=a.high}else{var l={categoryIx:e,series:n};this.updateRange({value:o},l),this.updateRange({value:s},l)}var h=new Rf(o,s,i,this,n,r);t.errorBars=[h],t.append(h)},e.prototype.stackedErrorRange=function(t,e){var i=this.plotRange(t,0)[1]-t.value,r=t.low+i,n=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},r<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,r)),n>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,n)),{low:r,high:n}},e.prototype.addValue=function(t,e){var i=e.categoryIx,r=e.series,n=e.seriesIx,o=this.categoryPoints[i];o||(this.categoryPoints[i]=o=[]);var s=this.seriesPoints[n];s||(this.seriesPoints[n]=s=[]);var a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,$a(a.dataItem)||(a.dataItem=r.data[i]),this.addErrorBar(a,t,i)),this.points.push(a),s.push(a),o.push(a),this.updateRange(t.valueFields,e)},e.prototype.evalPointOptions=function(t,e,i,r,n,o){var s={defaults:n._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},a=this._evalSeries[o];$a(a)||(this._evalSeries[o]=a=If(t,{},s,!0));var l=t;return a&&If(l=_s({},l),{value:e,category:i,index:r,series:n,dataItem:n.data[r]},s),l},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=t.value,n=this.valueAxisRanges[i];isFinite(r)&&null!==r&&((n=this.valueAxisRanges[i]=n||{min:Xo,max:Yo}).min=Math.min(n.min,r),n.max=Math.max(n.max,r))},e.prototype.seriesValueAxis=function(t){var e=this.plotArea,i=t.axis,r=i?e.namedValueAxes[i]:e.valueAxis;if(!r)throw new Error("Unable to locate value axis with name "+i);return r},e.prototype.reflow=function(t){var e=this,i=this.categorySlots=[],r=this.points,n=this.categoryAxis,o=0;this.traverseDataPoints((function(t,s){var a=s.categoryIx,l=s.series,h=e.seriesValueAxis(l),c=r[o++],p=i[a];if(p||(i[a]=p=e.categorySlot(n,a,h)),c){var u=e.plotRange(c,h.startValue()),d=e.valueSlot(h,u);if(d){var f=e.pointSlot(p,d);c.aboveAxis=e.aboveAxis(c,h),c.stackValue=u[1],e.options.isStacked100&&(c.percentage=e.plotValue(c)),e.reflowPoint(c,f)}else c.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},e.prototype.valueSlot=function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},e.prototype.limitPoints=function(){for(var t=this.categoryPoints,e=t[0].concat(tl(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},e.prototype.limitPoint=function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},e.prototype.aboveAxis=function(t,e){var i=this.categoryAxisCrossingValue(e),r=t.value;return e.options.reverse?r<i:r>=i},e.prototype.categoryAxisCrossingValue=function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},e.prototype.reflowPoint=function(t,e){t.reflow(e)},e.prototype.reflowCategories=function(){},e.prototype.pointSlot=function(t,e){var i=this.options.invertAxes,r=i?e:t,n=i?t:e;return new eh(r.x1,n.y1,r.x2,n.y2)},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,r=Lf(i),n=i.length,o=0;o<n;o++)e._outOfRangeCallback(i[o],"_outOfRangeMinPoint",o,t);for(var s=0;s<r;s++)for(var a=0;a<n;a++){var l=i[a],h=e.categoryAxis.categoryAt(s);t(e._bindPoint(l,a,s),{category:h,categoryIx:s,categoriesCount:r,series:l,seriesIx:a})}for(var c=0;c<n;c++)e._outOfRangeCallback(i[c],"_outOfRangeMaxPoint",c,t)},e.prototype._outOfRangeCallback=function(t,e,i,r){var n=t[e];if(n){var o=n.categoryIx;r(this._bindPoint(t,i,o,n.item),{category:n.category,categoryIx:o,series:t,seriesIx:i,dataItem:n.item})}},e.prototype._bindPoint=function(t,e,i,r){this._bindCache||(this._bindCache=[]);var n=this._bindCache[e];n||(n=this._bindCache[e]=[]);var o=n[i];return o||(o=n[i]=fd.current.bindPoint(t,i,r)),o},e.prototype.formatPointValue=function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},e.prototype.pointValue=function(t){return t.valueFields.value},e}(Dc);hl(zf,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Bf=zf;var Nf={click:function(t,e){return t.trigger("seriesClick",this.eventArgs(e))},hover:function(t,e){return t.trigger(pf,this.eventArgs(e))},over:function(t,e){return t.trigger("seriesOver",this.eventArgs(e))},out:function(t,e){return t.trigger("seriesLeave",this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:Ja(t),originalEvent:t,point:this}}};const jf=Nf;var Ff={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&$a(e)&&null!==e&&(this.note=new vp({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};const Vf=Ff;var Hf=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=sl(this.options.aboveAxis,!0),this.tooltipTracking=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options,e=t.markers,i=t.labels;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),i.visible){var r=Ps(i),n=this.pointData(),o=this.value;r?o=r(n):i.format&&(o=this.formatValue(i.format)),this.label=new hp(o,_s({align:jo,vAlign:jo,margin:{left:5,right:5},zIndex:sl(i.zIndex,this.series.zIndex)},i),n),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},e.prototype.markerBorder=function(){var t=this.options.markers,e=t.background,i=_s({color:this.color},t.border);return $a(i.color)||(i.color=new Al(e).brightness(_d).toHex()),i},e.prototype.createVisual=function(){},e.prototype.createMarker=function(){var t=this.options.markers;return new Lc({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:sl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},e.prototype.markerBox=function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},e.prototype.reflow=function(t){var e=this.options,i=this.aboveAxis,r=e.vertical;this.render(),this.box=t;var n=t.clone();if(r?i?n.y1-=n.height():n.y2+=n.height():i?n.x1+=n.width():n.x2-=n.width(),this._childBox=n,this.marker&&this.marker.reflow(n),this.reflowLabel(n),this.errorBars)for(var o=0;o<this.errorBars.length;o++)this.errorBars[o].reflow(n);if(this.note){var s=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=s.center();s=new eh(a.x,a.y,a.x,a.y)}this.note.reflow(s)}},e.prototype.reflowLabel=function(t){var e=this.options,i=this.label,r=e.labels.position;i&&(r=(r=r===Ad?rs:r)===Md?No:r,i.reflow(t),i.box.alignTo(this.markerBox(),r),i.reflow(i.box))},e.prototype.createHighlight=function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,r=i.size+(i.border.width||0)+(t.border.width||0),n=new Lc({type:i.type,width:r,height:r,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:sl(t.border.opacity,1)},opacity:sl(t.opacity,1)});return n.reflow(this._childBox),n.getElement()},e.prototype.highlightVisual=function(){return(this.marker||{}).visual},e.prototype.highlightVisualArgs=function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var r=this.options.markers.size,n=r/2,o=this.box.center();e=new Jl([o.x-n,o.y-n],[r,r])}return{options:this.options,rect:e,visual:t}},e.prototype.tooltipAnchor=function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,r,n=t.x2+5;return this.aboveAxis?(i=t.y1,r=No):(i=t.y2,r=rs),{point:new Fl(n,i),align:{horizontal:"left",vertical:r}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.markerBox().overlaps(t)},e.prototype.unclipElements=function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},e}(Dc);Hf.prototype.defaults={vertical:!0,markers:{visible:!0,background:ss,size:8,type:Fo,border:{width:2},opacity:1},labels:{visible:!1,position:Ad,margin:As(3),padding:As(4),animation:{type:xd,delay:wd}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}}},_s(Hf.prototype,jf),_s(Hf.prototype,Vf);const Wf=Hf;var Uf=function(t){function e(e,i,r){t.call(this),this.linePoints=e,this.series=i,this.seriesIx=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.toGeometryPoints(this.linePoints)},e.prototype.toGeometryPoints=function(t){for(var e=[],i=0,r=t.length;i<r;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},e.prototype.createVisual=function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!$a(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},e.prototype.segmentVisual=function(){var t=this.options,e=this.series,i=e.color,r=e._defaults;bs(i)&&r&&(i=r.color);var n=sc.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&n.close(),this.visual=n},e.prototype.aliasFor=function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)},e}(Dc);hl(Uf,{closed:!1});const qf=Uf;var Gf={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,r=e.vertical,n=e.reverse,o=r?ls:hs,s=r?hs:ls,a=n?2:1,l=a,h=$f(t[0],o,a,s,l),c=[h],p=1;p<t.length;p++){var u=$f(t[p],o,a,s,l);if(h[o]!==u[o]){var d=new Kl;d[o]=h[o],d[s]=u[s],c.push(d,u)}h=u}return i?h!==tl(c)&&c.push(h):c.push($f(tl(t),o,a,s,n?1:2)),c}};function $f(t,e,i,r,n){var o=t.box,s=new Kl;return s[e]=o[e+i],s[r]=o[r+n],s}const Kf=Gf;var Xf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.calculateStepPoints(this.linePoints)},e}(qf);_s(Xf.prototype,Kf);const Yf=Xf;var Zf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.segmentVisual=function(){var t=this.series,e=t._defaults,i=t.color;bs(i)&&e&&(i=e.color);var r=new ed(this.options.closed).process(this.points()),n=new sc({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});n.segments.push.apply(n.segments,r),this.visual=n},e}(qf);const Jf=Zf;var Qf={renderSegments:function(){var t,e=this,i=this.options,r=this.seriesPoints,n=i.series,o=r.length;this._segments=[];for(var s=0;s<o;s++){for(var a=n[s],l=e.sortPoints(r[s]),h=l.length,c=[],p=0;p<h;p++){var u=l[p];u?c.push(u):e.seriesMissingValues(a)!==Td&&(c.length>1&&(t=e.createSegment(c,a,s,t),e._addSegment(t)),c=[])}c.length>1&&(t=e.createSegment(c,a,s,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?Ed:e||Td},getNearestPoint:function(t,e,i){for(var r,n=new Fl(t,e),o=this.seriesPoints[i],s=Xo,a=0;a<o.length;a++){var l=o[a];if(l&&$a(l.value)&&null!==l.value&&!1!==l.visible){var h=l.box.center().distanceTo(n);h<s&&(r=l,s=h)}}return r}};const tv=Qf;var ev=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._setEnd(this.options.box.x1)},e.prototype.step=function(t){var e=this.options.box;this._setEnd(Hs(e.x1,e.x2,t))},e.prototype._setEnd=function(t){var e=this.element,i=e.segments,r=i[1].anchor(),n=i[2].anchor();e.suspend(),r.setX(t),e.resume(),n.setX(t)},e}(Mc);hl(ev,{duration:wd}),Tc.current.register("clip",ev);const iv=ev;function rv(t){for(var e=0;e<t.length;e++)if($a(t[e].zIndex))return!0}var nv={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=sc.fromRect(e.toRect());this.visual.clip(i),this.animation=new iv(i,{box:e}),rv(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var r=e[i];r&&r.visual&&$a(r.visual.options.zIndex)&&r.visual.clip(t)}}};const ov=nv;var sv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},e.prototype.pointType=function(){return Wf},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.seriesMissingValues(n),a=t.valueFields.value;if(!$a(a)||null===a){if(s!==Ed)return null;a=0}var l=this.pointOptions(n,o);l=this.evalPointOptions(l,a,r,i,n,o);var h=t.fields.color||n.color;bs(n.color)&&(h=l.color);var c=new Wf(a,l);return c.color=h,this.append(c),c},e.prototype.plotRange=function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,r=this.categoryPoints[i],n=0;n<r.length;n++){var o=r[n];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},e.prototype.createSegment=function(t,e,i){var r=e.style;return new(r===Dd?Yf:r===Od?Jf:qf)(t,e,i)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Bf);_s(sv.prototype,tv,ov);const av=sv;var lv=function(t){function e(e,i,r,n,o){t.call(this,e,i,r),this.prevSegment=n,this.stackPoints=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){var t=this.series,e=t._defaults,i=t.line||{},r=t.color;bs(r)&&e&&(r=e.color),this.visual=new bc({zIndex:t.zIndex}),this.createFill({fill:{color:r,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:_s({color:r,opacity:t.opacity,lineCap:"butt"},i)})},e.prototype.strokeSegments=function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.points())},e.prototype.stackSegments=function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},e.prototype.segmentsFromPoints=function(t){return t.map((function(t){return new Kh(t)}))},e.prototype.createStroke=function(t){var e=new sc(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},e.prototype.hasStackSegment=function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},e.prototype.createFill=function(t){var e=this.strokeSegments(),i=e.slice(0),r=this.hasStackSegment();if(r){var n=this.stackSegments();qa(i,n)}var o=new sc(t);o.segments.push.apply(o.segments,i),!r&&e.length>1&&this.fillToAxes(o),this.visual.append(o)},e.prototype.fillToAxes=function(t){var e=this.parent,i=e.options.invertAxes,r=e.seriesValueAxis(this.series),n=e.categoryAxisCrossingValue(r),o=r.getSlot(n,n,!0),s=this.strokeSegments(),a=s[0].anchor(),l=tl(s).anchor(),h=i?o.x1:o.y1;i?t.lineTo(h,l.y).lineTo(h,a.y):t.lineTo(l.x,h).lineTo(a.x,h)},e}(qf);const hv=lv;var cv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()},e}(hv);_s(cv.prototype,Kf);const pv=cv;var uv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){var t=new ed(this.options.closed),e=this.points();return t.process(e)},e.prototype.createStackSegments=function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var r=t[i];e.push(new Kh(r.anchor(),r.controlOut(),r.controlIn()))}return e},e}(hv);const dv=uv;var fv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,r){var n,o,s=this.options.isStacked,a=(e.line||{}).style;s&&i>0&&r&&("gap"!==this.seriesMissingValues(e)?(o=r.linePoints,n=r):o=this._gapStackPoints(t,i,a));return new(a===Dd?pv:a===Od?dv:hv)(t,e,i,n,o)},e.prototype.reflow=function(e){t.prototype.reflow.call(this,e);var i=this._stackPoints;if(i)for(var r=0;r<i.length;r++){var n=i[r],o=this.categoryAxis.getSlot(n.categoryIx);n.reflow(o)}},e.prototype._gapStackPoints=function(t,e,i){var r=this,n=this.seriesPoints,o=t[0].categoryIx,s=t.length;o<0&&(o=0,s--);var a=o+s,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,h=[];this._stackPoints=this._stackPoints||[];for(var c=o;c<a;c++){var p=c+l,u=e,d=void 0;do{d=n[--u][p]}while(u>0&&!d);if(d)i!==Dd&&c>o&&!n[u][p-1]&&h.push(r._previousSegmentPoint(c,p,p-1,u)),h.push(d),i!==Dd&&c+1<a&&!n[u][p+1]&&h.push(r._previousSegmentPoint(c,p,p+1,u));else{var f=r._createGapStackPoint(c);r._stackPoints.push(f),h.push(f)}}return h},e.prototype._previousSegmentPoint=function(t,e,i,r){for(var n,o=this.seriesPoints,s=r;s>0&&!n;)n=o[--s][i];return n?n=o[s][e]:(n=this._createGapStackPoint(t),this._stackPoints.push(n)),n},e.prototype._createGapStackPoint=function(t){var e=this.pointOptions({},0),i=new Wf(0,e);return i.categoryIx=t,i.series={},i},e.prototype.seriesMissingValues=function(t){return t.missingValues||Ed},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(av);const vv=fv;var mv=function(t){function e(){t.call(this),this.axisRanges={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){var e=this.axisRanges;for(var i in t){var r=t[i],n=e[i];e[i]=n=n||{min:Xo,max:Yo},n.min=Math.min(n.min,r.min),n.max=Math.max(n.max,r.max)}},e.prototype.reset=function(t){this.axisRanges[t]=void 0},e.prototype.query=function(t){return this.axisRanges[t]},e}(Zs);const gv=mv;var yv=function(t){function e(e,i,r){t.call(this,i),this.textBox=new hp(e,this.options,r),this.append(this.textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.textBox.options.noclip=this.options.noclip},e.prototype.reflow=function(t){var e=this.options,i=e.vertical,r=e.aboveAxis,n=this.children[0],o=n.options,s=n.box,a=n.options.padding,l=t;o.align=i?jo:Ko,o.vAlign=i?rs:jo,e.position===Tf?i?(o.vAlign=rs,!r&&s.height()<t.height()&&(o.vAlign=No)):o.align=r?ts:Ko:e.position===jo?(o.vAlign=jo,o.align=jo):"insideBase"===e.position?i?o.vAlign=r?No:rs:o.align=r?Ko:ts:e.position===Af&&(i?l=r?new eh(t.x1,t.y1-s.height(),t.x2,t.y1):new eh(t.x1,t.y2,t.x2,t.y2+s.height()):(o.align=jo,l=r?new eh(t.x2,t.y1,t.x2+s.width(),t.y2):new eh(t.x1-s.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(l.width()-n.contentBox.width())/2:a.top=a.bottom=(l.height()-n.contentBox.height())/2),n.reflow(l)},e.prototype.alignToClipBox=function(t){var e=this.options.vertical?hs:ls,i=e+"1",r=e+"2",n=this.children[0],o=this.parent.box;if(o[i]<t[i]||t[r]<o[r]){var s=n.paddingBox.clone();s[i]=Math.max(o[i],t[i]),s[r]=Math.min(o[r],t[r]),this.reflow(s)}},e}(Dc);hl(yv,{position:Af,margin:As(3),padding:As(4),color:Bo,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:xd,delay:wd},zIndex:2});const bv=yv;function wv(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}var xv=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||ss,this.aboveAxis=sl(this.options.aboveAxis,!0),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options,e=t.labels;if(e.visible){var i,r=this.pointData(),n=Ps(e);i=n?n(r):this.formatValue(e.format),this.label=new bv(i,_s({vertical:t.vertical},e),r),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},e.prototype.createVisual=function(){var e=this,i=this.box,r=this.options,n=r.visual;if(!1!==this.visible)if(t.prototype.createVisual.call(this),n){var o=this.rectVisual=n({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var t=new bc;return e.createRect(t),t},options:r});o&&this.visual.append(o)}else i.width()>0&&i.height()>0&&this.createRect(this.visual)},e.prototype.createRect=function(t){var e=this.options,i=e.border,r=$a(i.opacity)?i.opacity:e.opacity,n=this.box.toRect();n.size.width=Math.round(n.size.width);var o=this.rectVisual=sc.fromRect(n,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:r,dashType:i.dashType}}),s=this.box.width(),a=this.box.height();if((e.vertical?s:a)>6&&(fs(o),(s<1||a<1)&&(o.options.stroke.lineJoin="round")),t.append(o),wv(e)){var l=this.createGradientOverlay(o,{baseColor:this.color},_s({end:e.vertical?void 0:[0,1]},e.overlay));t.append(l)}},e.prototype.createHighlight=function(t){return fs(sc.fromRect(this.box.toRect(),t))},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.getBorderColor=function(){var t=this.color,e=this.options.border,i=e._brightness||_d,r=e.color;return $a(r)||(r=new Al(t).brightness(i).toHex()),r},e.prototype.tooltipAnchor=function(){var t,e,i=this,r=i.options,n=i.box,o=i.aboveAxis,s=this.owner.pane.clipBox()||n,a=Ko,l=rs;if(r.vertical)t=Math.min(n.x2,s.x2)+5,o?e=Math.max(n.y1,s.y1):(e=Math.min(n.y2,s.y2),l=No);else{var h=Math.max(n.x1,s.x1),c=Math.min(n.x2,s.x2);r.isStacked?(l=No,o?(a=ts,t=c):t=h,e=Math.max(n.y1,s.y1)-5):(o?t=c+5:(t=h-5,a=ts),e=Math.max(n.y1,s.y1))}return{point:new Fl(t,e),align:{horizontal:a,vertical:l}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},e}(Dc);_s(xv.prototype,jf),_s(xv.prototype,Vf),xv.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};const _v=xv;function kv(t,e){t.forEach(e)}function Sv(t,e){for(var i=t.length,r=i-1;r>=0;r--)e(t[r],r-i-1)}var Cv=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Sv:kv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.vertical,r=e.gap,n=e.spacing,o=this.children,s=o.length,a=i?hs:ls,l=s+r+n*(s-1),h=(i?t.height():t.width())/l,c=t[a+1]+h*(r/2);this.forEach(o,(function(e,i){var r=(e.box||t).clone();r[a+1]=c,r[a+2]=c+h,e.reflow(r),i<s-1&&(c+=h*n),c+=h}))},e}(Dc);hl(Cv,{vertical:!1,gap:0,spacing:0});const Ev=Cv;var Tv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){for(var e=this.options.vertical?ls:hs,i=this.children,r=i.length,n=this.box=new eh,o=0;o<r;o++){var s=i[o];if(!1!==s.visible){var a=s.box.clone();a.snapTo(t,e),0===o&&(n=this.box=a.clone()),s.reflow(a),n.wrap(a)}}},e}(Dc);hl(Tv,{vertical:!0});const Av=Tv;var Mv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange()},e.prototype.pointType=function(){return _v},e.prototype.clusterType=function(){return Ev},e.prototype.stackType=function(){return Av},e.prototype.stackLimits=function(e,i){return t.prototype.stackLimits.call(this,e,i)},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.options,a=this.children,l=s.isStacked,h=this.pointValue(t),c=this.pointOptions(n,o),p=c.labels;l&&p.position===Af&&(p.position=Tf),c.isStacked=l;var u=t.fields.color||n.color;h<0&&c.negativeColor&&(u=c.negativeColor),c=this.evalPointOptions(c,h,r,i,n,o),bs(n.color)&&(u=c.color);var d=new(this.pointType())(h,c);d.color=u;var f=a[i];f||(f=new(this.clusterType())({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(f));l?this.getStackWrap(n,f).append(d):f.append(d);return d},e.prototype.getStackWrap=function(t,e){var i,r=t.stack,n=r&&r.group||r,o=e.children;if(typeof n===is){for(var s=0;s<o.length;s++)if(o[s]._stackGroup===n){i=o[s];break}}else i=o[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=n,e.append(i));return i},e.prototype.categorySlot=function(t,e,i){var r=this.options,n=t.getSlot(e),o=i.startValue();if(r.isStacked){var s=i.getSlot(o,o,!0),a=r.invertAxes?ls:hs;n[a+1]=n[a+2]=s[a+1]}return n},e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.createAnimation=function(){this._setAnimationOptions(),t.prototype.createAnimation.call(this),rv(this.options.series)&&this._setChildrenAnimation()},e.prototype._setChildrenAnimation=function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],r=i.visual;r&&$a(r.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},e.prototype._setAnimationOptions=function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var r=this.seriesValueAxis(e.series[0]);t=r.getSlot(r.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new Kl(t.x1,t.y1),i.vertical=!e.invertAxes},e}(Bf);hl(Mv,{animation:{type:Rd}});const Ov=Mv;var Dv=function(t){function e(e,i){t.call(this,i),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,r=e.value,n=e.owner.seriesValueAxis(i),o=n.getSlot(r.open,r.close),s=n.getSlot(r.low,r.high);o.x1=s.x1=t.x1,o.x2=s.x2=t.x2,this.realBody=o;var a=s.center().x,l=[];l.push([[a,s.y1],[a,o.y1]]),l.push([[a,o.y2],[a,s.y2]]),this.lines=l,this.box=s.clone().wrap(o),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},e.prototype.reflowNote=function(){this.note&&this.note.reflow(this.box)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},e.prototype.mainVisual=function(t){var e=new bc;return this.createBody(e,t),this.createLines(e,t),e},e.prototype.createBody=function(t,e){var i=sc.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:sl(e.border.opacity,e.opacity)}),fs(i),t.append(i),wv(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},_s({end:e.vertical?void 0:[0,1]},e.overlay)))},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.lines,e.line)},e.prototype.drawLines=function(t,e,i,r){if(i)for(var n={stroke:{color:r.color||this.color,opacity:sl(r.opacity,e.opacity),width:r.width,dashType:r.dashType,lineCap:"butt"}},o=0;o<i.length;o++){var s=sc.fromPoints(i[o],n);fs(s),t.append(s)}},e.prototype.getBorderColor=function(){var t=this.options.border,e=t.color;return $a(e)||(e=new Al(this.color).brightness(t._brightness).toHex()),e},e.prototype.createOverlay=function(){var t=sc.fromRect(this.box.toRect(),{fill:{color:ss,opacity:0},stroke:null});this.visual.append(t)},e.prototype.createHighlight=function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(_s({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},e.prototype.highlightVisual=function(){return this._mainVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},e.prototype.tooltipAnchor=function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new Fl(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:Ko,vertical:rs}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e}(Dc);hl(Dv,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),_s(Dv.prototype,jf),_s(Dv.prototype,Vf);const Pv=Dv;function Rv(t){return hd(t)===t.length}var Iv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.addValue=function(t,e){var i,r=e.categoryIx,n=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,h=t.valueFields,c=Rv(this.splitValue(h)),p=o.data[r],u=this.categoryPoints[r];u||(this.categoryPoints[r]=u=[]),c&&(i=this.createPoint(t,e));var d=a[r];d||(d=new Ev({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(h,e),d.append(i),i.categoryIx=r,i.category=n,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=p,i.noteText=t.fields.noteText),this.points.push(i),u.push(i)},e.prototype.pointType=function(){return Pv},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.pointType(),a=t.valueFields,l=_s({},n),h=t.fields.color||n.color;l=this.evalPointOptions(l,a,r,i,n,o),n.type===Bd&&a.open>a.close&&(h=t.fields.downColor||n.downColor||n.color),bs(n.color)&&(h=l.color),l.vertical=!this.options.invertAxes;var c=new s(a,l);return c.color=h,c},e.prototype.splitValue=function(t){return[t.low,t.open,t.close,t.high]},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=this.splitValue(t),n=this.valueAxisRanges[i];n=this.valueAxisRanges[i]=n||{min:Xo,max:Yo},n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},e.prototype.animationPoints=function(){return this.points},e}(Bf);_s(Iv.prototype,ov);const Lv=Iv;var zv=function(t){function e(e,i){t.call(this,e,i),this.createNote()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i,r=this,n=r.options,o=r.value,s=r.owner.seriesValueAxis(n);this.boxSlot=i=s.getSlot(o.q1,o.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=s.getSlot(o.lower,o.upper),this.reflowWhiskerSlot(t);var a=s.getSlot(o.median);if(o.mean){var l=s.getSlot(o.mean);this.meanPoints=this.calcMeanPoints(t,l)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},e.prototype.reflowBoxSlot=function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},e.prototype.calcMeanPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},e.prototype.calcMedianPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.renderOutliers=function(t){for(var e=this.value,i=e.outliers||[],r=3*Math.abs(e.q3-e.q1),n=[],o=t.markers||{},s=0;s<i.length;s++){var a=i[s],l=_s({},(o=a<e.q3+r&&a>e.q1-r?t.outliers:t.extremes).border);$a(l.color)||($a(this.color)?l.color=this.color:l.color=new Al(o.background).brightness(_d).toHex());var h=new Lc({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:l,opacity:o.opacity});h.value=a,n.push(h)}return this.reflowOutliers(n),n},e.prototype.reflowOutliers=function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),r=this.box.center(),n=0;n<t.length;n++){var o=t[n].value,s=i.getSlot(o);e.options.vertical?s.move(r.x):s.move(void 0,r.y),e.box=e.box.wrap(s),t[n].reflow(s)}},e.prototype.mainVisual=function(e){for(var i=t.prototype.mainVisual.call(this,e),r=this.renderOutliers(e),n=0;n<r.length;n++){var o=r[n].getElement();o&&i.append(o)}return i},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},e.prototype.getBorderColor=function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:t.prototype.getBorderColor.call(this)},e}(Pv);hl(zv,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:Vo,background:ss,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:Fo,background:ss,border:{width:2,opacity:1},opacity:0}}),_s(zv.prototype,jf);const Bv=zv;var Nv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowBoxSlot=function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},e.prototype.calcMeanPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},e.prototype.calcMedianPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e}(Bv);const jv=Nv;var Fv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e){var i,r=e.categoryIx,n=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,h=t.valueFields,c=Rv(this.splitValue(h)),p=o.data[r],u=this.categoryPoints[r];u||(this.categoryPoints[r]=u=[]),c&&(i=this.createPoint(t,e));var d=a[r];d||(d=new Ev({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(h,e),d.append(i),i.categoryIx=r,i.category=n,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=p),this.points.push(i),u.push(i)},e.prototype.pointType=function(){return this.options.invertAxes?jv:Bv},e.prototype.splitValue=function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=this.valueAxisRanges[i],n=this.splitValue(t).concat(this.filterOutliers(t.outliers));$a(t.mean)&&(n=n.concat(t.mean)),r=this.valueAxisRanges[i]=r||{min:Xo,max:Yo},r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},e.prototype.filterOutliers=function(t){for(var e=(t||[]).length,i=[],r=0;r<e;r++){var n=t[r];$a(n)&&null!==n&&i.push(n)}return i},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Lv);const Vv=Fv;var Hv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x},e}(Df);const Wv=Hv;function Uv(t){return $a(t)&&null!==t}var qv=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.addErrorBar=function(t,e,i){var r,n=t.value[e],o=e+"Value",s=e+"ErrorLow",a=e+"ErrorHigh",l=i.seriesIx,h=i.series,c=t.options.errorBars,p=i[s],u=i[a];ms(n)&&(ms(p)&&ms(u)&&(r={low:p,high:u}),c&&$a(c[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new yd(c[o],h,e),r=this.seriesErrorRanges[e][l].getErrorRange(n,c[o])),r&&this.addPointErrorBar(r,t,e))},e.prototype.addPointErrorBar=function(t,e,i){var r=t.low,n=t.high,o=e.series,s=e.options.errorBars,a=i===hs,l={};e[i+"Low"]=r,e[i+"High"]=n,e.errorBars=e.errorBars||[];var h=new Wv(r,n,a,this,o,s);e.errorBars.push(h),e.append(h),l[i]=r,this.updateRange(l,o),l[i]=n,this.updateRange(l,o)},e.prototype.addValue=function(t,e){var i,r=t.x,n=t.y,o=e.seriesIx,s=this.options.series[o],a=this.seriesMissingValues(s),l=this.seriesPoints[o],h=t;Uv(r)&&Uv(n)||(h=this.createMissingValue(h,a)),h&&((i=this.createPoint(h,e))&&(Object.assign(i,e),this.addErrorBar(i,ls,e),this.addErrorBar(i,hs,e)),this.updateRange(h,e.series)),this.points.push(i),l.push(i)},e.prototype.seriesMissingValues=function(t){return t.missingValues},e.prototype.createMissingValue=function(){},e.prototype.updateRange=function(t,e){var i=this.chartService.intl,r=e.xAxis,n=e.yAxis,o=t.x,s=t.y,a=this.xAxisRanges[r],l=this.yAxisRanges[n];Uv(o)&&(a=this.xAxisRanges[r]=a||{min:Xo,max:Yo},gs(o)&&(o=cu(i,o)),a.min=Math.min(a.min,o),a.max=Math.max(a.max,o)),Uv(s)&&(l=this.yAxisRanges[n]=l||{min:Xo,max:Yo},gs(s)&&(s=cu(i,s)),l.min=Math.min(l.min,s),l.max=Math.max(l.max,s))},e.prototype.evalPointOptions=function(t,e,i){var r=i.series,n=i.seriesIx,o={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},s=this._evalSeries[n];$a(s)||(this._evalSeries[n]=s=If(t,{},o,!0));var a=t;return s&&If(a=_s({},t),{value:e,series:r,dataItem:i.dataItem},o),a},e.prototype.pointType=function(){return Wf},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=_s({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,r=this.pointOptions(i,e.seriesIx),n=e.color||i.color;r=this.evalPointOptions(r,t,e),bs(i.color)&&(n=r.color);var o=new Wf(t,r);return o.color=n,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,r=this.plotArea,n=e?r.namedXAxes[e]:r.axisX,o=i?r.namedYAxes[i]:r.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{x:n,y:o}},e.prototype.reflow=function(t){var e=this,i=this.points,r=!this.options.clip,n=0;this.traverseDataPoints((function(t,o){var s=i[n++],a=e.seriesAxes(o.series),l=a.x.getSlot(t.x,t.x,r),h=a.y.getSlot(t.y,t.y,r);if(s)if(l&&h){var c=e.pointSlot(l,h);s.reflow(c)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new eh(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=this.seriesPoints,r=0;r<e.length;r++){var n=e[r];i[r]||(i[r]=[]);for(var o=0;o<n.data.length;o++){var s=this._bindPoint(n,r,o),a=s.valueFields,l=s.fields;t(a,_s({pointIx:o,series:n,seriesIx:r,dataItem:n.data[o],owner:this},l))}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Dc);hl(qv,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),_s(qv.prototype,ov,{_bindPoint:Bf.prototype._bindPoint});const Gv=qv;var $v=function(t){function e(e,i){t.call(this,e,i),this.category=e.category}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var t=this.options.highlight,e=t.border,i=this.options.markers,r=this.box.center(),n=(i.size+i.border.width+e.width)/2,o=new bc,s=new mc(new uc([r.x,r.y+n/5+e.width/2],n+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new mc(new uc([r.x,r.y],n),{stroke:{color:e.color||new Al(i.background).brightness(_d).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return o.append(s,a),o},e}(Wf);$v.prototype.defaults=_s({},$v.prototype.defaults,{labels:{position:jo},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),$v.prototype.defaults.highlight.zIndex=void 0;const Kv=$v;var Xv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this._maxSize=Yo,t.prototype._initFields.call(this)},e.prototype.addValue=function(e,i){null!==e.size&&(e.size>0||e.size<0&&i.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),t.prototype.addValue.call(this,e,i)):(this.points.push(null),this.seriesPoints[i.seriesIx].push(null))},e.prototype.reflow=function(e){this.updateBubblesSize(e),t.prototype.reflow.call(this,e)},e.prototype.pointType=function(){return Kv},e.prototype.createPoint=function(t,e){var i=e.series,r=i.data.length,n=e.pointIx*(wd/r),o={delay:n,duration:wd-n,type:Ld},s=e.color||i.color;t.size<0&&i.negativeValues.visible&&(s=sl(i.negativeValues.color,s));var a=_s({labels:{animation:{delay:n,duration:wd-n}}},this.pointOptions(i,e.seriesIx),{markers:{type:Fo,border:i.border,opacity:i.opacity,animation:o}});a=this.evalPointOptions(a,t,e),bs(i.color)&&(s=a.color),a.markers.background=s;var l=new Kv(t,a);return l.color=s,this.append(l),l},e.prototype.updateBubblesSize=function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),r=0;r<e.length;r++)for(var n=e[r],o=this.seriesPoints[r],s=(n.minSize||Math.max(.02*i,10))/2,a=(n.maxSize||.2*i)/2,l=Math.PI*s*s,h=(Math.PI*a*a-l)/this._maxSize,c=0;c<o.length;c++){var p=o[c];if(p){var u=Math.abs(p.value.size)*h,d=Math.sqrt((l+u)/Math.PI),f=sl(p.options.zIndex,0)+(1-d/a);_s(p.options,{zIndex:f,markers:{size:2*d,zIndex:f},labels:{zIndex:f+1}})}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},e.prototype.createAnimation=function(){},e.prototype.createVisual=function(){},e}(Gv);hl(Xv,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const Yv=Xv;var Zv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lc);_s(Zv.prototype,jf);const Jv=Zv;var Qv=function(t){function e(e,i){t.call(this,i),this.aboveAxis=this.options.aboveAxis,this.color=i.color||ss,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options;this._rendered||(this._rendered=!0,$a(this.value.target)&&(this.target=new Jv({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:rs,align:ts}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createNote())},e.prototype.reflow=function(t){this.render();var e=this,i=e.options,r=e.target,n=e.owner,o=i.invertAxes,s=n.seriesValueAxis(this.options),a=n.categorySlot(n.categoryAxis,i.categoryIx,s),l=s.getSlot(this.value.target),h=o?l:a,c=o?a:l;if(r){var p=new eh(h.x1,c.y1,h.x2,c.y2);r.options.height=o?p.height():i.target.line.width,r.options.width=o?i.target.line.width:p.width(),r.reflow(p)}this.note&&this.note.reflow(t),this.box=t},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options,i=sc.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:sl(e.border.opacity,e.opacity)}),this.bodyVisual=i,fs(i),this.visual.append(i)},e.prototype.createAnimation=function(){this.bodyVisual&&(this.animation=Mc.create(this.bodyVisual,this.options.animation))},e.prototype.createHighlight=function(t){return sc.fromRect(this.box.toRect(),t)},e.prototype.highlightVisual=function(){return this.bodyVisual},e.prototype.highlightVisualArgs=function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(Dc);Qv.prototype.tooltipAnchor=_v.prototype.tooltipAnchor,hl(Qv,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}}),_s(Qv.prototype,jf),_s(Qv.prototype,Vf);const tm=Qv;var em=function(t){function e(e,i){!function(t){for(var e=t.series,i=0;i<e.length;i++){var r=e[i],n=r.data;!n||cs(n[0])||ks(n[0])||(r.data=[n])}}(i),t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].reflow(t[r])},e.prototype.plotRange=function(t){var e=t.series,i=this.seriesValueAxis(e),r=this.categoryAxisCrossingValue(i);return[r,t.value.current||r]},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=this.options,a=this.children,l=t.valueFields,h=_s({vertical:!s.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:s.invertAxes},n),c=t.fields.color||n.color;h=this.evalPointOptions(h,l,r,i,n,o),bs(n.color)&&(c=h.color);var p=new tm(l,h);p.color=c;var u=a[i];return u||(u=new Ev({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(u)),u.append(p),p},e.prototype.updateRange=function(t,e){var i=t.current,r=t.target,n=e.series.axis,o=this.valueAxisRanges[n];$a(i)&&!isNaN(i)&&$a(r&&!isNaN(r))&&((o=this.valueAxisRanges[n]=o||{min:Xo,max:Yo}).min=Math.min(o.min,i,r),o.max=Math.max(o.max,i,r))},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},e.prototype.pointValue=function(t){return t.valueFields.current},e.prototype.aboveAxis=function(t){return t.value.current>0},e.prototype.createAnimation=function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}},e}(Bf);em.prototype._setAnimationOptions=Ov.prototype._setAnimationOptions,hl(em,{animation:{type:Rd}});const im=em;var rm=function(t){function e(e,i){t.call(this),this.chartService=e,this.options=_s({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStyle=function(t,e){var i=t.background,r=t.border.color;if(e){var n=e.color||e.options.color;i=sl(i,n),r=sl(r,n)}var o=As(t.padding||{},"auto");return{backgroundColor:i,borderColor:r,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Ss(t.border.width),paddingTop:Ss(o.top),paddingBottom:Ss(o.bottom),paddingLeft:Ss(o.left),paddingRight:Ss(o.right)}},e.prototype.show=function(t,e,i){t.format=e.format;var r=this.getStyle(e,i);t.style=r;var n=new Al(r.backgroundColor);$a(e.color)||n.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(kf,t),this.visible=!0},e.prototype.hide=function(){this.chartService&&this.chartService.notify(Sf),this.visible=!1},e.prototype.destroy=function(){delete this.chartService},e}(Zs);hl(rm,{border:{width:1},opacity:1});const nm=rm;var om=function(t){function e(e,i,r){t.call(this,e,r),this.crosshair=i,this.formatService=e.format,this.initAxisName()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAxisName=function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},e.prototype.showAt=function(t){var e=this.crosshair.axis,i=this.options,r=e[i.stickyMode?"getCategory":"getValue"](t),n=r;i.format?n=this.formatService.auto(i.format,r):e.options.type===Ho&&(n=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],r)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},e.prototype.hide=function(){this.chartService.notify(Sf,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},e.prototype.getAnchor=function(){var t,e,i,r=this.crosshair,n=this.options,o=n.position,s=n.padding,a=!r.axis.options.vertical,l=r.line.bbox();return a?(t=jo,o===No?(e=rs,i=l.bottomLeft().translate(0,s)):(e=No,i=l.topLeft().translate(0,-s))):(e=jo,o===Ko?(t=ts,i=l.topLeft().translate(-s,0)):(t=Ko,i=l.topRight().translate(s,0))),{point:i,align:{horizontal:t,vertical:e}}},e}(nm);hl(om,{padding:10});const sm=om;var am=function(t){function e(e,i,r){t.call(this,r),this.axis=i,this.stickyMode=i instanceof fu;var n=this.options.tooltip;n.visible&&(this.tooltip=new sm(e,this,_s({},n,{stickyMode:this.stickyMode})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},e.prototype.hide=function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},e.prototype.moveLine=function(){var t,e=this.axis,i=this.point,r=e.options.vertical,n=this.getBox(),o=r?hs:ls,s=new Kl(n.x1,n.y1);if(t=r?new Kl(n.x2,n.y1):new Kl(n.x1,n.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));s[o]=t[o]=a.center()[o]}else s[o]=t[o]=i[o];this.box=n,this.line.moveTo(s).lineTo(t)},e.prototype.getBox=function(){for(var t,e=this.axis,i=e.pane.axes,r=i.length,n=e.options.vertical,o=e.lineBox().clone(),s=n?ls:hs,a=0;a<r;a++){var l=i[a];l.options.vertical!==n&&(t?t.wrap(l.lineBox()):t=l.lineBox().clone())}return o[s+1]=t[s+1],o[s+2]=t[s+2],o},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;this.line=new sc({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),t.prototype.destroy.call(this)},e}(Dc);hl(am,{color:Bo,width:2,zIndex:-1,tooltip:{visible:!1}});const lm=am;var hm=function(t){function e(e,i){t.call(this,e),this.pane=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldClip=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},e.prototype._clipBox=function(){return this.pane.chartsBox()},e.prototype.createVisual=function(){if(this.visual=new bc({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=sc.fromRect(t);fs(e),this.visual.clip(e),this.unclipLabels()}},e.prototype.stackRoot=function(){return this},e.prototype.unclipLabels=function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var r=t[i].points||{},n=r.length,o=0;o<n;o++){var s=r[o];if(s&&!1!==s.visible&&s.overlapsBox&&s.overlapsBox(e))if(s.unclipElements)s.unclipElements();else{var a=s.label,l=s.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),l&&l.options.visible&&(l.options.noclip=!0)}}},e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this.parent},e}(Dc);hm.prototype.isStackRoot=!0;const cm=hm;var pm=function(t){function e(e){t.call(this,e),this.id="pane"+um++,this.createTitle(),this.content=new Dc,this.chartContainer=new cm({},this),this.append(this.content),this.axes=[],this.charts=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTitle=function(){var t=this.options.title;ks(t)&&(t=_s({},t,{align:t.position,position:rs})),this.title=pp.buildTitle(t,this,e.prototype.options.title)},e.prototype.appendAxis=function(t){this.content.append(t),this.axes.push(t),t.pane=this},e.prototype.appendAxisAt=function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},e.prototype.appendChart=function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},e.prototype.empty=function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},e.prototype.reflow=function(e){var i;tl(this.children)===this.content&&(i=this.children.pop()),t.prototype.reflow.call(this,e),i&&this.children.push(i),this.title&&(this.contentBox.y1+=this.title.box.height())},e.prototype.visualStyle=function(){var e=t.prototype.visualStyle.call(this);return e.zIndex=-10,e},e.prototype.renderComplete=function(){this.options.visible&&this.createGridLines()},e.prototype.stackRoot=function(){return this},e.prototype.clipRoot=function(){return this},e.prototype.createGridLines=function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],r=[],n=0;n<t.length;n++)for(var o=t[n],s=o.options.vertical,a=s?i:r,l=0;l<e.length;l++)if(0===a.length){var h=e[l];s!==h.options.vertical&&qa(a,o.createGridLines(h))}},e.prototype.refresh=function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},e.prototype.chartsBox=function(){for(var t=this.axes,e=t.length,i=new eh,r=0;r<e;r++){var n=t[r],o=n.options.vertical?hs:ls,s=n.lineBox();i[o+1]=s[o+1],i[o+2]=s[o+2]}if(0===i.x2)for(var a=this.parent.axes,l=a.length,h=0;h<l;h++){var c=a[h];if(!c.options.vertical){var p=c.lineBox();i.x1=p.x1,i.x2=p.x2}}return i},e.prototype.clipBox=function(){return this.chartContainer.clipBox},e.prototype.notifyRender=function(){var t=this.getService();t&&t.notify("paneRender",{pane:new sd(this),index:this.paneIndex,name:this.options.name})},e}(Rc),um=1;pm.prototype.isStackRoot=!0,hl(pm,{zIndex:-1,shrinkToFit:!0,title:{align:Ko},visible:!0});const dm=pm;function fm(t,e){null!==e&&t.push(e)}function vm(t,e,i){var r=e.visible;if($a(r))return r;var n=t.pointVisibility;return n?n[i]:void 0}function mm(t){for(var e=t.data,i=[],r=0,n=0,o=0;o<e.length;o++){var s=fd.current.bindPoint(t,o),a=s.valueFields.value;gs(a)&&(a=parseFloat(a)),ms(a)?(s.visible=!1!==vm(t,s.fields,o),s.value=Math.abs(a),i.push(s),s.visible&&(r+=s.value),0!==a&&n++):i.push(null)}return{total:r,points:i,count:n}}function gm(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function ym(t,e){for(var i=[],r=[].concat(e),n=0;n<t.length;n++){var o=t[n];Fs(o.type,r)&&i.push(o)}return i}function bm(t,e,i){if(null===e)return e;var r="_date_"+t,n=e[r];return n||(n=cu(i,Ls(t)(e)),e[r]=n),n}function wm(t,e){var i=t.type,r=e instanceof Date;return!i&&r||gm(i,Ho)}function xm(t){return 1===t.length?t[0]:t}var _m=/area/i;function km(t,e){var i=fd.current.bindPoint(t,null,e).valueFields;for(var r in i)if(ys(i[r]))return!0}function Sm(t){var e,i,r=t.start,n=t.dir,o=t.min,s=t.max,a=t.getter,l=t.hasItem,h=t.series,c=r;do{l(c+=n)&&(e=km(h,(i=a(c)).item))}while(o<=c&&c<=s&&!e);if(e)return i}function Cm(t,e,i,r,n){var o=e.min,s=e.max,a=o>0&&o<i,l=s+1<i;if(a||l){var h,c,p,u=function(t){return t.missingValues?t.missingValues:_m.test(t.type)||t.stack?Ed:Td}(t);if(u!==Td)a&&(h=r(o-1)),l&&(c=r(s+1));else a&&(h=km(t,(p=r(o-1)).item)?p:Sm({start:o,dir:-1,min:0,max:i-1,getter:r,hasItem:n,series:t})),l&&(c=km(t,(p=r(s+1)).item)?p:Sm({start:s,dir:1,min:0,max:i-1,getter:r,hasItem:n,series:t}));h&&(t._outOfRangeMinPoint=h),c&&(t._outOfRangeMaxPoint=c)}}var Em=function(t){function e(e,i,r){t.call(this,i),this.initFields(e,i),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=r,this.originalOptions=i,this.createPanes(),this.render(),this.createCrosshairs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.initSeries=function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},e.prototype.createPanes=function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],r=Math.max(i.length,1),n=[],o=_s({title:{color:t.color}},e),s=0;s<r;s++){var a=_s({},o,i[s]);gs(a.title)&&(a.title=_s({text:a.title},o.title));var l=new dm(a);l.paneIndex=s,n.push(l),this.append(l)}this.panes=n},e.prototype.crosshairOptions=function(t){return t.options.crosshair},e.prototype.createCrosshairs=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var r=t[i],n=0;n<r.axes.length;n++){var o=r.axes[n],s=e.crosshairOptions(o);if(s&&s.visible){var a=new lm(e.chartService,o,s);e.crosshairs.push(a),r.content.append(a)}}},e.prototype.removeCrosshairs=function(t){for(var e=this.crosshairs,i=t.axes,r=e.length-1;r>=0;r--)for(var n=0;n<i.length;n++)if(e[r].axis===i[n]){e.splice(r,1);break}},e.prototype.hideCrosshairs=function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},e.prototype.findPane=function(t){for(var e,i=this.panes,r=0;r<i.length;r++)if(i[r].options.name===t){e=i[r];break}return e||i[0]},e.prototype.findPointPane=function(t){for(var e,i=this.panes,r=0;r<i.length;r++)if(i[r].box.containsPoint(t)){e=i[r];break}return e},e.prototype.appendAxis=function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},e.prototype.removeAxis=function(t){for(var e=[],i=0;i<this.axes.length;i++){var r=this.axes[i];t!==r?e.push(r):r.destroy()}this.axes=e},e.prototype.appendChart=function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},e.prototype.removeChart=function(t){for(var e=[],i=0;i<this.charts.length;i++){var r=this.charts[i];r!==t?e.push(r):r.destroy()}this.charts=e},e.prototype.addToLegend=function(t){for(var e=t.length,i=this.options.legend,r=i.labels||{},n=i.inactiveItems||{},o=n.labels||{},s=[],a=0;a<e;a++){var l=t[a],h=!1!==l.visible;if(!1!==l.visibleInLegend){var c=l.name,p=h?Ps(r):Ps(o)||Ps(r);p&&(c=p({text:Uv(c)?c:"",series:l}));var u=l._defaults,d=l.color;bs(d)&&u&&(d=u.color);var f=void 0,v=void 0;h?(f={},v=d):(f={color:o.color,font:o.font},v=n.markers.color),Uv(c)&&""!==c&&s.push({text:c,labels:f,markerColor:v,series:l,active:h})}}qa(i.items,s)},e.prototype.groupAxes=function(t){for(var e=[],i=[],r=0;r<t.length;r++)for(var n=t[r].axes,o=0;o<n.length;o++){var s=n[o];s.options.vertical?i.push(s):e.push(s)}return{x:e,y:i,any:e.concat(i)}},e.prototype.groupSeriesByPane=function(){for(var t=this.series,e={},i=0;i<t.length;i++){var r=t[i],n=this.seriesPaneName(r);e[n]?e[n].push(r):e[n]=[r]}return e},e.prototype.filterVisibleSeries=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];!1!==r.visible&&e.push(r)}return e},e.prototype.reflow=function(t){var e=this.options.plotArea,i=this.panes,r=As(e.margin);this.box=t.clone().unpad(r),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},e.prototype.redraw=function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var r=0;r<e.length;r++)this.removeCrosshairs(e[r]),e[r].empty();this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var n=0;n<e.length;n++)e[n].refresh()},e.prototype.axisCrossingValues=function(t,e){for(var i=t.options,r=[].concat(i.axisCrossingValues||i.axisCrossingValue),n=e.length-r.length,o=r[0]||0,s=0;s<n;s++)r.push(o);return r},e.prototype.alignAxisTo=function(t,e,i,r){var n=t.getSlot(i,i,!0),o=t.options.reverse?2:1,s=e.getSlot(r,r,!0),a=e.options.reverse?2:1,l=t.box.translate(s[ls+a]-n[ls+o],s[hs+a]-n[hs+o]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},e.prototype.alignAxes=function(t,e){for(var i=this,r=t[0],n=e[0],o=this.axisCrossingValues(r,e),s=this.axisCrossingValues(n,t),a={},l={},h={},c={},p=0;p<e.length;p++){var u=e[p],d=u.pane,f=d.id,v=!1!==u.options.visible,m=Mm(t,d)||r,g=o;m!==r&&(g=i.axisCrossingValues(m,e)),i.alignAxisTo(u,m,s[p],g[p]),u.options._overlap||(nl(u.lineBox().x1)===nl(m.lineBox().x1)&&(a[f]&&u.reflow(u.box.alignTo(a[f].box,Ko).translate(-u.options.margin,0)),v&&(a[f]=u)),nl(u.lineBox().x2)===nl(m.lineBox().x2)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),i.alignAxisTo(u,m,s[p],g[p]),l[f]&&u.reflow(u.box.alignTo(l[f].box,ts).translate(u.options.margin,0)),v&&(l[f]=u)),0!==p&&n.pane===u.pane&&(u.alignTo(n),u.reflow(u.box)))}for(var y=0;y<t.length;y++){var b=t[y],w=b.pane,x=w.id,_=!1!==b.options.visible,k=Mm(e,w)||n,S=s;k!==n&&(S=i.axisCrossingValues(k,t)),i.alignAxisTo(b,k,o[y],S[y]),b.options._overlap||(nl(b.lineBox().y1)===nl(k.lineBox().y1)&&(b._mirrored||(b.options.labels.mirror=!b.options.labels.mirror,b._mirrored=!0),i.alignAxisTo(b,k,o[y],S[y]),h[x]&&b.reflow(b.box.alignTo(h[x].box,rs).translate(0,-b.options.margin)),_&&(h[x]=b)),nl(b.lineBox().y2,3)===nl(k.lineBox().y2,3)&&(c[x]&&b.reflow(b.box.alignTo(c[x].box,No).translate(0,b.options.margin)),_&&(c[x]=b)),0!==y&&(b.alignTo(r),b.reflow(b.box)))}},e.prototype.shrinkAxisWidth=function(t){for(var e=this.groupAxes(t).any,i=Am(e),r=0,n=0;n<t.length;n++){var o=t[n];o.axes.length>0&&(r=Math.max(r,i.width()-o.contentBox.width()))}if(0!==r)for(var s=0;s<e.length;s++){var a=e[s];a.options.vertical||a.reflow(a.box.shrink(r,0))}},e.prototype.shrinkAxisHeight=function(t){for(var e,i=0;i<t.length;i++){var r=t[i],n=r.axes,o=Math.max(0,Am(n).height()-r.contentBox.height());if(0!==o){for(var s=0;s<n.length;s++){var a=n[s];a.options.vertical&&a.reflow(a.box.shrink(0,o))}e=!0}}return e},e.prototype.fitAxes=function(t){for(var e=this.groupAxes(t).any,i=0,r=0;r<t.length;r++){var n=t[r],o=n.axes,s=n.contentBox;if(o.length>0){var a=Am(o),l=Math.max(s.y1-a.y1,s.y2-a.y2);i=Math.max(i,s.x1-a.x1);for(var h=0;h<o.length;h++){var c=o[h];c.reflow(c.box.translate(0,l))}}}for(var p=0;p<e.length;p++){var u=e[p];u.reflow(u.box.translate(i,0))}},e.prototype.reflowAxes=function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},e.prototype.autoRotateAxisLabels=function(t){for(var e,i=this.panes,r=Om(i),n=0;n<r.length;n++){r[n].autoRotateLabels()&&(e=!0)}if(e){for(var o=0;o<i.length;o++)this.reflowPaneAxes(i[o]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},e.prototype.reflowPaneAxes=function(t){var e=t.axes,i=e.length;if(i>0)for(var r=0;r<i;r++)e[r].reflow(t.contentBox)},e.prototype.reflowCharts=function(t){for(var e=this.charts,i=e.length,r=this.box,n=0;n<i;n++){var o=e[n].pane;o&&!Fs(o,t)||e[n].reflow(r)}},e.prototype.reflowPanes=function(){for(var t=this.box,e=this.panes,i=e.length,r=t.height(),n=0,o=t.y1,s=0;s<i;s++){var a=e[s],l=a.options.height;if(a.options.width=t.width(),a.options.height){if(l.indexOf&&l.indexOf("%")){var h=parseInt(l,10)/100;a.options.height=h*t.height()}a.reflow(t.clone()),r-=a.options.height}else n++}for(var c=0;c<i;c++){var p=e[c];p.options.height||(p.options.height=r/n)}for(var u=0;u<i;u++){var d=e[u],f=t.clone().move(t.x1,o);d.reflow(f),o+=d.options.height}},e.prototype.backgroundBox=function(){for(var t,e=this.axes,i=e.length,r=0;r<i;r++)for(var n=e[r],o=0;o<i;o++){var s=e[o];if(n.options.vertical!==s.options.vertical){var a=n.lineBox().clone().wrap(s.lineBox());t=t?t.wrap(a):a}}return t||this.box},e.prototype.chartsBoxes=function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},e.prototype.addBackgroundPaths=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(sc.fromRect(e[i].toRect()))},e.prototype.backgroundContainsPoint=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e,i=this.options.plotArea,r=i.opacity,n=i.background,o=i.border;void 0===o&&(o={}),""!==(e=n)&&null!==e&&"none"!==e&&"transparent"!==e&&$a(e)||(n=ss,r=0);var s=this._bgVisual=new ac({fill:{color:n,opacity:r},stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType},zIndex:-1});this.addBackgroundPaths(s),this.appendVisual(s)},e.prototype.pointsByCategoryIndex=function(t){var e=this.charts,i=[];if(null!==t)for(var r=0;r<e.length;r++){if("_navigator"!==e[r].pane.options.name){var n=e[r].categoryPoints[t];if(n&&n.length)for(var o=0;o<n.length;o++){var s=n[o];s&&$a(s.value)&&null!==s.value&&i.push(s)}}}return i},e.prototype.pointsBySeriesIndex=function(t){return this.filterPoints((function(e){return e.series.index===t}))},e.prototype.pointsBySeriesName=function(t){return this.filterPoints((function(e){return e.series.name===t}))},e.prototype.filterPoints=function(t){for(var e=this.charts,i=[],r=0;r<e.length;r++)for(var n=e[r].points,o=0;o<n.length;o++){var s=n[o];s&&!1!==s.visible&&t(s)&&i.push(s)}return i},e.prototype.findPoint=function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var r=e[i].points,n=0;n<r.length;n++){var o=r[n];if(o&&!1!==o.visible&&t(o))return o}},e.prototype.paneByPoint=function(t){for(var e=this.panes,i=0;i<e.length;i++){var r=e[i];if(r.box.containsPoint(t))return r}},e.prototype.detachLabels=function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},e.prototype.detachAxisGroupLabels=function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r],o=n.pane,s=Mm(e,o)||e[0],a=r+i,l=this.createLabelAxis(n,a,s);if(l){i++;var h=o.axes.indexOf(n)+i;o.appendAxisAt(l,h)}}},e.prototype.createLabelAxis=function(t,e,i){var r=t.options.labels,n=r.position,o="end"!==n&&"start"!==n,s=r.visible;if(o||!1===s)return null;var a=this.groupAxes(this.panes),l=i.options.vertical?a.x:a.y,h=this.axisCrossingValues(i,l),c="end"===n,p=i.range(),u=c?p.max:p.min;if(el(h[e],p.min,p.max)-u==0)return null;h.splice(e+1,0,u),i.options.axisCrossingValues=h;var d=t.clone();return t.clear(),d.options.name=void 0,d.options.line.visible=!1,d.options.crosshair=void 0,d.options.notes=void 0,d.options.plotBands=void 0,d},e}(Dc);function Tm(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function Am(t){for(var e,i=t.length,r=0;r<i;r++){var n=t[r],o=!1!==n.options.visible;if(o||Tm(n)){var s=o?n.contentBox():n.lineBox();e?e.wrap(s):e=s.clone()}}return e||new eh}function Mm(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.pane===e)return r}}var Om=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};hl(Em,{series:[],plotArea:{margin:{}},background:"",border:{color:Bo,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const Dm=Em;var Pm={hover:function(t,e){this._dispatchEvent(t,e,uf)},click:function(t,e){this._dispatchEvent(t,e,"plotAreaClick")}};const Rm=Pm;var Im=function(t){function e(e,i,r){t.call(this);var n=i.canonicalFields(e),o=i.valueFields(e),s=i.sourceFields(e,n),a=this._seriesFields=[],l=r.query(e.type),h=e.aggregate||l;this._series=e,this._binder=i;for(var c=0;c<n.length;c++){var p=n[c],u=void 0;if(ks(h))u=h[p];else{if(0!==c&&!Fs(p,o))break;u=h}u&&a.push({canonicalName:p,name:s[c],transform:bs(u)?u:pd[u]})}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aggregatePoints=function(t,e){var i=this._series,r=this._seriesFields,n=this._bindPoints(t||[]),o=n.dataItems[0],s={};if(o&&!ms(o)&&!cs(o)){var a=function(){};a.prototype=o,s=new a}for(var l=0;l<r.length;l++){var h=r[l],c=this._bindField(n.values,h.canonicalName),p=h.transform(c,i,n.dataItems,e);if(!(null===p||!ks(p)||$a(p.length)||p instanceof Date)){s=p;break}$a(p)&&Lm(h.name,s,p)}return s},e.prototype._bindPoints=function(t){for(var e=this._binder,i=this._series,r=[],n=[],o=0;o<t.length;o++){var s=t[o];r.push(e.bindPoint(i,s)),n.push(i.data[s])}return{values:r,dataItems:n}},e.prototype._bindField=function(t,e){for(var i=[],r=t.length,n=0;n<r;n++){var o=t[n],s=o.valueFields,a=void 0;a=$a(s[e])?s[e]:o.fields[e],i.push(a)}return i},e}(Zs);function Lm(t,e,i){var r=e,n=t;if(t.indexOf(".")>-1){for(var o=t.split(".");o.length>1;)n=o.shift(),$a(r[n])||(r[n]={}),r=r[n];n=o.shift()}r[n]=i}const zm=Im;var Bm=function(t){function e(){t.call(this),this._defaults={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},e.prototype.query=function(t){return this._defaults[t]},e}(Zs);Bm.current=new Bm;const Nm=Bm;var jm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLabel=function(){var t=this.options.labels,e=_s({},t,t.from),i=_s({},t,t.to);e.visible&&(this.labelFrom=this._createLabel(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},e.prototype._createLabel=function(t){var e,i=Ps(t),r=this.pointData();return e=i?i(r):this.formatValue(t.format),new bv(e,_s({vertical:this.options.vertical},t),r)},e.prototype.reflow=function(t){this.render();var e=this,i=e.labelFrom,r=e.labelTo,n=e.value;this.box=t,i&&(i.options.aboveAxis=n.from>n.to,i.reflow(t)),r&&(r.options.aboveAxis=n.to>n.from,r.reflow(t)),this.note&&this.note.reflow(t)},e}(_v);jm.prototype.defaults=_s({},jm.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const Fm=jm;var Vm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Fm},e.prototype.pointValue=function(t){return t.valueFields},e.prototype.formatPointValue=function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},e.prototype.plotRange=function(t){return t?[t.value.from,t.value.to]:0},e.prototype.updateRange=function(t,e){var i=e.series.axis,r=t.from,n=t.to,o=this.valueAxisRanges[i];null!==t&&ms(r)&&ms(n)&&((o=this.valueAxisRanges[i]=o||{min:Xo,max:Yo}).min=Math.min(o.min,r),o.max=Math.max(o.max,r),o.min=Math.min(o.min,n),o.max=Math.max(o.max,n))},e.prototype.aboveAxis=function(t){var e=t.value;return e.from<e.to},e}(Ov);Vm.prototype.plotLimits=Bf.prototype.plotLimits;const Hm=Vm;var Wm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aliasFor=function(){return this.parent},e}(Wf);const Um=Wm;var qm="auto",Gm=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=sl(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,r=this.value,n=this.fromPoint=new Um(r,_s({},this.options,{labels:i.from,markers:e.from})),o=this.toPoint=new Um(r,_s({},this.options,{labels:i.to,markers:e.to}));this.copyFields(n),this.copyFields(o),this.append(n),this.append(o)}},e.prototype.reflow=function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},e.prototype.createHighlight=function(){var t=new bc;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},e.prototype.highlightVisual=function(){return this.visual},e.prototype.highlightVisualArgs=function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},e.prototype.tooltipAnchor=function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,r,n=this.box,o=n.center();return this.options.vertical?(e=o.x,i=n.y1-5,r=No):(e=n.x2+5,i=o.y,r=jo),{point:new Fl(e,i),align:{horizontal:"left",vertical:r}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},e.prototype.initLabelsFormat=function(){var t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))},e.prototype.positionLabels=function(t,e){var i,r,n=this.options,o=n.labels,s=n.vertical;o.position===qm&&(s?e.y1<=t.y1?(r=Ad,i=Md):(r=Md,i=Ad):e.x1<=t.x1?(r=Ko,i=ts):(r=ts,i=Ko),o.from&&o.from.position||(this.fromPoint.options.labels.position=i),o.to&&o.to.position||(this.toPoint.options.labels.position=r))},e.prototype.copyFields=function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},e}(Dc);_s(Gm.prototype,jf),_s(Gm.prototype,Vf),Gm.prototype.defaults={markers:{visible:!1,background:ss,size:8,type:Fo,border:{width:2},opacity:1},labels:{visible:!1,margin:As(3),padding:As(4),animation:{type:xd,delay:wd},position:qm},notes:{label:{}},highlight:{markers:{border:{color:ss,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"}};const $m=Gm;var Km=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},e.prototype.createStroke=function(t){var e=new sc(t),i=new sc(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},e.prototype.hasStackSegment=function(){return!0},e.prototype.fromPoints=function(){return this.linePoints.map((function(t){return t.fromPoint}))},e.prototype.toPoints=function(){return this.linePoints.map((function(t){return t.toPoint}))},e}(hv);const Xm=Km;var Ym=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.createCurveSegments(this.toPoints())},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},e.prototype.createCurveSegments=function(t){return(new ed).process(this.toGeometryPoints(t))},e}(Xm);const Zm=Ym;var Jm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t},e}(Xm);_s(Jm.prototype,Kf);const Qm=Jm;var tg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.pointType=function(){return $m},e.prototype.createPoint=function(t,e){var i=e.categoryIx,r=e.category,n=e.series,o=e.seriesIx,s=t.valueFields;if(!Uv(s.from)&&!Uv(s.to)){if(this.seriesMissingValues(n)!==Ed)return null;s={from:0,to:0}}var a=this.pointOptions(n,o);a=this.evalPointOptions(a,s,r,i,n,o);var l=t.fields.color||n.color;bs(n.color)&&(l=a.color);var h=new $m(s,a);return h.color=l,this.append(h),h},e.prototype.createSegment=function(t,e,i){var r=(e.line||{}).style;return new("smooth"===r?Zm:"step"===r?Qm:Xm)(t,e,i)},e.prototype.plotRange=function(t,e){return t?[t.value.from,t.value.to]:[e,e]},e.prototype.valueSlot=function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),r=t.getSlot(e[1],e[1],!this.options.clip);if(i&&r)return{from:i,to:r}},e.prototype.pointSlot=function(t,e){var i,r,n=e.from,o=e.to;return this.options.invertAxes?(i=new eh(n.x1,t.y1,n.x2,t.y2),r=new eh(o.x1,t.y1,o.x2,t.y2)):(i=new eh(t.x1,n.y1,t.x2,n.y2),r=new eh(t.x1,o.y1,t.x2,o.y2)),{from:i,to:r}},e.prototype.addValue=function(e,i){var r=e.valueFields;ms(r.from)||(r.from=r.to),ms(r.to)||(r.to=r.from),t.prototype.addValue.call(this,e,i)},e.prototype.updateRange=function(t,e){if(null!==t&&ms(t.from)&&ms(t.to)){var i=e.series.axis,r=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:Xo,max:Yo},n=t.from,o=t.to;r.min=Math.min(r.min,n,o),r.max=Math.max(r.max,n,o)}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var r=t[i];r&&(e.push((r.fromPoint||{}).marker),e.push((r.toPoint||{}).marker))}return e.concat(this._segments)},e}(Bf);_s(tg.prototype,tv,ov);const eg=tg;var ig=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,r=e.value,n=e.owner.seriesValueAxis(i),o=[],s=[],a=[],l=n.getSlot(r.low,r.high),h=n.getSlot(r.open,r.open),c=n.getSlot(r.close,r.close);h.x1=c.x1=l.x1=t.x1,h.x2=c.x2=l.x2=t.x2;var p=l.center().x;o.push([h.x1,h.y1]),o.push([p,h.y1]),s.push([p,c.y1]),s.push([c.x2,c.y1]),a.push([p,l.y1]),a.push([p,l.y2]),this.lines=[o,s,a],this.box=l.clone().wrap(h.clone().wrap(c)),this.reflowNote()},e.prototype.createBody=function(){},e}(Pv);const rg=ig;var ng=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return rg},e}(Lv);const og=ng;var sg=function(t){function e(e,i,r){t.call(this),this.from=e,this.to=i,this.series=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linePoints=function(){var t=this.from,e=this.from.box,i=this.to.box,r=[];if(t.isVertical){var n=t.aboveAxis?e.y1:e.y2;r.push([e.x1,n],[i.x2,n])}else{var o=t.aboveAxis?e.x2:e.x1;r.push([o,e.y1],[o,i.y2])}return r},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.series.line||{},i=sc.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});fs(i),this.visual.append(i)},e}(Dc);hl(sg,{animation:{type:xd,delay:wd}});const ag=sg;var lg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.createSegments()},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=Lf(e),r=!this.options.invertAxes,n=0;n<e.length;n++)for(var o=e[n],s=0,a=0,l=0;l<i;l++){var h=fd.current.bindPoint(o,l),c=h.valueFields.value,p=h.fields.summary,u=s,d=void 0;p?"total"===p.toLowerCase()?(h.valueFields.value=s,u=0,d=s):(h.valueFields.value=a,d=u-a,a=0):ms(c)&&(a+=c,d=s+=c),t(h,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:n,total:s,runningTotal:a,from:u,to:d,isVertical:r})}},e.prototype.updateRange=function(e,i){t.prototype.updateRange.call(this,{value:i.to},i)},e.prototype.aboveAxis=function(t){return t.value>=0},e.prototype.plotRange=function(t){return[t.from,t.to]},e.prototype.createSegments=function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],r=0;r<t.length;r++){var n=t[r],o=e[r];if(o)for(var s=void 0,a=0;a<o.length;a++){var l=o[a];if(l&&s){var h=new ag(s,l,n);i.push(h),this.append(h)}s=l}}},e}(Ov);const hg=lg;var cg=[Pd,nf,Jd,lf],pg=[Wd,af].concat(cg),ug=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new gv,t.length>0){this.invertAxes=Fs(t[0].type,[Rd,zd,af,nf,lf,Qd,Hd,of]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.createCategoryAxes(t),this.aggregateCategories(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e instanceof fu?delete this.namedCategoryAxes[i]:(this.valueAxisRangeTracker.reset(i),delete this.namedValueAxes[i]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);if(s)for(var a=e.groupSeriesByCategoryAxis(s),l=0;l<a.length;l++)e.createChartGroup(a[l],n)}},e.prototype.createChartGroup=function(t,e){this.createAreaChart(ym(t,[Pd,nf]),e),this.createRangeAreaChart(ym(t,[Jd,lf]),e),this.createBarChart(ym(t,[Nd,Rd]),e),this.createRangeBarChart(ym(t,[tf,Qd]),e),this.createBulletChart(ym(t,[zd,sf]),e),this.createCandlestickChart(ym(t,Bd),e),this.createBoxPlotChart(ym(t,[Id,of]),e),this.createOHLCChart(ym(t,Ud),e),this.createWaterfallChart(ym(t,[hf,Hd]),e),this.createLineChart(ym(t,[Wd,af]),e)},e.prototype.aggregateCategories=function(t){var e=this,i=this.srcSeries||this.series,r=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var n=0;n<i.length;n++){var o=i[n],s=e.seriesCategoryAxis(o),a=e.findPane(s.options.pane);o=(gm(s.options.type,Ho)||o.categoryField)&&Fs(a,t)?e.aggregateSeries(o,s):e.filterSeries(o,s),r.push(o)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=r},e.prototype.filterSeries=function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!ms(e.options.min)&&!ms(e.options.max))return t;var r=e.currentRangeIndices(),n=Fs(t.type,pg),o=_s({},t);return o.data=(o.data||[]).slice(r.min,r.max+1),n&&Cm(o,r,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-r.min}}),(function(e){return $a(t.data[e])})),o},e.prototype.clearSeriesPointsCache=function(){this._seriesPointsCache={}},e.prototype.seriesSourcePoints=function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var r=e.options,n=r.srcCategories,o=gm(r.type,Ho),s=t.data,a=o?bm:ud,l=[];o||e.mapCategories();for(var h=0;h<s.length;h++){var c=void 0;if(c=t.categoryField?a(t.categoryField,s[h],this.chartService.intl):n[h],$a(c)&&null!==c){var p=e.totalIndex(c);l[p]=l[p]||{items:[],category:c},l[p].items.push(h)}}return this._currentPointsCache[i]=l,l},e.prototype.aggregateSeries=function(t,e){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),r=_s({},t),n=new zm(_s({},t),fd.current,Nm.current),o=r.data=[],s=e.options.dataItems||[],a=e.currentRangeIndices(),l=function(t){var r=t-a.min,o=i[t];if(o||(o=i[t]={}),o.categoryIx=r,!o.item){var s=e.categoryAt(t,!0);o.category=s,o.item=n.aggregatePoints(o.items,s)}return o},h=a.min;h<=a.max;h++){var c=l(h);o[c.categoryIx]=c.item,c.items&&c.items.length&&(s[c.categoryIx]=c.item)}return Fs(r.type,pg)&&Cm(r,a,e.totalCount(),l,(function(t){return i[t]})),e.options.dataItems=s,r},e.prototype.appendChart=function(e,i){var r=e.options.series,n=this.seriesCategoryAxis(r[0]),o=n.options.categories,s=Math.max(0,Lf(r)-o.length);if(s>0)for(o=n.options.categories=n.options.categories.slice(0);s--;)o.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.axis,r=zs([].concat(e.valueAxis),(function(t){return t.name===i}))[0],n=((e.panes||[{}])[0]||{}).name||"default";return(r||{}).pane||n},e.prototype.seriesCategoryAxis=function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},e.prototype.stackableChartOptions=function(t,e){var i=t.stack;return{isStacked:i,isStacked100:i&&"100%"===i.type,clip:e.options.clip}},e.prototype.groupSeriesByCategoryAxis=function(t){for(var e=[],i={},r=0;r<t.length;r++){var n=t[r].categoryAxis||"$$default$$";i.hasOwnProperty(n)||(i[n]=!0,e.push(n))}for(var o=[],s=0;s<e.length;s++){var a=fg(t,e[s],s);0!==a.length&&o.push(a)}return o},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],r=new Ov(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createRangeBarChart=function(t,e){if(0!==t.length){var i=t[0],r=new Hm(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)}},e.prototype.createBulletChart=function(t,e){if(0!==t.length){var i=t[0],r=new im(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=t[0],r=new av(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=t[0],r=new vv(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)}},e.prototype.createRangeAreaChart=function(t,e){if(0!==t.length){var i=new eg(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createOHLCChart=function(t,e){if(0!==t.length){var i=t[0],r=new og(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createCandlestickChart=function(t,e){if(0!==t.length){var i=t[0],r=new Lv(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createBoxPlotChart=function(t,e){if(0!==t.length){var i=t[0],r=new Vv(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)}},e.prototype.createWaterfallChart=function(t,e){if(0!==t.length){var i=t[0],r=new hg(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)}},e.prototype.axisRequiresRounding=function(t,e){for(var i=ym(this.series,cf),r=0;r<this.series.length;r++){var n=this.series[r];if(Fs(n.type,cg)){var o=n.line;o&&o.style===Dd&&i.push(n)}}for(var s=0;s<i.length;s++){var a=i[s].categoryAxis||"";if(a===t||!a&&0===e)return!0}},e.prototype.aggregatedAxis=function(t,e){for(var i=this.series,r=0;r<i.length;r++){var n=i[r].categoryAxis||"";if((n===t||!n&&0===e)&&i[r].categoryField)return!0}},e.prototype.createCategoryAxesLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof fu&&t[e].createLabels()},e.prototype.createCategoryAxes=function(t){for(var e=this,i=this.invertAxes,r=[].concat(this.options.categoryAxis),n=[],o=0;o<r.length;o++){var s=r[o];if(Fs(e.findPane(s.pane),t)){var a=s.name,l=s.categories;void 0===l&&(l=[]),s=_s({vertical:i,reverse:!i&&e.chartService.rtl,axisCrossingValue:i?Xo:0},s),$a(s.justified)||(s.justified=e.isJustified()),e.axisRequiresRounding(a,o)&&(s.justified=!1);var h=void 0;if(h=wm(s,l[0])?new Cu(s,e.chartService):new fu(s,e.chartService),r[o].categories=h.options.srcCategories,a){if(e.namedCategoryAxes[a])throw new Error("Category axis with name "+a+" is already defined");e.namedCategoryAxes[a]=h}h.axisIndex=o,n.push(h),e.appendAxis(h)}}var c=this.categoryAxis||n[0];this.categoryAxis=c,i?this.axisY=c:this.axisX=c},e.prototype.isJustified=function(){for(var t=this.series,e=0;e<t.length;e++){if(!Fs(t[e].type,cg))return!1}return!0},e.prototype.createValueAxes=function(t){var e=this,i=this.valueAxisRangeTracker,r=i.query(),n=[].concat(this.options.valueAxis),o=this.invertAxes,s={vertical:!o,reverse:o&&this.chartService.rtl},a=[];this.stack100&&(s.roundToMajorUnit=!1,s.labels={format:"P0"});for(var l=0;l<n.length;l++){var h=n[l];if(Fs(e.findPane(h.pane),t)){var c=h.name,p=gm(h.type,Cf)?{min:.1,max:1}:{min:0,max:1},u=i.query(c)||r||p;0===l&&u&&r&&(u.min=Math.min(u.min,r.min),u.max=Math.max(u.max,r.max));var d=new(gm(h.type,Cf)?ju:Pu)(u.min,u.max,_s({},s,h),e.chartService);if(c){if(e.namedValueAxes[c])throw new Error("Value axis with name "+c+" is already defined");e.namedValueAxes[c]=d}d.axisIndex=l,a.push(d),e.appendAxis(d)}}var f=this.valueAxis||a[0];this.valueAxis=f,o?this.axisX=f:this.axisY=f},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Fl(r.x,r.y),o=this.pointPane(n),s=[],a=[];if(o){for(var l=o.axes,h=0;h<l.length;h++){var c=l[h];c.getValue?fm(a,c.getValue(n)):fm(s,c.getCategory(n))}0===s.length&&fm(s,this.categoryAxis.getCategory(n)),s.length>0&&a.length>0&&t.trigger(i,{element:Ja(e),originalEvent:e,category:xm(s),value:xm(a)})}},e.prototype.pointPane=function(t){for(var e=this.panes,i=0;i<e.length;i++){var r=e[i];if(r.contentBox.containsPoint(t))return r}},e.prototype.updateAxisOptions=function(t,e){dg(this.options,t,e),dg(this.originalOptions,t,e)},e}(Dm);function dg(t,e,i){_s([].concat(e instanceof fu?t.categoryAxis:t.valueAxis)[e.axisIndex],i)}function fg(t,e,i){return zs(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}hl(ug,{categoryAxis:{},valueAxis:{}}),_s(ug.prototype,Rm);const vg=ug;function mg(t,e){var i,r=0;if(!e||e<=0)return t;var n=function(){var n=ya()-r,o=arguments,s=function(){t.apply(null,o),r=ya()};if(!r)return s();i&&clearTimeout(i),n>e?s():i=setTimeout(s,e-n)};return n.cancel=function(){clearTimeout(i)},n}var gg=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){var r=arguments,n=this,o=bg(t),s=yg(e),a=o.length;if(void 0===e){for(var l in t)n.bind(l,t[l]);return this}for(var h=function(t){var a=o[t],l=s?e:e[a];if(l){if(i){var h=l;(l=function(){n.unbind(a,l),h.apply(n,r)}).original=h}(n._events[a]=n._events[a]||[]).push(l)}},c=0;c<a;c++)h(c);return this},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){for(var i=bg(t),r=yg(e),n=0,o=i.length;n<o;n++){var s=i[n],a=r?e:e[s];if(a)(this._events[s]=this._events[s]||[]).unshift(a)}return this},e.prototype.trigger=function(t,e){void 0===e&&(e={});var i=this._events[t];if(i){var r=i.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=wg,e.isDefaultPrevented=xg,i=i.slice();for(var n=0;n<r;n++)i[n].call(this,e);return!0===e._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i=this._events[t];if(void 0===t)this._events={};else if(i)if(e)for(var r=i.length-1;r>=0;r--)i[r]!==e&&i[r].original!==e||i.splice(r,1);else this._events[t]=[];return this},e}(Zs);function yg(t){return"function"==typeof t}function bg(t){return"string"==typeof t?[t]:t}function wg(){this._defaultPrevented=!0}function xg(){return!0===this._defaultPrevented}var _g=["click","mouseenter","mouseleave","mousemove","resize"],kg=function(t){function e(e,i){t.call(this),this.options=Object.assign({},i),this.element=e,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new bc,Ea(e,this.options),this.bind(_g,this.options),this._enableTracking()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t){this._visual.children.push(t)},e.prototype.clear=function(){this._visual.children=[]},e.prototype.destroy=function(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()},e.prototype.eventTarget=function(t){for(var e,i=da(t);!e&&i&&(e=i._kendoNode,i!==this.element);)i=i.parentElement;if(e)return e.srcElement},e.prototype.exportVisual=function(){return this._visual},e.prototype.getSize=function(){return Ea(this.element)},e.prototype.currentSize=function(t){if(!t)return this._size;this._size=t},e.prototype.setSize=function(t){Ea(this.element,t),this.currentSize(t),this._resize()},e.prototype.resize=function(t){var e=this.getSize(),i=this.currentSize();(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))},e.prototype.size=function(t){if(!t)return this.getSize();this.setSize(t)},e.prototype.suspendTracking=function(){this._suspendedTracking=!0},e.prototype.resumeTracking=function(){this._suspendedTracking=!1},e.prototype._enableTracking=function(){},e.prototype._resize=function(){},e.prototype._handler=function(t){var e=this;return function(i){var r=e.eventTarget(i);r&&!e._suspendedTracking&&e.trigger(t,{element:r,originalEvent:i,type:t})}},e.prototype._elementOffset=function(){var t=this.element,e=Aa(t),i=ka(t),r=i.left,n=i.top;return{left:r+e.left,top:n+e.top}},e.prototype._surfacePoint=function(t){var e=this._elementOffset(),i=ua(t),r=i.x-e.left,n=i.y-e.top,o=Ra(this.element).invert();return new Kl(r,n).transform(o)},e}(gg);const Sg=kg;var Cg=function(t){function e(e){t.call(this),this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.srcElement&&this.srcElement.removeObserver(this);for(var t=this.childNodes,e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null},e.prototype.load=function(){},e.prototype.observe=function(){this.srcElement&&this.srcElement.addObserver(this)},e.prototype.append=function(t){this.childNodes.push(t),t.parent=this},e.prototype.insertAt=function(t,e){this.childNodes.splice(e,0,t),t.parent=this},e.prototype.remove=function(t,e){for(var i=t+e,r=t;r<i;r++)this.childNodes[r].removeSelf();this.childNodes.splice(t,e)},e.prototype.removeSelf=function(){this.clear(),this.destroy()},e.prototype.clear=function(){this.remove(0,this.childNodes.length)},e.prototype.invalidate=function(){this.parent&&this.parent.invalidate()},e.prototype.geometryChange=function(){this.invalidate()},e.prototype.optionsChange=function(){this.invalidate()},e.prototype.childrenChange=function(t){"add"===t.action?this.load(t.items,t.index):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()},e}(Zs);const Eg=Cg;function Tg(t,e){return ds(e)&&null!==e?" "+t+'="'+e+'" ':""}function Ag(t){for(var e="",i=0;i<t.length;i++)e+=Tg(t[i][0],t[i][1]);return e}function Mg(t){for(var e="",i=0;i<t.length;i++){var r=t[i][1];ds(r)&&(e+=t[i][0]+":"+r+";")}if(""!==e)return e}const Og={};var Dg="http://www.w3.org/2000/svg",Pg="none",Rg=function(t,e){t.innerHTML=e};if("undefined"!=typeof document){var Ig=document.createElement("div"),Lg="undefined"!=typeof DOMParser;Ig.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",Lg&&Ig.firstChild.namespaceURI!==Dg&&(Rg=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),r=document.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(r)})}const zg=Rg;var Bg="transform",Ng={clip:"clip-path",fill:"fill"};function jg(t,e){return"clip"===t||"fill"===t&&(!e||"Gradient"===e.nodeType)}var Fg=function(t){function e(e,i){t.call(this,e),this.definitions={},this.options=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),t.prototype.destroy.call(this)},e.prototype.load=function(t,e){for(var i=this,r=0;r<t.length;r++){var n=t[r],o=n.children,s=new Og[n.nodeType](n,i.options);ds(e)?i.insertAt(s,e):i.append(s),s.createDefinitions(),o&&o.length>0&&s.load(o);var a=i.element;a&&s.attachTo(a,e)}},e.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.attachTo=function(t,e){var i=document.createElement("div");zg(i,"<svg xmlns='"+Dg+"' version='1.1'>"+this.render()+"</svg>");var r=i.firstChild.firstChild;r&&(ds(e)?t.insertBefore(r,t.childNodes[e]||null):t.appendChild(r),this.setElement(r))},e.prototype.setElement=function(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;for(var e=this.childNodes,i=0;i<e.length;i++){var r=t.childNodes[i];e[i].setElement(r)}},e.prototype.clear=function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var t=this.childNodes,e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]},e.prototype.removeSelf=function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}t.prototype.removeSelf.call(this)},e.prototype.template=function(){return this.renderChildren()},e.prototype.render=function(){return this.template()},e.prototype.renderChildren=function(){for(var t=this.childNodes,e="",i=0;i<t.length;i++)e+=t[i].render();return e},e.prototype.optionsChange=function(e){var i=e.field,r=e.value;"visible"===i?this.css("display",r?"":Pg):Ng[i]&&jg(i,r)?this.updateDefinition(i,r):"opacity"===i?this.attr("opacity",r):"cursor"===i?this.css("cursor",r):"id"===i&&(r?this.attr("id",r):this.removeAttr("id")),t.prototype.optionsChange.call(this,e)},e.prototype.attr=function(t,e){this.element&&this.element.setAttribute(t,e)},e.prototype.allAttr=function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},e.prototype.css=function(t,e){this.element&&(this.element.style[t]=e)},e.prototype.allCss=function(t){for(var e=0;e<t.length;e++)this.css(t[e][0],t[e][1])},e.prototype.removeAttr=function(t){this.element&&this.element.removeAttribute(t)},e.prototype.mapTransform=function(t){var e=[];return t&&e.push([Bg,"matrix("+t.matrix().toString(6)+")"]),e},e.prototype.renderTransform=function(){return Ag(this.mapTransform(this.srcElement.transform()))},e.prototype.transformChange=function(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(Bg)},e.prototype.mapStyle=function(){var t=this.srcElement.options,e=[["cursor",t.cursor]];return!1===t.visible&&e.push(["display",Pg]),e},e.prototype.renderStyle=function(){return Tg("style",Mg(this.mapStyle(!0)))},e.prototype.renderOpacity=function(){return Tg("opacity",this.srcElement.options.opacity)},e.prototype.renderId=function(){return Tg("id",this.srcElement.options.id)},e.prototype.createDefinitions=function(){var t=this.srcElement,e=this.definitions;if(t){var i,r=t.options;for(var n in Ng){var o=r.get(n);o&&jg(n,o)&&(e[n]=o,i=!0)}i&&this.definitionChange({action:"add",definitions:e})}},e.prototype.definitionChange=function(t){this.parent&&this.parent.definitionChange(t)},e.prototype.updateDefinition=function(t,e){var i=this.definitions,r=i[t],n=Ng[t],o={};r&&(o[t]=r,this.definitionChange({action:"remove",definitions:o}),delete i[t]),e?(o[t]=e,this.definitionChange({action:"add",definitions:o}),i[t]=e,this.attr(n,this.refUrl(e.id))):r&&this.removeAttr(n)},e.prototype.clearDefinitions=function(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}},e.prototype.renderDefinitions=function(){return Ag(this.mapDefinitions())},e.prototype.mapDefinitions=function(){var t=this.definitions,e=[];for(var i in t)e.push([Ng[i],this.refUrl(t[i].id)]);return e},e.prototype.refUrl=function(t){var e=(this.options||{}).skipBaseHref,i=this.baseUrl().replace(/'/g,"\\'");return"url("+(e?"":i)+"#"+t+")"},e.prototype.baseUrl=function(){return function(){var t=document.getElementsByTagName("base")[0],e=document.location.href,i="";if(t&&!(Ks.browser||{}).msie){var r=e.indexOf("#");-1!==r&&(e=e.substring(0,r)),i=e}return i}()},e}(Eg);const Vg=Fg;var Hg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},e.prototype.renderOffset=function(){return Tg("offset",this.srcElement.offset())},e.prototype.mapStyle=function(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]},e.prototype.optionsChange=function(t){"offset"===t.field?this.attr(t.field,t.value):"color"!==t.field&&"opacity"!==t.field||this.css("stop-"+t.field,t.value)},e}(Vg);const Wg=Hg;const Ug=function(t){function e(e){t.call(this,e),this.id=e.id,this.loadStops()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadStops=function(){for(var t=this.srcElement.stops,e=this.element,i=0;i<t.length;i++){var r=new Wg(t[i]);this.append(r),e&&r.attachTo(e)}},e.prototype.optionsChange=function(t){"gradient.stops"===t.field?(Eg.prototype.clear.call(this),this.loadStops()):"gradient"===t.field&&this.allAttr(this.mapCoordinates())},e.prototype.renderCoordinates=function(){return Ag(this.mapCoordinates())},e.prototype.mapSpace=function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]},e}(Vg);var qg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.start(),i=t.end();return[["x1",e.x],["y1",e.y],["x2",i.x],["y2",i.y],this.mapSpace()]},e}(Ug);const Gg=qg;var $g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.center(),i=t.radius();return[["cx",e.x],["cy",e.y],["r",i],this.mapSpace()]},e}(Ug);const Kg=$g;const Xg=function(t){function e(e){t.call(this),this.srcElement=e,this.id=e.id,this.load([e])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"},e}(Vg);var Yg=function(t){function e(){t.call(this),this.definitionMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t},e.prototype.template=function(){return"<defs>"+this.renderChildren()+"</defs>"},e.prototype.definitionChange=function(t){var e=t.definitions,i=t.action;"add"===i?this.addDefinitions(e):"remove"===i&&this.removeDefinitions(e)},e.prototype.createDefinition=function(t,e){var i;return"clip"===t?i=Xg:"fill"===t&&(e instanceof qc?i=Gg:e instanceof $c&&(i=Kg)),new i(e)},e.prototype.addDefinitions=function(t){for(var e in t)this.addDefinition(e,t[e])},e.prototype.addDefinition=function(t,e){var i=this.element,r=this.definitionMap,n=e.id,o=r[n];if(o)o.count++;else{var s=this.createDefinition(t,e);r[n]={element:s,count:1},this.append(s),i&&s.attachTo(this.element)}},e.prototype.removeDefinitions=function(t){for(var e in t)this.removeDefinition(t[e])},e.prototype.removeDefinition=function(t){var e=this.definitionMap,i=t.id,r=e[i];r&&(r.count--,0===r.count&&(this.remove(this.childNodes.indexOf(r.element),1),delete e[i]))},e}(Vg);const Zg=Yg;var Jg=function(t){function e(e){t.call(this),this.options=e,this.defs=new Zg}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t,this.defs.attachTo(t.firstElementChild)},e.prototype.clear=function(){Eg.prototype.clear.call(this)},e.prototype.template=function(){return this.defs.render()+this.renderChildren()},e.prototype.definitionChange=function(t){this.defs.definitionChange(t)},e}(Vg);const Qg=Jg;var ty={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},ey="solid",iy="butt",ry={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},ny=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.attr("d",this.renderData()),this.invalidate()},e.prototype.optionsChange=function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:var i=ry[e.field];i&&this.attr(i,e.value)}t.prototype.optionsChange.call(this,e)},e.prototype.content=function(){this.element&&(this.element.textContent=this.srcElement.content())},e.prototype.renderData=function(){return this.printPath(this.srcElement)},e.prototype.printPath=function(t){var e=this,i=t.segments,r=i.length;if(r>0){for(var n,o,s=[],a=1;a<r;a++){var l=e.segmentType(i[a-1],i[a]);l!==o&&(o=l,s.push(l)),"L"===l?s.push(e.printPoints(i[a].anchor())):s.push(e.printPoints(i[a-1].controlOut(),i[a].controlIn(),i[a].anchor()))}return n="M"+this.printPoints(i[0].anchor())+" "+s.join(" "),t.options.closed&&(n+="Z"),n}},e.prototype.printPoints=function(){for(var t=arguments,e=t.length,i=[],r=0;r<e;r++)i.push(t[r].toString(3));return i.join(" ")},e.prototype.segmentType=function(t,e){return t.controlOut()&&e.controlIn()?"C":"L"},e.prototype.mapStroke=function(t){var e=[];return t&&!fa(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),ds(t.opacity)&&e.push(["stroke-opacity",t.opacity]),ds(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",Pg]),e},e.prototype.renderStroke=function(){return Ag(this.mapStroke(this.srcElement.options.stroke))},e.prototype.renderDashType=function(t){var e=t.dashType,i=t.width;if(void 0===i&&(i=1),e&&e!==ey){for(var r=ty[e.toLowerCase()],n=[],o=0;o<r.length;o++)n.push(r[o]*i);return n.join(" ")}},e.prototype.renderLinecap=function(t){var e=t.dashType,i=t.lineCap;return e&&"solid"!==e?iy:i},e.prototype.mapFill=function(t){var e=[];return t&&"Gradient"===t.nodeType||(t&&!fa(t.color)?(e.push(["fill",t.color]),ds(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill",Pg])),e},e.prototype.renderFill=function(){return Ag(this.mapFill(this.srcElement.options.fill))},e.prototype.template=function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+Tg("d",this.renderData())+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"},e}(Vg);const oy=ny;var sy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.printPath(this.srcElement.toPath())},e}(oy);const ay=sy;var ly=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()},e.prototype.center=function(){return this.srcElement.geometry().center},e.prototype.radius=function(){return this.srcElement.geometry().radius},e.prototype.template=function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"},e}(oy);const hy=ly;var cy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},e.prototype.optionsChange=function(e){"transform"===e.field&&this.transformChange(e.value),t.prototype.optionsChange.call(this,e)},e}(Vg);const py=cy;var uy=/&/g,dy=/</g,fy=/"/g,vy=/'/g,my=/>/g;function gy(t){return String(t).replace(uy,"&amp;").replace(dy,"&lt;").replace(my,"&gt;").replace(fy,"&quot;").replace(vy,"&#39;")}var yy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.allAttr(this.mapPosition()),this.invalidate()},e.prototype.optionsChange=function(e){"src"===e.field&&this.allAttr(this.mapSource()),t.prototype.optionsChange.call(this,e)},e.prototype.mapPosition=function(){var t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]},e.prototype.renderPosition=function(){return Ag(this.mapPosition())},e.prototype.mapSource=function(t){var e=this.srcElement.src();return t&&(e=gy(e)),[["xlink:href",e]]},e.prototype.renderSource=function(){return Ag(this.mapSource(!0))},e.prototype.template=function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+"></image>"},e}(oy);const by=yy;var wy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){var t=this.srcElement.paths;if(t.length>0){for(var e=[],i=0;i<t.length;i++)e.push(this.printPath(t[i]));return e.join(" ")}},e}(oy);const xy=wy;var _y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()},e.prototype.size=function(){return this.srcElement.geometry().size},e.prototype.origin=function(){return this.srcElement.geometry().origin},e.prototype.rx=function(){return this.srcElement.geometry().cornerRadius[0]},e.prototype.ry=function(){return this.srcElement.geometry().cornerRadius[1]},e.prototype.template=function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' rx='"+this.rx()+"' ry='"+this.ry()+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"},e}(oy);const ky=_y;var Sy=/&(?:[a-zA-Z]+|#\d+);/g;function Cy(t){if(!t||"string"!=typeof t||!Sy.test(t))return t;var e=Cy._element;return Sy.lastIndex=0,t.replace(Sy,(function(t){return e.innerHTML=t,e.textContent||e.innerText}))}"undefined"!=typeof document&&(Cy._element=document.createElement("span"));var Ey=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()},e.prototype.optionsChange=function(e){"font"===e.field?(this.attr("style",Mg(this.mapStyle())),this.geometryChange()):"content"===e.field&&t.prototype.content.call(this,this.srcElement.content()),t.prototype.optionsChange.call(this,e)},e.prototype.mapStyle=function(e){var i=t.prototype.mapStyle.call(this,e),r=this.srcElement.options.font;return e&&(r=gy(r)),i.push(["font",r],["white-space","pre"]),i},e.prototype.pos=function(){var t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)},e.prototype.renderContent=function(){var t=this.srcElement.content();return Ba(t=gy(t=Cy(t)))},e.prototype.renderTextAnchor=function(){var t;return!(this.options||{}).rtl||Ks.browser.msie||Ks.browser.edge||(t="end"),Tg("text-anchor",t)},e.prototype.template=function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"},e}(oy);const Ty=Ey;Og.Arc=ay,Og.Circle=hy,Og.Group=py,Og.Image=by,Og.MultiPath=xy,Og.Path=oy,Og.Rect=ky,Og.Text=Ty;var Ay=function(t){function e(e,i){t.call(this,e,i),this._root=new Qg(Object.assign({rtl:"rtl"===Sa(e,"direction").direction},this.options)),zg(this.element,this._template()),this._rootElement=this.element.firstElementChild,function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,r=-e.f%1,n=t.style;0===i&&0===r||(n.left=i+"px",n.top=r+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),_a(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"svg"},e.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,Ta(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t,this._rootElement.setAttribute("viewBox",e)},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear()},e.prototype.svg=function(){return"<?xml version='1.0' ?>"+this._template()},e.prototype.exportVisual=function(){var t=this._visual,e=this._offset;if(e){var i=new bc;i.children.push(t),i.transform(ph().translate(-e.x,-e.y)),t=i}return t},e.prototype._resize=function(){this._offset&&this.translate(this._offset)},e.prototype._template=function(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+Dg+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"},Object.defineProperties(e.prototype,i),e}(Sg);const My=Ay;const Oy={};function Dy(t,e){var i=e.segments;if(0!==i.length){var r=i[0],n=r.anchor();t.moveTo(n.x,n.y);for(var o=1;o<i.length;o++){n=(r=i[o]).anchor();var s=i[o-1].controlOut(),a=r.controlIn();s&&a?t.bezierCurveTo(s.x,s.y,a.x,a.y,n.x,n.y):t.lineTo(n.x,n.y)}e.options.closed&&t.closePath()}}var Py=function(t){function e(e){t.call(this,e),e&&this.initClip()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initClip=function(){var t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))},e.prototype.clear=function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),t.prototype.clear.call(this)},e.prototype.clearClip=function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},e.prototype.setClip=function(t){this.clip&&(t.beginPath(),Dy(t,this.clip),t.clip())},e.prototype.optionsChange=function(e){"clip"===e.field&&(this.clearClip(),this.initClip()),t.prototype.optionsChange.call(this,e)},e.prototype.setTransform=function(t){if(this.srcElement){var e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}},e.prototype.loadElements=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r],o=n.children,s=new Oy[n.nodeType](n,i);o&&o.length>0&&s.load(o,e,i),ds(e)?this.insertAt(s,e):this.append(s)}},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this.invalidate()},e.prototype.setOpacity=function(t){if(this.srcElement){var e=this.srcElement.opacity();ds(e)&&this.globalAlpha(t,e)}},e.prototype.globalAlpha=function(t,e){var i=e;i&&t.globalAlpha&&(i*=t.globalAlpha),t.globalAlpha=i},e.prototype.visible=function(){var t=this.srcElement;return!t||t&&!1!==t.options.visible},e}(Eg);const Ry=Py;var Iy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){if(this.visible()){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);for(var e=this.childNodes,i=0;i<e.length;i++){var r=e[i];r.visible()&&r.renderTo(t)}t.restore()}},e}(gc(Ry,"childNodes"));const Ly=Iy;var zy=function(t){function e(e,i){t.call(this),this.canvas=e,this.size=i,this.ctx=e.getContext("2d");var r=this._invalidate.bind(this);this.invalidate=mg((function(){Sc(r)}),16.666666666666668)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas=null,this.ctx=null},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this._invalidate()},e.prototype._rescale=function(t){var e=this.canvas,i=this.size;e.width=i.width*t,e.height=i.height*t,this.ctx.scale(t,t)},e.prototype._devicePixelRatio=function(){return"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.prototype._invalidate=function(t){if(this.ctx){var e=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}},e}(gc(Ly,"childNodes"));const By=zy;var Ny=function(t){function e(){t.call(this),this.shapes=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._add=function(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this},e.prototype.pointShapes=function(t){for(var e=this.shapes,i=e.length,r=[],n=0;n<i;n++)e[n].bbox.containsPoint(t)&&r.push(e[n].shape);return r},e.prototype.insert=function(t,e){this._add(t,e)},e.prototype.remove=function(t){for(var e=this.shapes,i=e.length,r=0;r<i;r++)if(e[r].shape===t){e.splice(r,1);break}},e}(Zs);const jy=Ny;var Fy=function(t){function e(e){t.call(this),this.children=[],this.rect=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.inBounds=function(t){var e=this.rect,i=e.bottomRight(),r=t.bottomRight(),n=e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&r.x<=i.x&&r.y<=i.y;return n},e.prototype.pointShapes=function(e){for(var i=this.children,r=i.length,n=t.prototype.pointShapes.call(this,e),o=0;o<r;o++)Qs(n,i[o].pointShapes(e));return n},e.prototype.insert=function(t,e){var i=this.children,r=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{i.length||this._initChildren();for(var n=0;n<i.length;n++)if(i[n].insert(t,e)){r=!0;break}r||this._add(t,e)}r=!0}return r},e.prototype._initChildren=function(){var t=this.rect,i=this.children,r=t.center(),n=t.width()/2,o=t.height()/2;i.push(new e(new Jl([t.origin.x,t.origin.y],[n,o])),new e(new Jl([r.x,t.origin.y],[n,o])),new e(new Jl([t.origin.x,r.y],[n,o])),new e(new Jl([r.x,r.y],[n,o])))},e}(jy);const Vy=Fy;var Hy=3e3,Wy=function(t){function e(){t.call(this),this.initRoots()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initRoots=function(){this.rootMap={},this.root=new jy,this.rootElements=[]},e.prototype.clear=function(){for(var t=this.rootElements,e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()},e.prototype.pointShape=function(t){var e=(this.rootMap[Math.floor(t.x/Hy)]||{})[Math.floor(t.y/Hy)],i=this.root.pointShapes(t);e&&(i=i.concat(e.pointShapes(t))),this.assignZindex(i),i.sort(Uy);for(var r=0;r<i.length;r++)if(i[r].containsPoint(t))return i[r]},e.prototype.assignZindex=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],r=0,n=Math.pow(1e4,75),o=[];i;)o.push(i),i=i.parent;for(;o.length;)r+=(((i=o.pop()).parent?i.parent.children:this.rootElements).indexOf(i)+1)*n,n/=1e4;t[e]._zIndex=r}},e.prototype.optionsChange=function(t){"transform"!==t.field&&"stroke.width"!==t.field||this.bboxChange(t.element)},e.prototype.geometryChange=function(t){this.bboxChange(t.element)},e.prototype.bboxChange=function(t){if("Group"===t.nodeType)for(var e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)},e.prototype.add=function(t){var e=Array.isArray(t)?t.slice(0):[t];Qs(this.rootElements,e),this._insert(e)},e.prototype.childrenChange=function(t){if("remove"===t.action)for(var e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))},e.prototype._insert=function(t){for(var e;t.length>0;)(e=t.pop()).addObserver(this),"Group"===e.nodeType?Qs(t,e.children):this._insertShape(e)},e.prototype._insertShape=function(t){var e=t.bbox();if(e){var i=this.getSectors(e),r=i[0][0],n=i[1][0];if(this.inRoot(i))this.root.insert(t,e);else{var o=this.rootMap;o[r]||(o[r]={}),o[r][n]||(o[r][n]=new Vy(new Jl([r*Hy,n*Hy],[Hy,Hy]))),o[r][n].insert(t,e)}}},e.prototype.remove=function(t){if(t.removeObserver(this),"Group"===t.nodeType)for(var e=t.children,i=0;i<e.length;i++)this.remove(e[i]);else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)},e.prototype.inRoot=function(t){return t[0].length>1||t[1].length>1},e.prototype.getSectors=function(t){for(var e=t.bottomRight(),i=Math.floor(e.x/Hy),r=Math.floor(e.y/Hy),n=[[],[]],o=Math.floor(t.origin.x/Hy);o<=i;o++)n[0].push(o);for(var s=Math.floor(t.origin.y/Hy);s<=r;s++)n[1].push(s);return n},e}(Zs);function Uy(t,e){return t._zIndex<e._zIndex?1:t._zIndex>e._zIndex?-1:0}const qy=Wy;var Gy=function(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element};Gy.prototype.clear=function(){this._resetCursor()},Gy.prototype.destroy=function(){this._resetCursor(),delete this.element},Gy.prototype._mouseenter=function(t){var e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()},Gy.prototype._mouseleave=function(){this._resetCursor()},Gy.prototype._shapeCursor=function(t){for(var e=t.element;e&&!ds(e.options.cursor);)e=e.parent;if(e)return e.options.cursor},Gy.prototype._getCursor=function(){if(this.element)return this.element.style.cursor},Gy.prototype._setCursor=function(t){this.element&&(this.element.style.cursor=t,this._current=t)},Gy.prototype._resetCursor=function(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)};const $y=Gy;var Ky=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()},e.prototype.setFill=function(t){var e=this.srcElement.options.fill,i=!1;return e&&("Gradient"===e.nodeType?(this.setGradientFill(t,e),i=!0):fa(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),i=!0)),i},e.prototype.setGradientFill=function(t,e){var i,r=this.srcElement.rawBBox();if(e instanceof qc){var n=e.start(),o=e.end();i=t.createLinearGradient(n.x,n.y,o.x,o.y)}else if(e instanceof $c){var s=e.center();i=t.createRadialGradient(s.x,s.y,0,s.x,s.y,e.radius())}!function(t,e){for(var i=0;i<e.length;i++){var r=e[i],n=El(r.color());n.a*=r.opacity(),t.addColorStop(r.offset(),n.toCssRgba())}}(i,e.stops),t.save(),e.userSpace()||t.transform(r.width(),0,0,r.height(),r.origin.x,r.origin.y),t.fillStyle=i,t.fill(),t.restore()},e.prototype.setStroke=function(t){var e=this.srcElement.options.stroke;if(e&&!fa(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=xa(e.width,1),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0},e.prototype.dashType=function(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()},e.prototype.setLineDash=function(t){var e=this.dashType();if(e&&e!==ey){var i=ty[e];t.setLineDash?t.setLineDash(i):(t.mozDash=i,t.webkitLineDash=i)}},e.prototype.setLineCap=function(t){var e=this.dashType(),i=this.srcElement.options.stroke;e&&e!==ey?t.lineCap=iy:i&&i.lineCap&&(t.lineCap=i.lineCap)},e.prototype.setLineJoin=function(t){var e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)},e.prototype.renderPoints=function(t,e){Dy(t,e)},e}(Ry);const Xy=Ky;var Yy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){Dy(t,this.srcElement.toPath())},e}(Xy);const Zy=Yy;var Jy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){var e=this.srcElement.geometry(),i=e.center,r=e.radius;t.arc(i.x,i.y,r,0,2*Math.PI)},e}(Xy);const Qy=Jy;var tb=function(t){function e(e,i){t.call(this,e),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=ia();var r=this.img=new Image;i&&!/^data:/i.test(e.src())&&(r.crossOrigin=i),r.src=e.src(),r.complete?this.onLoad():(r.onload=this.onLoad,r.onerror=this.onError)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){"resolved"===this.loading.state()&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())},e.prototype.optionsChange=function(e){"src"===e.field?(this.loading=ia(),this.img.src=this.srcElement.src()):t.prototype.optionsChange.call(this,e)},e.prototype.onLoad=function(){this.loading.resolve(),this.invalidate()},e.prototype.onError=function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},e.prototype.drawImage=function(t){var e=this.srcElement.rect(),i=e.topLeft();t.drawImage(this.img,i.x,i.y,e.width(),e.height())},e}(Xy);const eb=tb;var ib=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){for(var e=this.srcElement.paths,i=0;i<e.length;i++)Dy(t,e[i])},e}(Xy);const rb=ib;var nb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(e){var i=this.srcElement.geometry(),r=i.cornerRadius,n=r[0],o=r[1];if(0===n&&0===o){var s=i.origin,a=i.size;e.rect(s.x,s.y,a.width,a.height)}else t.prototype.renderPoints.call(this,e,sc.fromRect(i))},e}(Xy);const ob=nb;var sb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){var e=this.srcElement,i=e.position(),r=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left",this.setFill(t)&&t.fillText(e.content(),i.x,i.y+r.baseline),this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),i.x,i.y+r.baseline)),t.restore()},e}(Xy);const ab=sb;Oy.Arc=Zy,Oy.Circle=Qy,Oy.Group=Ly,Oy.Image=eb,Oy.MultiPath=rb,Oy.Path=Xy,Oy.Rect=ob,Oy.Text=ab;var lb=function(t){function e(e,i){t.call(this,e,i),this.element.innerHTML=this._template(this);var r=this.element.firstElementChild,n=Ea(e);r.width=n.width,r.height=n.height,this._rootElement=r,this._root=new By(r,n),this._mouseTrackHandler=this._trackMouse.bind(this),_a(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"canvas"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),Ta(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()},e.prototype.eventTarget=function(t){if(this._searchTree){var e=this._surfacePoint(t);return this._searchTree.pointShape(e)}},e.prototype.image=function(){var t=this._root,e=this._rootElement,i=[];t.traverse((function(t){t.loading&&i.push(t.loading)}));var r=ia(),n=function(){t._invalidate({fixedScale:!0});try{var i=e.toDataURL();r.resolve(i)}catch(t){r.reject(t)}};return ba(i).then(n,n),r},e.prototype.suspendTracking=function(){t.prototype.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},e.prototype.resumeTracking=function(){if(t.prototype.resumeTracking.call(this),!this._searchTree){this._searchTree=new qy;for(var e=this._root.childNodes,i=[],r=0;r<e.length;r++)i.push(e[r].srcElement);this._searchTree.add(i)}},e.prototype._resize=function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()},e.prototype._template=function(){return"<canvas style='width: 100%; height: 100%;'></canvas>"},e.prototype._enableTracking=function(){this._searchTree=new qy,this._cursor=new $y(this),t.prototype._enableTracking.call(this)},e.prototype._trackMouse=function(t){if(!this._suspendedTracking){var e=this.eventTarget(t);if("click"!==t.type){var i=this._currentShape;i&&i!==e&&this.trigger("mouseleave",{element:i,originalEvent:t,type:"mouseleave"}),e&&i!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Object.defineProperties(e.prototype,i),e}(Sg);const hb=lb;var cb,pb,ub=function(){return"undefined"!=typeof document},db=function(t){function e(){t.call(this),this._items=[{name:"svg",type:My},{name:"canvas",type:hb}]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0},current:{configurable:!0}};return i.support.get=function(){return pb||(pb={canvas:ub()&&document.createElement("canvas").getContext,svg:ub()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}),pb},i.current.get=function(){return cb||(cb=new e),cb},e.prototype.create=function(t,e){var i=this._items,r=i[0];if(e&&e.type)for(var n=e.type.toLowerCase(),o=0;o<i.length;o++)if(i[o].name===n){r=i[o];break}if(r)return new r.type(t,e);Js("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)},Object.defineProperties(e,i),e}(Zs);const fb=db;var vb=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0}};return i.support.get=function(){return fb.support},e.create=function(t,e){return fb.current.create(t,e)},Object.defineProperties(e,i),e}(Sg);const mb=vb;var gb=function(t){function e(){t.call(this),this._points=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._points=[]},e.prototype.show=function(t,e){var i=[].concat(t);this.hide();for(var r=0;r<i.length;r++){var n=i[r];n&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0,e),this._points.push(n))}},e.prototype.togglePointHighlight=function(t,e,i){var r=(t.options.highlight||{}).toggle;if(r){var n={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:yb,visual:t.highlightVisual(),show:e};r(n),n._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},e.prototype.hide=function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},e.prototype.isHighlighted=function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1},e}(Zs);function yb(){this._defaultPrevented=!0}const bb=gb;function wb(t,e){var i=(e||"").toLowerCase(),r=t.event;return"none"===i&&!(r.ctrlKey||r.shiftKey||r.altKey)||r[i+"Key"]}function xb(t){for(var e={},i=0;i<t.length;i++){var r=t[i];r.axis.options.name&&(e[r.axis.options.name]={min:r.range.min,max:r.range.max})}return e}var _b=function(t){function e(e,i){t.call(this),this.plotArea=e,this.options=_s({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(t){return this._active=wb(t,this.options.key),this._active},e.prototype.move=function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,ls).concat(this._panAxes(t,hs));if(e.length)return this.axisRanges=e,xb(e)}},e.prototype.end=function(){var t=this._active;return this._active=!1,t},e.prototype.pan=function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var r=e[i];t.updateAxisOptions(r.axis,r.range)}t.redraw(t.panes)}},e.prototype.destroy=function(){delete this.plotArea},e.prototype._panAxes=function(t,e){var i=this.plotArea,r=-t[e].delta,n=(this.options.lock||"").toLowerCase(),o=[];if(0!==r&&(n||"").toLowerCase()!==e)for(var s=i.axes,a=0;a<s.length;a++){var l=s[a];if(e===ls&&!l.options.vertical||e===hs&&l.options.vertical){var h=l.pan(r);h&&(h.limitRange=!0,o.push({axis:l,range:h}))}}return o},e}(Zs);_b.prototype.options={key:"none",lock:"none"};const kb=_b;var Sb=function(t){function e(e,i){t.call(this),this.chart=e,this.options=_s({},this.options,i),this.createElement()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElement=function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},e.prototype.removeElement=function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},e.prototype.setStyles=function(t){Ts(this._marquee,t)},e.prototype.start=function(t){if(wb(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),r=this._zoomPane=e._plotArea.paneByPoint(i),n=r?r.chartsBox().clone():null;if(r&&n){var o=this._elementOffset();return n.translate(o.left,o.top),this._zoomPaneClipBox=n,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},e.prototype._elementOffset=function(){var t=this.chart.element,e=Ts(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,r=e.paddingTop,n=Xa(t);return{left:i+n.left,top:r+n.top}},e.prototype.move=function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},e.prototype.end=function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var r={x:i.left,y:i.top},n={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(r,n),this.removeElement(),delete this._zoomPane,xb(this.axisRanges)}},e.prototype.zoom=function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){this.removeElement(),delete this._marquee,delete this.chart},e.prototype._updateAxisRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),r=[],n=this._zoomPane.axes,o=0;o<n.length;o++){var s=n[o],a=s.options.vertical;if((i!==ls||a)&&(i!==hs||!a)&&$a(s.axisIndex)){var l=s.pointsRange(t,e);l&&r.push({axis:s,range:l})}}this.axisRanges=r},e.prototype._selectionPosition=function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},r=t.x.location,n=t.y.location,o=(this.options.lock||"").toLowerCase(),s=Math.min(i.x,r),a=Math.min(i.y,n),l=Math.abs(i.x-r),h=Math.abs(i.y-n);return o===ls&&(s=e.x1,l=e.width()),o===hs&&(a=e.y1,h=e.height()),r>e.x2&&(l=e.x2-i.x),r<e.x1&&(l=i.x-e.x1),n>e.y2&&(h=e.y2-i.y),n<e.y1&&(h=i.y-e.y1),{left:Math.max(s,e.x1),top:Math.max(a,e.y1),width:l,height:h}},e}(Zs);Sb.prototype.options={key:"shift",lock:"none"};const Cb=Sb;var Eb=function(t){function e(e,i){t.call(this),this.chart=e,this.options=_s({rate:.3},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),r=[],n=this.chart._plotArea.axes,o=0;o<n.length;o++){var s=n[o],a=s.options.vertical;if((i!==ls||a)&&(i!==hs||!a)&&s.zoomRange){var l=el(this.options.rate,.01,.9),h=s.zoomRange(-t*l,e);h&&r.push({axis:s,range:h})}}return this.axisRanges=r,xb(r)},e.prototype.zoom=function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){delete this.chart},e}(Zs);const Tb=Eb;function Ab(t,e,i,r,n){return"start"===i?e.origin[r]:"end"===i?e.origin[r]+e.size[n]-t:e.origin[r]+(e.size[n]-t)/2}function Mb(t,e,i,r,n){return"start"===i?e.origin[r]+e.size[n]-t:"end"===i?e.origin[r]:e.origin[r]+(e.size[n]-t)/2}var Ob={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},Db=function(t,e){t.forEach(e)},Pb=function(t,e){for(var i=t.length-1;i>=0;i--)e(t[i],i)},Rb=function(t){function e(e,i){t.call(this,Object.assign({},Ob,i)),this._rect=e,this._fieldMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(t){return t?(this._rect=t,this):this._rect},e.prototype._initMap=function(){var t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=Pb,this.justifyAlign=Mb):(this.forEach=Db,this.justifyAlign=Ab)},e.prototype.reflow=function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var t,e,i,r=this.options,n=this._rect,o=this._initGroups(),s=o.groups,a=o.groupsSize,l=this._fieldMap,h=l.sizeField,c=l.groupsSizeField,p=l.groupAxis,u=l.groupsAxis,d=new Kl,f=new Kl,v=new Yl,m=Ab(a,n,r.alignContent,u,c),g=function(n,o){var s=e.elements[o];f[p]=t,f[u]=Ab(n.size[c],i,r.alignItems,u,c),function(t,e,i){var r=i.transform()||ph(),n=r.matrix();n.e+=t.x-e.origin.x,n.f+=t.y-e.origin.y,r.matrix(n),i.transform(r)}(f,n,s),t+=n.size[h]+r.spacing},y=0;y<s.length;y++)e=s[y],d[p]=t=this.justifyAlign(e.size,n,r.justifyContent,p,h),d[u]=m,v[h]=e.size,v[c]=e.lineSize,i=new Jl(d,v),this.forEach(e.bboxes,g),m+=e.lineSize+r.lineSpacing;if(!r.wrap&&e.size>n.size[h]){var b=n.size[h]/i.size[h],w=i.topLeft().scale(b,b),x=Ab(i.size[c]*b,n,r.alignContent,u,c),_=ph();"x"===p?_.translate(n.origin.x-w.x,x-w.y):_.translate(x-w.x,n.origin.y-w.y),_.scale(b,b),this.transform(_)}}},e.prototype._initGroups=function(){for(var t=this,e=this.options,i=this.children,r=e.lineSpacing,n=e.wrap,o=e.spacing,s=this._fieldMap.sizeField,a=this._newGroup(),l=[],h=function(){l.push(a),c+=a.lineSize+r},c=-r,p=0;p<i.length;p++){var u=i[p],d=i[p].clippedBBox();u.visible()&&d&&(n&&a.size+d.size[s]+o>t._rect.size[s]?0===a.bboxes.length?(t._addToGroup(a,d,u),h(),a=t._newGroup()):(h(),a=t._newGroup(),t._addToGroup(a,d,u)):t._addToGroup(a,d,u))}return a.bboxes.length&&h(),{groups:l,groupsSize:c}},e.prototype._addToGroup=function(t,e,i){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(i)},e.prototype._newGroup=function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},e}(bc);const Ib=Rb;var Lb=function(t){function e(e,i){t.call(this,e),this.chartService=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new Ib(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":"horizontal",reverse:e.rtl,alignItems:i?"start":"center"});for(var r=0;r<t.length;r++){var n=t[r];n.reflow(new eh),n.renderVisual()}},e.prototype.reflow=function(t){this.visual.rect(t.toRect()),this.visual.reflow();var e=this.visual.clippedBBox();this.box=e?sp(e):new eh},e.prototype.renderVisual=function(){this.addVisual()},e.prototype.createVisual=function(){},e}(Dc);const zb=Lb;var Bb=function(t){function e(e){t.call(this,e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainer=function(){this.container=new tp({vertical:!1,wrap:!1,align:jo,spacing:this.options.spacing}),this.append(this.container)},e.prototype.createMarker=function(){this.container.append(new Lc(this.markerOptions()))},e.prototype.markerOptions=function(){var t=this.options,e=t.markerColor;return _s({},t.markers,{background:e,border:{color:e}})},e.prototype.createLabel=function(){var t=this.options,e=_s({},t.labels);this.container.append(new hp(t.text,e))},e.prototype.renderComplete=function(){t.prototype.renderComplete.call(this);var e=this.options.cursor||{},i=this._itemOverlay=sc.fromRect(this.container.box.toRect(),{fill:{color:ss,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(i)},e.prototype.click=function(t,e){var i=this.eventArgs(e);!t.trigger("legendItemClick",i)&&e&&"contextmenu"===e.type&&e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);return t.trigger("legendItemHover",i)||t._legendItemHover(i.seriesIndex,i.pointIndex),!0},e.prototype.out=function(t,e){t._unsetActivePoint(),t.trigger("legendItemLeave",this.eventArgs(e))},e.prototype.eventArgs=function(t){var e=this.options;return{element:Ja(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},e.prototype.renderVisual=function(){var e=this,i=this.options,r=i.visual;r?(this.visual=r({active:i.active,series:i.series,sender:this.getSender(),pointIndex:i.pointIndex,options:{markers:this.markerOptions(),labels:i.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this.addVisual()):t.prototype.renderVisual.call(this)},e}(Rc);const Nb=Bb;var jb="horizontal",Fb="custom",Vb=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,e),this.chartService=i,Fs(this.options.position,[rs,ts,No,Ko,Fb])||(this.options.position=ts),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainers=function(){var t=this.options,e=t.position,i=t.align,r=e,n=jo;e===Fb?r=Ko:Fs(e,[rs,No])?(r="start"===i?Ko:"end"===i?ts:jo,n=e):i&&("start"===i?n=rs:"end"===i&&(n=No)),this.container=new Rc({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:n,align:r,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new Rc({vAlign:n,align:r,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},e.prototype.createItems=function(){var t=this.getService(),e=this.options,i=this.isVertical(),r=new zb({vertical:i,spacing:e.spacing,rtl:t.rtl},t),n=e.items;e.reverse&&(n=n.slice(0).reverse());for(var o=n.length,s=0;s<o;s++){var a=n[s];r.append(new Nb(_s({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,a)))}r.render(),this.itemsContainer.append(r)},e.prototype.isVertical=function(){var t=this.options,e=t.orientation,i=t.position;return i===Fb&&e!==jb||($a(e)?e!==jb:Fs(i,[Ko,ts]))},e.prototype.hasItems=function(){return this.container.children[0].children.length>0},e.prototype.reflow=function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===Fb?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new eh(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},e.prototype.containerReflow=function(t){var e=this.options,i=this.container,r=e.position,n=e.width,o=e.height,s=r===rs||r===No?ls:hs,a=this.isVertical(),l=t.clone(),h=t.clone();r!==Ko&&r!==ts||(h.y1=l.y1=0),a&&o?(h.y2=h.y1+o,h.align(l,hs,i.options.vAlign)):!a&&n&&(h.x2=h.x1+n,h.align(l,ls,i.options.align)),i.reflow(h);var c=(h=i.box).clone();(e.offsetX||e.offsetY)&&(h.translate(e.offsetX,e.offsetY),i.reflow(h)),c[s+1]=t[s+1],c[s+2]=t[s+2],this.box=c},e.prototype.containerCustomReflow=function(t){var e=this.options,i=this.container,r=e.offsetX,n=e.offsetY,o=e.width,s=e.height,a=this.isVertical(),l=t.clone();a&&s?l.y2=l.y1+s:!a&&o&&(l.x2=l.x1+o),i.reflow(l),l=i.box,i.reflow(new eh(r,n,r+l.width(),n+l.height()))},e.prototype.renderVisual=function(){this.hasItems()&&t.prototype.renderVisual.call(this)},e.prototype.createLegendTitle=function(t){var e=_s({},{color:Bo,position:rs,align:jo},t),i=e.text;if(t&&!1!==t.visible){if($a(e)&&e.visible){var r=Ps(e);r?i=r({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new hp(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},e.prototype.createTitleLayout=function(){this.layout=new tp({vertical:!0,wrap:!1}),this.container.append(this.layout)},e.prototype.hasTitle=function(){return Boolean(this.options.title&&!1!==this.options.title.visible)},e.prototype.appendTitleLayoutContent=function(){this.options.title.position===No?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},e}(Dc);hl(Vb,{position:ts,items:[],offsetX:0,offsetY:0,margin:As(5),padding:As(5),border:{color:Bo,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:Ko,vAlign:jo}});const Hb=Vb;var Wb=function(t){function e(){t.call(this),this._registry=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){this._registry.push({type:t,seriesTypes:e})},e.prototype.create=function(t,e,i){for(var r,n=this._registry,o=n[0],s=0;s<n.length;s++){var a=n[s];if((r=ym(t,a.seriesTypes)).length>0){o=a;break}}return new o.type(r,e,i)},e}(Zs);Wb.current=new Wb;const Ub=Wb;function qb(t){var e=document.createElement("div");return t&&(e.className=t),e}function Gb(t){for(var e=t;e&&!Bs(e,"k-handle");)e=e.parentNode;return e}var $b=function(t){function e(e,i,r,n){t.call(this);var o=e.element;this.options=_s({},this.options,r),this.chart=e,this.observer=n,this.chartElement=o,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof Cu,this.initOptions(),this.visible=this.options.visible&&o.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPane=function(t){return this.categoryAxis.pane===t},e.prototype.createElements=function(){var t=this.options,e=this.wrapper=qb("k-selector");Ts(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=qb("k-selection");this.leftMask=qb("k-mask"),this.rightMask=qb("k-mask"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i),i.appendChild(qb("k-selection-bg"));var r=this.leftHandle=qb("k-handle k-left-handle"),n=this.rightHandle=qb("k-handle k-right-handle");r.appendChild(qb()),n.appendChild(qb()),i.appendChild(r),i.appendChild(n),this.chartElement.appendChild(e);var o=Ts(i,["borderLeftWidth","borderRightWidth","height"]),s=Ts(r,"height").height,a=Ts(n,"height").height;t.selection={border:{left:o.borderLeftWidth,right:o.borderRightWidth}},Ts(r,{top:(o.height-s)/2}),Ts(n,{top:(o.height-a)/2}),e.style.cssText=e.style.cssText},e.prototype.bindEvents=function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),Ga(this.wrapper,((t={})[Mf]=this._mousewheelHandler,t))),this._domEvents=Mp.create(this.wrapper,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},e.prototype.initOptions=function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&_s(t,{min:cu(i,t.min),max:cu(i,t.max),from:cu(i,t.from),to:cu(i,t.to)});var r=Ts(this.chartElement,["paddingLeft","paddingTop"]),n=r.paddingLeft,o=r.paddingTop;this.options=_s({},{width:e.width(),height:e.height()+.1,padding:{left:n,top:o},offset:{left:e.x1+n,top:e.y1+o},from:t.min,to:t.max},t)},e.prototype.destroy=function(){var t;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(ol(this.wrapper,((t={})[Mf]=this._mousewheelHandler,t)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},e.prototype._rangeEventArgs=function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},e.prototype._start=function(t){var e=this.options,i=Ja(t);if(!this._state&&i){this.chart._unsetActivePoint(),this._state={moveTarget:Gb(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var r=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(wf,r)&&(this._state=null)}},e.prototype._press=function(t){var e;(e=this._state?this._state.moveTarget:Gb(Ja(t)))&&ps(e,"k-handle-active")},e.prototype._move=function(t){if(this._state){var e=this,i=e._state,r=e.options,n=e.categoryAxis,o=i.range,s=i.moveTarget,a=n.options.reverse,l=this._index(r.from),h=this._index(r.to),c=this._index(r.min),p=this._index(r.max),u=i.startLocation-t.x.location,d=o.from,f=o.to,v=o.to-o.from,m=Ts(this.wrapper,"width").width/(n.categoriesCount()-1),g=Math.round(u/m)*(a?-1:1);if(s){var y=Bs(s,"k-left-handle"),b=Bs(s,"k-right-handle");Bs(s,"k-selection k-selection-bg")?(o.from=Math.min(Math.max(c,l-g),p-v),o.to=Math.min(o.from+v,p)):y&&!a||b&&a?(o.from=Math.min(Math.max(c,l-g),p-1),o.to=Math.max(o.from+1,o.to)):(y&&a||b&&!a)&&(o.to=Math.min(Math.max(c+1,h-g),p),o.from=Math.min(o.to-1,o.from)),o.from===d&&o.to===f||(this.move(o.from,o.to),this.trigger(xf,this._rangeEventArgs(o)))}}},e.prototype._end=function(){if(this._state){var t=this._state.moveTarget;t&&(r="k-handle-active",(i=t)&&i.className&&(i.className=i.className.replace(r,"").replace(us," ")));var e=this._state.range;this.set(e.from,e.to),this.trigger(_f,this._rangeEventArgs(e)),delete this._state}var i,r},e.prototype._tap=function(t){var e=this.options,i=this.categoryAxis,r=this.chart._eventCoordinates(t),n=i.pointCategoryIndex(new Fl(r.x,i.box.y1)),o=this._index(e.from),s=this._index(e.to),a=this._index(e.min),l=this._index(e.max),h=s-o,c=o+h/2,p={},u=3===t.event.which,d=Math.round(c-n);this._state||u||(this.chart._unsetActivePoint(),i.options.justified||d--,p.from=Math.min(Math.max(a,o-d),l-h),p.to=Math.min(p.from+h,l),this._start(t),this._state&&(this._state.range=p,this.trigger(xf,this._rangeEventArgs(p)),this._end()))},e.prototype._mousewheel=function(t){var e=this,i=Ys(t);if(this._start({target:this.selection}),this._state){var r=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(i)>1&&(i*=3),this.options.mousewheel.reverse&&(i*=-1),this.expand(i)&&this.trigger(xf,{axis:this.categoryAxis.options,delta:i,originalEvent:t,from:this._value(r.from),to:this._value(r.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._end()}),150)}},e.prototype._gesturestart=function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(wf,i)?this._state=null:t.preventDefault()},e.prototype._gestureend=function(){this._state&&(this.trigger(_f,this._rangeEventArgs(this._state.range)),delete this._state)},e.prototype._gesturechange=function(t){var e=this,i=e.chart,r=e._state,n=e.options,o=e.categoryAxis,s=r.range,a=i._toModelCoordinates(t.touches[0].x.location).x,l=i._toModelCoordinates(t.touches[1].x.location).x,h=Math.min(a,l),c=Math.max(a,l);t.preventDefault(),s.from=o.pointCategoryIndex(new Fl(h))||n.min,s.to=o.pointCategoryIndex(new Fl(c))||n.max,this.move(s.from,s.to),this.trigger(xf,this._rangeEventArgs(s))},e.prototype._index=function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},e.prototype._value=function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},e.prototype._slot=function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},e.prototype.move=function(t,e){var i=this.options,r=this.categoryAxis.options.reverse,n=i.offset,o=i.padding,s=i.selection.border,a=r?e:t,l=r?t:e,h="x"+(r?2:1),c=this._slot(a),p=nl(c[h]-n.left+o.left);Ts(this.leftMask,{width:p}),Ts(this.selection,{left:p}),c=this._slot(l);var u=nl(i.width-(c[h]-n.left+o.left));Ts(this.rightMask,{width:u});var d=i.width-u;d!==i.width&&(d+=s.right),Ts(this.rightMask,{left:d}),Ts(this.selection,{width:Math.max(i.width-(p+u)-s.right,0)})},e.prototype.set=function(t,e){var i=this.options,r=this._index(i.min),n=this._index(i.max),o=el(this._index(t),r,n),s=el(this._index(e),o+1,n);i.visible&&this.move(o,s),i.from=this._value(o),i.to=this._value(s)},e.prototype.expand=function(t){var e=this.options,i=this._index(e.min),r=this._index(e.max),n=e.mousewheel.zoom,o=this._index(e.from),s=this._index(e.to),a={from:o,to:s},l=_s({},a);if(this._state&&(a=this._state.range),n!==ts&&(a.from=el(el(o-t,0,s-1),i,r)),n!==Ko&&(a.to=el(el(s+t,a.from+1,r),i,r)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.zoom=function(t,e){var i=this.options,r=this._index(i.min),n=this._index(i.max),o=this._index(i.from),s=this._index(i.to),a={from:o,to:s},l=_s({},a),h=this.categoryAxis.options.reverse,c=ls+(h?"2":"1"),p=this.categoryAxis.lineBox(),u=Math.abs(p[c]-e.x),d=p.width(),f=nl(u/d,2),v=nl(f*t),m=nl((1-f)*t);if(this._state&&(a=this._state.range),a.from=el(el(o-v,0,s-1),r,n),a.to=el(el(s+m,a.from+1,n),r,n),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.trigger=function(t,e){return(this.observer||this.chart).trigger(t,e)},e}(Zs);hl($b,{visible:!0,mousewheel:{zoom:"both"},min:Yo,max:Xo});const Kb=$b;var Xb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(e){if(e&&e.tooltipAnchor&&(!this._current||this._current!==e)){var i=_s({},this.options,e.options.tooltip),r=e.tooltipAnchor();r?(this._current=e,t.prototype.show.call(this,{point:e,anchor:r},i,e)):this.hide()}},e.prototype.hide=function(){delete this._current,t.prototype.hide.call(this)},e}(nm);const Yb=Xb;var Zb=function(t){function e(e,i){t.call(this,e.chartService,i),this.plotArea=e,this.formatService=e.chartService.format}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t,e){var i=zs(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var r=i[0],n=this.plotArea.categoryAxis.getSlot(r.categoryIx),o=e?this._slotAnchor(e,n):this._defaultAnchor(r,n);this.show({anchor:o,shared:!0,points:t,category:r.category,categoryText:this.formatService.auto(this.options.categoryFormat,r.category),series:this.plotArea.series},this.options)}},e.prototype._slotAnchor=function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},e.prototype._defaultAnchor=function(t,e){var i=t.owner.pane.chartsBox(),r=this.plotArea.categoryAxis.options.vertical,n=i.center(),o=e.center();return{point:r?new Fl(n.x,o.y):new Fl(o.x,n.y),align:{horizontal:"center",vertical:"center"}}},e}(nm);hl(Zb,{categoryFormat:"{0:d}"});const Jb=Zb;var Qb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?hs:ls,r=this.fromScale=new Kl(1,1);r[i]=kd,t.transform(ph().scale(r.x,r.y))}else this.abort()},e.prototype.step=function(t){var e=Hs(this.fromScale.x,1,t),i=Hs(this.fromScale.y,1,t);this.element.transform(ph().scale(e,i,this.origin))},e.prototype.abort=function(){t.prototype.abort.call(this),this.element.transform(null)},e}(Mc);hl(Qb,{duration:wd}),Tc.current.register(Rd,Qb);var tw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.center=this.element.bbox().center();this.element.transform(ph().scale(kd,kd,t))},e.prototype.step=function(t){this.element.transform(ph().scale(t,t,this.center))},e}(Mc);hl(tw,{easing:"easeOutElastic"}),Tc.current.register(Ld,tw);var ew=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},e.prototype.step=function(t){this.element.opacity(t*this.fadeTo)},e}(Mc);hl(ew,{duration:200,easing:"linear"}),Tc.current.register(xd,ew);var iw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.element.transform(ph().scale(kd,kd,this.options.center))},e.prototype.step=function(t){this.element.transform(ph().scale(t,t,this.options.center))},e}(Mc);hl(iw,{easing:"easeOutElastic",duration:wd}),Tc.current.register(qd,iw);var rw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.createSegment=function(t,e,i){return new(e.style===Od?Jf:qf)(t,e,i)},e.prototype.animationPoints=function(){return t.prototype.animationPoints.call(this).concat(this._segments)},e.prototype.createMissingValue=function(t,e){if(e===Ed){var i={x:t.x,y:t.y};return Uv(i.x)||(i.x=0),Uv(i.y)||(i.y=0),i}},e}(Gv);_s(rw.prototype,tv);const nw=rw;var ow=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new gv,this.yAxisRangeTracker=new gv},e.prototype.render=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&(e.createScatterChart(ym(s,ef),n),e.createScatterLineChart(ym(s,rf),n),e.createBubbleChart(ym(s,Ld),n))}this.createAxes(t)},e.prototype.appendChart=function(e,i){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?(this.yAxisRangeTracker.reset(i),delete this.namedYAxes[i]):(this.xAxisRangeTracker.reset(i),delete this.namedXAxes[i]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,r=zs([].concat(e.xAxis),(function(t){return t.name===i}))[0],n=t.yAxis,o=zs([].concat(e.yAxis),(function(t){return t.name===n}))[0],s=(e.panes||[{}])[0].name||"default";return(r||{}).pane||(o||{}).pane||s},e.prototype.createScatterChart=function(t,e){t.length>0&&this.appendChart(new Gv(this,{series:t,clip:e.options.clip}),e)},e.prototype.createScatterLineChart=function(t,e){t.length>0&&this.appendChart(new nw(this,{series:t,clip:e.options.clip}),e)},e.prototype.createBubbleChart=function(t,e){t.length>0&&this.appendChart(new Yv(this,{series:t,clip:e.options.clip}),e)},e.prototype.createXYAxis=function(t,e,i){for(var r,n=t.name,o=e?this.namedYAxes:this.namedXAxes,s=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=_s({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=gm(a.type,Cf),h=s.query(),c=l?{min:.1,max:1}:{min:0,max:1},p=s.query(n)||h||c,u=[a.min,a.max],d=this.series,f=0;f<d.length;f++){var v=d[f],m=v[e?"yAxis":"xAxis"];if(m===a.name||0===i&&!m){var g=fd.current.bindPoint(v,0).valueFields;u.push(g[e?"y":"x"]);break}}0===i&&h&&(p.min=Math.min(p.min,h.min),p.max=Math.max(p.max,h.max));for(var y=0;y<u.length;y++)if(u[y]instanceof Date){r=!0;break}var b=new(gm(a.type,Ho)||!a.type&&r?Iu:l?ju:Pu)(p.min,p.max,a,this.chartService);if(b.axisIndex=i,n){if(o[n])throw new Error((e?"Y":"X")+" axis with name "+n+" is already defined");o[n]=b}return this.appendAxis(b),b},e.prototype.createAxes=function(t){for(var e=this,i=this.options,r=[].concat(i.xAxis),n=[],o=[].concat(i.yAxis),s=[],a=0;a<r.length;a++){Fs(e.findPane(r[a].pane),t)&&n.push(e.createXYAxis(r[a],!1,a))}for(var l=0;l<o.length;l++){Fs(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||n[0],this.axisY=this.axisY||s[0]},e.prototype._dispatchEvent=function(t,e,i){for(var r=t._eventCoordinates(e),n=new Fl(r.x,r.y),o=this.axes,s=o.length,a=[],l=[],h=0;h<s;h++){var c=o[h],p=c.options.vertical?l:a,u=c.getValue(n);null!==u&&p.push(u)}a.length>0&&l.length>0&&t.trigger(i,{element:Ja(e),originalEvent:e,x:xm(a),y:xm(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,r=this.groupAxes(this.panes),n=(i?r.y:r.x).indexOf(t);sw(this.options,n,i,e),sw(this.originalOptions,n,i,e)},e}(Dm);function sw(t,e,i,r){_s([].concat(i?t.yAxis:t.xAxis)[e],r)}hl(ow,{xAxis:{},yAxis:{}}),_s(ow.prototype,Rm);const aw=ow;var lw=function(t){function e(e,i,r){t.call(this,r),this.value=e,this.sector=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options.labels,e=this.owner.chartService,i=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var r=Ps(t),n=this.pointData();if(r?i=r(n):t.format&&(i=e.format.auto(t.format,i)),t.visible&&(i||0===i)){if(t.position===jo||t.position===Tf)t.color||(t.color=Ml(this.options.color)),t.background||(t.background=this.options.color);else{var o=e.theme.seriesDefaults.labels;t.color=t.color||o.color,t.background=t.background||o.background}this.label=new hp(i,_s({},t,{align:jo,vAlign:"",animation:{type:xd,delay:this.animationDelay}}),n),this.append(this.label)}}},e.prototype.reflow=function(t){this.render(),this.box=t,this.reflowLabel()},e.prototype.reflowLabel=function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),r=t.distance,n=i.middle();if(e){var o,s=e.box.height(),a=e.box.width();if(t.position===jo)i.radius=Math.abs((i.radius-s)/2)+s,o=i.point(n),e.reflow(new eh(o.x,o.y-s/2,o.x,o.y));else if(t.position===Tf)i.radius=i.radius-s/2,o=i.point(n),e.reflow(new eh(o.x,o.y-s/2,o.x,o.y));else{var l;(o=i.clone().expand(r).point(n)).x>=i.center.x?(l=o.x+a,e.orientation=ts):(l=o.x-a,e.orientation=Ko),e.reflow(new eh(l,o.y-s,o.x,o.y))}}},e.prototype.createVisual=function(){var e=this,i=this.sector,r=this.options;if(t.prototype.createVisual.call(this),this.value)if(r.visual){var n=(i.startAngle+180)%360,o=r.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new Kl(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:n,endAngle:n+i.angle,options:r,sender:this.getSender(),createVisual:function(){var t=new bc;return e.createSegmentVisual(t),t}});o&&this.visual.append(o)}else this.createSegmentVisual(this.visual)},e.prototype.createSegmentVisual=function(t){var e=this.sector,i=this.options,r=i.border||{},n=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{},o=i.color,s={color:o,opacity:i.opacity},a=this.createSegment(e,_s({fill:s,stroke:{opacity:i.opacity},zIndex:i.zIndex},n));t.append(a),wv(i)&&t.append(this.createGradientOverlay(a,{baseColor:o,fallbackFill:s},_s({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},e.prototype.createSegment=function(t,e){return e.singleSegment?new mc(new uc(new Kl(t.center.x,t.center.y),t.radius),e):hc.current.createRing(t,e)},e.prototype.createAnimation=function(){var e=this.options,i=this.sector.center;_s(e,{animation:{center:[i.x,i.y],delay:this.animationDelay}}),t.prototype.createAnimation.call(this)},e.prototype.createHighlight=function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,_s({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new Kl(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},e.prototype.tooltipAnchor=function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:pw(e+180)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e}(Dc),hw=nl(rl(30),Uo),cw=nl(rl(60),Uo);function pw(t){var e=rl(t),i=nl(Math.sin(e),Uo),r=nl(Math.cos(e),Uo);return{horizontal:Math.abs(i)>cw?jo:r<0?ts:Ko,vertical:Math.abs(i)<hw?jo:i<0?No:rs}}hl(lw,{color:ss,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Wo,margin:As(.5),align:Fo,zIndex:1,position:Af},animation:{type:qd},highlight:{visible:!0,border:{width:1}},visible:!0}),_s(lw.prototype,jf);const uw=lw;var dw={createLegendItem:function(t,e,i){var r=this.options.legend||{},n=r.labels||{},o=r.inactiveItems||{},s=o.labels||{};if(i&&!1!==i.visibleInLegend){var a,l,h=!1!==i.visible,c=h?Ps(n):Ps(s)||Ps(n),p=i.category;c&&(p=c({text:p,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),h?(a={},l=e.color):(a={color:s.color,font:s.font},l=(o.markers||{}).color),Uv(p)&&""!==p&&this.legendItems.push({active:h,pointIndex:i.index,text:p,series:i.series,markerColor:l,labels:a})}}};const fw=dw;var vw=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.traverseDataPoints=function(t){var e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);for(var r=i.length,n=e.series,o=n.length,s=0;s<o;s++){var a=n[s],l=a.data,h=mm(a),c=h.total,p=h.points,u=h.count,d=360/c,f=void 0;isFinite(d)||(f=360/u);var v=void 0;v=$a(a.startAngle)?a.startAngle:e.startAngle,s!==o-1&&a.labels.position===Af&&(a.labels.position=jo);for(var m=0;m<p.length;m++){var g=p[m];if(g){var y=g.fields,b=g.value,w=g.visible,x=0!==b?f||b*d:0,_=1!==l.length&&Boolean(y.explode);bs(a.color)||(a.color=y.color||i[m%r]),t(g.valueFields.value,new nh(null,0,0,v,x),{owner:this,category:$a(y.category)?y.category:"",index:m,series:a,seriesIx:s,dataItem:l[m],percentage:0!==c?b/c:0,explode:_,visibleInLegend:y.visibleInLegend,visible:w,zIndex:o-s,animationDelay:this.animationDelay(m,s,o)}),!1!==w&&(v+=x)}}}},e.prototype.evalSegmentOptions=function(t,e,i){var r=i.series;If(t,{value:e,series:r,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:r._defaults,excluded:["data","content","template","visual","toggle"]})},e.prototype.addValue=function(t,e,i){var r=_s({},i.series,{index:i.index});if(this.evalSegmentOptions(r,t,i),this.createLegendItem(t,r,i),!1!==i.visible){var n=new uw(t,e,r);Object.assign(n,i),this.append(n),this.points.push(n)}},e.prototype.reflow=function(t){var e=this,i=e.options,r=e.points,n=e.seriesConfigs;void 0===n&&(n=[]);var o=r.length,s=t.clone(),a=Math.min(s.width(),s.height()),l=a/2,h=a-.85*a,c=new eh(s.x1,s.y1,s.x1+a,s.y1+a),p=c.center(),u=s.center(),d=i.series.length,f=[],v=[],m=sl(i.padding,h);this.targetBox=t,m=m>l-5?l-5:m,c.translate(u.x-p.x,u.y-p.y);for(var g=l-m,y=new Fl(g+c.x1+m,g+c.y1+m),b=0;b<o;b++){var w=r[b],x=w.sector,_=w.seriesIx;if(x.radius=g,x.center=y,n.length){var k=n[_];x.innerRadius=k.innerRadius,x.radius=k.radius}_===d-1&&w.explode&&(x.center=x.clone().setRadius(.15*x.radius).point(x.middle())),w.reflow(c);var S=w.label;S&&S.options.position===Af&&_===d-1&&(S.orientation===ts?v.push(S):f.push(S))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),v.length>0&&(v.sort(this.labelComparator(!1)),this.rightLabelsReflow(v)),this.box=c},e.prototype.leftLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.rightLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.distanceBetweenLabels=function(t){var e=tl(this.points),i=e.sector,r=t.length-1,n=i.radius+e.options.labels.distance,o=[],s=t[0].box,a=nl(s.y1-(i.center.y-n-s.height()-s.height()/2));o.push(a);for(var l=0;l<r;l++){var h=t[l+1].box;s=t[l].box,a=nl(h.y1-s.y2),o.push(a)}return a=nl(i.center.y+n-t[r].box.y2-t[r].box.height()/2),o.push(a),o},e.prototype.distributeLabels=function(t,e){for(var i,r,n,o=t.length,s=0;s<o;s++)for(n=-t[s],i=r=s;n>0&&(i>=0||r<o);)n=this._takeDistance(t,s,--i,n),n=this._takeDistance(t,s,++r,n);this.reflowLabels(t,e)},e.prototype._takeDistance=function(t,e,i,r){var n=r;if(t[i]>0){var o=Math.min(t[i],n);n-=o,t[i]-=o,t[e]+=o}return n},e.prototype.reflowLabels=function(t,e){var i,r=tl(this.points),n=r.sector,o=r.options.labels,s=e.length,a=o.distance,l=n.center.y-(n.radius+a)-e[0].box.height();t[0]+=2;for(var h=0;h<s;h++){var c=e[h],p=c.box;l+=t[h],i=this.hAlignLabel(p.x2,n.clone().expand(a),l,l+p.height(),c.orientation===ts),c.orientation===ts?(o.align!==Fo&&(i=n.radius+n.center.x+a),c.reflow(new eh(i+p.width(),l,i,l))):(o.align!==Fo&&(i=n.center.x-n.radius-a),c.reflow(new eh(i-p.width(),l,i,l))),l+=p.height()}},e.prototype.createVisual=function(){var e=this,i=this.options.connectors,r=this.points,n=r.length;t.prototype.createVisual.call(this),this._connectorLines=[];for(var o=0;o<n;o++){var s=r[o],a=s.sector,l=s.label,h=a.middle(),c=(s.options.connectors||{}).color||i.color;if(l){var p=new sc({stroke:{color:c,width:i.width},animation:{type:xd,delay:s.animationDelay}});if(l.options.position===Af){var u=l.box,d=a.center,f=a.point(h),v=new Fl(u.x1,u.center().y),m=void 0,g=void 0,y=void 0;f=a.clone().expand(i.padding).point(h),p.moveTo(f.x,f.y),l.orientation===ts?(y=mw(d,f,v,g=new Fl(u.x1-i.padding,u.center().y)),v=new Fl(g.x-4,g.y),(y=y||v).x=Math.min(y.x,v.x),e.pointInCircle(y,a.center,a.radius+4)||y.x<a.center.x?(m=a.center.x+a.radius+4,s.options.labels.align!==Nd?m<v.x?p.lineTo(m,f.y):p.lineTo(f.x+8,f.y):p.lineTo(m,f.y),p.lineTo(v.x,g.y)):(y.y=g.y,p.lineTo(y.x,y.y))):(y=mw(d,f,v,g=new Fl(u.x2+i.padding,u.center().y)),v=new Fl(g.x+4,g.y),(y=y||v).x=Math.max(y.x,v.x),e.pointInCircle(y,a.center,a.radius+4)||y.x>a.center.x?(m=a.center.x-a.radius-4,s.options.labels.align!==Nd?m>v.x?p.lineTo(m,f.y):p.lineTo(f.x-8,f.y):p.lineTo(m,f.y),p.lineTo(v.x,g.y)):(y.y=g.y,p.lineTo(y.x,y.y))),p.lineTo(g.x,g.y),e._connectorLines.push(p),e.visual.append(p)}}}},e.prototype.renderVisual=function(){if(t.prototype.renderVisual.call(this),pl(this.options.series,(function(t){return t.autoFit}))){var e=this.targetBox,i=this.box.center(),r=this.visual.bbox();if(!r)return;var n=r.bottomRight(),o=Math.min((i.y-e.y1)/(i.y-r.origin.y),(e.y2-i.y)/(n.y-i.y),(i.x-e.x1)/(i.x-r.origin.x),(e.x2-i.x)/(n.x-i.x));o<1&&this.visual.transform(ph().scale(o,o,[i.x,i.y]))}},e.prototype.labelComparator=function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},e.prototype.hAlignLabel=function(t,e,i,r,n){var o=e.radius,s=e.center,a=s.x,l=s.y,h=Math.min(Math.abs(l-i),Math.abs(l-r));return h>o?t:a+Math.sqrt(o*o-h*h)*(n?1:-1)},e.prototype.pointInCircle=function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.animationDelay=function(t){return 70*t},e.prototype.stackRoot=function(){return this},e}(Dc);function mw(t,e,i,r){var n,o=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),s=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==s){var a=o/s;n=new Fl(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return n}hl(vw,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),_s(vw.prototype,fw),vw.prototype.isStackRoot=!0;const gw=vw;var yw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createPieChart(this.series)},e.prototype.createPieChart=function(t){var e=t[0],i=new gw(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),qa(this.options.legend.items,e.legendItems)},e}(Dm);const bw=yw;var ww=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowLabel=function(){var e=this.options.labels,i=this.label,r=this.sector.clone(),n=r.middle();if(i){var o=i.box.height();if(e.position===jo){r.radius-=(r.radius-r.innerRadius)/2;var s=r.point(n);i.reflow(new eh(s.x,s.y-o/2,s.x,s.y))}else t.prototype.reflowLabel.call(this)}},e.prototype.createSegment=function(t,e){return hc.current.createRing(t,e)},e}(uw);hl(ww,{overlay:{gradient:"roundedGlass"},labels:{position:jo},animation:{type:qd}}),_s(ww.prototype,jf);const xw=ww;var _w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e,i){var r=_s({},i.series,{index:i.index});if(this.evalSegmentOptions(r,t,i),this.createLegendItem(t,r,i),t&&!1!==i.visible){var n=new xw(t,e,r);Object.assign(n,i),this.append(n),this.points.push(n)}},e.prototype.reflow=function(e){for(var i,r=this.options,n=e.clone(),o=Math.min(n.width(),n.height()),s=o/2,a=o-.85*o,l=r.series,h=l.length,c=sl(r.padding,a),p=s-(c=c>s-5?s-5:c),u=0,d=0;d<h;d++){var f=l[d];0===d&&$a(f.holeSize)&&(i=f.holeSize,p-=f.holeSize),$a(f.size)?p-=f.size:u++,$a(f.margin)&&d!==h-1&&(p-=f.margin)}$a(i)||(p-=i=.75*((s-c)/(h+.75)));var v,m=i,g=0;this.seriesConfigs=[];for(var y=0;y<h;y++){var b=l[y];v=(m+=g)+sl(b.size,p/u),this.seriesConfigs.push({innerRadius:m,radius:v}),g=b.margin||0,m=v}t.prototype.reflow.call(this,e)},e.prototype.animationDelay=function(t,e,i){return 50*t+wd*(e+1)/(i+1)},e}(gw);hl(_w,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const kw=_w;var Sw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createDonutChart(this.series)},e.prototype.createDonutChart=function(t){var e=t[0],i=new kw(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e}(bw);const Cw=Sw;var Ew=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.valueAxisRangeTracker=new gv},e.prototype.render=function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},e.prototype.alignAxes=function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,r=t.getSlot(i),n=this.polarAxis.getSlot(0).center,o=t.box.translate(n.x-r.x1,n.y-r.y1);t.reflow(o)},e.prototype.createValueAxis=function(){var t,e,i=this.valueAxisRangeTracker,r=i.query(),n=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});n.type===Cf?(t=Ju,e={min:.1,max:1}):(t=Yu,e={min:0,max:1});var o=i.query(name)||r||e;o&&r&&(o.min=Math.min(o.min,r.min),o.max=Math.max(o.max,r.max));var s=new t(o.min,o.max,n,this.chartService);this.valueAxis=s,this.appendAxis(s)},e.prototype.reflowAxes=function(){var t=this,e=t.options.plotArea,i=t.valueAxis,r=t.polarAxis,n=t.box,o=.15*Math.min(n.width(),n.height()),s=As(e.padding||{},o),a=n.clone().unpad(s),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,hs,jo);var h=l.clone().shrink(0,l.height()/2);r.reflow(l),i.reflow(h);var c=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:c})),this.axisBox=l,this.alignAxes(l)},e.prototype.backgroundBox=function(){return this.box},e.prototype.detachLabels=function(){},e}(Dm);const Tw=Ew;var Aw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,r=Fl.onCircle(t.center,t.startAngle,i);return new eh(r.x,r.y,r.x,r.y)},e}(Gv);hl(Aw,{clip:!1});const Mw=Aw;var Ow=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(nw);Ow.prototype.pointSlot=Mw.prototype.pointSlot,hl(Ow,{clip:!1});const Dw=Ow;var Pw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},e.prototype._polarAxisCenter=function(){return this.parent.plotArea.polarAxis.box.center()},e.prototype.strokeSegments=function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new ed(!1),r=this.points();r.push(e),(t=this._strokeSegments=i.process(r)).pop()}return t},e}(dv);const Rw=Pw;var Iw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new Kh([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)},e}(hv);const Lw=Iw;var zw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i){return(e.line||{}).style===Od?new Rw(t,e,i):new Lw(t,e,i)},e.prototype.createMissingValue=function(t,e){var i;return Uv(t.x)&&e!==Td&&(i={x:t.x,y:t.y},e===Ed&&(i.y=0)),i},e.prototype.seriesMissingValues=function(t){return t.missingValues||Ed},e.prototype._hasMissingValuesGap=function(){for(var t=this.options.series,e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},e.prototype.sortPoints=function(t){if(t.sort(Bw),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Uv(i.value.y)||"gap"!==this.seriesMissingValues(i.series)||delete t[e]}return t},e}(Dw);function Bw(t,e){return t.value.x-e.value.x}const Nw=zw;var jw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new qu(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},e.prototype.valueAxisOptions=function(t){return _s(t,{majorGridLines:{type:zo},minorGridLines:{type:zo}},this.options.yAxis)},e.prototype.createValueAxis=function(){t.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},e.prototype.appendChart=function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),Dm.prototype.appendChart.call(this,t,e)},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(ym(t,[$d]),e),this.createScatterChart(ym(t,[Kd]),e),this.createAreaChart(ym(t,[Gd]),e)},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Dw(this,{series:t});this.appendChart(i,e)}},e.prototype.createScatterChart=function(t,e){if(0!==t.length){var i=new Mw(this,{series:t});this.appendChart(i,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Nw(this,{series:t});this.appendChart(i,e)}},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Fl(r.x,r.y),o=this.axisX.getValue(n),s=this.axisY.getValue(n);null!==o&&null!==s&&t.trigger(i,{element:Ja(e),x:o,y:s})},e.prototype.createCrosshairs=function(){},e}(Tw);hl(jw,{xAxis:{},yAxis:{}}),_s(jw.prototype,Rm);const Fw=jw;var Vw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,r=Fl.onCircle(t.center,t.middle(),i);return new eh(r.x,r.y,r.x,r.y)},e.prototype.renderSegments=function(){if(t.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var e=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];e[r.seriesIx]=e[r.seriesIx]||[],e[r.seriesIx].push(r)}return e}(this._segments),i=0;i<e.length;i++){var r=e[i];if(r&&r.length>1){var n=r[0].linePoints[0],o=tl(r),s=tl(o.linePoints),a=0===n.categoryIx,l=s.categoryIx===s.categoriesCount-1;a&&l&&tl(r).linePoints.push(n)}}},e.prototype.createSegment=function(t,e,i){var r=new(e.style===Od?Jf:qf)(t,e,i),n=this.seriesMissingValues(e);return t.length!==e.data.length&&n!==Td||(r.options.closed=!0),r},e}(av);hl(Vw,{clip:!1,limitPoints:!1});const Hw=Vw;var Ww=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(dv);const Uw=Ww;var qw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(hv);const Gw=qw;var $w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,r){var n,o,s,a=this.options.isStacked,l=(e.line||{}).style;return a&&i>0&&r&&(o=r.linePoints.slice(0),n=r),l===Od?(s=new Uw(t,e,i,n,o)).options.closed=!0:(t.push(t[0]),s=new Gw(t,e,i,n,o)),s},e.prototype.seriesMissingValues=function(t){return t.missingValues||Ed},e}(Hw);const Kw=$w;var Xw=function(t){function e(e,i){t.call(this,e,null,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(xw);hl(Xw,{overlay:{gradient:"none"},labels:{distance:10}});const Yw=Xw;var Zw=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Sv:kv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=this.children,r=e.gap,n=e.spacing,o=i.length,s=o+r+n*(o-1),a=t.angle/s,l=t.startAngle+a*(r/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=l,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,l+=a+a*n}))},e}(Dc);hl(Zw,{gap:1,spacing:0});const Jw=Zw;var Qw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options.reverse,i=this.children,r=i.length,n=e?r-1:0,o=e?-1:1;this.box=new eh;for(var s=n;s>=0&&s<r;s+=o){var a=i[s].sector;a.startAngle=t.startAngle,a.angle=t.angle}},e}(Dc);const tx=Qw;var ex=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Yw},e.prototype.clusterType=function(){return Jw},e.prototype.stackType=function(){return tx},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.pointSlot=function(t,e){var i=t.clone(),r=t.center.y;return i.radius=r-e.y1,i.innerRadius=r-e.y2,i},e.prototype.reflowPoint=function(t,e){t.sector=e,t.reflow()},e.prototype.createAnimation=function(){this.options.animation.center=this.box.toRect().center(),t.prototype.createAnimation.call(this)},e}(Ov);ex.prototype.reflow=Bf.prototype.reflow,hl(ex,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const ix=ex;var rx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Wu(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createCategoryAxesLabels()},e.prototype.valueAxisOptions=function(t){return this._hasBarCharts&&_s(t,{majorGridLines:{type:zo},minorGridLines:{type:zo}}),this._isStacked100&&_s(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),_s(t,this.options.valueAxis)},e.prototype.aggregateCategories=function(){vg.prototype.aggregateCategories.call(this,this.panes)},e.prototype.createCategoryAxesLabels=function(){vg.prototype.createCategoryAxesLabels.call(this,this.panes)},e.prototype.filterSeries=function(t){return t},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(ym(t,[Xd]),e),this.createLineChart(ym(t,[Zd]),e),this.createBarChart(ym(t,[Yd]),e)},e.prototype.chartOptions=function(t){var e={series:t},i=t[0];if(i){var r=this.filterVisibleSeries(t),n=i.stack;e.isStacked=n&&r.length>1,e.isStacked100=n&&"100%"===n.type&&r.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Kw(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Hw(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],r=this.chartOptions(t);r.gap=i.gap,r.spacing=i.spacing;var n=new ix(this,r);this.appendChart(n,e),this._hasBarCharts=!0}},e.prototype.seriesCategoryAxis=function(){return this.categoryAxis},e.prototype._dispatchEvent=function(t,e,i){var r=t._eventCoordinates(e),n=new Fl(r.x,r.y),o=this.categoryAxis.getCategory(n),s=this.valueAxis.getValue(n);null!==o&&null!==s&&t.trigger(i,{element:Ja(e),category:o,value:s})},e.prototype.createCrosshairs=function(){},e}(Tw);_s(rx.prototype,Rm,{appendChart:vg.prototype.appendChart,aggregateSeries:vg.prototype.aggregateSeries,seriesSourcePoints:vg.prototype.seriesSourcePoints}),hl(rx,{categoryAxis:{categories:[]},valueAxis:{}});const nx=rx;var ox=function(t){function e(e,i,r){t.call(this,i),this.value=e,this.options.index=r.index}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.points,i=this.children[0];this.box=new eh(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new eh(t.x1,e[0].y,t.x2,e[2].y))},e.prototype.createVisual=function(){var e,i=this,r=this.options;t.prototype.createVisual.call(this),(e=r.visual?r.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:r,sender:this.getSender(),createVisual:function(){return i.createPath()}}):this.createPath())&&this.visual.append(e)},e.prototype.createPath=function(){var t=this.options,e=t.border;return sc.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},e.prototype.createHighlight=function(t){return sc.fromPoints(this.points,t)},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=sc.fromPoints(this.points).close();return{options:this.options,path:t}},e.prototype.tooltipAnchor=function(){var t=this.box;return{point:new Fl(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(Dc);hl(ox,{color:ss,border:{width:1}}),_s(ox.prototype,jf);const sx=ox;var ax=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.points=[],this.labels=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.render=function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var r=e.series[0],n=r.data;if(n)for(var o=mm(r),s=o.total,a=o.points,l=0;l<a.length;l++){var h=a[l];if(h){var c=h.fields;bs(r.color)||(r.color=c.color||i[l%i.length]),c=_s({index:l,owner:t,series:r,dataItem:n[l],percentage:h.value/s},c,{visible:h.visible});var p=h.valueFields.value,u=t.createSegment(p,c),d=t.createLabel(p,c);u&&d&&u.append(d)}}},e.prototype.evalSegmentOptions=function(t,e,i){var r=i.series;If(t,{value:e,series:r,dataItem:i.dataItem,index:i.index},{defaults:r._defaults,excluded:["data","content","template","toggle","visual"]})},e.prototype.createSegment=function(t,e){var i=_s({},e.series);if(this.evalSegmentOptions(i,t,e),this.createLegendItem(t,i,e),!1!==e.visible){var r=new sx(t,i,e);return Object.assign(r,e),this.append(r),this.points.push(r),r}},e.prototype.createLabel=function(t,e){var i=e.series,r=e.dataItem,n=_s({},this.options.labels,i.labels),o=t;if(n.visible){var s=Ps(n),a={dataItem:r,value:t,percentage:e.percentage,category:e.category,series:i};s?o=s(a):n.format&&(o=this.plotArea.chartService.format.auto(n.format,o)),n.color||(n.color=Ml(i.color),n.background||(n.background=i.color)),this.evalSegmentOptions(n,t,e);var l=new hp(o,_s({vAlign:n.position},n),a);return this.labels.push(l),l}},e.prototype.labelPadding=function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var r=t[i].options.align;if(r!==jo){var n=t[i].box.width();r===Ko?e.left=Math.max(e.left,n):e.right=Math.max(e.right,n)}}return e},e.prototype.dynamicSlopeReflow=function(t,e,i){for(var r=this.options,n=this.points,o=n.length,s=n[0],a=s,l=0;l<n.length;l++)n[l].percentage>a.percentage&&(a=n[l]);for(var h=s.percentage/a.percentage*e,c=(e-h)/2,p=0,u=0;u<o;u++){var d=n[u].percentage,f=n[u+1],v=f?f.percentage:d,m=n[u].points=[],g=r.dynamicHeight?i*d:i/o,y=void 0;y=el(y=d?(e-h*(v/d))/2:v?0:e/2,0,e),m.push(new Kl(t.x1+c,t.y1+p)),m.push(new Kl(t.x1+e-c,t.y1+p)),m.push(new Kl(t.x1+e-y,t.y1+g+p)),m.push(new Kl(t.x1+y,t.y1+g+p)),c=y,p+=g+r.segmentSpacing,h=el(e-2*y,0,e)}},e.prototype.constantSlopeReflow=function(t,e,i){for(var r=this.options,n=this.points,o=n.length,s=r.neckRatio<=1,a=s?r.neckRatio*e:e,l=s?0:(e-e/r.neckRatio)/2,h=((s?e:e-2*l)-a)/2,c=0,p=0;p<o;p++){var u=n[p].points=[],d=n[p].percentage,f=r.dynamicHeight?h*d:h/o,v=r.dynamicHeight?i*d:i/o;u.push(new Kl(t.x1+l,t.y1+c)),u.push(new Kl(t.x1+e-l,t.y1+c)),u.push(new Kl(t.x1+e-l-f,t.y1+v+c)),u.push(new Kl(t.x1+l+f,t.y1+v+c)),l+=f,c+=v+r.segmentSpacing}},e.prototype.reflow=function(t){var e=this.points,i=e.length;if(i){var r=this.options,n=t.clone().unpad(this.labelPadding()),o=n.height()-r.segmentSpacing*(i-1),s=n.width();r.dynamicSlope?this.dynamicSlopeReflow(n,s,o):this.constantSlopeReflow(n,s,o);for(var a=0;a<i;a++)e[a].reflow(t)}},e}(Dc);hl(ax,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:jo,position:jo,zIndex:1}}),_s(ax.prototype,fw);const lx=ax;var hx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createFunnelChart(this.series)},e.prototype.createFunnelChart=function(t){var e=t[0],i=new lx(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),qa(this.options.legend.items,e.legendItems)},e}(Dm);const cx=hx;const px=function(t,e){void 0===e&&(e=.05);var i=El(t),r=1-e;return function(t){var e=i.toHSL(),n=100-e.l,o=r-t;return e.l+=Math.min(o*n,n),e.toCss()}};var ux=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||ss,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),r=Ps(t),n=t.color;e=r?r(i):this.formatValue(t.format),n||(n=Ml(this.color)),this.label=new hp(e,_s({align:jo,vAlign:jo,margin:{left:5,right:5},zIndex:sl(t.zIndex,this.series.zIndex)},t,{color:n}),i),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},e.prototype.markerBox=function(){var t=this.options.markers,e=t.border,i=this.box.toRect(),r=sl(t.type,"rect")===es,n=sl(e.width,r?1:0),o=Math.round(n/2);if(t.size){var s=i.center();i.size.width=i.size.height=t.size,i.origin.x=Math.round(s.x-i.size.width/2),i.origin.y=Math.round(s.y-i.size.height/2)}return i.size.width-=n,i.size.height-=n,i.origin.y+=o+.5,i.origin.x+=o+.5,sp(i)},e.prototype.markerBorder=function(){var t=this.options,e=t.markers.border,i=sl(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},e.prototype.createMarker=function(){var t=this.options,e=t.markers,i=new Lc({type:sl(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:sl(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},e.prototype.createHighlight=function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,r=new Lc({type:sl(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:sl(e.zIndex,this.series.zIndex)});r.reflow(this.markerBox());var n=r.getElement();return n.options.fill=t.fill,n.options.stroke=t.stroke,n},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.tooltipAnchor=function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new Fl(t,e),align:{horizontal:jo,vertical:No}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){},e.prototype.pointData=function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},e}(Dc);_s(ux.prototype,jf),_s(ux.prototype,Vf),ux.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};const dx=ux;var fx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.points=[],this.seriesOptions=[],this.valueRange={min:Xo,max:Yo},this._evalSeries=[]},e.prototype.render=function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},e.prototype.setRange=function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.data.length;n++){var o=t._bindPoint(r,i,n).valueFields;t.valueRange.min=Math.min(t.valueRange.min,o.value),t.valueRange.max=Math.max(t.valueRange.max,o.value)}},e.prototype.addValue=function(t,e){var i;t&&(i=this.createPoint(t,e))&&Object.assign(i,e),this.points.push(i)},e.prototype.evalPointOptions=function(t,e,i){var r=i.series,n=i.seriesIx,o={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle"]},s=this._evalSeries[n];$a(s)||(this._evalSeries[n]=s=If(t,{},o,!0));var a=t;return s&&If(a=_s({},t),{value:e,series:r,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},o),a},e.prototype.pointType=function(){return dx},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=_s({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,r=this.pointOptions(i,e.seriesIx),n=e.color||i.color;if(r=this.evalPointOptions(r,t,e),bs(i.color))n=r.color;else if(0!==this.valueRange.max){n=px(n)(t.value/this.valueRange.max)}var o=new dx(t,r);return o.color=n,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,r=this.plotArea,n=e?r.namedXAxes[e]:r.axisX,o=i?r.namedYAxes[i]:r.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:n,yAxis:o}},e.prototype.reflow=function(t){var e=this,i=this.points,r=!this.options.clip,n=0;this.traverseDataPoints((function(t,o){var s=i[n++],a=e.seriesAxes(o.series),l=a.xAxis,h=a.yAxis,c=l.categoryIndex(t.x),p=h.categoryIndex(t.y),u=l.getSlot(c,c,r),d=h.getSlot(p,p,r);if(s)if(u&&d){var f=e.pointSlot(u,d);s.reflow(f)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new eh(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,r=0;r<i.length;r++)for(var n=i[r],o=e.seriesAxes(n),s=o.xAxis,a=o.yAxis,l=s.currentRangeIndices(),h=a.currentRangeIndices(),c=0;c<n.data.length;c++){var p=e._bindPoint(n,r,c),u=p.valueFields,d=p.fields,f=s.totalIndex(u.x),v=a.totalIndex(u.y),m=l.min<=f&&f<=l.max,g=h.min<=v&&v<=h.max;m&&g&&t(u,_s({pointIx:c,series:n,seriesIx:r,dataItem:n.data[c],owner:e},d))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Dc);hl(fx,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0}),_s(fx.prototype,{_bindPoint:Bf.prototype._bindPoint});const vx=fx;var mx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},e.prototype.bindCategories=function(){for(var t=this.srcSeries||this.series,e=0;e<t.length;e++){for(var i=t[e],r=i.data||[],n=this.seriesAxes(i),o=n.xAxis,s=n.yAxis,a=Ll(o.categories||[]),l=Ll(s.categories||[]),h=0;h<r.length;h++){var c=fd.current.bindPoint(i,h).valueFields,p=c.x,u=c.y;a.has(p)||a.add(p),l.has(u)||l.add(u)}o.categories=a.values(),s.categories=l.values()}},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),r=0;r<t.length;r++){var n=t[r],o=i[n.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&e.createHeatmapChart(ym(s,[Vd]),n)}},e.prototype.createHeatmapChart=function(t,e){var i=new vx(this,{series:t});this.appendChart(i,e)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,r=zs([].concat(e.xAxis),(function(t){return t.name===i}))[0],n=t.yAxis,o=zs([].concat(e.yAxis),(function(t){return t.name===n}))[0],s=(e.panes||[{}])[0].name||"default";return(r||{}).pane||(o||{}).pane||s},e.prototype.seriesAxes=function(t){var e,i,r=this.options,n=[].concat(r.xAxis),o=t.xAxis;e=o?n.find((function(t){return t.name===o})):n[0];var s=[].concat(r.yAxis),a=t.yAxis;if(i=a?s.find((function(t){return t.name===a})):s[0],!e)throw new Error("Unable to locate X axis with name "+o);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},e.prototype.createAxisLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},e.prototype.createXYAxis=function(t,e,i){for(var r,n=t.name,o=e?this.namedYAxes:this.namedXAxes,s=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=s.categories?s.categories[0]:null,l=[s.min,s.max,a],h=this.series,c=0;c<h.length;c++){var p=h[c],u=p[e?"yAxis":"xAxis"];if(u===s.name||0===i&&!u){var d=fd.current.bindPoint(p,0).valueFields;l.push(d[e?"y":"x"]);break}}for(var f=0;f<l.length;f++)if(l[f]instanceof Date){r=!0;break}var v=new(gm(s.type,Ho)||!s.type&&r?Cu:fu)(s,this.chartService);if(v.axisIndex=i,n){if(o[n])throw new Error((e?"Y":"X")+" axis with name "+n+" is already defined");o[n]=v}return this.appendAxis(v),v.mapCategories(),v},e.prototype.createAxes=function(t){for(var e=this,i=this.options,r=[].concat(i.xAxis),n=[],o=[].concat(i.yAxis),s=[],a=0;a<r.length;a++){Fs(e.findPane(r[a].pane),t)&&n.push(e.createXYAxis(r[a],!1,a))}for(var l=0;l<o.length;l++){Fs(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||n[0],this.axisY=this.axisY||s[0]},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?delete this.namedYAxes[i]:delete this.namedXAxes[i],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype._dispatchEvent=function(t,e,i){for(var r=t._eventCoordinates(e),n=new Fl(r.x,r.y),o=this.axes,s=o.length,a=[],l=[],h=0;h<s;h++){var c=o[h];fm(c.options.vertical?l:a,c.getCategory(n))}a.length>0&&l.length>0&&t.trigger(i,{element:Ja(e),originalEvent:e,x:xm(a),y:xm(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,r=this.groupAxes(this.panes),n=(i?r.y:r.x).indexOf(t);gx(this.options,n,i,e),gx(this.originalOptions,n,i,e)},e.prototype.crosshairOptions=function(t){return Object.assign({},t.options.crosshair,{zIndex:0})},e}(Dm);function gx(t,e,i,r){_s([].concat(i?t.yAxis:t.xAxis)[e],r)}hl(mx,{xAxis:{},yAxis:{}}),_s(mx.prototype,Rm);const yx=mx;var bx="color",wx="first",xx="max",_x="min",kx="noteText";Ub.current.register(vg,[Rd,Nd,Wd,af,Pd,nf,Bd,Ud,zd,sf,Id,of,tf,Qd,hf,Hd,Jd,lf]),Ub.current.register(aw,[ef,rf,Ld]),Ub.current.register(bw,[qd]),Ub.current.register(Cw,[jd]),Ub.current.register(cx,[Fd]),Ub.current.register(Fw,[Gd,$d,Kd]),Ub.current.register(nx,[Xd,Yd,Zd]),Ub.current.register(yx,[Vd]),fd.current.register([Rd,Nd,Wd,af,Pd,nf],[ns],[Ef,bx,kx,Sd,Cd]),fd.current.register([tf,Qd,Jd,lf],["from","to"],[Ef,bx,kx]),fd.current.register([hf,Hd],[ns],[Ef,bx,kx,"summary"]),fd.current.register([Gd,$d,Kd],[ls,hs],[bx]),fd.current.register([Xd,Yd,Zd],[ns],[bx]),fd.current.register([Fd],[ns],[Ef,bx,"visibleInLegend","visible"]),Nm.current.register([Rd,Nd,Wd,af,Pd,nf,hf,Hd],{value:xx,color:wx,noteText:wx,errorLow:_x,errorHigh:xx}),Nm.current.register([tf,Qd,Jd,lf],{from:_x,to:xx,color:wx,noteText:wx}),Nm.current.register([Xd,Yd,Zd],{value:xx,color:wx}),fd.current.register([ef,rf,Ld],[ls,hs],[bx,kx,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),fd.current.register([Ld],[ls,hs,"size"],[bx,Ef,kx]),fd.current.register([Vd],[ls,hs,ns],[bx,kx]),fd.current.register([Bd,Ud],["open","high","low","close"],[Ef,bx,"downColor",kx]),Nm.current.register([Bd,Ud],{open:xx,high:xx,low:_x,close:xx,color:wx,downColor:wx,noteText:wx}),fd.current.register([Id,of],["lower","q1","median","q3","upper","mean","outliers"],[Ef,bx,kx]),Nm.current.register([Id,of],{lower:xx,q1:xx,median:xx,q3:xx,upper:xx,mean:xx,outliers:wx,color:wx,noteText:wx}),fd.current.register([zd,sf],["current","target"],[Ef,bx,"visibleInLegend",kx]),Nm.current.register([zd,sf],{current:xx,target:xx,color:wx,noteText:wx}),fd.current.register([qd,jd],[ns],[Ef,bx,"explode","visibleInLegend","visible"]);var Sx=[Ef,ns,ls,hs],Cx=function(t){function e(e,i,r,n){var o=this;void 0===n&&(n={}),t.call(this),this.observers=[],this.addObserver(n.observer),this.chartService=new Ep(this,n),this.chartService.theme=r,this._initElement(e);var s=_s({},this.options,i);this._originalOptions=_s({},s),this._theme=r,this._initTheme(s,r),this._initHandlers(),this._initSurface(),this.bindCategories(),ll.preloadFonts(i,(function(){o.fontLoaded=!0,o._destroyed||(o.trigger("init"),o._redraw(),o._attachEvents())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initElement=function(t){for(this._setElementClass(t),t.style.position="relative";t.firstChild;)t.removeChild(t.firstChild);this.element=t},e.prototype._setElementClass=function(t){ps(t,"k-chart")},e.prototype._initTheme=function(t,e){for(var i=[],r=t.series||[],n=0;n<r.length;n++)i.push(Object.assign({},r[n]));t.series=i,function(t){for(var e=Sx,i=0;i<e.length;i++){var r=e[i]+"Axes";t[r]&&(t[e[i]+"Axis"]=t[r],delete t[r])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,this.options=_s({},e,t),this.applySeriesColors()},e.prototype.getSize=function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},e.prototype.resize=function(t){var e=this.getSize(),i=this._size,r=e.width>0||e.height>0;t||r&&(!i||e.width!==i.width||e.height!==i.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):r&&this._selections&&pl(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},e.prototype._resize=function(){this._noTransitionsRedraw()},e.prototype.redraw=function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},e.prototype.getAxis=function(t){return nd(t,this._plotArea.axes)},e.prototype.findAxisByName=function(t){return this.getAxis(t)},e.prototype.findPaneByName=function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new sd(e[i])},e.prototype.findPaneByIndex=function(t){var e=this._plotArea.panes;if(e[t])return new sd(e[t])},e.prototype.plotArea=function(){return new ld(this._plotArea)},e.prototype.toggleHighlight=function(t,e){var i,r,n,o=this._plotArea,s=(o.srcSeries||o.series||[])[0];bs(e)?i=o.filterPoints(e):(ks(e)?(r=e.series,n=e.category):r=n=e,i=s.type===jd?Ex(o.pointsBySeriesName(r),n):s.type===qd||s.type===Fd?Ex((o.charts[0]||{}).points,n):o.pointsBySeriesName(r));i&&this.togglePointsHighlight(t,i)},e.prototype.togglePointsHighlight=function(t,e){for(var i=this._highlight,r=0;r<e.length;r++)i.togglePointHighlight(e[r],t)},e.prototype.showTooltip=function(t){var e,i,r=this._sharedTooltip(),n=this._tooltip,o=this._plotArea;if(bs(t)?(e=o.findPoint(t))&&r&&(i=e.categoryIx):r&&$a(t)&&(i=o.categoryAxis.categoryIndex(t)),r){if(i>=0){var s=this._plotArea.pointsByCategoryIndex(i);n.showAt(s)}}else e&&n.show(e)},e.prototype.hideTooltip=function(){this._tooltip.hide()},e.prototype._initSurface=function(){var t=this.surface,e=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&Ya(e,{width:i.width}),i.height&&Ya(e,{height:i.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=mb.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},e.prototype._surfaceWrap=function(){return this.element},e.prototype._redraw=function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._model=t,this._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new bb,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),Dx(this._plotArea.panes),this._navState||this._cancelDomEvents()},e.prototype.exportVisual=function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,r=_s({},t.options,{chartArea:{width:t.width,height:t.height}});Ox(this._originalOptions,r),this.options=_s({},this._originalOptions,r),this._initTheme(this.options,this._theme),this.bindCategories();var n=this._getModel();n.renderVisual(),Dx(n._plotArea.panes),e=n.visual,this.options=i}else e=this.surface.exportVisual();return e},e.prototype._sharedTooltip=function(){return this._plotArea instanceof vg&&this.options.tooltip&&this.options.tooltip.shared},e.prototype._createPannable=function(){var t=this.options;!1!==t.pannable&&(this._pannable=new kb(this._plotArea,t.pannable))},e.prototype._createZoomSelection=function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new Cb(this,e))},e.prototype._createMousewheelZoom=function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Tb(this,e))},e.prototype._toggleDragZoomEvents=function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,r=(e||{}).mousewheel,n=!(t||!1!==e&&!1!==i||this.requiresHandlers([mf,ff,vf])),o=(!1===e||!1===r)&&!this.requiresHandlers([gf,yf,bf]),s=this.element;this._dragZoomEnabled&&n&&o?(s.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||n&&o||(s.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!n,!o)},e.prototype._toggleDomEvents=function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},e.prototype._createTooltip=function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new Yb(this.chartService,t)},e.prototype._createSharedTooltip=function(t){return new Jb(this._plotArea,t)},e.prototype.applyDefaults=function(t,e){!function(t,e){var i,r,n,o=(e||{}).axisDefaults||{};function s(t){var e=(t||{}).color||r.color,n=_s({},o,o[i],r,r[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete n[i],n}for(var a=0;a<Sx.length;a++)i=Sx[a]+"Axis",r=t.axisDefaults||{},n=(n=[].concat(t[i])).map(s),t[i]=n.length>1?n:n[0]}(t,e),function(t,e){var i=t.series,r=i.length,n=t.seriesDefaults,o=_s({},t.seriesDefaults),s=e?_s({},e.seriesDefaults):{},a=_s({},s);Tx(o),Tx(a);for(var l=0;l<r;l++){var h=i[l].type||t.seriesDefaults.type,c=_s({data:[]},a,s[h],{tooltip:t.tooltip},o,n[h]);i[l]._defaults=c,i[l]=_s({},c,i[l]),i[l].data=i[l].data||[]}}(t,e)},e.prototype.applySeriesColors=function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],r=0;r<e.length;r++){var n=e[r],o=i[r%i.length],s=n._defaults;n.color=n.color||o,s&&(s.color=s.color||o)}},e.prototype._getModel=function(){var t=this.options,e=this._createPlotArea(),i=new Jc(this._modelOptions());return i.chart=this,i._plotArea=e,pp.buildTitle(t.title,i),t.legend&&t.legend.visible&&i.append(new Hb(e.options.legend,this.chartService)),i.append(e),i.reflow(),i},e.prototype._modelOptions=function(){var t=this.options,e=this.getSize();return _s({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)},e.prototype._createPlotArea=function(t){var e=this.options;return Ub.current.create(t?[]:e.series,e,this.chartService)},e.prototype._setupSelection=function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var r=t[i],n=r.options;if(r instanceof fu&&n.select&&!n.vertical){var o=r.range(),s=new Kb(this,r,_s({min:o.min,max:o.max},n.select));e.push(s)}}},e.prototype._selectStart=function(t){return this.trigger(wf,t)},e.prototype._select=function(t){return this.trigger(xf,t)},e.prototype._selectEnd=function(t){return this.trigger(_f,t)},e.prototype._initHandlers=function(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=mg(this._mousemove.bind(this),20)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(t,e){void 0===e&&(e={}),t===kf&&(e.anchor.point=this._toDocumentCoordinates(e.anchor.point)),e.sender=this;for(var i=this.observers,r=!1,n=0;n<i.length;n++)i[n].trigger(t,e)&&(r=!0);return r},e.prototype._attachEvents=function(){var t,e,i=this.element;this._touchAction=i.style.touchAction,Ga(i,((t={}).contextmenu=this._clickHandler,t[Mf]=this._mousewheelHandler,t.mouseleave=this._mouseleaveHandler,t)),this._shouldAttachMouseMove()&&Ga(i,((e={}).mousemove=this._mousemove,e)),this.domEvents=Mp.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},e.prototype._mouseleave=function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotArea.hovered&&(this.trigger(df),this._plotArea.hovered=!1)},e.prototype._cancelDomEvents=function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},e.prototype._gesturestart=function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this.surface.suspendTracking())},e.prototype._gestureend=function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(bf,{}))},e.prototype._gesturechange=function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,r=-t.distance/i+1;if(Math.abs(r)>=.1){r=Math.round(10*r),this._gestureDistance=t.distance;var n={delta:r,axisRanges:Ax(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(gf,n)){var o=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(n.axisRanges=e.updateRanges(r,o))&&!this.trigger(yf,n)&&e.zoom()}}}},e.prototype._mouseout=function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},e.prototype._start=function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([mf,ff,vf])&&this._startNavigation(t,e,mf),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(gf,{axisRanges:Ax(this._plotArea.axes),originalEvent:t}))},e.prototype._move=function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var r=i.move(t);r&&!this.trigger(ff,{axisRanges:r,originalEvent:t})&&i.pan()}else if(e){for(var n={},o=e.axes,s=0;s<o.length;s++){var a=o[s];if(a.options.name){var l=a.options.vertical?t.y:t.x,h=l.startLocation-l.location;0!==h&&(n[a.options.name]=a.translateRange(h))}}e.axisRanges=n,this.trigger(ff,{axisRanges:n,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},e.prototype._end=function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(vf,{axisRanges:Ax(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,vf),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(yf,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(bf,{axisRanges:i,originalEvent:t}))}}},e.prototype._stopChartHandlers=function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),r=this._plotArea.paneByPoint(i);if(r)for(var n=0;n<e.length;n++)if(e[n].onPane(r))return!0},e.prototype._mousewheelZoomRate=function(){var t=(this.options.zoomable||{}).mousewheel||{};return sl(t.rate,.3)},e.prototype._mousewheel=function(t){var e=this,i=Ys(t),r=this._mousewheelZoom,n=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(n))if(r){var o={delta:i,axisRanges:Ax(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(gf,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=r.updateRanges(i,n),o.axisRanges&&!this.trigger(yf,o)&&r.zoom(),this._mwTimeout=setTimeout((function(){e.trigger(bf,o),e._zooming=!1,e.surface&&e.surface.resumeTracking()}),150))}else{var s=this._navState;if(!s)this._startNavigation(t,n,gf)||(s=this._navState);if(s){var a=s.totalDelta||i;s.totalDelta=a+i;for(var l=this._navState.axes,h={},c=0;c<l.length;c++){var p=l[c],u=p.options.name;u&&(h[u]=p.scaleRange(-a*e._mousewheelZoomRate(),n))}this.trigger(yf,{delta:i,axisRanges:h,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._endNavigation(t,bf)}),150)}}},e.prototype._startNavigation=function(t,e,i){var r=this._model._plotArea,n=r.findPointPane(e),o=r.axes.slice(0);if(n){var s=Ax(o);this.trigger(i,{axisRanges:s,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:s,pane:n,axes:o})}},e.prototype._endNavigation=function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},e.prototype._getChartElement=function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},e.prototype._drawingChartElement=function(t,e,i){for(var r,n=t;n&&!r;)r=n.chartElement,n=n.parent;if(r)return r.aliasFor&&(r=r.aliasFor(e,this._eventCoordinates(e))),i&&(r=r.closest(i))&&r.aliasFor&&(r=r.aliasFor()),r},e.prototype._eventCoordinates=function(t){var e=Za(t);return this._toModelCoordinates(e.x,e.y)},e.prototype._elementPadding=function(){if(!this._padding){var t=Ts(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},e.prototype._toDocumentCoordinates=function(t){var e=this._elementPadding(),i=Xa(this.element);return{left:nl(t.x+e.left+i.left),top:nl(t.y+e.top+i.top)}},e.prototype._toModelCoordinates=function(t,e){var i=this.element,r=Xa(i),n=this._elementPadding(),o=function(t){if(!t)return ul.unit();for(var e=fl(t),i=t.parentElement;i;){var r=fl(i);e=e.multiplyCopy(r),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}(i).invert(),s=new Kl(t-r.left-n.left,e-r.top-n.top).transform(o);return new Fl(s.x,s.y)},e.prototype._tap=function(t){var e=this,i=this.surface.eventTarget(t),r=this._drawingChartElement(i,t),n=this._sharedTooltip();this._startHover(i,t)||n||this._unsetActivePoint(),n&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(r,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},e.prototype._click=function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},e.prototype._propagateClick=function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},e.prototype._startHover=function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof Dm)})),r=this._activePoint,n=this._plotArea.series.length>1,o=this._hasInactiveOpacity();return this._updateHoveredPoint(i,e),i&&r!==i&&i.hover?(this._activePoint=i,this._sharedTooltip()||i.hover(this,e)||(this._displayTooltip(i),o?this._displayInactiveOpacity(i,n):this._highlight.show(i))):!i&&o&&(n&&this._activeChartInstance&&(this._updateSeriesOpacity(i,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null),i},e.prototype._displayTooltip=function(t){_s({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},e.prototype._displayInactiveOpacity=function(t,e,i){var r=this._activeChartInstance=this._chartInstanceFromPoint(t);if(r)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(r.children,null,!0),this._applySeriesOpacity(r.children,t.series),this._highlight.show(i||t);else{var n;if(!r.supportsPointInactiveOpacity())return void this._highlight.show(t);(n=this._getInactivePoints(t,r))&&n.length&&this._highlight.show(n,1-this._getInactiveOpacityForSeries(t.series))}},e.prototype._getInactivePoints=function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},e.prototype._getAllPointsOfType=function(t,e){for(var i=[],r=0;r<t.children.length;r++){var n=t.children[r];n.constructor===e?i.push(n):n.children&&n.children.length&&(i=i.concat(this._getAllPointsOfType(n,e)))}return i},e.prototype._updateHoveredPoint=function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},e.prototype._updateSeriesOpacity=function(t,e){for(var i=this._plotArea,r=i.series.length,n=0;n<r;n++){var o=i.series[n],s=this._getDefaultOpacityForSeries(o),a=this._getInactiveOpacityForSeries(o);e||o===t.series?(o.opacity=s,o.line&&(o.line.opacity=s)):(o.defaultOpacity=s,o.opacity=a,o.line&&(o.line.opacity=a))}},e.prototype._applySeriesOpacity=function(t,e,i,r){for(var n=0;n<t.length;n++){var o=t[n],s=o.series||r;if(s&&(s.highlight||{}).visible&&o.visual){var a=r?r.opacity:o.series.opacity;(s!==e||i)&&o.visual.opacity(i?1:a)}o.children&&o.children.length&&this._applySeriesOpacity(o.children,e,i,o.series)}},e.prototype._chartInstanceFromPoint=function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},e.prototype._hasInactiveOpacity=function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},e.prototype._getInactiveOpacityForSeries=function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1},e.prototype._getDefaultOpacityForSeries=function(t){return t.defaultOpacity||t.opacity||1},e.prototype._mouseover=function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),Ga(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)))},e.prototype._mouseMoveTracking=function(t){var e,i=this,r=i.options,n=i._tooltip,o=i._highlight,s=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(s&&s.tooltipTracking&&s.series&&s.parent.getNearestPoint){var l=s.parent.getNearestPoint(a.x,a.y,s.seriesIx);if(l&&l!==s)if(this._activePoint=l,!l.hover(this,t))_s({},r.tooltip,l.options.tooltip).visible&&n.show(l),o.show(l)}}else ol(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null},e.prototype._mousemove=function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var r=i.backgroundContainsPoint(e);r?(i.hovered=!0,this._plotArea.hover(this,t)):i.hovered&&!r&&(this.trigger(df),i.hovered=!1)}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},e.prototype._trackCrosshairs=function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var r=e[i];r.box.containsPoint(t)?r.showAt(t):r.hide()}},e.prototype._trackSharedTooltip=function(t,e,i){if(!this._suppressHover){var r=this,n=r.options.tooltip,o=r._plotArea,s=r._plotArea.categoryAxis,a=r._tooltip,l=r._highlight;if(o.backgroundContainsPoint(t)){var h=s.pointCategoryIndex(t);if(h!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var c=o.pointsByCategoryIndex(h),p=c.map((function(t){return t.eventArgs(e)})),u=p[0]||{};u.categoryPoints=p,c.length>0&&!this.trigger(pf,u)?(n.visible&&a.showAt(c,t),l.show(c),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=h}else i&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},e.prototype.hideElements=function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},e.prototype._unsetActivePoint=function(t){var e=this._tooltip,i=this._highlight;this._activePoint=null,this._hoveredPoint=null,!e||t&&t.keepTooltipOpen||e.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,i&&i.hide()},e.prototype._deferRedraw=function(){this._redraw()},e.prototype._clearRedrawTimeout=function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},e.prototype.bindCategories=function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var r=e[i];!1!==r.autoBind&&this.bindCategoryAxisFromSeries(r,i)}},e.prototype.bindCategoryAxisFromSeries=function(t,e){for(var i,r=this.options.series,n=r.length,o=new js,s=[],a=!1,l=0;l<n;l++){var h=r[l],c=h.categoryAxis===t.name||!h.categoryAxis&&0===e,p=h.data,u=p.length,d=h.categoryField&&c;if(a=d||a,d&&u>0)for(var f=(i=wm(t,ud(h.categoryField,p[0])))?bm:ud,v=0;v<u;v++){var m=p[v],g=f(h.categoryField,m,this.chartService.intl);!i&&o.get(g)||(s.push([g,m]),i||o.set(g,!0))}}if(s.length>0){i&&(s=function(t,e){void 0===e&&(e=ru);for(var i=function(t,e){void 0===e&&(e=ru);for(var i=1,r=t.length;i<r;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}(t,e),r=i.length,n=r>0?[i[0]]:[],o=1;o<r;o++)0!==e(i[o],tl(n))&&n.push(i[o]);return n}(s,(function(t,e){return ru(t[0],e[0])})));var y=function(t){for(var e=t.length,i=[],r=0;r<e;r++)for(var n=t[r],o=n.length,s=0;s<o;s++)i[s]=i[s]||[],i[s].push(n[s]);return i}(s);t.categories=y[0]}else a&&(t.categories=[])},e.prototype._isBindable=function(t){for(var e=fd.current.valueFields(t),i=!0,r=0;r<e.length;r++){var n=e[r];if(n===ns?n="field":n+="Field",!$a(t[n])){i=!1;break}}return i},e.prototype._noTransitionsRedraw=function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},e.prototype._legendItemHover=function(t,e){var i,r=this._plotArea,n=this._highlight,o=(r.srcSeries||r.series)[t];if(i=Fs(o.type,[qd,jd,Fd])?r.findPoint((function(i){return i.series.index===t&&i.index===e})):r.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&o.visible&&i){var s=r.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,s,i)}else n.show(i)},e.prototype._shouldAttachMouseMove=function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([uf,df])},e.prototype.updateMouseMoveHandler=function(){var t,e;ol(this.element,((t={}).mousemove=this._mousemove,t)),this._shouldAttachMouseMove()&&Ga(this.element,((e={}).mousemove=this._mousemove,e))},e.prototype.applyOptions=function(t,e){Ox(this._originalOptions,t),this._originalOptions=_s(this._originalOptions,t),this.options=_s({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},e.prototype.setOptions=function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},e.prototype.setDirection=function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},e.prototype.setIntlService=function(t){this.chartService.intl=t},e.prototype.noTransitionsRedraw=function(){this._noTransitionsRedraw()},e.prototype.destroy=function(){var t,e;this._destroyed=!0,ol(this.element,((t={}).contextmenu=this._clickHandler,t[Mf]=this._mousewheelHandler,t.mousemove=this._mousemove,t.mouseleave=this._mouseleaveHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&ol(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},e.prototype._destroySurface=function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},e.prototype._destroySelections=function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},e.prototype._destroyView=function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},e}(Zs);function Ex(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function Tx(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function Ax(t){for(var e={},i=0;i<t.length;i++){var r=t[i],n=r.options.name;n&&(e[n]=r.range())}return e}var Mx=["data","categories"];function Ox(t,e){for(var i in e)if(!Fs(i,Mx)&&e.hasOwnProperty(i)){var r=e[i],n=t[i];if($a(n)){var o=null===r;o||!$a(r)?(delete t[i],o&&delete e[i]):n&&ks(r)&&ks(n)&&Ox(n,r)}}}function Dx(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}hl(Cx,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:Nd,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const Px=Cx;var Rx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._slotAnchor=function(t,e){var i=this.plotArea.categoryAxis.options.vertical,r=i?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:i?new Fl(this.plotArea.box.x2,e.center().y):new Fl(e.center().x,-2),align:r}},e.prototype._defaultAnchor=function(t,e){return this._slotAnchor({},e)},e}(Jb);const Ix=Rx;var Lx=[Rd,zd];function zx(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];e[i]=r.style.display,r.style.display="none"}return e}function Bx(t,e){for(var i=0;i<t.length;i++)t[i].style.display=e[i]}function Nx(t){return ms(t)?[t]:t}var jx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._setElementClass=function(t){ps(t,"k-sparkline")},e.prototype._initElement=function(e){t.prototype._initElement.call(this,e),this._initialWidth=Math.floor(Ya(e).width)},e.prototype._resize=function(){var e=this.element,i=zx(e.childNodes);this._initialWidth=Math.floor(Ya(e).width),Bx(e.childNodes,i),t.prototype._resize.call(this)},e.prototype._modelOptions=function(){var t=this.options,e=this._surfaceWrap(),i=zx(e.childNodes),r=document.createElement("span");r.innerHTML="&nbsp;",e.appendChild(r);var n=_s({width:this._autoWidth,height:Ya(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return Ya(e,{width:n.width,height:n.height}),e.removeChild(r),Bx(e.childNodes,i),this.surface&&this.surface.resize(),n},e.prototype._surfaceWrap=function(){if(!this.stage){var t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage},e.prototype._createPlotArea=function(e){var i=t.prototype._createPlotArea.call(this,e);return this._autoWidth=this._initialWidth||this._calculateWidth(i),i},e.prototype._calculateWidth=function(t){for(var e=this.options,i=As(e.chartArea.margin),r=t.charts,n=this._surfaceWrap(),o=0,s=0;s<r.length;s++){var a=r[s],l=(a.options.series||[])[0];if(l){if(l.type===Rd)return 150;if(l.type===zd)return 150;if(l.type===qd)return Ya(n).height;var h=a.categoryAxis;if(h){var c=h.categoriesCount()*(!a.options.isStacked&&Fs(l.type,[Nd,sf])?a.seriesOptions.length:1);o=Math.max(o,c)}}}var p=o*e.pointWidth;return p>0&&(p+=i.left+i.right),p},e.prototype._createSharedTooltip=function(t){return new Ix(this._plotArea,t)},e.normalizeOptions=function(t){var e=Nx(t);return(e=cs(e)?{seriesDefaults:{data:e}}:_s({},e)).series||(e.series=[{data:Nx(e.data)}]),_s(e,{seriesDefaults:{type:e.type}}),(Fs(e.series[0].type,Lx)||Fs(e.seriesDefaults.type,Lx))&&(e=_s({},{categoryAxis:{crosshair:{visible:!1}}},e)),e},e}(Px);hl(jx,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});var Fx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._initialOpacity=parseFloat(Ts(this.element,"opacity").opacity)},e.prototype.step=function(t){Ts(this.element,{opacity:String(Hs(this._initialOpacity,0,t))})},e.prototype.abort=function(){t.prototype.abort.call(this),Ts(this.element,{display:"none",opacity:String(this._initialOpacity)})},e.prototype.cancel=function(){t.prototype.abort.call(this),Ts(this.element,{opacity:String(this._initialOpacity)})},e}(Mc);const Vx=Fx;function Hx(t,e){var i=document.createElement("div");return i.className=t,e&&(i.style.cssText=e),i}var Wx=function(t){function e(e,i,r){t.call(this),this.options=_s({},this.options,r),this.container=e,this.chartService=i;var n=Ts(e,["paddingLeft","paddingTop"]);this.chartPadding={top:n.paddingTop,left:n.paddingLeft},this.createElements(),e.appendChild(this.element)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElements=function(){var t=this.element=Hx("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=Hx("k-tooltip k-chart-tooltip"),i=this.scroll=Hx("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(i)},e.prototype.show=function(t,e,i){var r=this,n=r.element,o=r.options,s=r.scroll,a=r.tooltip,l=Jp(ou(t)+ou(e-t)/2),h=.4*i.width(),c=i.center().x-h,p=(i.center().x-c)/(o.max-o.min),u=l-o.min,d=this.chartService.intl.format(o.format,t,e),f=Ps(o);this.clearHideTimeout(),this._visible||(Ts(n,{visibility:"hidden",display:"block"}),this._visible=!0),f&&(d=f({from:t,to:e})),a.innerHTML=d,Ts(a,{left:i.center().x-a.offsetWidth/2,top:i.y1});var v=Ts(a,["marginTop","borderTopWidth","height"]);Ts(s,{width:h,left:c+u*p,top:i.y1+v.marginTop+v.borderTopWidth+v.height/2}),Ts(n,{visibility:"visible"})},e.prototype.clearHideTimeout=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},e.prototype.hide=function(){var t=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){t._visible=!1,t._hideAnimation=new Vx(t.element),t._hideAnimation.setup(),t._hideAnimation.play()}),this.options.hideDelay)},e.prototype.destroy=function(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},e}(Zs);hl(Wx,{format:"{0:d} - {1:d}",hideDelay:500});const Ux=Wx;var qx="_navigator",Gx=qx,$x=function(t){function e(e){var i;t.call(this),this.chart=e;var r=this.options=_s({},this.options,e.options.navigator),n=r.select;n&&(n.from=this.parseDate(n.from),n.to=this.parseDate(n.to)),$a(r.hint.visible)||(r.hint.visible=r.visible),this.chartObserver=new qs(this,((i={}).drag="_drag",i.dragEnd="_dragEnd",i.zoom="_zoom",i.zoomEnd="_zoomEnd",i)),e.addObserver(this.chartObserver)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseDate=function(t){return cu(this.chart.chartService.intl,t)},e.prototype.clean=function(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},e.prototype.destroy=function(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},e.prototype.redraw=function(){this._redrawSelf(),this.initSelection()},e.prototype.initSelection=function(){var t,e=this.chart,i=this.options,r=this.mainAxis(),n=r.roundedRange(),o=n.min,s=n.max,a=i.select,l=a.from,h=a.to,c=a.mousewheel,p=(t=r,Kx.prototype=t,new Kx);0!==r.categoriesCount()&&(this.clean(),p.box=r.box,this.selection=new Kb(e,p,{min:o,max:s,from:l||o,to:h||s,mousewheel:sl(c,{zoom:"left"}),visible:i.visible},new qs(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),i.hint.visible&&(this.hint=new Ux(e.element,e.chartService,{min:o,max:s,template:Ps(i.hint),format:i.hint.format})))},e.prototype.setRange=function(){var t=this.chart._createPlotArea(!0).namedCategoryAxes._navigator.roundedRange(),e=t.min,i=t.max,r=this.options.select||{},n=r.from||e;n<e&&(n=e);var o=r.to||i;o>i&&(o=i),this.options.select=_s({},r,{from:n,to:o}),this.filterAxes()},e.prototype._redrawSelf=function(t){var e=this.chart._plotArea;e&&e.redraw(tl(e.panes),t)},e.prototype.redrawSlaves=function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(i)},e.prototype._drag=function(t){var e,i=this.chart,r=this.selection,n=i._eventCoordinates(t.originalEvent),o=this.mainAxis(),s=o.roundedRange(),a=o.pane.box.containsPoint(n),l=i._plotArea.categoryAxis,h=t.axisRanges[l.options.name],c=this.options.select;if(h&&!a&&r){e=c.from&&c.to?ou(c.to)-ou(c.from):ou(r.options.to)-ou(r.options.from);var p=Jp(el(ou(h.min),s.min,ou(s.max)-e)),u=Jp(el(ou(p)+e,ou(s.min)+e,s.max));this.options.select={from:p,to:u},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),r.set(p,u),this.showHint(p,u)}},e.prototype._dragEnd=function(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},e.prototype.readSelection=function(){var t=this.selection.options,e=t.from,i=t.to,r=this.options.select;r.from=e,r.to=i},e.prototype.filterAxes=function(){var t=this.options.select;void 0===t&&(t={});for(var e=this.chart.options.categoryAxis,i=t.from,r=t.to,n=0;n<e.length;n++){var o=e[n];o.pane!==qx&&(o.min=i,o.max=r)}},e.prototype.filter=function(){var t=this.chart,e=this.options.select;if(t.requiresHandlers(["navigatorFilter"])){var i=this.mainAxis(),r={from:e.from,to:e.to};if("category"!==i.options.type){var n=new Cu(_s({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;r.from=tu(n.min,-n.baseUnitStep,n.baseUnit),r.to=tu(n.max,n.baseUnitStep,n.baseUnit)}this.chart.trigger("navigatorFilter",r)}},e.prototype._zoom=function(t){var e=this,i=e.chart._plotArea.categoryAxis,r=e.selection,n=e.options,o=n.select,s=n.liveDrag,a=this.mainAxis(),l=t.delta;if(r){var h=a.categoryIndex(r.options.from),c=a.categoryIndex(r.options.to),p=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),c-h>1?(r.zoom(l,p),this.readSelection()):(i.options.min=o.from,o.from=i.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),p).min),s&&(this.filterAxes(),this.redrawSlaves()),r.set(o.from,o.to),this.showHint(this.options.select.from,this.options.select.to)}},e.prototype._zoomEnd=function(t){this._dragEnd(t)},e.prototype.showHint=function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},e.prototype._selectStart=function(t){return this.chart._selectStart(t)},e.prototype._select=function(t){return this.showHint(t.from,t.to),this.chart._select(t)},e.prototype._selectEnd=function(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)},e.prototype.mainAxis=function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes._navigator},e.prototype.select=function(t,e){var i=this.options.select;return t&&e&&(i.from=this.parseDate(t),i.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:i.from,to:i.to}},e.setup=function(t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!t.__navi){t.__navi=!0;var r=_s({},i.navigator,t.navigator),n=t.panes=[].concat(t.panes),o=_s({},r.pane,{name:qx});r.visible||(o.visible=!1,o.height=.1),n.push(o),e.attachAxes(t,r),e.attachSeries(t,r,i)}},e.attachAxes=function(t,e){var i=e.series||[],r=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis),o=0===ym(i,cf).length,s=_s({type:"date",pane:qx,roundToBaseUnit:!o,justified:o,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),a=e.categoryAxis;r.push(_s({},s,{maxDateGroups:200},a,{name:Gx,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),_s({},s,a,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),_s({},s,a,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),n.push(_s({name:Gx,pane:qx,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},e.attachSeries=function(t,e,i){for(var r=t.series=t.series||[],n=[].concat(e.series||[]),o=i.seriesColors,s=e.seriesDefaults,a=0;a<n.length;a++)r.push(_s({color:o[a%o.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,n[a],{axis:Gx,categoryAxis:Gx,autoBind:e.autoBindElements}))},e}(Zs);function Kx(){}const Xx=$x;var Yx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyDefaults=function(e,i){var r=Ya(this.element).width||600,n=i,o={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(r/28)}}};n&&(n=_s({},n,o)),Xx.setup(e,n),t.prototype.applyDefaults.call(this,e,n)},e.prototype._setElementClass=function(t){ps(t,"k-chart k-stockchart")},e.prototype.setOptions=function(e){this.destroyNavigator(),t.prototype.setOptions.call(this,e)},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},e.prototype._resize=function(){this.noTransitionsRedraw()},e.prototype._redraw=function(){var t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()},e.prototype._dirty=function(){var t=this.options,e=zs([].concat(t.series,t.navigator.series),(function(t){return t&&t.visible})).length,i=this._seriesCount!==e;return this._seriesCount=e,i},e.prototype._fullRedraw=function(){var e=this.navigator;e||(e=this.navigator=new Xx(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),t.prototype._redraw.call(this),e.initSelection()},e.prototype._trackSharedTooltip=function(e){var i=this._plotArea.paneByPoint(e);i&&i.options.name===qx?this._unsetActivePoint():t.prototype._trackSharedTooltip.call(this,e)},e.prototype.bindCategories=function(){t.prototype.bindCategories.call(this),this.copyNavigatorCategories()},e.prototype.copyNavigatorCategories=function(){for(var t,e=[].concat(this.options.categoryAxis),i=0;i<e.length;i++){var r=e[i];r.name===Gx?t=r.categories:t&&r.pane===qx&&(r.categories=t)}},e.prototype.destroyNavigator=function(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},e.prototype.destroy=function(){this.destroyNavigator(),t.prototype.destroy.call(this)},e.prototype._stopChartHandlers=function(e){var i=this._eventCoordinates(e),r=this._plotArea.paneByPoint(i);return t.prototype._stopChartHandlers.call(this,e)||r&&r.options.name===qx},e.prototype._toggleDragZoomEvents=function(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},e}(Px);hl(Yx,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const Zx=Yx;var Jx=150,Qx="arrowPointer",t_="barPointer",e_=.5,i_=Math.PI/180,r_="inside",n_="linear",o_="outside",s_="radialPointer",a_="radialRangePointer";function l_(t,e){var i=t.getOrigin(),r=t.getSize(),n=As(e);return t.setOrigin([i.x-n.left,i.y-n.top]),t.setSize([r.width+(n.left+n.right),r.height+(n.top+n.bottom)]),t}var h_=bc,c_=sc,p_=ip;function u_(t,e){var i=t.box,r=t.children[0].box,n=e.border||{},o=e.background||"",s=c_.fromRect(new Jl([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}}),a=new p_(t.text,new Kl(r.x1,r.y1),{font:e.font,fill:{color:e.color}}),l=l_(a.bbox().clone(),e.padding),h=c_.fromRect(l,{stroke:{color:n.width?n.color:"",width:n.width,opacity:n.opacity,dashType:n.dashType,lineJoin:"round",lineCap:"round"},fill:{color:o}}),c=new h_;return c.append(s),c.append(h),c.append(a),c}function d_(t,e,i){var r=$a(t.from)?t.from:Yo,n=$a(t.to)?t.to:Xo;return t.from=Math.max(Math.min(n,r),e),t.to=Math.min(Math.max(n,r),i),t}function f_(t,e){var i=As(e);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,l_(t,i)}var v_=sc,m_=mb,g_=function(t){function e(e,i,r,n){void 0===n&&(n={}),t.call(this),this.element=e,this.theme=r,this.contextService=new Ep(this,n),this._originalOptions=_s({},this.options,i),this.options=_s({},this._originalOptions),this._initTheme(r),this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},e.prototype.value=function(t){var e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)},e.prototype._draw=function(){var t=this.surface;t.clear(),t.draw(this._visuals)},e.prototype.exportVisual=function(){return this._visuals},e.prototype.allValues=function(t){var e=this.pointers,i=[];if(0===arguments.length){for(var r=0;r<e.length;r++)i.push(e[r].value());return i}if(cs(t))for(var n=0;n<t.length;n++)ms(t[n])&&e[n].value(t[n]);this._setValueOptions(t)},e.prototype._setValueOptions=function(t){for(var e=[].concat(this.options.pointer),i=[].concat(t),r=0;r<i.length;r++)e[r].value=i[r]},e.prototype.resize=function(){this.noTransitionsRedraw()},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)},e.prototype.redraw=function(){var t=this._surfaceSize(),e=new Jl([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var i=f_(e.bbox(),this._gaugeAreaMargin);this.reflow(i)},e.prototype.setOptions=function(t,e){this._originalOptions=_s(this._originalOptions,t),this.options=_s({},this._originalOptions),this._initTheme(e),this.redraw()},e.prototype.setDirection=function(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},e.prototype.setIntlService=function(t){this.contextService.intl=t},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=_s({},e,this.options);var i=this.options,r=i.pointer;if(cs(r)){for(var n=[],o=0;o<r.length;o++)n.push(_s({},e.pointer,r[o]));i.pointer=n}},e.prototype._createGaugeArea=function(){var t=this.options.gaugeArea,e=this.surface.size(),i=t.border||{},r=new Jl([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,i.width>0&&(r=f_(r,i.width)),v_.fromRect(r,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},e.prototype._initSurface=function(){var t=this.options,e=this.surface,i=this._surfaceElement(),r=this._surfaceSize();Ya(i,r),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=m_.create(i,{type:t.renderAs}))},e.prototype._surfaceSize=function(){var t=this.options,e=this._getSize();return t.gaugeArea&&_s(e,t.gaugeArea),e},e.prototype._surfaceElement=function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},e.prototype.getSize=function(){return this._getSize()},e.prototype._getSize=function(){var t=this.element,e=this._defaultSize(),i=t.offsetWidth,r=t.offsetHeight;return i||(i=e.width),r||(r=e.height),{width:i,height:r}},e.prototype._defaultSize=function(){return{width:200,height:200}},e.prototype._toggleTransitions=function(t){this.options.transitions=t;for(var e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t},e}(Zs);hl(g_,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const y_=g_;var b_=sc,w_=bc,x_=Kl;function __(t,e){var i,r,n=t.position,o=t.tickX,s=t.tickY;return t.vertical?(i=new x_(o,n),r=new x_(o+e.size,n)):(i=new x_(n,s),r=new x_(n,s+e.size)),new b_({stroke:{color:e.color,width:e.width}}).moveTo(i).lineTo(r)}function k_(t,e,i,r){var n=e.length;if(r.visible)for(var o=i.mirror,s=i.lineBox,a=r.skip;a<n;a+=r.step)a%r.skipUnit!=0&&(i.tickX=o?s.x2:s.x2-r.size,i.tickY=o?s.y1-r.size:s.y1,i.position=e[a],t.append(__(i,r)))}var S_=function(t){function e(e,i){var r=e||{};!$a(r.reverse)&&!1===r.vertical&&(i||{}).rtl&&(r=Object.assign({},r,{reverse:!0})),t.call(this,0,1,r,i),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=_s({},this.options,t);return(e=_s({},e,{labels:{mirror:e.mirror}})).majorUnit=e.majorUnit||Nl(e.min,e.max),e},e.prototype.initFields=function(){},e.prototype.render=function(){var t=this.elements=new w_,e=this.renderLabels(),i=this.renderLine(),r=this.renderTicks(),n=this.renderRanges();return t.append(i,e,r,n),t},e.prototype.renderRanges=function(){for(var t=this,e=this.options,i=e.min,r=e.max,n=e.vertical,o=e.labels.mirror,s=e.ranges||[],a=new w_,l=s.length,h=e.rangeSize||e.minorTicks.size/2,c=0;c<l;c++){var p=d_(s[c],i,r),u=t.getSlot(p.from,p.to),d=n?t.lineBox():u,f=n?u:t.lineBox();n?d.x1-=h*(o?-1:1):f.y2+=h*(o?-1:1),a.append(b_.fromRect(new Jl([d.x1,f.y1],[d.x2-d.x1,f.y2-f.y1]),{fill:{color:p.color,opacity:p.opacity},stroke:{}}))}return a},e.prototype.renderLabels=function(){for(var t=this.labels,e=this.options,i=new w_,r=0;r<t.length;r++)i.append(u_(t[r],e.labels));return i},e.prototype.renderLine=function(){var t=this.options.line,e=this.lineBox(),i=new w_;if(t.width>0&&t.visible){var r=new b_({stroke:{color:t.color,dashType:t.dashType,width:t.width}});r.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),i.append(r)}return i},e.prototype.renderTicks=function(){var t=new w_,e=this.options,i=e.majorTicks.visible?e.majorUnit:0,r={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return k_(t,this.getMajorTickPositions(),r,e.majorTicks),k_(t,this.getMinorTickPositions(),r,_s({},{skipUnit:i/e.minorUnit},e.minorTicks)),t},e}(Pu);hl(S_,{min:0,max:50,majorTicks:{size:15,align:r_,color:Bo,width:e_,visible:!0},minorTicks:{size:10,align:r_,color:Bo,width:e_,visible:!0},line:{width:e_},labels:{position:r_,padding:2},mirror:!1,_alignLines:!1});const C_=S_;var E_=function(t){function e(e,i){t.call(this);var r=e.options,n=r.min,o=r.max,s=this.options=_s({},this.options,i);s.fill=s.color,this.scale=e,$a(s.value)?s.value=el(s.value,n,o):s.value=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this.options,i=e.value;if(0===arguments.length)return i;var r=this.scale.options,n=r.min,o=r.max;e._oldValue=$a(e._oldValue)?e.value:n,e.value=el(t,n,o),this.elements&&this.repaint()},e}(Zs);hl(E_,{color:Bo});const T_=E_;var A_=function(t){function e(e,i){t.call(this,e,i),this.options=_s({track:{visible:$a(i.track)}},this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t,e,i,r=this.options,n=this.scale,o=n.options,s=o.mirror,a=o.vertical,l=n.lineBox(),h=r.track.size||r.size,c=r.size/2,p=As(r.margin),u=a?p[s?"left":"right"]:p[s?"bottom":"top"];u=s?-u:u,a?(i=new eh(l.x1+u,l.y1,l.x1+u,l.y2),s?i.x1-=h:i.x2+=h,r.shape!==t_&&(t=e=new eh(l.x2+u,l.y1-c,l.x2+u,l.y2+c))):(i=new eh(l.x1,l.y1-u,l.x2,l.y1-u),s?i.y2+=h:i.y1-=h,r.shape!==t_&&(t=e=new eh(l.x1-c,l.y1-u,l.x2+c,l.y1-u))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(r.border.width)},e.prototype.getElementOptions=function(){var t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:$a(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}},e.prototype._margin=function(){var t=this.scale,e=this.options,i=t.options,r=i.mirror,n=i.vertical,o=As(e.margin);return n?o[r?"left":"right"]:o[r?"bottom":"top"]},e}(T_);hl(A_,{shape:t_,track:{border:{width:1}},color:Bo,border:{width:1},opacity:1,margin:As(3),animation:{type:t_},visible:!0});const M_=A_;var O_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=t.margin,i=t.from,r=t.to,n=t.vertical,o=n?"x1":"y1";t.mirror===n?(i[o]-=e,r[o]-=e):(i[o]+=e,r[o]+=e);var s=this.fromScale=new Kl(i.x1,i.y1),a=this.toScale=new Kl(r.x1,r.y1);0!==t.duration&&(t.duration=Math.max(s.distanceTo(a)/t.duration*1e3,1))},e.prototype.step=function(t){var e=Hs(this.fromScale.x,this.toScale.x,t),i=Hs(this.fromScale.y,this.toScale.y,t);this.element.transform(ph().translate(e,i))},e}(Mc);hl(O_,{easing:n_,duration:250}),Tc.current.register(Qx,O_);const D_=O_;var P_=Kl,R_=sc,I_=function(t){function e(e,i){t.call(this,e,i),$a(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(){var t=this.scale,e=this.options.size,i=e/2,r=t.options.mirror?-1:1;return t.options.vertical?[new P_(0,0-i),new P_(0-r*e,0),new P_(0,0+i)]:[new P_(0-i,0),new P_(0,0+r*e),new P_(0+i,0)]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=new D_(this.elements,_s(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(i.options.duration=0),i.setup(),i.play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=this.getElementOptions(),r=this.pointerShape(e.value);e.animation.type=Qx;var n=new R_({stroke:i.stroke,fill:i.fill}).moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).close(),o=t.getSlot(e.value);return n.transform(ph().translate(o.x1,o.y1)),this.elements=n,n},e}(M_);const L_=I_;var z_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=this.axis=t.vertical?hs:ls,i=this.to=t.newPoints[0][e],r=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(i-r)/t.speed*1e3,1)),this._set(r)},e.prototype.step=function(t){var e=Hs(this.from,this.to,t);this._set(e)},e.prototype._set=function(t){var e="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][e](t),i[1][e](t)},e}(Mc);hl(z_,{easing:n_,speed:250}),Tc.current.register(t_,z_);const B_=z_;var N_=bc,j_=sc,F_=function(t){function e(e,i){t.call(this,e,i),$a(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(t){var e=this.scale,i=this.options,r=e.options,n=r.mirror,o=r.vertical,s=n===o?-1:1,a=i.size*s,l=e.getSlot(e.options.min),h=e.getSlot(t),c=o?hs:ls,p=o?ls:hs,u=this._margin()*s,d=new Kl;d[c]=l[c+"1"],d[p]=l[p+"1"];var f=new Kl;f[c]=h[c+"1"],f[p]=h[p+"1"],o?(d.translate(u,0),f.translate(u,0)):(d.translate(0,u),f.translate(0,u));var v=f.clone(),m=d.clone();return o?(v.translate(a,0),m.translate(a,0)):(v.translate(0,a),m.translate(0,a)),[d,f,v,m]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=this.pointerShape(e.value),r=this.pointerPath,n=this.pointerShape(e._oldValue);r.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();var o=new B_(r,_s(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[n[1],n[2]],newPoints:[i[1],i[2]]}));!1===e.animation.transitions&&(o.options.duration=0),o.setup(),o.play()},e.prototype.render=function(){var t=new N_,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());var i=this.pointerPath=new j_({stroke:e.stroke,fill:e.fill});return t.append(i),this.elements=t,t},e.prototype.renderTrack=function(){var t=this.options.track,e=t.border||{},i=this.trackBox.clone().pad(e.width||0);return new j_.fromRect(i.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})},e}(M_);const V_=F_;var H_=bc,W_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.pointers,i=t.origin.x,r=t.origin.y,n=new eh(i,r,i+t.width(),r+t.height());this.scale.reflow(n),this._shrinkScaleWidth(n);for(var o=0;o<e.length;o++)e[o].reflow();this.bbox=this._getBox(n),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},e.prototype._buildVisual=function(){var t=new H_,e=this.scale.render(),i=this.pointers;t.append(this.gaugeArea),t.append(e);for(var r=0;r<i.length;r++){var n=i[r];t.append(n.render()),n.value(n.options.value)}this._visuals=t},e.prototype._createModel=function(){var t=this.options,e=this.scale=new C_(t.scale,this.contextService);this.pointers=[];var i=t.pointer;i=cs(i)?i:[i];for(var r=0;r<i.length;r++){var n=_s({},i[r],{animation:{transitions:t.transitions}}),o="arrow"===n.shape?L_:V_;this.pointers.push(new o(e,n))}},e.prototype._defaultSize=function(){var t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}},e.prototype._getBox=function(t){for(var e,i=this.scale,r=this.pointers,n=t.center(),o=r[0].box.clone().wrap(i.box),s=0;s<r.length;s++)o.wrap(r[s].box.clone());return i.options.vertical?(e=o.width()/2,o=new eh(n.x-e,t.y1,n.x+e,t.y2)):(e=o.height()/2,o=new eh(t.x1,n.y-e,t.x2,n.y+e)),o},e.prototype._alignElements=function(){for(var t,e=this.scale,i=this.pointers,r=e.box,n=i[0].box.clone().wrap(e.box),o=this.bbox,s=0;s<i.length;s++)n.wrap(i[s].box.clone());e.options.vertical?(t=o.center().x-n.center().x,e.reflow(new eh(r.x1+t,o.y1,r.x2+t,o.y2))):(t=o.center().y-n.center().y,e.reflow(new eh(r.x1,r.y1+t,r.x2,r.y2+t)));for(var a=0;a<i.length;a++)i[a].reflow(this.bbox)},e.prototype._shrinkScaleWidth=function(t){var e=this.scale;if(!e.options.vertical){var i=e.contentBox().width()-t.width();i>0&&(e.box.shrink(i,0),e.box.alignTo(t,"center"),e.reflow(e.box))}},e.prototype._shrinkElements=function(){for(var t=this.scale,e=this.pointers,i=t.box.clone(),r=t.options.vertical?"y":"x",n=e[0].box,o=0;o<e.length;o++)n.wrap(e[o].box.clone());i[r+1]+=Math.max(i[r+1]-n[r+1],0),i[r+2]-=Math.max(n[r+2]-i[r+2],0),t.reflow(i);for(var s=0;s<e.length;s++)e[s].reflow(this.bbox)},e}(y_);hl(W_,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const U_=W_;var q_=function(t){function e(e,i){void 0===e&&(e=new mh),void 0===i&&(i={}),t.call(this,i),this.geometry(e),ds(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Arc"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this.geometry().bbox()},e.prototype.toPath=function(){var t=new sc,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i+=3)t.curveTo(e[i],e[i+1],e[i+2])}return t},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Ph(Ih(fc(Dh))));var G_=180,$_=q_,K_=sc,X_=bc;function Y_(t,e,i,r){var n=new X_,o=t.center,s=t.getRadiusX();if(r.visible)for(var a=0;a<e.length;a++){var l=t.pointAt(e[a]),h=new Kl(o.x+s-r.size,o.y).rotate(e[a],o);n.append(new K_({stroke:{color:r.color,width:r.width}}).moveTo(l).lineTo(h))}return n}function Z_(t,e,i,r){return{from:t,to:e,color:i,opacity:r}}var J_=function(t){function e(e,i){t.call(this,0,1,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=_s({},this.options,t);return e.majorUnit=e.majorUnit||Nl(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e},e.prototype.initFields=function(){},e.prototype.render=function(t,e){var i=this.renderArc(t,e);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},e.prototype.reflow=function(t){var e=t.center(),i=Math.min(t.height(),t.width())/2;if(!$a(this.bbox))return this.render(e,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},e.prototype.slotAngle=function(t){var e=this.options,i=e.min,r=e.max,n=e.reverse,o=e.startAngle,s=e.endAngle,a=s-o;return(n?s-(t-i)/(r-i)*a:(t-i)/(r-i)*a+o)+G_},e.prototype.hasRanges=function(){var t=this.options.ranges;return t&&t.length},e.prototype.ticksSize=function(){var t=this.options,e=t.majorTicks,i=t.minorTicks,r=0;return e.visible&&(r=e.size),i.visible&&(r=Math.max(i.size,r)),r},e.prototype.labelsCount=function(){var e=t.prototype.labelsCount.call(this),i=this.options;return i.endAngle-i.startAngle>=360&&i.max%i.majorUnit==0&&(e-=1),e},e.prototype.renderLabels=function(){var t=this,e=this.options,i=this.arc.clone(),r=i.getRadiusX(),n=this.tickAngles(i,e.majorUnit),o=e.rangeSize=e.rangeSize||.1*r,s=new X_,a=.05*r;$a(e.rangeDistance)?a=e.rangeDistance:e.rangeDistance=a;var l=e.labels,h=l.position===r_,c=$a(this.labelElements);h&&(r-=this.ticksSize(),this.hasRanges()&&!c&&(r-=o+a),i.setRadiusX(r).setRadiusY(r));for(var p=this.labels,u=p.length,d=As(l.padding),f=(d.left+d.right)/2,v=(d.top+d.bottom)/2,m=0;m<u;m++){var g=p[m],y=g.box.width()/2,b=g.box.height()/2,w=n[m],x=(w-G_)*i_,_=i.pointAt(w),k=_.x+Math.cos(x)*(y+f)*(h?1:-1),S=_.y+Math.sin(x)*(b+v)*(h?1:-1);g.reflow(new eh(k-y,S-b,k+y,S+b));var C=new Kl(g.box.x1,g.box.y1),E=void 0;if(c){var T=(E=t.labelElements.children[m]).bbox().origin,A=E.transform()||ph();A.translate(C.x-T.x,C.y-T.y),E.transform(A)}else E=u_(g,e.labels),s.append(E);t.bbox=Jl.union(t.bbox,E.bbox())}return s},e.prototype.repositionRanges=function(){var t=this.ranges.children;if(t.length>0){var e=this.options,i=e.rangeDistance,r=e.rangeSize,n=this.getRangeRadius();this.options.labels.position===r_&&(n+=r+i);for(var o=n+r/2,s=0;s<t.length;s++)t[s]._geometry.setRadiusX(o).setRadiusY(o);this.bbox=Jl.union(this.bbox,this.ranges.bbox())}},e.prototype.renderRanges=function(){var t=this,e=this.rangeSegments(),i=e.length,r=new X_;if(i){var n=this.options,o=n.rangeSize,s=n.reverse,a=n.rangeDistance,l=this.getRangeRadius();this.radius(this.radius()-o-a);for(var h=0;h<i;h++){var c=e[h],p=t.slotAngle(c[s?"to":"from"]),u=t.slotAngle(c[s?"from":"to"]);u-p!=0&&r.append(t.createRange(p,u,l,c))}}return r},e.prototype.createRange=function(t,e,i,r){var n=this.options.rangeSize,o=new mh(this.arc.center,{radiusX:i+n/2,radiusY:i+n/2,startAngle:t,endAngle:e});return new $_(o,{stroke:{width:n,color:r.color,opacity:r.opacity,lineCap:r.lineCap}})},e.prototype.rangeSegments=function(){var t=this.options,e=t.ranges||[],i=e.length,r=[];if(i){var n=t.min,o=t.max,s=t.rangePlaceholderColor;r.push(Z_(n,o,s));for(var a=0;a<i;a++)for(var l=d_(e[a],n,o),h=r.length,c=0;c<h;c++){var p=r[c];if(p.from<=l.from&&l.from<=p.to){r.push(Z_(l.from,l.to,l.color,l.opacity)),p.from<=l.to&&l.to<=p.to&&r.push(Z_(l.to,p.to,s,l.opacity)),p.to=l.from;break}}}return r},e.prototype.getRangeRadius=function(){var t=this.arc,e=this.options,i=e.rangeSize,r=e.rangeDistance,n=e.majorTicks.size;return e.labels.position===o_?t.getRadiusX()-n-r-i:t.getRadiusX()-i},e.prototype.renderArc=function(t,e){var i=this.options;return this.arc=new mh(t,{radiusX:e,radiusY:e,startAngle:i.startAngle+G_,endAngle:i.endAngle+G_})},e.prototype.renderTicks=function(){var t=this.arc,e=this.options,i=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=Y_(i,this.majorTickAngles,e.majorUnit,e.majorTicks);var r=new X_;r.append(this.majorTicks);var n=e.majorTicks.size,o=e.minorTicks.size;if(this._tickDifference=n-o,e.labels.position===o_){var s=i.getRadiusX();i.setRadiusX(s-n+o).setRadiusY(s-n+o)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=Y_(i,this.minorTickAngles,e.minorUnit,e.minorTicks),r.append(this.minorTicks),r},e.prototype.normalizeTickAngles=function(t){for(var e=this.options,i=e.majorUnit/e.minorUnit,r=t.length-1;r>=0;r--)r%i==0&&t.splice(r,1);return t},e.prototype.tickAngles=function(t,e){var i=this.options,r=i.reverse,n=i.max-i.min,o=t.endAngle-t.startAngle,s=n/e,a=t.startAngle,l=o/s;r&&(a+=o,l=-l),o>=360&&i.max%e==0&&(s-=1);for(var h=[],c=0;c<s;c++)h.push(nl(a,3)),a+=l;return nl(a)<=t.endAngle&&h.push(a),h},e.prototype.radius=function(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},e.prototype.repositionTicks=function(t,e,i){var r=i&&this._tickDifference||0,n=this.arc,o=n.getRadiusX();i&&this.options.labels.position===o_&&0!==r&&(n=this.arc.clone()).setRadiusX(o-r).setRadiusY(o-r);for(var s=0;s<t.length;s++){var a=n.pointAt(e[s]),l=t[s].segments,h=a.x-l[0].anchor().x,c=a.y-l[0].anchor().y;t[s].transform((new ph).translate(h,c))}},e}(Pu);hl(J_,{min:0,max:100,majorTicks:{size:15,align:r_,color:Bo,width:e_,visible:!0},minorTicks:{size:10,align:r_,color:Bo,width:e_,visible:!0},startAngle:-30,endAngle:210,labels:{position:r_,padding:2}});const Q_=J_;var tk=function(t){function e(e,i){t.call(this,e,i);var r=this.options;r.duration=Math.max(Math.abs(r.newAngle-r.oldAngle)/r.duration*1e3,1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this.options,i=Hs(e.oldAngle,e.newAngle,t);this.element.transform(ph().rotate(i,e.center))},e}(Mc);hl(tk,{easing:n_,duration:Jx}),Tc.current.register(s_,tk);const ek=tk;var ik=mc,rk=bc,nk=sc,ok=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAngle=function(t){this.elements.transform(ph().rotate(t,this.center))},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),r=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(r):new ek(this.elements,_s(e.animation,{oldAngle:i,newAngle:r})).play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=new rk;return!1!==e.animation&&_s(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(i_),i},e.prototype.reflow=function(t){var e=this.center=t.center,i=el(this.options.length||1,.1,1.5),r=this.radius=t.getRadiusX()*i,n=this.capSize=Math.round(r*this.options.cap.size);this.bbox=Jl.fromPoints(new Kl(e.x-n,e.y-n),new Kl(e.x+n,e.y+n))},e.prototype._renderNeedle=function(){var t=this.scale.options.minorTicks.size,e=this.center,i=this.options.color,r=new nk({fill:{color:i},stroke:{color:i,width:e_}});return r.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),r},e.prototype._renderCap=function(){var t=this.options,e=t.cap.color||t.color,i=new uc(this.center,this.capSize);return new ik(i,{fill:{color:e},stroke:{color:e}})},e}(T_);hl(ok,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:s_,duration:Jx}});const sk=ok;var ak=bc,lk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(var r=0;r<i.length;r++)i[r].reflow(e.scale.arc),e._initialPlotArea=Jl.union(e._initialPlotArea,i[r].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,i,this.scale),this._draw()},e.prototype._buildVisual=function(t,e,i){var r=this._visuals=new ak;r.append(t),r.append(i.ticks),r.append(i.ranges),this._buildPointers(e),r.append(i.labelElements)},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}},e.prototype.fitScale=function(t){for(var e,i,r,n,o,s=this,a=this.scale.arc,l=this._initialPlotArea,h=Math.abs(this.getDiff(l,t)),c=nl(h,3),p=nl(-h,3),u=0,d=0;!(!(d++<100)||(u=o===r?u+1:0)>5||c!==n&&0<=(e=s.getPlotBox(c,t,a))&&e<=2||p!==n&&0<=(r=s.getPlotBox(p,t,a))&&r<=2||(n=e>0&&r>0?2*c:e<0&&r<0?2*p:nl((c+p)/2||1,3),0<=(i=s.getPlotBox(n,t,a))&&i<=2));)o=r,i>0?(p=n,r=i):(c=n,e=i)},e.prototype.getPlotBox=function(t,e,i){var r=this.scale,n=this.pointers,o=i.getRadiusX(),s=i.clone();s.setRadiusX(o+t).setRadiusY(o+t),r.arc=s,r.reflow(e),this.plotBbox=r.bbox;for(var a=0;a<n.length;a++)n[a].reflow(s),this.plotBbox=Jl.union(this.plotBbox,n[a].bbox);return this.getDiff(this.plotBbox,e)},e.prototype.getDiff=function(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())},e.prototype.alignScale=function(t){var e=this.plotBbox.center(),i=t.center(),r=e.x-i.x,n=e.y-i.y,o=this.scale,s=this.pointers;o.arc.center.x-=r,o.arc.center.y-=n,o.reflow(t);for(var a=0;a<s.length;a++)s[a].reflow(o.arc),this.plotBbox=Jl.union(o.bbox,s[a].bbox)},e.prototype._createModel=function(){var t=this.options,e=t.pointer,i=this.scale=new Q_(t.scale,this.contextService);this.pointers=[];for(var r=cs(e)?e:[e],n=0;n<r.length;n++){var o=new sk(i,_s({},r[n],{animation:{transitions:t.transitions}}));this.pointers.push(o)}},e}(y_);hl(lk,{transitions:!0,gaugeArea:{background:""}});const hk=lk;var ck=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rangeSegments=function(){var t=this.options;return[{from:t.min,to:t.max,color:t.rangePlaceholderColor,lineCap:t.rangeLineCap}]},e.prototype.hasRanges=function(){return!0},e.prototype.placeholderRangeAngle=function(t){var e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)},e.prototype.addRange=function(t,e,i){var r=this.options.reverse,n=this.slotAngle(r?e:t),o=this.slotAngle(r?t:e),s=this.createRange(n,o,this.getRangeRadius(),i);return this.ranges.append(s),s},e}(Q_);hl(ck,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const pk=ck;var uk=function(t){function e(e,i){t.call(this,e,i);var r=this.options,n=Math.abs(r.newAngle-r.oldAngle)/r.duration*1e3;r.duration=el(n,Jx,800);var o=e.elements.options.get("stroke.color"),s=e.currentColor();o!==s&&(this.startColor=new Al(o),this.color=new Al(s))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this,i=e.options,r=e.startColor,n=e.color,o=Hs(i.oldAngle,i.newAngle,t);if(this.element.angle(o),n){var s=nl(Hs(r.r,n.r,t)),a=nl(Hs(r.g,n.g,t)),l=nl(Hs(r.b,n.b,t));this.element.stroke(new Al(s,a,l).toHex())}},e}(Mc);hl(uk,{easing:n_,duration:Jx}),Tc.current.register(a_,uk);const dk=uk;var fk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),r=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(r),this.stroke(this.currentColor())):(this.animation=new dk(this,_s(e.animation,{oldAngle:i,newAngle:r})),this.animation.play())},e.prototype.angle=function(t){var e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)},e.prototype.stroke=function(t){this.elements.stroke(t)},e.prototype.render=function(){if(!this.elements){var t=this.scale,e=this.options;!1!==e.animation&&_s(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}},e.prototype.currentColor=function(){var t=this.scale.options,e=t.min,i=t.max,r=this.options,n=r.colors,o=r.color,s=r.value,a=ms(s)?s:e;if(n)for(var l=0;l<n.length;l++){var h=n[l],c=h.color,p=h.from;void 0===p&&(p=e);var u=h.to;if(void 0===u&&(u=i),p<=a&&a<=u)return c}return o},e.prototype.reflow=function(){this.render(),this.bbox=this.elements.bbox()},e}(T_);hl(fk,{animation:{type:a_,duration:Jx}});const vk=fk;var mk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initTheme=function(e){t.prototype._initTheme.call(this,e),this.options.color=this.options.color||(this.theme.pointer||{}).color},e.prototype._createModel=function(){var t=this.options,e=this.scale=new pk(t.scale,this.contextService),i=new vk(e,_s({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[i]},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),i.value(i.options.value)}},e.prototype._setValueOptions=function(t){this.options.value=t},e.prototype.currentColor=function(){var t=this.pointers[0];if(t)return t.currentColor()},e.prototype.centerLabelPosition=function(t,e){var i=this.getSize(),r=this.scale.arc.center,n=r.x-t/2,o=r.y-e/2;if(t<i.width){var s=n+t;n=Math.max(n,0),s>i.width&&(n-=s-i.width)}if(e<i.height){var a=this.scale.bbox,l=a.bottomRight().y,h=o+e;o=Math.max(o,a.origin.y),h>l&&(o-=h-l)}return{left:n,top:o}},e}(hk);const gk=mk;var yk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createModel=function(){var e=this.options.scale;"number"!=typeof e.startAngle&&(e.startAngle=90),e.endAngle=e.startAngle+360,t.prototype._createModel.call(this)},e}(gk);const bk=yk;var wk=function(t){function e(e){t.call(this),this.setOptions(e),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.setOptions=function(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},e.prototype.encode=function(t,e,i){var r=$a(t)?String(t):t;return this.initValue(r,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},e.prototype.initValue=function(){},e.prototype.addQuietZone=function(){this.pattern.push(this.options.quietZoneLength||10)},e.prototype.addData=function(){},e.prototype.invalidCharacterError=function(t){throw new Error('Character "'+t+'" is not valid for symbology '+this.name+".")},e}(Zs);hl(wk,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var xk=Object.assign,_k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),xk(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addCheckSum=function(){var t=this.value,e=t.length,i=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),++e>=this.kCheckSumMinLength){var r=(i+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=r,this.addPattern(this.characterMap[r])}},e.prototype.getWeightedSum=function(t,e,i){for(var r=0,n=0;n<t.length;n++)r+=this.weightedValue(this.getValue(t.charAt(n)),e,n,i);return r},e.prototype.weightedValue=function(t,e,i,r){return((e-i)%r||r)*t},e.prototype.getValue=function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},e.prototype.addCharacter=function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},e}(wk);hl(_k,{addCheckSum:!0});var kk=Object.assign,Sk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kk(this,{minBaseUnitLength:.7})},e.prototype.addData=function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},e.prototype.addBase=function(){},e}(wk),Ck=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),kk(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},e.prototype.initValue=function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},e.prototype.prepareValues=function(){var t,e=this.minBaseUnitLength,i=this.minRatio,r=Math.ceil(Math.max(.15*this.width,24)),n=this.maxRatio;if(this.height<r)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+r+"px.");for(t=this.getBaseUnit(n);t<e&&n>i;)n=parseFloat((n-.1).toFixed(1)),t=this.getBaseUnit(n);if(t<e){var o=Math.ceil(this.getBaseWidth(i)*e);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+o+"px.")}this.ratio=n,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,n).split(this.splitCharacter))},e.prototype.getBaseUnit=function(t){return this.width/this.getBaseWidth(t)},e.prototype.getBaseWidth=function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},e.prototype.addStart=function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.addCharacterGap()},e.prototype.addStop=function(){this.addPattern(this.characterMap.START.pattern)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},e.prototype.addCharacterGap=function(){this.patternString+=this.gapWidth+this.splitCharacter},e}(Sk);hl(Ck,{addCheckSum:!1});var Ek={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=this,r=0;r<this.extendedMappings.length;r++)if(e=i.extendedMappings[r].call(i,t)){for(var n=0;n<e.length;n++){var o=e[n];i.addBase(o)}return void(i.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){var e,i,r=this;if(this.specialAsciiCodes[t]){e=[];for(var n=0;n<this.specialAsciiCodes[t].length;n++)e.push(r.characterMap[r.shiftCharacters[3]]),e.push(r.characterMap[r.specialAsciiCodes[t][n]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},Tk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),_s(this,Ek,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},e}(Ck),Ak=Object.assign,Mk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ak(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},e.prototype.initValue=function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},e.prototype.prepareValues=function(){var t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+t+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+e+"px.")}},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},e.prototype.addStart=function(){var t=this.characterMap.START.pattern;this.addPattern(t)},e.prototype.addStop=function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.values.push(t.value)},e.prototype.pushCheckSum=function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var r=0;r<i.length;r++)t=e.characterMap[e._findCharacterByValue(i[r])],e.addPattern(t.pattern)},e.prototype._getCheckValues=function(){var t,e,i=this,r=this.values,n=r.length,o=0;for(e=n-1;e>=0;e--)o+=i.weightedValue(r[e],n-e,i.cCheckSumTotal);for(t=o%this.checkSumMod,o=this.weightedValue(t,1,this.kCheckSumTotal),e=n-1;e>=0;e--)o+=i.weightedValue(r[e],n-e+1,i.kCheckSumTotal);return[t,o%this.checkSumMod]},e.prototype._findCharacterByValue=function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},e.prototype.weightedValue=function(t,e,i){return(e%i||i)*t},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},e}(Sk),Ok=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),_s(this,Ek,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var r=0;r<i.length;r++)if(t=i[r],e.shiftValuesAsciiCodes[t])e.addExtended(e.shiftValuesAsciiCodes[t]);else{var n=e._findCharacterByValue(t);e.addPattern(e.characterMap[n].pattern)}}})},e}(Mk),Dk=/^\d+$/,Pk=Object.assign,Rk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pk(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},e.prototype.initValue=function(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},e.prototype.addCheckSum=function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},e.prototype.validate=function(t){if(Dk.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!Fs(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},e.prototype.addPattern=function(t){for(var e,i=this,r=0;r<t.length;r++)e=i.height-i.baseHeight*t.charAt(r),i.pattern.push({width:1,y1:e,y2:i.height}),i.pattern.push(1)},e}(wk),Ik=/^\d+$/,Lk=/^[a-z0-9]+$/i,zk=Object.assign,Bk=function(t){function e(e){t.call(this),this.encoding=e,this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.addStart=function(){},e.prototype.is=function(){},e.prototype.isCode=function(){return!1},e.prototype.move=function(){},e.prototype.pushState=function(){},e}(Zs),Nk=function(t){function e(e,i){t.call(this,e),this.states=i,this._initMoves(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),_s(this,{FNC4:"FNC4",SHIFT:98})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.move=function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},e.prototype.pushState=function(t){var e,i=this.states,r=t.value,n=r.length;if(Fs("C",i)){var o=r.substr(t.index).match(/\d{4,}/g);o&&(n=r.indexOf(o[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<n;)this.encoding.addPattern(this.getValue(e)),t.index++},e.prototype._initMoves=function(t){this._moves=[],Fs(this.FNC4,t)&&this._moves.push(this._moveFNC),Fs(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},e.prototype._moveFNC=function(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key},e.prototype._shiftState=function(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},e.prototype._moveState=function(){return this.encoding.addPattern(this.MOVE),!0},e}(Bk),jk={};jk.A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},e.prototype.isCode=function(t){return 0<=t&&t<96},e.prototype.getValue=function(t){return t<32?t+64:t-32},e}(Nk),jk.B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},e.prototype.isCode=function(t){return 32<=t&&t<128},e.prototype.getValue=function(t){return t-32},e}(Nk),jk.C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{key:"C",MOVE:99,START:105})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=Gk(t,e,4);return(e+4<=t.length||2===t.length)&&Ik.test(i)},e.prototype.move=function(){this.encoding.addPattern(this.MOVE)},e.prototype.pushState=function(t){for(var e;(e=Gk(t.value,t.index,2))&&Ik.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},e.prototype.getValue=function(t){return t},e}(Bk),jk.FNC4=function(t){function e(e,i){t.call(this,e),this._initSubStates(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{key:"FNC4",dependentStates:["A","B"]})},e.prototype.addStart=function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.isCode=function(t){return 128<=t&&t<256},e.prototype.pushState=function(t){var e,i=this._initSubState(t),r=this.encoding,n=i.value.length;if(t.index+=n,n<3)for(;i.index<n;i.index++)e=i.value.charCodeAt(i.index),i.state=this._getSubState(e),i.previousState!==i.state&&(i.previousState=i.state,r[i.state].move(i)),r.addPattern(r[i.state].MOVE),r.addPattern(r[i.state].getValue(e));else i.state!==i.previousState&&r[i.state].move(i),this._pushStart(i),r.pushData(i,this.subStates),t.index<t.value.length&&this._pushStart(i);t.fnc=!0,t.state=i.state},e.prototype._pushStart=function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},e.prototype._initSubState=function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e},e.prototype._initSubStates=function(t){this.subStates=[];for(var e=0;e<t.length;e++)Fs(t[e],this.dependentStates)&&this.subStates.push(t[e])},e.prototype._getSubState=function(t){for(var e=this,i=0;i<this.subStates.length;i++)if(e.encoding[e.subStates[i]].isCode(t))return e.subStates[i]},e.prototype._getAll=function(t,e){for(var i,r="",n=e;(i=t.charCodeAt(n++))&&this.isCode(i);)r+=String.fromCharCode(i-128);return r},e}(Bk),jk.FNC1=function(t){function e(e,i){t.call(this,e),this.states=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},e.prototype.addStart=function(){this.encoding[this.startState].addStart()},e.prototype.is=function(){return Fs(this.key,this.states)},e.prototype.pushState=function(t){var e,i,r,n=this,o=this.encoding,s=t.value.replace(/\s/g,""),a=new RegExp("["+this.startAI+this.endAI+"]","g"),l=t.index,h={state:this.startState};o.addPattern(this.START);for(;;){if(h.index=0,(e=(r=s.charAt(l)===n.startAI?2:0)>0?n.getBySeparator(s,l):n.getByLength(s,l)).ai.length)i=l+r+e.id.length+e.ai.length;else if((i=s.indexOf(n.startAI,l+1))<0){if(l+e.ai.max+e.id.length+r<s.length)throw new Error("Separators are required after variable length identifiers");i=s.length}if(h.value=s.substring(l,i).replace(a,""),n.validate(e,h.value),o.pushData(h,n.dependentStates),i>=s.length)break;l=i,h.state!==n.startState&&(o[n.startState].move(h),h.state=n.startState),e.ai.length||o.addPattern(n.START)}t.index=t.value.length},e.prototype.validate=function(t,e){var i=e.substr(t.id.length),r=t.ai;if(!r.type&&!Ik.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===r.type&&!Lk.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(r.length&&r.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+r.length+" characters long.");if(r.min&&r.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+r.min+" characters long.");if(r.max&&r.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+r.max+" characters long.")},e.prototype.getByLength=function(t,e){for(var i,r,n=2;n<=4;n++)if(i=Gk(t,e,n),r=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)))return{id:i,ai:r};this.unsupportedAIError(i)},e.prototype.unsupportedAIError=function(t){throw new Error("'"+t+"' is not a supported Application Identifier")},e.prototype.getBySeparator=function(t,e){var i=t.indexOf(this.startAI,e),r=t.indexOf(this.endAI,i),n=t.substring(i+1,r),o=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substr(n.length-1));return o||this.unsupportedAIError(n),{ai:o,id:n}},e.prototype.getApplicationIdentifier=function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var r=0;r<i.length;r++){if(i[r].ids&&Fs(t,i[r].ids))return i[r].type;if(i[r].ranges)for(var n=i[r].ranges,o=0;o<n.length;o++)if(n[o][0]<=t&&t<=n[o][1])return i[r].type}},e}(Bk);var Fk=function(t){function e(e){t.call(this,e),this._initStates()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},e.prototype._initStates=function(){for(var t=this,e=0;e<this.states.length;e++)t[t.states[e]]=new jk[t.states[e]](t,t.states)},e.prototype.initValue=function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},e.prototype.addData=function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},e.prototype.pushData=function(t,e){for(var i=this;i[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var r=t.state;t.state=t.previousState,t.previousState=r,t.shifted=!1}else t.previousState=t.state,t.state=i.getNextState(t,e),i[t.state].move(t)},e.prototype.addStart=function(t){this[t.state].addStart(t),this.position=1},e.prototype.addCheckSum=function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},e.prototype.addStop=function(){this.addPattern(this.STOP)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addPattern=function(t){for(var e,i=this.characterMap[t].toString(),r=0;r<i.length;r++)e=parseInt(i.charAt(r),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},e.prototype.getNextState=function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},e}(wk),Vk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{name:"Code 128 A",states:["A"]})},e}(Fk),Hk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{name:"Code 128 B",states:["B"]})},e}(Fk),Wk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{name:"Code 128 C",states:["C"]})},e}(Fk),Uk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{name:"Code 128",states:["C","B","A","FNC4"]})},e}(Fk),qk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),zk(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},e}(Fk);function Gk(t,e,i){return t.substring(e,e+i)}var $k=Object.assign,Kk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$k(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:Qk})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},e.prototype.addCheckSum=function(){var t=this,e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(var i=0;i<e.length;i++)t.checkSumLength++,t.addPattern(t.characterMap[e[i]])},e}(wk),Xk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$k(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},e}(Kk),Yk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$k(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},e}(Kk),Zk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$k(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},e}(Kk),Jk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$k(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},e}(Kk),Qk={Modulo10:function(t){var e,i,r,n=[0,""],o=t.length%2;for(e=0;e<t.length;e++)n[(e+o)%2]+=parseInt(t.charAt(e),10);for(r=n[0],i=(2*n[1]).toString(),e=0;e<i.length;e++)r+=parseInt(i.charAt(e),10);return[(10-r%10)%10]},Modulo11:function(t){for(var e,i=0,r=t.length,n=0;n<r;n++)i+=(((r-n)%6||6)+1)*t.charAt(n);return 10!==(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},tS=Object.assign,eS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),tS(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},e.prototype.initValue=function(t,e,i){var r=String(t);if(12!==r.length||/\D/.test(r))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=r,this.checksum=this.calculateChecksum(),this.leftKey=r[0],this.leftPart=r.substr(1,6),this.rightPart=r.substr(7)+this.checksum},e.prototype.addData=function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},e.prototype.addSide=function(t,e){for(var i=this,r=0;r<t.length;r++)e&&parseInt(i.keyTable[e].charAt(r),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[t.charAt(r)]).reverse(),!0):i.addPieces(i.characterMap.digits[t.charAt(r)],!0)},e.prototype.addPieces=function(t,e){for(var i=this,r=0;r<t.length;r++)e?i.pattern.push({y1:0,y2:.95*i.options.height,width:t[r]}):i.pattern.push(t[r])},e.prototype.calculateChecksum=function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),r=0;r<i.length;r++)r%2?e+=parseInt(i.charAt(r),10):t+=parseInt(i.charAt(r),10);return(10-(3*t+e)%10)%10},e}(wk),iS=Object.assign,rS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),iS(this,{name:"EAN 8"})},e.prototype.initValue=function(t,e,i){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)},e}(eS),nS={code11:_k,code39:Ck,code39extended:Tk,code93:Mk,code93extended:Ok,code128:Uk,code128a:Vk,code128b:Hk,code128c:Wk};function oS(t,e){var i=t.style.display;"canvas"===e&&(t.style.display="block");var r={width:t.clientWidth,height:t.clientHeight};return t.style.display=i,r}nS["gs1-128"]=qk,nS.msimod10=Xk,nS.msimod11=Yk,nS.msimod1010=Zk,nS.msimod1110=Jk,nS.postnet=Rk,nS.ean8=rS,nS.ean13=eS;var sS=function(t){function e(e,i,r){void 0===r&&(r=zl),t.call(this),this.options=_s({},this.options,i),this.element=e,this.onError=r,this._initElement(),this._initSurface(),this._setOptions(i),i&&$a(i.value)&&this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){ps(this.element,"k-barcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return mb.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t){this._setOptions(t),this._initSurface(),this.redraw()},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype._render=function(){var t,e,i=this.options,r=i.value,n=i.text,o=As(n.margin),s=this._getSize(),a=i.border||{},l=this.encoding,h=new eh(0,0,s.width,s.height).unpad(a.width).unpad(i.padding),c=h.height(),p=new bc;this.contentBox=h,p.append(this._getBackground(s)),n.visible&&(c-=Ua(r,{font:n.font}).height+o.top+o.bottom);try{t=l.encode(r,h.width(),c)}catch(t){return this.onError(t),p}return n.visible&&(e=r,i.checksum&&$a(l.checksum)&&(e+=" "+l.checksum),p.append(this._getText(e))),this.barHeight=c,this._bandsGroup=this._getBands(t.pattern,t.baseUnit),p.append(this._bandsGroup),p},e.prototype.exportVisual=function(){return this._render()},e.prototype._getSize=function(){var t=oS(this.element,this.options.renderAs),e=new Yl(300,100);return t.width>0&&(e.width=t.width),t.height>0&&(e.height=t.height),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},e.prototype.value=function(t){if(!$a(t))return this.options.value;this.options.value=String(t),this.redraw()},e.prototype._getBands=function(t,e){for(var i,r,n=this.contentBox,o=n.x1,s=new bc,a=0;a<t.length;a++){if(i=(r=ks(t[a])?t[a]:{width:t[a],y1:0,y2:this.barHeight}).width*e,a%2){var l=Jl.fromPoints(new Kl(o,r.y1+n.y1),new Kl(o+i,r.y2+n.y1)),h=sc.fromRect(l,{fill:{color:this.options.color},stroke:null});s.append(h)}o+=i}return s},e.prototype._getBackground=function(t){var e=this.options,i=e.border||{},r=new eh(0,0,t.width,t.height).unpad(i.width/2);return sc.fromRect(r.toRect(),{fill:{color:e.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})},e.prototype._getText=function(t){var e=this.options.text,i=this._textbox=new hp(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual},e.prototype._setOptions=function(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!nS[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new nS[this.type],this.options=_s({},this.options,t)},e}(Zs);hl(sS,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const aS=sS;var lS=function(t){function e(e,i,r){void 0===i&&(i=new Jl),void 0===r&&(r={}),t.call(this,r),this.src(e),this.rect(i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Image"},e.prototype.src=function(t){return ds(t)?(this.options.set("src",t),this):this.options.get("src")},e.prototype.bbox=function(t){var e=Gl(this.currentTransform(t));return this._rect.bbox(e)},e.prototype.rawBBox=function(){return this._rect.bbox()},e.prototype._containsPoint=function(t){return this._rect.containsPoint(t)},e.prototype._hasFill=function(){return this.src()},Object.defineProperties(e.prototype,i),e}(fc(Dh,["rect"]));const hS=lS;var cS=Object.assign;function pS(t,e){for(var i=[],r=0;r<t.length;)i.push(t.substring(r,r+e)),r+=e;return i}function uS(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function dS(t){return parseInt(t,2)}var fS=function(t){function e(e){t.call(this),this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},e.prototype.getNextCell=function(){for(var t=this;void 0!==this.matrix[this.row][this.column];)t.move(),(t.row<0||t.row>=t.matrix.length)&&(t.dir=-t.dir,t.startColumn-=8!==t.startColumn?2:3,t.column=t.startColumn,t.row=t.dir<0?t.matrix.length-1:0);return{row:this.row,column:this.column}},e.prototype.getNextRemainderCell=function(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},e}(Zs),vS=function(t){function e(e,i){t.call(this),this.dataString=e,this.version=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Zs),mS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getEncodingResult=function(t,e){var i=function(t){var e,i=[],r=0,n=t;i.push(qS(n,8,5,8,e)),e=i[0].mode,n=n.substr(i[0].modeString.length);for(;n.length>0;){var o=qS(n,17,9,16,e);o.mode!==e?(e=o.mode,i.push(o),r++):i[r].modeString+=o.modeString,n=n.substr(o.modeString.length)}return i}(t),r=function(t){for(var e=0,i=0;i<t.length;i++)e+=xS[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)}(i),n=GS(r,e),o=function(t,e){for(var i="",r=0;r<t.length;r++)i+=xS[t[r].mode].encode(t[r].modeString,e);return i}(i,n);return new vS(o,n)},e}(Zs),gS=function(t){function e(){t.call(this),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){cS(this,{modeIndicator:"",bitsInCharacterCount:[]})},e.prototype.getVersionIndex=function(t){return t<10?0:t>26?2:1},e.prototype.getBitsCharacterCount=function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},e.prototype.getModeCountString=function(t,e){return this.modeIndicator+uS(t,this.getBitsCharacterCount(e))},e.prototype.encode=function(){},e.prototype.getStringBitsLength=function(){},e.prototype.getValue=function(){},e}(Zs),yS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),cS(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},e.prototype.getValue=function(t){return parseInt(t,10)},e.prototype.encode=function(t,e){var i,r=pS(t,3),n=this.getModeCountString(t.length,e);for(i=0;i<r.length-1;i++)n+=uS(r[i],10);return n+uS(r[i],1+3*r[i].length)},e.prototype.getStringBitsLength=function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)},e}(gS),bS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),cS(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},e.prototype.getValue=function(t){return this.characters[t]},e.prototype.encode=function(t,e){var i,r=pS(t,2),n=this.getModeCountString(t.length,e);for(i=0;i<r.length-1;i++)n+=uS(45*this.getValue(r[i].charAt(0))+this.getValue(r[i].charAt(1)),11);return n+uS(2===r[i].length?45*this.getValue(r[i].charAt(0))+this.getValue(r[i].charAt(1)):this.getValue(r[i].charAt(0)),1+5*r[i].length)},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6},e}(gS),wS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),cS(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},e.prototype.getValue=function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error('Unsupported character in QR Code: "'+t+'".')},e.prototype.encode=function(t,e){for(var i=this.getModeCountString(t.length,e),r=0;r<t.length;r++)i+=uS(this.getValue(t.charAt(r)),8);return i},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+8*t},e}(gS),xS={};xS.numeric=new yS,xS.alphanumeric=new bS,xS.byte=new wS;var _S=function(t){function e(){t.call(this),this.initProperties(),this.mode=xS[this.encodingMode]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){cS(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},e.prototype.getEncodingResult=function(t,e){var i=this.encode(t),r=GS(this.getDataCodewordsCount(i),e),n=this.mode.getModeCountString(i.length/8,r)+i;return new vS(n,r)},e.prototype.getDataCodewordsCount=function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},e.prototype.encode=function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},e.prototype.encodeCharacter=function(t){var e=this.getBytesCount(t),i=e-1,r="";if(1===e)r=uS(t,8);else{for(var n=8-e,o=0;o<i;o++)r=uS(t>>6*o&63|128,8)+r;r=(t>>6*i|255>>n<<n).toString(2)+r}return r},e.prototype.getBytesCount=function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},e}(Zs),kS=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],SS="0000",CS="alphanumeric",ES={1:0},TS={0:1},AS={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},MS=[1,0,1,1,1],OS=[1,0,1],DS={L:"01",M:"00",Q:"11",H:"10"},PS=["11101100","00010001"],RS=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],IS=/^\d+/,LS=new RegExp("^[A-Z $%*+./:-]+"),zS=new RegExp("^[A-Z0-9 $%*+./:-]+"),BS=new RegExp("^[^A-Z0-9 $%*+./:-]+"),NS=[[1,0],[1,25,0]];function jS(t,e,i,r){for(var n=0;n<t.length;n++)t[n][i][r]=e}function FS(t,e,i,r){for(var n=0;n<RS.length;n++)t[n][i][r]=RS[n](i,r)?1^e:parseInt(e,10)}function VS(t,e){for(var i=[],r=t.length-2;r>=0;r--)i[r]=t[r]^e[r];return i}function HS(t,e){for(var i=[],r=0;r<t.length;r++)for(var n=0;n<e.length;n++)void 0===i[r+n]?i[r+n]=(t[r]+(e[n]>=0?e[n]:0))%255:i[r+n]=ES[TS[i[r+n]]^TS[(t[r]+e[n])%255]];return i}function WS(t,e){var i=[],r=t.length-1;do{i[r]=TS[(t[r]+e)%255],r--}while(void 0!==t[r]);return i}function US(t,e){var i,r,n=NS[e-1],o=new Array(e).concat(t),s=new Array(o.length-n.length).concat(n),a=t.length,l=[];for(r=0;r<a;r++)i=WS(s,ES[o[o.length-1]]),s.splice(0,1),o=VS(i,o);for(r=o.length-1;r>=0;r--)l[e-1-r]=uS(o[r],8);return l}function qS(t,e,i,r,n){var o,s,a=IS.exec(t),l=a?a[0]:"",h=LS.exec(t),c=h?h[0]:"",p=zS.exec(t),u=p?p[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=i&&!zS.test(t.charAt(l.length)))?(o="numeric",s=l):u&&(t.length===u.length||u.length>=r||n===CS)?(o=CS,s=l||c):(o="byte",s=u?u+BS.exec(t.substring(u.length))[0]:BS.exec(t)[0]),{mode:o,modeString:s}}function GS(t,e){var i=0,r=kS.length-1,n=Math.floor(kS.length/2);do{t<kS[n][e].totalDataCodewords?r=n:i=n,n=i+Math.floor((r-i)/2)}while(r-i>1);return t<=kS[i][e].totalDataCodewords?n+1:r+1}function $S(t,e,i){var r=dS(e),n=e.length-1,o=t<<n,s=uS(t,i-n),a=function(t,e){var i=e.toString(2).length,r=t.toString(2).length,n=t;do{r=(n^=e<<r-i).toString(2).length}while(r>=i);return n}(o,r);return a=s+uS(a,n)}function KS(t,e){return parseInt(t.charAt(e),10)}function XS(t,e){var i,r,n=t[0],o=0,s=e.length;for(i=0,r=8;i<=8;i++)6!==i&&jS(t,KS(e,s-1-o++),i,r);for(i=8,r=7;r>=0;r--)6!==r&&jS(t,KS(e,s-1-o++),i,r);for(o=0,r=n.length-1,i=8;r>=n.length-8;r--)jS(t,KS(e,s-1-o++),i,r);for(jS(t,1,n.length-8,8),i=n.length-7,r=8;i<n.length;i++)jS(t,KS(e,s-1-o++),i,r)}function YS(t,e){for(var i,r,n,o=t[0].length,s=o-11,a=o-11,l=0;l<e.length;l++)i=Math.floor(l/3),r=l%3,jS(t,n=KS(e,e.length-l-1),0+i,s+r),jS(t,n,a+r,0+i)}function ZS(t,e,i,r){for(var n,o=e.length+2,s=e.length+1,a=0;a<e.length;a++)for(var l=a;l<o-a;l++)jS(t,n=e[a],i+l,r+a),jS(t,n,i+a,r+l),jS(t,n,i+s-l,r+s-a),jS(t,n,i+s-a,r+s-l)}function JS(t,e,i,r){var n=i,o=r,s=t[0];do{jS(t,0,n,r),jS(t,0,i,o),n+=e[0],o+=e[1]}while(n>=0&&n<s.length)}function QS(t,e,i,r,n){e[t][r]=(e[t][r]<<1^n)%128,93===e[t][r]&&(i[t]+=40)}function tC(t,e,i,r,n,o){i[t][o]===r?n[t][o]++:(i[t][o]=r,n[t][o]>=5&&(e[t]+=3+n[t][o]-5),n[t][o]=1)}function eC(t,e){var i=Math.floor(t/e*100),r=i%5,n=Math.abs(i-r-50),o=Math.abs(i+5-r-50);return 10*Math.min(n/5,o/5)}function iC(t,e,i){var r=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new _S:new mS}(i),n=r.getEncodingResult(t,e),o=n.version,s=kS[o-1][e],a=function(t,e){for(var i,r,n,o,s,a=0,l=[],h=[],c=e.groups,p=0;p<c.length;p++){n=c[p][0];for(var u=0;u<n;u++){r=c[p][1],i=[],o=[];for(var d=1;d<=r;d++)s=t.substring(a,a+8),i.push(s),o[r-d]=dS(s),a+=8;l.push(i),h.push(US(o,e.errorCodewordsPerBlock))}}return[l,h]}(function(t,e){for(var i=8*e,r=0,n=0,o=t;o.length<i&&r<SS.length;)o+=SS.charAt(r++);for(o.length%8!=0&&(o+=new Array(9-o.length%8).join("0"));o.length<i;)o+=PS[n],n^=1;return o}(n.dataString,s.totalDataCodewords),s),l=function(t){for(var e=[],i=17+4*t,r=0;r<RS.length;r++){e[r]=new Array(i);for(var n=0;n<i;n++)e[r][n]=new Array(i)}return e}(o);!function(t){var e=t[0].length;ZS(t,MS,0,0),JS(t,[-1,-1],7,7),ZS(t,MS,e-7,0),JS(t,[1,-1],e-8,7),ZS(t,MS,0,e-7),JS(t,[-1,1],7,e-8)}(l),function(t,e){if(!(e<2)){var i,r,n=t[0],o=n.length,s=Math.floor(e/7),a=[6],l=0;for((i=AS[e])?r=(o-13-i)/s:i=r=(o-13)/(s+1),a.push(a[l++]+i);a[l]+r<o;)a.push(a[l++]+r);for(var h=0;h<a.length;h++)for(var c=0;c<a.length;c++)void 0===n[a[h]][a[c]]&&ZS(t,OS,a[h]-2,a[c]-2)}}(l,o),function(t){for(var e=1,i=t[0].length,r=8;r<i-8;r++)jS(t,e,6,r),jS(t,e,r,6),e^=1}(l),o>=7&&YS(l,uS(0,18)),XS(l,uS(0,15)),function(t,e){for(var i,r,n,o=new fS(t[0]),s=0;s<e.length;s++)for(i=e[s],r=0;i.length>0;){for(var a=0;a<i.length;a++)for(var l=0;l<8;l++)n=o.getNextCell(),FS(t,i[a][r].charAt(l),n.row,n.column);for(r++;i[0]&&r===i[0].length;)i.splice(0,1)}for(;n=o.getNextRemainderCell();)FS(t,0,n.row,n.column)}(l,a);var h=function(t){var e,i,r=[],n=[],o=[],s=[],a=[],l=t[0].length;for(i=0;i<t.length;i++)r[i]=0,o[i]=0,a[i]=[0,0],s[i]=[0,0],n[i]=[];for(var h=0;h<l;h++)for(var c=0;c<l;c++)for(var p=0;p<t.length;p++)e=t[p],o[p]+=parseInt(e[h][c],10),n[p][0]===e[h][c]&&h+1<l&&c-1>=0&&e[h+1][c]===n[p][0]&&e[h+1][c-1]===n[p][0]&&(r[p]+=3),QS(p,s,r,0,e[h][c]),QS(p,s,r,1,e[c][h]),tC(p,r,n,e[h][c],a,0),tC(p,r,n,e[c][h],a,1);var u,d=l*l,f=Number.MAX_VALUE;for(i=0;i<r.length;i++)r[i]+=eC(o[i],d),r[i]<f&&(f=r[i],u=i);return u}(l),c=l[h];return o>=7&&YS([c],function(t){return $S(t,"1111100100101",18)}(o)),XS([c],function(t){var e,i="";if(0===dS(t))return"101010000010010";e=$S(dS(t),"10100110111",15);for(var r=0;r<e.length;r++)i+=e.charAt(r)^"101010000010010".charAt(r);return i}(DS[e]+uS(h,3))),c}!function(){var t,e;for(e=1;e<255;e++)(t=2*TS[e-1])>255&&(t^=285),TS[e]=t,ES[t]=e;t=2*TS[e-1]^285,TS[e]=t,TS[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=NS[t-1],i=[t,0];NS[t]=HS(e,i)}}();var rC=Math.round,nC=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],oC=[[0,1],[1,1],[1,0]],sC=200,aC="L",lC="#fff",hC="#000",cC=1,pC=7,uC=function(t){function e(e,i,r){void 0===r&&(r=zl),t.call(this),this.options=_s({},this.options,i),this.element=e,this.wrapper=this.element,this.onError=r,this._initElement(),this._initSurface(),this.setOptions(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){ps(this.element,"k-qrcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return mb.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){var t=this.element,e=t.clientWidth,i=t.clientHeight,r={width:0,height:0};return e>0&&(r.width=e),i&&(r.height=i),r},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.exportVisual=function(){return this._render()},e.prototype._render=function(){var t,e,i,r,n,o=this._value,s=this.options.border||{},a=this.options.padding||0,l=s.width||0;s.width=l;var h=new bc;try{o&&(i=iC(o,this.options.errorCorrection,this.options.encoding),n=(r=this._getSize())-2*(l+a),t=this._calculateBaseUnit(n,i.length),e=l+a+(n-i.length*t)/2,h.append(this._renderBackground(r,s)),h.append(this._renderMatrix(i,t,e)),this._hasCustomLogo()?h.append(this._renderLogo(r,t)):this._isSwiss()&&h.append(this._renderSwissCode(r,t)))}catch(t){this.onError(t)}return h},e.prototype._renderLogo=function(t,e){var i,r=rC(t/2),n=this._getLogoSize(e*pC),o=this.options.overlay.imageUrl,s={x:r-n.width/2,y:r-n.height/2};return i=new Jl(new Kl(s.x,s.y),new Yl(n.width,n.height)),new hS(o,i)},e.prototype._renderSwissCode=function(t,e){var i=this._getLogoSize(e*pC),r=(i=Math.max(i.width,i.height))/4,n=r/2,o=t/2,s={},a=new bc;return s.x=s.y=Math.ceil(o-e-i/2),a.append(this._renderShape(s,Math.ceil(i+2*e),oC,"#fff")),s.x=s.y=o-i/2,a.append(this._renderShape(s,i,oC,this.options.color)),s.x=o+n-i/2,s.y=o+n+r-i/2,a.append(this._renderShape(s,r,nC,"#fff")),a},e.prototype._renderShape=function(t,e,i,r){var n=new ac({fill:{color:r},stroke:null});n.moveTo(t.x,t.y);for(var o=0;o<i.length;o++)n.lineTo(t.x+e*i[o][0],t.y+e*i[o][1]);return n.close(),n},e.prototype._getSize=function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=oS(this.element,this.options.renderAs),i=Math.min(e.width,e.height);t=i>0?i:sC}return t},e.prototype._calculateBaseUnit=function(t,e){var i=Math.floor(t/e);if(i<cC){var r=Math.ceil(e*cC);this.onError(new Error("Insufficient size for QR Code: the current size is "+t+"px and the minimum size is "+r+"px."))}else i*e>=t&&i-1>=cC&&i--;return i},e.prototype._renderMatrix=function(t,e,i){for(var r=new ac({fill:{color:this.options.color},stroke:null}),n=0;n<t.length;n++)for(var o=i+n*e,s=0;s<t.length;){for(;0===t[n][s]&&s<t.length;)s++;if(s<t.length){for(var a=s;1===t[n][s];)s++;var l=rC(i+a*e),h=rC(o),c=rC(i+s*e),p=rC(o+e);r.moveTo(l,h).lineTo(l,p).lineTo(c,p).lineTo(c,h).close()}}return r},e.prototype._renderBackground=function(t,e){var i=new eh(0,0,t,t).unpad(e.width/2);return sc.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})},e.prototype.setOptions=function(t){var e=t||{};this.options=cS(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},e.prototype.value=function(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()},e.prototype._hasCustomLogo=function(){return Boolean(this.options.overlay.imageUrl)},e.prototype._isSwiss=function(){return"swiss"===this.options.overlay.type},e.prototype._getLogoSize=function(t){var e=this.options.overlay.width,i=this.options.overlay.height;return e||i?e&&!i?i=e:!e&&i&&(e=i):e=i=t,{width:e,height:i}},e}(Zs);hl(uC,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:aC,background:lC,color:hC,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const dC=uC;var fC={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function vC(t){return t*t}var mC=Math,gC=mC.abs,yC=mC.atan,bC=mC.atan2,wC=mC.cos,xC=mC.sin,_C=mC.tan,kC=function(t){function e(e,i){t.call(this),this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){_s(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},e.prototype.toArray=function(){return[this.lat,this.lng]},e.prototype.equals=function(t){return t&&t.lat===this.lat&&t.lng===this.lng},e.prototype.clone=function(){return new e(this.lat,this.lng)},e.prototype.round=function(t){return this.lng=nl(this.lng,t),this.lat=nl(this.lat,t),this},e.prototype.wrap=function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},e.prototype.distanceTo=function(t,e){return this.greatCircleTo(t,e).distance},e.prototype.destination=function(t,i,r){var n=rl(i),o=r||fC.WGS84,s=rl(this.lat),a=rl(this.lng),l=t/o.a,h=mC.asin(xC(s)*wC(l)+wC(s)*xC(l)*wC(n)),c=a+bC(xC(n)*xC(l)*wC(s),wC(l)-xC(s)*xC(h));return new e(Ka(h),Ka(c))},e.prototype.greatCircleTo=function(t,i){var r=e.create(r),n=i||fC.WGS84;if(!r||this.clone().round(8).equals(r.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var o,s,a,l,h,c,p,u,d=n.a,f=n.b,v=n.f,m=rl(r.lng-this.lng),g=yC((1-v)*_C(rl(this.lat))),y=xC(g),b=wC(g),w=yC((1-v)*_C(rl(r.lat))),x=xC(w),_=wC(w),k=m,S=this.DISTANCE_ITERATIONS,C=!1;!C&&S-- >0;){s=xC(k),a=wC(k),l=mC.sqrt(vC(_*s)+vC(b*x-y*_*a)),u=bC(l,c=y*x+b*_*a);var E=b*_*s/l;p=0,0!==(h=1-vC(E))&&(p=c-2*y*x/h),o=k;var T=v/16*h*(4+v*(4-3*h));k=m+(1-T)*v*E*(u+T*l*(p+T*c*(2*vC(p)-1))),C=gC(k-o)<=this.DISTANCE_CONVERGENCE}var A=h*(vC(d)-vC(f))/vC(f),M=1+A/16384*(4096+A*(A*(320-175*A)-768)),O=A/1024*(256+A*(A*(74-47*A)-128)),D=O*l*(p+O/4*(c*(2*vC(p)-1)-O/6*p*(4*vC(l)-3)*(4*vC(p)-3))),P=bC(_*s,b*x-y*_*a),R=bC(b*s,-y*_+b*x*a);return{distance:nl(f*M*(u-D),this.DISTANCE_PRECISION),azimuthFrom:Ka(P),azimuthTo:Ka(R)}},e.prototype.toString=function(){return String(this.lat)+","+String(this.lng)},e.fromLngLat=function(t){return new e(t[1],t[0])},e.fromLatLng=function(t){return new e(t[0],t[1])},e.create=function(t,i){if($a(t))return t instanceof e?t.clone():1===arguments.length&&2===t.length?e.fromLatLng(t):new e(t,i)},e}(Zs),SC=Math,CC=SC.atan,EC=SC.exp,TC=SC.pow,AC=SC.sin,MC=SC.log,OC=SC.tan,DC=Kl,PC=SC.PI,RC=PC/2,IC=PC/4,LC=PC/180,zC=fC.WGS84,BC=function(t){function e(e){t.call(this),this.initProperties(),this._initOptions(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype.initProperties=function(){_s(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},e.prototype.forward=function(t,e){var i=this,r=i.options,n=r.datum.a,o=r.centralMeridian,s=el(t.lat,-i.MAX_LAT,i.MAX_LAT),a=e?el(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,l=rl(a-o)*n,h=i._projectLat(s);return new DC(l,h)},e.prototype._projectLat=function(t){var e=this.options.datum,i=e.e,r=e.a,n=rl(t),o=OC(IC+n/2),s=i*AC(n),a=TC((1-s)/(1+s),i/2);return r*MC(o*a)},e.prototype.inverse=function(t,e){var i=this,r=i.options,n=r.datum.a,o=r.centralMeridian,s=t.x/(LC*n)+o,a=el(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);return e&&(s=el(s,-i.MAX_LNG,i.MAX_LNG)),new kC(a,s)},e.prototype._inverseY=function(t){var e,i=this,r=i.options.datum,n=r.a,o=r.e,s=o/2,a=EC(-t/n),l=RC-2*CC(a);for(e=0;e<=i.INVERSE_ITERATIONS;e++){var h=o*AC(l),c=TC((1-h)/(1+h),s),p=RC-2*CC(a*c)-l;if(l+=p,SC.abs(p)<=i.INVERSE_CONVERGENCE)break}return Ka(l)},e}(Zs);hl(BC,{centralMeridian:0,datum:zC});var NC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),_s(this,{MAX_LAT:85.0511287798})},e.prototype._projectLat=function(t){var e=this.options.datum.a,i=rl(t),r=OC(IC+i/2);return e*MC(r)},e.prototype._inverseY=function(t){var e=this.options.datum.a,i=EC(-t/e);return Ka(RC-2*CC(i))},e}(BC),jC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forward=function(t){return new DC(t.lng,t.lat)},e.prototype.inverse=function(t){return new kC(t.y,t.x)},e}(Zs),FC=function(t){function e(){t.call(this);var e=this._proj=new NC,i=this.c=2*PC*e.options.datum.a;this._tm=ph().translate(.5,.5).scale(1/i,-1/i),this._itm=ph().scale(i,-i).translate(-.5,-.5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t,e,i){return this._proj.forward(t,i).transform(this._tm).scale(e||1)},e.prototype.toLocation=function(t,e,i){var r=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(r,i)},e}(Zs),VC=(function(t){function e(){t.call(this),this._proj=new BC}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(Zs),function(t){function e(){t.call(this),this._proj=new jC}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(Zs),Object.defineProperty),HC=(Object.assign,function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}),WC=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},UC=function(t,e){e.insertBefore(t,e.firstChild)},qC=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},GC=function(t){return t&&String(t).endsWith("px")?t:String(t)+"px"},$C=function(t){var e,i=!1,r=[],n={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={tablet:/playbook|ipad|fire/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var l in n)if(n.hasOwnProperty(l)&&(r=t.match(n[l]))){if("windows"===l&&"plugins"in navigator)return!1;(i={}).device=l,i.tablet=KC(l,s,!1),i.browser=KC(t,a,"default"),i.name=KC(l,o),i[i.name]=!0,i.majorVersion=r[2],i.minorVersion=(r[3]||"0").replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0");break}return i};function KC(t,e,i){for(var r in e)if(e.hasOwnProperty(r)&&e[r].test(t))return r;return void 0!==i?i:t}var XC=function(){var t={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},e=YC();return e.touch&&(e.mobileOS.ios||e.mobileOS.android)?t={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:e.pointers?t={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:e.msPointers&&(t={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),t},YC=function(){var t=$C(navigator.userAgent),e=function(t){var e=!1,i=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var n in r)if(r.hasOwnProperty(n)&&(i=t.match(r[n]))){(e={})[n]=!0,e[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e}(navigator.userAgent),i=e.chrome,r=e.crios,n=e.mozilla,o=e.safari,s={};s.mobileOS=t,s.touch="ontouchstart"in window,s.pointers=!i&&!r&&!n&&!o&&window.PointerEvent,s.msPointers=!i&&window.MSPointerEvent,s.mouseAndTouchPresent=s.touch&&!(s.mobileOS.ios||s.mobileOS.android),s.eventCapture=document.documentElement.addEventListener;var a=document.createElement("table"),l=s.transitions=!1,h=s.transforms=!1,c="string";return["Moz","webkit","O","ms"].forEach((function(t){var e=typeof a.style[t+"Transition"]===c;if(e||typeof a.style[t+"Transform"]===c){var i=t.toLowerCase();return h={css:"ms"!==i?"-"+i+"-":"",prefix:t,event:"o"===i||"webkit"===i?i:""},e&&((l=h).event=l.event?l.event+"TransitionEnd":"transitionend"),!1}})),a=null,s.transforms=h,s.transitions=l,s.delayedClick=function(){if(s.touch){if(s.mobileOS.ios)return!0;if(s.mobileOS.android){if(!s.browser.chrome)return!0;if(s.browser.version<32)return!1;var t=document.querySelector("meta[name=viewport]");return!(t?t.getAttribute("content"):"").match(/user-scalable=no/i)}}return!1},s},ZC=function(t,e){return t.bind(e)};var JC=function(t,e,i,r,n){QC(t,e,i,r,n)},QC=function(t,e,i,r,n){(cs(e)?e:(e||"").split(" ")).forEach((function(e){tE(t,e,i,r,n)}))},tE=function(t,e,i,r,n){var o,s=r;i&&bs(i)&&!r?s=i:i&&"string"==typeof i&&bs(s)&&(o=i),t.addEventListener(e,(function(e){var i=e.target?e.target.closest(o):null;if(!o||o&&e.target&&i){var r=o?i:e.currentTarget;VC(e,"currentTarget",{value:r}),VC(e,"delegateTarget",{value:t}),s(e)}}),Boolean(n))},eE=function(t,e,i,r,n){iE(t,e,i,r,n)},iE=function(t,e,i,r){(cs(e)?e:(e||"").split(" ")).forEach((function(e){rE(t,e,i,r)}))},rE=function(t,e,i,r){t.removeEventListener(e,i,Boolean(r))},nE=XC(navigator.userAgent);function oE(t){return nE[t]||t}var sE=/([^ ]+)/g,aE=function(t){return t.replace(sE,oE)},lE=function(t,e){var i=t.prototype;i.events?e.forEach((function(t){i.events.indexOf(t)<0&&i.events.push(t)})):i.events=e},hE=function(){return Number(new Date)},cE=function(){},pE="string",uE="function",dE=function(){this._defaultPrevented=!0},fE=function(){return!0===this._defaultPrevented},vE=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind()},e.prototype.bind=function(t,e,i){var r,n,o,s,a=this,l=typeof t===pE?[t]:t||[],h=typeof e===uE;if(void 0===e){for(r in t)a.bind(r,t[r]);return a}var c=function(){var t=l[r];(s=h?e:e[t])&&(i&&(o=s,s=function(){a.unbind(t,s),o.apply(a,arguments)},s.original=o),(a._events[t]=a._events[t]||[]).push(s))};for(r=0,n=l.length;r<n;r++)c();return a},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){var i,r,n,o=this,s=typeof t===pE?[t]:t,a=typeof e===uE;for(i=0,r=s.length;i<r;i++){var l=s[i];(n=a?e:e[l])&&(o._events[l]=o._events[l]||[]).unshift(n)}return o},e.prototype.trigger=function(t,e){var i,r,n=this,o=n._events[t];if(o){var s=e||{};for(s.sender=n,s._defaultPrevented=!1,s.preventDefault=dE,s.isDefaultPrevented=fE,i=0,r=(o=o.slice()).length;i<r;i++)o[i].call(n,s);return!0===s._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i,r=this,n=r._events[t];if(void 0===t)r._events={};else if(n)if(e)for(i=n.length-1;i>=0;i--)n[i]!==e&&n[i].original!==e||n.splice(i,1);else r._events[t]=[];return r},e.prototype._setEvents=function(t){for(var e=this,i=(this.events||[]).length,r=0;r<i;r++){var n=e.events[r];e.options[n]&&t[n]&&(e.unbind(n,e.options[n]),e._events&&e._events[n]&&delete e._events[n])}this.bind(this.events,t)},e}(Zs),mE=Ds.compile,gE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.items=[],ps(this.element,"k-widget k-attribution")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype.filter=function(t,e){this._extent=t,this._zoom=e,this._render()},e.prototype.add=function(t){var e=t;$a(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())},e.prototype.remove=function(t){for(var e=[],i=0;i<this.items.length;i++){var r=this.items[i];r.text!==t&&e.push(r)}this.items=e,this._render()},e.prototype.clear=function(){this.items=[],WC(this.element)},e.prototype._render=function(){for(var t=[],e=mE(this.options.itemTemplate),i=0;i<this.items.length;i++){var r=this.items[i],n=this._itemText(r);""!==n&&t.push(e({text:n}))}t.length>0?(WC(this.element),function(t,e){var i=document.createElement("div");for(i.innerHTML=t;i.childNodes.length>0;)e.appendChild(i.childNodes[0])}(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()},e.prototype.hideElement=function(){this.element.style.display="none"},e.prototype.showElement=function(){this.element.style.display=""},e.prototype._itemText=function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),r=this._inArea(t.extent);return i&&r&&(e+=t.text),e},e.prototype._inZoomLevel=function(t,e){var i=sl(t,-Number.MAX_VALUE),r=sl(e,Number.MAX_VALUE);return this._zoom>i&&this._zoom<r},e.prototype._inArea=function(t){var e=!0;return t&&(e=t.contains(this._extent)),e},e}(vE);hl(gE,{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"});var yE={up:{className:"k-navigator-n",iconClass:"k-i-arrow-n"},down:{className:"k-navigator-s",iconClass:"k-i-arrow-s"},right:{className:"k-navigator-e",iconClass:"k-i-arrow-e"},left:{className:"k-navigator-w",iconClass:"k-i-arrow-w"}};function bE(t){var e='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+yE[t].className+'" aria-label="move '+t+'"><span class="k-icon '+yE[t].iconClass+'" /></button>';return HC(e)}var wE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var r=bE("up"),n=bE("right"),o=bE("down"),s=bE("left");this.element.appendChild(r),this.element.appendChild(n),this.element.appendChild(o),this.element.appendChild(s),ps(this.element,"k-widget k-navigator"),JC(this.element,"click",".k-button",ZC(this._click,this));var a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=ZC(this._keydown,this),JC(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){eE(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,r="tabindex",n=e.getAttribute(r)||i.getAttribute(r);i.removeAttribute(r),e.setAttribute(r,isNaN(n)?0:n)},e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype._pan=function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},e.prototype._click=function(t){var e=0,i=0,r=t.currentTarget;r.matches(".k-navigator-n")?i=1:r.matches(".k-navigator-s")?i=-1:r.matches(".k-navigator-e")?e=1:r.matches(".k-navigator-w")&&(e=-1),this._pan(e,i),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Bl.UP:this._pan(0,1),t.preventDefault();break;case Bl.DOWN:this._pan(0,-1),t.preventDefault();break;case Bl.RIGHT:this._pan(1,0),t.preventDefault();break;case Bl.LEFT:this._pan(-1,0),t.preventDefault()}},e}(vE);function xE(t,e){return HC('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'"><span class="k-icon '+e+'"></span></button>')}hl(wE,{name:"Navigator",panStep:1}),lE(wE,["pan"]);var _E="change",kE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var r=xE("in","k-i-plus"),n=xE("out","k-i-minus");this.element.appendChild(r),this.element.appendChild(n),ps(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),JC(this.element,"click",".k-button",this._clickHandler);var o=this.element.parentNode.closest("[data-role]");this._keyroot=o||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),JC(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&eE(this.element,"click",this._clickHandler),this._keyroot&&eE(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,r="tabindex",n=e.getAttribute(r)||i.getAttribute(r);i.removeAttribute(r),e.setAttribute(r,isNaN(n)?0:n)},e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype._change=function(t){var e=this.options.zoomStep;this.trigger(_E,{delta:t*e})},e.prototype._click=function(t){var e=1;Bs(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Bl.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case Bl.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},e}(vE);hl(kE,{name:"ZoomControl",zoomStep:1}),lE(kE,[_E]);var SE=Math,CE=SE.max,EE=SE.min,TE=function(t){function e(e,i){t.call(this);var r=kC.create(e),n=kC.create(i);r.lng+180>n.lng+180&&r.lat+90<n.lat+90?(this.se=r,this.nw=n):(this.se=n,this.nw=r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={World:{configurable:!0}};return e.prototype.contains=function(t){var e=this.nw,i=this.se,r=sl(t.lng,t[1]),n=sl(t.lat,t[0]);return t&&r+180>=e.lng+180&&r+180<=i.lng+180&&n+90>=i.lat+90&&n+90<=e.lat+90},e.prototype.center=function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,r=t.lat+(e.lat-t.lat)/2;return new kC(r,i)},e.prototype.containsAny=function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},e.prototype.include=function(t){var e=this.nw,i=this.se,r=sl(t.lng,t[1]),n=sl(t.lat,t[0]);e.lng=EE(e.lng,r),e.lat=CE(e.lat,n),i.lng=CE(i.lng,r),i.lat=EE(i.lat,n)},e.prototype.includeAll=function(t){for(var e=0;e<t.length;e++)this.include(t[e])},e.prototype.edges=function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new kC(t.lat,e.lng),se:this.se,sw:new kC(e.lat,t.lng)}},e.prototype.toArray=function(){var t=this.nw,e=this.se;return[t,new kC(t.lat,e.lng),e,new kC(e.lat,t.lng)]},e.prototype.overlaps=function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())},e.create=function(t,i){return t instanceof e?t:t&&i?new e(t,i):t&&4===t.length&&!i?new e([t[0],t[1]],[t[2],t[3]]):void 0},i.World.get=function(){return new e([90,-180],[-90,180])},Object.defineProperties(e,i),e}(Zs),AE=function(t){function e(e,i){t.call(this),this.support=YC(),this._initOptions(i),this.map=e;var r=document.createElement("div");ps(r,"k-layer"),r.style.zIndex=this.options.zIndex,r.style.opacity=this.options.opacity,this.element=r,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._deactivate()},e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype.show=function(){this.reset(),this._activate(),this._applyExtent(!0)},e.prototype.hide=function(){this._deactivate(),this._setVisibility(!1)},e.prototype.reset=function(){this._beforeReset(),this._reset()},e.prototype._reset=function(){this._applyExtent()},e.prototype._beforeReset=function(){},e.prototype._resize=function(){},e.prototype._panEnd=function(){this._applyExtent()},e.prototype._applyExtent=function(){var t=this.options,e=this.map.zoom(),i=!$a(t.minZoom)||e>=t.minZoom,r=!$a(t.maxZoom)||e<=t.maxZoom,n=TE.create(t.extent),o=!n||n.overlaps(this.map.extent());this._setVisibility(i&&r&&o)},e.prototype._setVisibility=function(t){this.element.style.display=t?"":"none"},e.prototype._activate=function(){var t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},e.prototype._deactivate=function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},e.prototype._updateAttribution=function(){var t=this.map.attribution;t&&t.add(this.options.attribution)},e.prototype._readData=function(){return this.options.data||[]},e.prototype._hasData=function(){return this._data&&this._data.length>0},e}(Zs),ME=Math,OE=Ds.compile,DE=Kl;function PE(t){return new DE(nl(t.x),nl(t.y))}function RE(t){var e=t;return"string"!=typeof t&&(e+="px"),e}var IE=function(t){function e(e,i){t.call(this,e,i),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var r=this._viewType();this._view=new r(this.element,this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this._view.destroy(),this._view=null},e.prototype._beforeReset=function(){var t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},e.prototype._reset=function(){t.prototype._reset.call(this),this._updateView(),this._view.reset()},e.prototype._viewType=function(){return LE},e.prototype._activate=function(){t.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=mg(this._render.bind(this),100)),this.map.bind("pan",this._pan))},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},e.prototype._updateView=function(){var t=this._view,e=this.map,i=e.extent(),r={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(r),t.zoom(e.zoom())},e.prototype._resize=function(){this._render()},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._render()},e.prototype._render=function(){this._updateView(),this._view.render()},e}(AE);hl(IE,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var LE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.pool=new BE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype.center=function(t){this._center=t},e.prototype.extent=function(t){this._extent=t},e.prototype.viewOrigin=function(t){this._viewOrigin=t},e.prototype.zoom=function(t){this._zoom=t},e.prototype.pointToTileIndex=function(t){return new DE(ME.floor(t.x/this.options.tileSize),ME.floor(t.y/this.options.tileSize))},e.prototype.tileCount=function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,r=this.indexToPoint(e).translate(-i.x,-i.y);return{x:ME.ceil((ME.abs(r.x)+t.width)/this.options.tileSize),y:ME.ceil((ME.abs(r.y)+t.height)/this.options.tileSize)}},e.prototype.size=function(){var t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}},e.prototype.indexToPoint=function(t){var e=t.x,i=t.y;return new DE(e*this.options.tileSize,i*this.options.tileSize)},e.prototype.subdomainText=function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},e.prototype.destroy=function(){WC(this.element),this.pool.empty()},e.prototype.reset=function(){this.pool.reset(),this.subdomainIndex=0,this.render()},e.prototype.render=function(){var t,e,i,r=this.tileCount(),n=this.pointToTileIndex(this._extent.nw);for(e=0;e<r.x;e++)for(i=0;i<r.y;i++)(t=this.createTile({x:n.x+e,y:n.y+i})).visible||t.show()},e.prototype.createTile=function(t){var e=this.tileOptions(t),i=this.pool.get(this._center,e);return i.element.parentNode||this.element.append(i.element),i},e.prototype.tileOptions=function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),r=this._viewOrigin,n=i.clone().translate(-r.x,-r.y);return{index:e,currentIndex:t,point:i,offset:PE(n),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},e.prototype.wrapIndex=function(t){var e=ME.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:el(t.y,0,e-1)}},e.prototype.wrapValue=function(t,e){var i=ME.abs(t)%e;return t>=0?i:e-(0===i?e:i)},e}(Zs),zE=function(t){function e(e,i){t.call(this),this.id=e,this.visible=!0,this._initOptions(i),this.createElement(),this.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){var t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)},e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype.createElement=function(){var t=document.createElement("img");ps(t,"k-layer"),t.style.position="absolute",t.style.display="block",t.style.width=this.options.size,t.style.height=this.options.size,this.element=t},e.prototype.show=function(){var t=this.element;t.style.top=RE(this.options.offset.y),t.style.left=RE(this.options.offset.x);var e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},e.prototype.hide=function(){this.element.style.visibility="hidden",this.visible=!1},e.prototype.url=function(){return OE(this.options.urlTemplate)(this.urlOptions())},e.prototype.errorUrl=function(){return OE(this.options.errorUrlTemplate)(this.urlOptions())},e.prototype.urlOptions=function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},e}(Zs);hl(zE,{urlTemplate:"",errorUrlTemplate:""});var BE=function(t){function e(){t.call(this),this._items=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)},e.prototype.empty=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].destroy();this._items=[]},e.prototype.reset=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].hide()},e.prototype._create=function(t){for(var e,i=this._items,r=Qa(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate),n=0;n<i.length;n++)if(i[n].id===r){e=i[n];break}return e?e.show():(e=new zE(r,t),this._items.push(e)),e},e.prototype._remove=function(t){for(var e=this._items,i=-1,r=-1,n=0;n<e.length;n++){var o=e[n].options.point.distanceTo(t);o>i&&!e[n].visible&&(r=n,i=o)}-1!==r&&(e[r].destroy(),e.splice(r,1))},e}(Zs);hl(BE,{maxSize:100});var NE=Object.assign,jE="change",FE=function(t){function e(e,i){t.call(this);var r=this,n=e[0]||e;r.capture=!1;var o=XC(navigator.userAgent);n.addEventListener?(o.down.split(" ").forEach((function(t){n.addEventListener(t,ZC(r._press,r),!0)})),o.up.split(" ").forEach((function(t){n.addEventListener(t,ZC(r._release,r),!0)}))):(o.down.split(" ").forEach((function(t){n.attachEvent(t,ZC(r._press,r))})),o.up.split(" ").forEach((function(t){n.attachEvent(t,ZC(r._release,r))}))),r.bind(["press","release"],i||{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.captureNext=function(){this.capture=!0},e.prototype.cancelCapture=function(){this.capture=!1},e.prototype._press=function(t){this.trigger("press"),this.capture&&t.preventDefault()},e.prototype._release=function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())},e}(vE),VE=function(t){function e(e){t.call(this);var i=this;i.forcedEnabled=!1,NE(i,e),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeVirtual=function(){NE(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},e.prototype.virtualSize=function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},e.prototype.outOfBounds=function(t){return t>this.max||t<this.min},e.prototype.forceEnabled=function(){this.forcedEnabled=!0},e.prototype.getSize=function(){return this.container[this.measure]},e.prototype.getTotal=function(){return this.element[this.scrollSize]},e.prototype.rescale=function(t){this.scale=t},e.prototype.update=function(t){var e=this,i=e.virtual?e._virtualMax:e.getTotal(),r=i*e.scale,n=e.getSize();(0!==i||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=n,e.total=r,e.min=Math.min(e.max,n-r),e.minScale=n/i,e.centerOffset=(r-n)/2,e.enabled=e.forcedEnabled||r>n,t||e.trigger(jE,e))},e}(vE),HE=function(t){function e(e){t.call(this);var i=this;i.x=new VE(NE({horizontal:!0},e)),i.y=new VE(NE({horizontal:!1},e)),i.container=e.container,i.forcedMinScale=e.minScale,i.maxScale=e.maxScale||100,i.bind(jE,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rescale=function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},e.prototype.centerCoordinates=function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},e.prototype.refresh=function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(jE)},e}(vE),WE=function(t){function e(e){t.call(this),NE(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.outOfBounds=function(){return this.dimension.outOfBounds(this.movable[this.axis])},e.prototype.dragMove=function(t){var e=this,i=e.dimension,r=e.axis,n=e.movable,o=n[r]+t;if(i.enabled){var s=t;(o<i.min&&t<0||o>i.max&&t>0)&&(s*=e.resistance),n.translateAxis(r,s),e.trigger(jE,e)}},e}(vE),UE=function(t){function e(e){t.call(this);var i,r,n,o,s=this;NE(s,{elastic:!0},e),n=s.elastic?.5:0,o=s.movable,s.x=i=new WE({axis:"x",dimension:s.dimensions.x,resistance:n,movable:o}),s.y=r=new WE({axis:"y",dimension:s.dimensions.y,resistance:n,movable:o}),s.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(t){s.gesture=t,s.offset=Xa(s.dimensions.container)},press:function(t){var e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(t){var e,n=s.gesture,a=n.center,l=t.center,h=t.distance/n.distance,c=s.dimensions.minScale,p=s.dimensions.maxScale;o.scale<=c&&h<1&&(h+=.8*(1-h)),o.scale*h>=p&&(h=p/o.scale);var u=o.x+s.offset.left,d=o.y+s.offset.top;e={x:(u-a.x)*h+l.x-u,y:(d-a.y)*h+l.y-d},o.scaleWith(h),i.dragMove(e.x),r.dragMove(e.y),s.dimensions.rescale(o.scale),s.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||r.dimension.enabled?(i.dragMove(t.x.delta),r.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Zs),qE=function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"},GE=function(t){function e(e){t.call(this);var i=this;i.support=YC(),this.transformStyle=this.support.transitions.prefix+"Transform",i.element=e,i.element.style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1;var r=qE(i.x,i.y,i.scale);i.element.style[this.transformStyle]=r,i._saveCoordinates(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.translateAxis=function(t,e){this[t]+=e,this.refresh()},e.prototype.scaleTo=function(t){this.scale=t,this.refresh()},e.prototype.scaleWith=function(t){this.scale*=t,this.refresh()},e.prototype.translate=function(t){this.x+=t.x,this.y+=t.y,this.refresh()},e.prototype.moveAxis=function(t,e){this[t]=e,this.refresh()},e.prototype.moveTo=function(t){NE(this,t),this.refresh()},e.prototype.refresh=function(){var t,e=this,i=e.x,r=e.y;e.round&&(i=Math.round(i),r=Math.round(r)),(t=qE(i,r,e.scale))!==e.coordinates&&(e.element.style[this.transformStyle]=t,e._saveCoordinates(t),e.trigger(jE))},e.prototype._saveCoordinates=function(t){this.coordinates=t},e}(vE),$E=bc,KE=function(t){function e(e,i){t.call(this,e,i),this._pan=ZC(this._pan,this),this.surface=mb.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new GE(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.surface.destroy()},e.prototype._reset=function(){t.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},e.prototype._initRoot=function(){this._root=new $E,this.surface.draw(this._root)},e.prototype._beforeReset=function(){this.surface.clear(),this._initRoot()},e.prototype._resize=function(){this.surface.size(this.map.size())},e.prototype._readData=function(){var e=t.prototype._readData.call(this);return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e},e.prototype._load=function(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new XE(this.map,this.options.style,this));for(var e=new $E,i=0;i<t.length;i++){var r=this._loader.parse(t[i]);r&&e.append(r)}this._root.clear(),this._root.append(e)},e.prototype.shapeCreated=function(t){var e=!1;if(t instanceof mc&&this.map.options.renderPointsAsMarkers&&(e=$a(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},e.prototype.featureCreated=function(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)},e.prototype._createMarker=function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},e.prototype._clearMarkers=function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},e.prototype._pan=function(){this._panning||(this._panning=!0,this.surface.suspendTracking())},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},e.prototype._translateSurface=function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))},e.prototype._handler=function(t){var e=this;return function(i){if(i.element){var r={layer:e,layerIndex:(e.map.layers||[]).indexOf(e),shape:i.element,shapeIndex:(e._data||[]).indexOf(i.element.dataItem),originalEvent:i.originalEvent};e.map.trigger(t,r)}}},e.prototype._activate=function(){t.prototype._activate.call(this),this._panHandler=ZC(this._pan,this),this.map.bind("pan",this.panHandler)},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},e}(AE);hl(KE,{autoBind:!0,zIndex:100});var XE=function(t){function e(e,i,r){t.call(this),this.observer=r,this.locator=e,this.style=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=new $E,i=!0;return"Feature"===t.type?(i=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),i&&e.children.length<2&&(e=e.children[0]),e},e.prototype._shapeCreated=function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},e.prototype._featureCreated=function(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},e.prototype._loadGeometryTo=function(t,e,i){var r,n,o=this,s=e.coordinates;switch(e.type){case"LineString":n=this._loadPolygon(t,[s],i),this._setLineFill(n);break;case"MultiLineString":for(r=0;r<s.length;r++)n=o._loadPolygon(t,[s[r]],i),o._setLineFill(n);break;case"Polygon":this._loadPolygon(t,s,i);break;case"MultiPolygon":for(r=0;r<s.length;r++)o._loadPolygon(t,s[r],i);break;case"Point":this._loadPoint(t,s,i);break;case"MultiPoint":for(r=0;r<s.length;r++)o._loadPoint(t,s[r],i)}},e.prototype._setLineFill=function(t){var e=t.segments;(e.length<4||!e[0].anchor().equals(tl(e).anchor()))&&(t.options.fill=null)},e.prototype._loadShape=function(t,e){return this._shapeCreated(e)||t.append(e),e},e.prototype._loadPolygon=function(t,e,i){var r=this._buildPolygon(e);return r.dataItem=i,this._loadShape(t,r)},e.prototype._buildPolygon=function(t){for(var e=new(t.length>1?ac:sc)(this.style),i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++){var n=this.locator.locationToView(kC.fromLngLat(t[i][r]));0===r?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y)}return e},e.prototype._loadPoint=function(t,e,i){var r=kC.fromLngLat(e),n=this.locator.locationToView(r),o=new uc(n,10),s=new mc(o,this.style);return s.dataItem=i,s.location=r,this._loadShape(t,s)},e}(Zs),YE=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){var e=this;if(this._data=t,this.surface.clear(),0!==t.length){var i=this.options,r=Ls(i.valueField),n=t.slice(0);n.sort((function(t,e){return r(e)-r(t)}));for(var o,s=this._scaleType(),a=Ls(this.options.locationField),l=0;l<n.length;l++){var h=n[l],c=a(h),p=r(h);if($a(c)&&$a(p)){o||(o=new s([0,p],[i.minSize,i.maxSize])),c=kC.create(c);var u=e.map.locationToView(c),d=o.map(p),f=e._createSymbol({center:u,size:d,style:i.style,dataItem:h,location:c});f.dataItem=h,f.location=c,f.value=p,e._drawSymbol(f)}}}},e.prototype._scaleType=function(){var t=this.options.scale;return bs(t)?t:JE[t]},e.prototype._createSymbol=function(t){var e=this.options.symbol;return bs(e)||(e=QE[e]),e(t)},e.prototype._drawSymbol=function(t){var e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)},e}(KE);hl(YE,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var ZE=function(t){function e(e,i){t.call(this),this._domain=e,this._range=i;var r=Math.sqrt(e[1])-Math.sqrt(e[0]),n=i[1]-i[0];this._ratio=n/r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e},e}(Zs),JE={sqrt:ZE},QE={circle:function(t){var e=new uc(t.center,t.size/2);return new mc(e,t.style)},square:function(t){var e=new sc(t.style),i=t.size/2,r=t.center;return e.moveTo(r.x-i,r.y-i).lineTo(r.x+i,r.y-i).lineTo(r.x+i,r.y+i).lineTo(r.x-i,r.y+i).close(),e}},tT="click",eT="mouseenter",iT="mouseleave",rT=Object.assign,nT=".k-marker",oT=document,sT=Math,aT=function(t){function e(e,i){t.call(this,e,i),this._markerClickHandler=ZC(this._markerClick,this),JC(this.element,tT,nT,this._markerClickHandler),this.items=[],this._load(this._readData())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),eE(this.element,tT,this._markerClickHandler),this.clear()},e.prototype.add=function(t){if(!cs(t))return this._addOne(t);for(var e=0;e<t.length;e++)this._addOne(t[e])},e.prototype.remove=function(t){t.destroy();var e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)},e.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},e.prototype.update=function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var i={marker:t,layer:this};this.map.trigger("markerActivate",i)}},e.prototype._reset=function(){t.prototype._reset.call(this);for(var e=this.items,i=0;i<e.length;i++)this.update(e[i])},e.prototype.bind=function(t,e){var i=lT.create(t,this.options);i.dataItem=e;var r={marker:i,layer:this};if(!this.map.trigger("markerCreated",r))return this.add(i),i},e.prototype._addOne=function(t){var e=lT.create(t,this.options);return e.addTo(this),e},e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){this._data=t,this.clear();for(var e=Ls(this.options.locationField),i=Ls(this.options.titleField),r=0;r<t.length;r++){var n=t[r];this.bind({location:e(n),title:i(n)},n)}},e.prototype._markerClick=function(t){var e=this.map.layers||[],i=t.target._kendoNode,r={layer:this,layerIndex:e.indexOf(this),marker:i,markerIndex:(this.items||[]).indexOf(i),originalEvent:t};this.map.trigger("markerClick",r)},e.prototype._markerMouseEnter=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)},e.prototype._markerMouseLeave=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)},e.prototype._createMarkerEventArgs=function(t){var e=t.marker;return rT({},{layer:this,layerIndex:this.map.layers.indexOf(this),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)},e}(AE);hl(aT,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title"});var lT=function(t){function e(e){t.call(this),this.options=e||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.layer=null,this.unbindEvents(),this.hide()},e.prototype.addTo=function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},e.prototype.location=function(t){return t?(this.options.location=kC.create(t).toArray(),this.layer&&this.layer.update(this),this):kC.create(this.options.location)},e.prototype.showAt=function(t){this.render(),this.element.style.left=GC(sT.round(t.x)),this.element.style.top=GC(sT.round(t.y)),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},e.prototype.hide=function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},e.prototype.bindEvents=function(){this.element&&(this._mouseEnterHandler=ZC(this._mouseEnter,this),JC(this.element,eT,nT,this._mouseEnterHandler),this._mouseLeaveHandler=ZC(this._mouseLeave,this),JC(this.element,iT,nT,this._mouseLeaveHandler))},e.prototype.unbindEvents=function(){this.element&&(eE(this.element,eT,this._mouseEnterHandler),eE(this.element,iT,this._mouseLeaveHandler))},e.prototype.render=function(){if(!this.element){var t=this.options,e=this.layer,i=oT.createElement("span");ps(i,"k-marker k-icon k-i-marker-"+qC(t.shape||"pin")),i.setAttribute("title",t.title);var r=t.attributes||{};Object.keys(r).forEach((function(t){i.setAttributett(t,r[t])})),i._kendoNode=this,i.style.zIndex=t.zIndex,this.element=i,e&&e.element.appendChild(this.element),this.bindEvents(),this.renderTooltip()}},e.prototype._mouseEnter=function(t){var e=this._createEventArgs(t);this.layer._markerMouseEnter(e)},e.prototype._mouseLeave=function(t){var e=this._createEventArgs(t);this.layer._markerMouseLeave(e)},e.prototype._createEventArgs=function(t){return{marker:this,originalEvent:t}},e.prototype.renderTooltip=function(){},e.create=function(t,i){return t instanceof e?t:new e(_s({},i,t))},e}(Zs),hT=Object.assign;function cT(t){window.requestAnimationFrame(t)}var pT=function(t){function e(){t.call(this);var e=this;e._tickProxy=ZC(e._tick,e),e._started=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){},e.prototype.done=function(){},e.prototype.onEnd=function(){},e.prototype.onCancel=function(){},e.prototype.start=function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,cT(this._tickProxy)))},e.prototype.enabled=function(){return!0},e.prototype.cancel=function(){this._started=!1,this.onCancel()},e.prototype._tick=function(){var t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):cT(t._tickProxy))},e}(Zs),uT=function(t){function e(e){t.call(this),hT(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.done=function(){return this.timePassed()>=this.duration},e.prototype.timePassed=function(){return Math.min(this.duration,hE()-this.startDate)},e.prototype.moveTo=function(t){var e=this,i=e.movable;e.initial=i[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=hE(),e.start()},e.prototype._easeProxy=function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}},e.easeOutExpo=function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},e}(pT),dT=Object.assign,fT=function(t){t.preventDefault()},vT=800,mT=0,gT="press",yT="hold",bT="select",wT="start",xT="move",_T="end",kT="cancel",ST="tap",CT="doubleTap",ET="release",TT="gesturechange",AT="gestureend",MT="gesturetap",OT={api:0,touch:0,mouse:9,pointer:9};function DT(t){var e,i,r,n=YC(),o=[],s=t.originalEvent||t,a=t.currentTarget,l=0;if(t.api)o.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"});else if(t.type.match(/touch/))for(e=(i=s?s.changedTouches:[]).length;l<e;l++)r=i[l],o.push({location:r,event:t,target:r.target,currentTarget:a,id:r.identifier,type:"touch"});else n.pointers||n.msPointers?o.push({location:s,event:t,target:t.target,currentTarget:a,id:s.pointerId,type:"pointer"}):o.push({id:1,event:t,target:t.target,currentTarget:a,location:t,type:"mouse"});return o}var PT=function(t){function e(e,i){t.call(this);var r=this;r.support=YC(),r.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,r.axis=e,r._updateLocationData(i),r.startLocation=r.location,r.velocity=r.delta=0,r.timeStamp=hE()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(t){var e=this,i=t["page"+e.axis],r=hE(),n=r-e.timeStamp||1;!i&&this.invalidZeroEvents||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/n,e.timeStamp=r)},e.prototype._updateLocationData=function(t){var e=this,i=e.axis;e.location=t["page"+i],e.client=t["client"+i],e.screen=t["screen"+i]},e}(Zs),RT=function(t){function e(e,i,r){t.call(this),dT(this,{x:new PT("X",r.location),y:new PT("Y",r.location),type:r.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||OT[r.type],userEvents:e,target:i,currentTarget:r.currentTarget,initialTouch:r.target,id:r.id,pressEvent:r,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.press=function(){this._holdTimeout=setTimeout(ZC(this._hold,this),this.userEvents.minHold),this._trigger(gT,this.pressEvent)},e.prototype._tap=function(t){var e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(ST,t):e._trigger(CT,t),e.userEvents._clicks=0}),300))},e.prototype._hold=function(){this._trigger(yT,this.pressEvent)},e.prototype.move=function(t){var e=this,i="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!i){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(LT.current&&LT.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(xT,t)}},e.prototype.end=function(t){this.endTime=hE(),this._finished||(this._finished=!0,this._trigger(ET,t),this._moved?this._trigger(_T,t):this.useClickAsTap||(this.supportDoubleTap?this._tap(t):this._trigger(ST,t)),clearTimeout(this._holdTimeout),this.dispose())},e.prototype.dispose=function(){var t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var e=t.indexOf(this);t.splice(e,1)},e.prototype.skip=function(){this.dispose()},e.prototype.cancel=function(){this.dispose()},e.prototype.isMoved=function(){return this._moved},e.prototype._start=function(t){clearTimeout(this._holdTimeout),this.startTime=hE(),this._moved=!0,this._trigger(wT,t)},e.prototype._trigger=function(t,e){var i=this,r=e.event,n={touch:i,x:i.x,y:i.y,target:i.target,event:r};i.userEvents.notify(t,n)&&r.preventDefault()},e.prototype._withinIgnoreThreshold=function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold},e}(Zs);function IT(t){for(var e=XC(navigator.userAgent).up.split(" "),i=0,r=e.length;i<r;i++)t(e[i])}var LT=function(t){function e(e,i){t.call(this);var r,n=this,o=YC();this.support=o,i=i||{},this.options=i,r=n.filter=i.filter,n.threshold=i.threshold||mT,n.minHold=i.minHold||vT,n.touches=[],n._maxTouches=i.multiTouch?2:1,n.allowSelection=i.allowSelection,n.captureUpIfMoved=i.captureUpIfMoved,n.useClickAsTap=!i.fastTap&&!o.delayedClick(),n._clicks=0,n.supportDoubleTap=i.supportDoubleTap;var s=!o.touch||o.mouseAndTouchPresent;if(dT(n,{element:e,surface:i.global&&s?e.ownerDocument.documentElement:i.surface||e,stopPropagation:i.stopPropagation,pressed:!1}),this._surfaceMoveHandler=ZC(this._move,this),JC(n.surface,aE("move"),this._surfaceMoveHandler),this._surfaceEndHandler=ZC(this._end,this),JC(n.surface,aE("up cancel"),this._surfaceEndHandler),this._elementStartHandler=ZC(this._start,this),JC(e,aE("down"),r,this._elementStartHandler),n.useClickAsTap&&(this._elementClickHandler=ZC(this._click,this),JC(e,aE("click"),r,this._elementClickHandler)),o.pointers||o.msPointers)if(o.browser.version<11){var a="pinch-zoom double-tap-zoom";e.style["-ms-touch-action"]=i.touchAction&&"none"!==i.touchAction?a+" "+i.touchAction:a}else e.style["touch-action"]=i.touchAction||"none";if(i.preventDragEvent&&(this._elementDragStartHandler=fT,JC(e,aE("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=ZC(this._select,this),JC(e,aE("mousedown"),r,this._elementSelectHandler),n.captureUpIfMoved&&o.eventCapture){var l=n.surface,h=ZC(n.preventIfMoving,n);IT((function(t){l.addEventListener(t,h,!0)}))}n.bind([gT,yT,ST,CT,wT,xT,_T,ET,kT,"gesturestart",TT,AT,MT,bT],i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventIfMoving=function(t){this._isMoved()&&t.preventDefault()},e.prototype.destroy=function(){var t=this,e=this.options,i=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&this.support.eventCapture){var r=t.surface;IT((function(e){r.removeEventListener(e,t.preventIfMoving)}))}eE(t.surface,aE("move"),this._surfaceMoveHandler),eE(t.surface,aE("up cancel"),this._surfaceEndHandler),eE(i,aE("down"),this._elementStartHandler),t.useClickAsTap&&eE(i,aE("click"),this._elementClickHandler),e.preventDragEvent&&eE(i,aE("dragstart"),this._elementDragStartHandler),eE(i,aE("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},e.prototype.capture=function(){e.current=this},e.prototype.cancel=function(){this._disposeAll(),this.trigger(kT)},e.prototype.notify=function(t,e){var i,r,n,o,s,a,l,h,c=this.touches,p=t;if(this._isMultiTouch()){switch(p){case xT:p=TT;break;case _T:p=AT;break;case ST:p=MT}dT(e,{touches:c},(i=c[0],r=c[1],n=i.x.location,o=i.y.location,s=r.x.location,a=r.y.location,l=n-s,h=o-a,{center:{x:(n+s)/2,y:(o+a)/2},distance:Math.sqrt(l*l+h*h)}))}return this.trigger(p,dT(e,{type:p}))},e.prototype.press=function(t,e,i){this._apiCall("_start",t,e,i)},e.prototype.move=function(t,e){this._apiCall("_move",t,e)},e.prototype.end=function(t,e){this._apiCall("_end",t,e)},e.prototype._isMultiTouch=function(){return this.touches.length>1},e.prototype._maxTouchesReached=function(){return this.touches.length>=this._maxTouches},e.prototype._disposeAll=function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},e.prototype._isMoved=function(){return zs(this.touches,(function(t){return t.isMoved()})).length},e.prototype._select=function(t){this.allowSelection&&!this.trigger(bT,{event:t})||t.preventDefault()},e.prototype._start=function(t){var i,r,n=this,o=0,s=n.filter,a=DT(t),l=a.length,h=t.which;if(!(h&&h>1||n._maxTouchesReached()))for(e.current=null,n.currentTarget=t.currentTarget,n.stopPropagation&&t.stopPropagation();o<l&&!n._maxTouchesReached();o++)r=a[o],(i=s?r.currentTarget:n.element)&&0===i.length||(r=new RT(n,i,r),n.touches.push(r),r.press(),n._isMultiTouch()&&n.notify("gesturestart",{}))},e.prototype._move=function(t){this._eachTouch("move",t)},e.prototype._end=function(t){this._eachTouch("end",t)},e.prototype._click=function(t){var e={touch:{initialTouch:t.target,target:t.currentTarget,endTime:hE(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:t.currentTarget,event:t,type:"tap"};this.trigger("tap",e)&&t.preventDefault()},e.prototype._eachTouch=function(t,e){var i,r,n,o,s={},a=DT(e),l=this.touches;for(i=0;i<l.length;i++)s[(r=l[i]).id]=r;for(i=0;i<a.length;i++)(o=s[(n=a[i]).id])&&o[t](n)},e.prototype._apiCall=function(t,e,i,r){this[t]({api:!0,pageX:e,pageY:i,clientX:e,clientY:i,target:r||this.element,stopPropagation:cE,preventDefault:cE})},e.defaultThreshold=function(t){mT=t},e.minHold=function(t){vT=t},e}(vE),zT=Object.assign,BT=Math.abs,NT="change",jT="scroll",FT=function(t){function e(e){t.call(this,e);var i=this;zT(i,e),i.userEvents.bind("gestureend",i.start.bind(this)),i.tapCapture.bind("press",i.cancel.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enabled=function(){return this.movable.scale<this.dimensions.minScale},e.prototype.done=function(){return this.dimensions.minScale-this.movable.scale<.01},e.prototype.tick=function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},e.prototype.onEnd=function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)},e}(pT),VT=function(t){function e(e){t.call(this);var i=this;zT(i,e,{transition:new uT({axis:e.axis,movable:e.movable,onEnd:function(){i._end()}})}),i.tapCapture.bind("press",(function(){i.cancel()})),i.userEvents.bind("end",ZC(i.start,i)),i.userEvents.bind("gestureend",ZC(i.start,i)),i.userEvents.bind("tap",ZC(i.onEnd,i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onCancel=function(){this.transition.cancel()},e.prototype.freeze=function(t){this.cancel(),this._moveTo(t)},e.prototype.onEnd=function(){var t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()},e.prototype.done=function(){return BT(this.velocity)<1},e.prototype.start=function(e){var i,r=this;r.dimension.enabled&&(r.paneAxis.outOfBounds()?r.transition._started?(r.transition.cancel(),r.velocity=Math.min(e.touch[r.axis].velocity*r.velocityMultiplier,55),t.prototype.start.call(this)):r._snapBack():(i=2===e.touch.id?0:e.touch[r.axis].velocity,r.velocity=Math.max(Math.min(i*r.velocityMultiplier,55),-55),r.tapCapture.captureNext(),t.prototype.start.call(this)))},e.prototype.tick=function(){var t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,r=t.velocity*=i,n=t.movable[t.axis]+r;!t.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,n)},e.prototype._end=function(){this.tapCapture.cancelCapture(),this.end()},e.prototype._snapBack=function(){var t=this,e=t.dimension,i=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(i)},e.prototype._moveTo=function(t){this.transition.moveTo({location:t,duration:500,ease:uT.easeOutExpo})},e}(pT),HT=function(t){function e(e){t.call(this,e);zT(this,e,{origin:{},destination:{},offset:{}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){this._updateCoordinates(),this.moveTo(this.origin)},e.prototype.done=function(){return BT(this.offset.y)<5&&BT(this.offset.x)<5},e.prototype.onEnd=function(){this.moveTo(this.destination),this.callback&&this.callback.call()},e.prototype.setCoordinates=function(t,e){this.offset={},this.origin=t,this.destination=e},e.prototype.setCallback=function(t){t&&bs(t)?this.callback=t:t=void 0},e.prototype._updateCoordinates=function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},e}(pT),WT=function(t){function e(e){t.call(this);var i=this,r="x"===e.axis,n=HC('<div class="km-touch-scrollbar km-'+(r?"horizontal":"vertical")+'-scrollbar" />');zT(i,e,{element:n,elementSize:0,movable:new GE(n),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:r?"width":"height"}),i.scrollMovable.bind(NT,i.refresh.bind(i)),i.container.appendChild(n),e.alwaysVisible&&i.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.refresh=function(){var t=this,e=t.axis,i=t.dimension,r=i.size,n=t.scrollMovable,o=r/i.total,s=Math.round(-n[e]*o),a=Math.round(r*o);this.element.style.display=o>=1?"none":"",s+a>r?a=r-s:s<0&&(a+=s,s=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,s)},e.prototype.show=function(){this.element.style.opacity=.7,this.element.style.visibility="visible"},e.prototype.hide=function(){this.alwaysVisible||(this.element.style.opacity=0)},e}(Zs),UT=function(t){function e(e,i){t.call(this);var r=this;this.element=e,this._initOptions(i);var n=function(t){var e=$C(t);return e.ios||e.android}(navigator.userAgent);r._native=r.options.useNative&&n;var o=HC('<div class="km-scroll-header"/>');if(r._native)return ps(e,"km-native-scroller"),UC(o,e),void zT(r,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",ps(e,"km-scroll-wrapper"),function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(e,HC('<div class="km-scroll-container"/>')),UC(o,e);var s=e.children[1],a=new FE(e),l=new GE(s),h=new HE({element:s,container:e,forcedEnabled:r.options.zoom}),c=this.options.avoidScrolling,p=new LT(e,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:r.options.zoom,supportDoubleTap:r.options.supportDoubleTap,start:function(t){h.refresh();var e=BT(t.x.velocity),i=BT(t.y.velocity),n=2*e>=i,o=function(t,e){return t===e||function(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}(t,e)}(r.fixedContainer,t.event.target),s=2*i>=e;!o&&!c(t)&&r.enabled&&(h.x.enabled&&n||h.y.enabled&&s)?p.capture():p.cancel()}}),u=new UE({movable:l,dimensions:h,userEvents:p,elastic:r.options.elastic}),d=new FT({movable:l,dimensions:h,userEvents:p,tapCapture:a}),f=new HT({moveTo:function(t){r.scrollTo(t.x,t.y)}});l.bind(NT,(function(){r.scrollTop=-l.y,r.scrollLeft=-l.x,r.trigger(jT,{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})})),r.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),JC(e,"DOMMouseScroll mousewheel",this._wheelScrollHandler)),zT(r,{movable:l,dimensions:h,zoomSnapBack:d,animatedScroller:f,userEvents:p,pane:u,tapCapture:a,pulled:!1,enabled:!0,scrollElement:s,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),r._initAxis("x"),r._initAxis("y"),r._wheelEnd=function(){r._wheel=!1,r.userEvents.end(0,r._wheelY)},h.refresh(),r.options.pullToRefresh&&r._initPullToRefresh()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype._wheelScroll=function(t){if(!t.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=function(t){var e,i=t.originalEvent||t,r=i.wheelDeltaY;return i.wheelDelta?(void 0===r||r)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e}(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}},e.prototype.makeVirtual=function(){this.dimensions.y.makeVirtual()},e.prototype.virtualSize=function(t,e){this.dimensions.y.virtualSize(t,e)},e.prototype.height=function(){return this.dimensions.y.size},e.prototype.scrollHeight=function(){return this.scrollElement.scrollHeight},e.prototype.scrollWidth=function(){return this.scrollElement.scrollWidth},e.prototype._resize=function(){this._native||this.contentResized()},e.prototype.setOptions=function(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()},e.prototype.reset=function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},e.prototype.contentResized=function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},e.prototype.zoomOut=function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.scrollTo=function(t,e){this._native?(this.scrollElement.scrollLeft(BT(t)),this.scrollElement.scrollTop(BT(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},e.prototype.animatedScrollTo=function(t,e,i){var r,n;this._native?this.scrollTo(t,e):(r={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(r,n),this.animatedScroller.setCallback(i),this.animatedScroller.start())},e.prototype.pullHandled=function(){},e.prototype.destroy=function(){var t=this.element;eE(t,"DOMMouseScroll mousewheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},e.prototype._scale=function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},e.prototype._initPullToRefresh=function(){},e.prototype._dragEnd=function(){},e.prototype._paneChange=function(){},e.prototype._initAxis=function(t){var e=this,i=e.movable,r=e.dimensions[t],n=e.tapCapture,o=e.pane[t],s=new WT({axis:t,movable:i,dimension:r,container:e.element,alwaysVisible:e.options.visibleScrollHints});r.bind(NT,(function(){s.refresh()})),o.bind(NT,(function(){s.show()})),e[t+"inertia"]=new VT({axis:t,paneAxis:o,movable:i,tapCapture:n,userEvents:e.userEvents,dimension:r,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){s.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})},e}(vE);hl(UT,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),lE(UT,["pull",jT,"resize"]);var qT=function(t,e){void 0===e&&(e={}),this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)};qT.prototype.notify=function(t,e){this.widget&&this.widget.trigger(t,e)};const GT=qT;var $T=Math,KT=$T.min,XT=$T.pow,YT=Kl,ZT="marker",JT="DOMMouseScroll mousewheel",QT={bubble:YE,shape:KE,tile:IE};function tA(t){var e=[];if(t)for(var i=qC(t).split("-"),r=0;r<i.length;r++)e.push("k-pos-"+i[r]);return e.join(" ")}QT.marker=aT;var eA=function(t){function e(e,i,r,n){void 0===i&&(i={}),void 0===r&&(r={}),void 0===n&&(n={}),t.call(this),this._init(e,i,r,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),cs(this.markers)?this.markers.forEach((function(t){t.destroy()})):this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();eE(this.element,JT,this._mousewheelHandler),t.prototype.destroy.call(this)},e.prototype._init=function(t,e,i,r){void 0===e&&(e={}),void 0===i&&(i={}),void 0===r&&(r={}),this.support=YC(),this.context=r,this.initObserver(r),this.initServices(r),this._initOptions(e),this._setEvents(e),this.crs=new FC,this._initElement(t),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheelHandler=this._mousewheel.bind(this),JC(this.element,JT,this._mousewheelHandler)},e.prototype._initOptions=function(t){this.options=_s({},this.options,t)},e.prototype._initElement=function(t){this.element=t,ps(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),WC(t);var e=HC("<div />");this.element.appendChild(e)},e.prototype.initServices=function(t){void 0===t&&(t={}),this.widgetService=new GT(this,t)},e.prototype.initObserver=function(t){void 0===t&&(t={}),this.observers=[],this.addObserver(t.observer)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(e,i){void 0===i&&(i={}),i.sender=this;for(var r=this.observers,n=!1,o=0;o<r.length;o++)r[o].trigger(e,i)&&(n=!0);return n||t.prototype.trigger.call(this,e,i),n},e.prototype._notifyObserver=function(t,e){void 0===e&&(e={}),e.sender=this;for(var i=this.observers,r=!1,n=0;n<i.length;n++)i[n].trigger(t,e)&&(r=!0);return r},e.prototype.zoom=function(t){var e,i=this.options;if($a(t)){var r=$T.round(el(t,i.minZoom,i.maxZoom));i.zoom!==r&&(i.zoom=r,this._reset()),e=this}else e=i.zoom;return e},e.prototype.center=function(t){var e;return t?(this.options.center=kC.create(t).toArray(),this._reset(),e=this):e=kC.create(this.options.center),e},e.prototype.extent=function(t){var e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e},e.prototype.setOptions=function(t){void 0===t&&(t={});var e=this.element;this.destroy(),WC(e),this._init(e,t,{},this.context),this._reset()},e.prototype.locationToLayer=function(t,e){var i=!this.options.wraparound,r=kC.create(t);return this.crs.toPoint(r,this._layerSize(e),i)},e.prototype.layerToLocation=function(t,e){var i=!this.options.wraparound,r=YT.create(t);return this.crs.toLocation(r,this._layerSize(e),i)},e.prototype.locationToView=function(t){var e=kC.create(t),i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(i.scale(-1))},e.prototype.viewToLocation=function(t,e){var i=this.locationToLayer(this._getOrigin(),e),r=YT.create(t).clone().translateWith(i);return this.layerToLocation(r,e)},e.prototype.eventOffset=function(t){var e,i,r=Xa(this.element);if(t.x&&t.x.location||t.y&&t.y.location)e=t.x.location-r.left,i=t.y.location-r.top;else{var n=t.originalEvent||t;e=sl(n.pageX,n.clientX)-r.left,i=sl(n.pageY,n.clientY)-r.top}return new Kl(e,i)},e.prototype.eventToView=function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},e.prototype.eventToLayer=function(t){return this.locationToLayer(this.eventToLocation(t))},e.prototype.eventToLocation=function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},e.prototype.viewSize=function(){var t=this.element,e=this._layerSize(),i=t.clientWidth;return this.options.wraparound||(i=KT(e,i)),{width:i,height:KT(e,t.clientHeight)}},e.prototype.exportVisual=function(){return this._reset(),!1},e.prototype._setOrigin=function(t,e){var i,r=this.viewSize(),n=this._origin=kC.create(t);return(i=this.locationToLayer(n,e)).x+=r.width/2,i.y+=r.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this},e.prototype._getOrigin=function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},e.prototype._setExtent=function(t){var e=TE.create(t),i=e.se.clone();this.options.wraparound&&i.lng<0&&t.nw.lng>0&&(i.lng=180+(180+i.lng));var r=new TE(e.nw,i);this.center(r.center());var n,o=this.element.clientWidth,s=this.element.clientHeight;for(n=this.options.maxZoom;n>=this.options.minZoom;n--){var a=this.locationToLayer(r.nw,n),l=this.locationToLayer(r.se,n),h=$T.abs(l.x-a.x),c=$T.abs(l.y-a.y);if(h<=o&&c<=s)break}this.zoom(n)},e.prototype._getExtent=function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var r=this.layerToLocation(e);return new TE(t,r)},e.prototype._zoomAround=function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},e.prototype._initControls=function(){var t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))},e.prototype._createControlElement=function(t,e){var i=t.position||e,r="."+tA(i).replace(" ","."),n=this.element.querySelector(".k-map-controls"+r)||[];if(0===n.length){var o=document.createElement("div");ps(o,"k-map-controls "+tA(i)),n=o,this.element.appendChild(n)}var s=document.createElement("div");return n.appendChild(s),s},e.prototype._createAttribution=function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new gE(e,t)},e.prototype._createNavigator=function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new wE(e,t);this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)},e.prototype._navigatorPan=function(t){var e=this.scroller,i=e.scrollLeft+t.x,r=e.scrollTop-t.y,n=this._virtualSize,o=this.element.clientWidth,s=this.element.clientHeight;i=el(i,n.x.min,n.x.max-o),r=el(r,n.y.min,n.y.max-s),this.scroller.one("scroll",ZC(this._scrollEnd,this)),this.scroller.scrollTo(-i,-r)},e.prototype._navigatorCenter=function(){this.center(this.options.center)},e.prototype._createZoomControl=function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new kE(e,t);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)},e.prototype._zoomControlChange=function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},e.prototype._initScroller=function(){var t=this.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new UT(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",ZC(this._scroll,this)),i.bind("scrollEnd",ZC(this._scrollEnd,this)),i.userEvents.bind("gesturestart",ZC(this._scaleStart,this)),i.userEvents.bind("gestureend",ZC(this._scale,this)),i.userEvents.bind("doubleTap",ZC(this._doubleTap,this)),i.userEvents.bind("tap",ZC(this._tap,this)),this.scrollElement=i.scrollElement},e.prototype._initLayers=function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var r=t[i],n=this._createLayer(r);e.push(n)}},e.prototype._createLayer=function(t){var e=t.type||"shape",i=this.options.layerDefaults[e],r=_s({},e===ZT?this.options.markerDefaults:i,t),n=new(0,QT[e])(this,r);return e===ZT&&(this.markers=n),n},e.prototype._initMarkers=function(){(this.options.layers||[]).filter((function(t){return t&&t.type===ZT})).length>0||(this.markers=new aT(this,this.options.markerDefaults),this.markers.add(this.options.markers))},e.prototype._scroll=function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,r=new Kl(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=r.x,e.y+=r.y,this._scrollOffset=r,this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},e.prototype._scrollEnd=function(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=hE(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))},e.prototype._panComplete=function(){return hE()-(this._panEndTimestamp||0)>50},e.prototype._scaleStart=function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},e.prototype._scale=function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),r=new Kl(t.center.x,t.center.y),n=this.viewToLocation(r,i),o=this.locationToLayer(n,i).translate(-r.x,-r.y);this._zoomAround(o,i),this.trigger("zoomEnd",{originalEvent:t})},e.prototype._scaleToZoom=function(t){var e=this._layerSize()*t/this.options.minSize,i=$T.log(e)/$T.log(2);return $T.round(i)},e.prototype._reset=function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},e.prototype._resetScroller=function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,r=this._layerSize(),n=this.extent().nw,o=this.locationToLayer(n).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();var s=this.zoom();t.dimensions.forcedMinScale=XT(2,this.options.minZoom-s),t.dimensions.maxScale=XT(2,this.options.maxZoom-s);var a={min:-o.x,max:r-o.x},l={min:-o.y,max:r-o.y};if(this.options.wraparound&&(a.max=20*r,a.min=-a.max),!1===this.options.pannable){var h=this.viewSize();a.min=l.min=0,a.max=h.width,l.max=h.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(a.min,a.max),i.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}},e.prototype._renderLayers=function(){},e.prototype._layerSize=function(t){var e=sl(t,this.options.zoom);return this.options.minSize*XT(2,e)},e.prototype._tap=function(t){if(this._panComplete()){var e=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}},e.prototype._doubleTap=function(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+1,i=this.eventOffset(t),r=this.viewToLocation(i),n=this.locationToLayer(r,e).translate(-i.x,-i.y);this._zoomAround(n,e),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._mousewheel=function(t){t.preventDefault();var e=Ys(t)>0?-1:1,i=this.options,r=this.zoom(),n=el(r+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&n!==r&&!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t),s=this.viewToLocation(o),a=this.locationToLayer(s,n).translate(-o.x,-o.y);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:t})}},e}(vE);hl(eA,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),lE(eA,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const iA=eA;var rA=1.5,nA=.4,oA="#000",sA="Arial, Helvetica, sans-serif",aA="12px "+sA,lA="16px "+sA,hA="transparent",cA="#fff",pA=function(){return{icon:{border:{width:1}},label:{font:aA,padding:3},line:{length:10,width:2},visible:!0}},uA=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:cA,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}},dA=function(){return{gap:rA,spacing:nA,target:{color:"#ff0000"}}},fA=function(){return{gap:.5,line:{color:oA,width:1},spacing:nA}},vA=function(t){return{visible:!0,labels:{font:"11px Arial, Helvetica, sans-serif"},overlay:t.gradients?{}:{gradient:"none"},area:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},rangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalRangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},bar:{gap:rA,spacing:nA},boxPlot:uA(),bubble:{border:{width:0},labels:{background:hA},opacity:.6},bullet:dA(),candlestick:{border:{_brightness:.8,width:1},downColor:cA,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:oA,width:1},spacing:.3},column:{gap:rA,spacing:nA},heatmap:{labels:{color:"",background:hA,visible:!0},highlight:{border:{width:0}}},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},donut:{margin:1},funnel:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},horizontalWaterfall:fA(),line:{width:2},notes:pA(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3},radarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},radarLine:{markers:{visible:!1},width:2},polarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},polarLine:{markers:{visible:!1},width:2},rangeBar:{gap:rA,spacing:nA},rangeColumn:{gap:rA,spacing:nA},scatterLine:{width:1},verticalArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalBoxPlot:uA(),verticalBullet:dA(),verticalLine:{width:2},waterfall:fA()}},mA=function(t){return void 0===t&&(t={}),{axisDefaults:{labels:{font:aA},notes:pA(),title:{font:lA,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:vA(t),title:{font:lA},legend:{labels:{font:aA}}}};class gA{constructor(){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"store",{})}push(t){this.store=t}set(t,e){for(var i=this.store,r=t.split("."),n=r.shift();r.length>0;)i=i[n]=i[n]||{},n=r.shift();i[n]=e}}function yA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var bA=t=>"".concat(t.fontSize," ").concat(t.fontFamily);class wA extends gA{constructor(){super(...arguments),yA(this,"loaded",!1),yA(this,"element",null),yA(this,"currentAccentColor",void 0)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.readTheme()||this.readDefaultTheme(),this.loaded=!0}readTheme(){this.createElement();var t=this.queryColor("accent"),e=this.queryColor("accent-contrast");if(this.loaded&&this.currentAccentColor&&this.currentAccentColor===t)return!0;var i=t!==e;try{i&&(this.currentAccentColor=t,this.push(mA()),this.setColors(),this.setFonts(),this.setSeriesColors())}finally{this.destroyElement()}return i}readDefaultTheme(){this.push(Object.assign({},mA(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]}))}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--accent"></div>\n    <div class="k-var--accent-contrast"></div>\n    <div class="k-var--base"></div>\n    <div class="k-var--background"></div>\n\n    <div class="k-var--normal-background"></div>\n    <div class="k-var--normal-text-color"></div>\n    <div class="k-var--hover-background"></div>\n    <div class="k-var--hover-text-color"></div>\n    <div class="k-var--selected-background"></div>\n    <div class="k-var--selected-text-color"></div>\n    <div class="k-var--chart-error-bars-background"></div>\n    <div class="k-var--chart-notes-background"></div>\n    <div class="k-var--chart-notes-border"></div>\n    <div class="k-var--chart-notes-lines"></div>\n    <div class="k-var--chart-crosshair-background"></div>\n\n    <div class="k-var--chart-inactive"></div>\n    <div class="k-var--chart-major-lines"></div>\n    <div class="k-var--chart-minor-lines"></div>\n    <div class="k-var--chart-area-opacity"></div>\n\n    <div>\n        <div class="k-var--chart-font"></div>\n        <div class="k-var--chart-title-font"></div>\n        <div class="k-var--chart-label-font"></div>\n    </div>\n\n    <div class="k-var--series">\n      <div class="k-var--series-a"></div>\n      <div class="k-var--series-b"></div>\n      <div class="k-var--series-c"></div>\n      <div class="k-var--series-d"></div>\n      <div class="k-var--series-e"></div>\n      <div class="k-var--series-f"></div>\n    </div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}setStyle(t,e){this.set(t,e)}setColors(){this.mapColor("axisDefaults.crosshair.color","chart-crosshair-background"),this.mapColor("axisDefaults.labels.color","normal-text-color"),this.mapColor("axisDefaults.line.color","chart-major-lines"),this.mapColor("axisDefaults.majorGridLines.color","chart-major-lines"),this.mapColor("axisDefaults.minorGridLines.color","chart-minor-lines"),this.mapColor("axisDefaults.notes.icon.background","chart-notes-background"),this.mapColor("axisDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("axisDefaults.notes.line.color","chart-notes-lines"),this.mapColor("axisDefaults.title.color","normal-text-color"),this.mapColor("chartArea.background","background"),this.mapColor("legend.inactiveItems.labels.color","chart-inactive"),this.mapColor("legend.inactiveItems.markers.color","chart-inactive"),this.mapColor("legend.labels.color","normal-text-color"),this.mapColor("seriesDefaults.boxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.boxPlot.mean.color","base"),this.mapColor("seriesDefaults.boxPlot.median.color","base"),this.mapColor("seriesDefaults.boxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.bullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.candlestick.downColor","normal-text-color"),this.mapColor("seriesDefaults.candlestick.line.color","normal-text-color"),this.mapColor("seriesDefaults.errorBars.color","chart-error-bars-background"),this.mapColor("seriesDefaults.horizontalWaterfall.line.color","chart-major-lines"),this.mapColor("seriesDefaults.icon.border.color","chart-major-lines"),this.mapColor("seriesDefaults.labels.background","background"),this.mapColor("seriesDefaults.labels.color","normal-text-color"),this.mapColor("seriesDefaults.notes.icon.background","chart-notes-background"),this.mapColor("seriesDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("seriesDefaults.notes.line.color","chart-notes-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.mean.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.median.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.verticalBullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.waterfall.line.color","chart-major-lines"),this.mapColor("title.color","normal-text-color");var t=parseFloat(this.queryStyle("chart-area-opacity").opacity);isNaN(t)||(this.setStyle("seriesDefaults.area.opacity",t),this.setStyle("seriesDefaults.labels.opacity",t))}setFonts(){var t=bA(this.queryStyle("chart-font")),e=bA(this.queryStyle("chart-title-font")),i=bA(this.queryStyle("chart-label-font"));this.setStyle("axisDefaults.labels.font",i),this.setStyle("axisDefaults.notes.label.font",t),this.setStyle("axisDefaults.title.font",t),this.setStyle("legend.labels.font",t),this.setStyle("seriesDefaults.labels.font",i),this.setStyle("seriesDefaults.notes.label.font",t),this.setStyle("title.font",e)}setSeriesColors(){var t=this.element,e=[].slice.call(t.querySelectorAll(".k-var--series div")).reduce(((t,e)=>(t[(t=>t.match(/series-([a-z])$/)[1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0))(e.className)]=window.getComputedStyle(e).backgroundColor,t)),[]);this.setStyle("seriesColors",e)}mapColor(t,e){this.setStyle(t,this.queryColor(e))}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element;return window.getComputedStyle(e.querySelector(".k-var--".concat(t)))}}class xA extends V{constructor(t,e,i,r){super(t,e),this.extendOptions(e),this.themeService=i,this.intlService=r}destroy(){this.destroyWidget()}getThemeOptions(){return this.themeService?(this.themeService.loadTheme(),this.themeService.getThemeOptions()):{}}initWidget(){this.widget=this.createWidget(this.element,this.options,this.getThemeOptions(),this.intlService,this.instanceObserver)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new(this.getWidgetConstructor())(t,e,i,{intlService:r,observer:n,sender:this})}getWidgetConstructor(){}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService&&this.themeService.reset(),this.setOptions(this.options)}}function _A(t){var{id:e="",widgetOptions:i="",componentOptions:r={},services:n={themeService:{},intlService:{}},componentConstructor:o}=t,s=q(e);if(s){var a=JSON.parse(i),l=Ht(e),h=f(a,r);if(l)Ft(l,h);else n.intlService&&(h.locale=h.locale||{},h.locale.name=e,n.intlService.setLocale(h.locale)),Wt(e,new o(s,h,n.themeService,n.intlService))}}class kA extends xA{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return aS}}function SA(t,e,i){_A({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new wA,intlService:Ao},componentConstructor:kA})}class CA extends xA{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return dC}}function EA(t,e,i){_A({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new wA,intlService:Ao},componentConstructor:CA})}var TA=R("index");class AA extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,mode:"",debounceDelay:1}),this.extendOptions(e),this.collapsibleItems=[],this.setCollapsibleItems(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedResize=p((t=>{this.onResize(t)}),this.options.debounceDelay).bind(this),window.addEventListener("resize",this.debouncedResize)}unbindEvents(){window.removeEventListener("resize",this.debouncedResize),this.debouncedResize=null}getItems(){return Array.from(this.element.querySelector(".k-breadcrumb-container").children)}setCollapsibleItems(){var t=this.getItems(),e=t.slice(1,t.length-1).map((t=>{var e=B(TA,t);return{index:e,offsetWidth:this.getItemWidth(e),expanded:!0}}));this.collapsibleItems=e}setItemDisplay(t,e){var i=this.getItemByIndex(t.index),r="wrap"===this.options.mode?2:1;if(t.index===r)for(var n=i.children,o=1;o<n.length;o++)n[o].style.display=e;else i.style.display=e}getWidths(){return{totalItemsWidth:this.getItems().map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0),elementOffsetWidth:this.element.offsetWidth}}getItemWidth(t){return this.getItemByIndex(t).offsetWidth}getItemByIndex(t){return this.element.querySelector(L(TA,t))}collapseItem(t){this.setItemDisplay(t,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t,""),t.expanded=!0}onResize(){if("auto"===this.options.mode&&this.collapsibleItems.length){var{totalItemsWidth:t,elementOffsetWidth:e}=this.getWidths(),i=this.collapsibleItems.find((t=>t.expanded)),r=[...this.collapsibleItems].reverse().find((t=>!t.expanded));i&&t>=e?(this.collapseItem(i),this.onResize()):r&&t+r.offsetWidth<e&&(this.expandItem(r),this.onResize())}}handleChange(t){t&&(this.setCollapsibleItems(),this.collapsibleItems.forEach((t=>this.expandItem(t)))),this.onResize()}}function MA(t,e){Nt(AA,t,e)}class OA extends qs{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{showTooltip:"onObserverShowTooltip",hideTooltip:"onObserverHideTooltip",seriesClick:"onObserverSeriesClick"})}}function DA(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function PA(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?DA(Object(i),!0).forEach((function(e){RA(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):DA(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function RA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var IA="mouseleave";class LA extends V{constructor(t,e,i,r){super(t,e),RA(this,"options",{seriesTooltipPopupId:"",crosshairTooltips:{},jsinterop:{onObserverShowCrosshairTooltip:"",onObserverShowTooltip:"",onObserverSeriesClick:""}}),RA(this,"onMouseLeave",(t=>{this.hideElements(t)})),RA(this,"onObserverShowTooltip",(t=>{this.showTooltip(t)})),RA(this,"onObserverHideTooltip",(t=>{this.hideTooltip(t)})),RA(this,"onObserverSeriesClick",(t=>{var e=this.createSeriesClickEventArgs(t);this.invokeSeriesClickAsync(e)})),this.extendOptions(e),this.themeService=i,this.createInstanceObserver(),this.chartInstance=this.createChart(this.element,this.options,this.getThemeOptions(),r,this.chartInstanceObserver),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyInstanceObserver(),this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}bindEvents(){this.element.addEventListener(IA,this.onMouseLeave)}unbindEvents(){this.element.removeEventListener(IA,this.onMouseLeave)}getThemeOptions(){return this.themeService.loadTheme(),this.themeService.getThemeOptions()}createChart(t,e,i,r,n){return new(this.getChartConstructor())(t,e,i,{intlService:r,observer:n,sender:this})}getChartConstructor(){return Px}setOptions(t){this.chartInstance&&(this.options=t,this.chartInstance.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService.reset(),this.setOptions(this.options)}createInstanceObserver(){this.chartInstanceObserver=new OA(this)}destroyInstanceObserver(){this.chartInstanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeShowCrosshairTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowCrosshairTooltip,t)}invokeShowSeriesTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowTooltip,t)}invokeSeriesClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverSeriesClick,t)}showTooltip(t){t.crosshair?this.showCrosshairTooltip(t):this.showSeriesTooltip(t)}hideTooltip(t){t.crosshair?this.hideCrosshairTooltip(t):this.hideSeriesTooltip(t)}showCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);if(e){e.options.elementAlign={horizontal:"center",vertical:"center"},this.setTooltipPosition(t.anchor,e);var i=this.getCrosshairTooltipTemplateContext(t);this.invokeShowCrosshairTooltipAsync(i)}}hideCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);e&&e.close()}showSeriesTooltip(t){var e=this.getSeriesTooltipPopup();this.setTooltipPosition(t.anchor,e);var i=this.getSeriesTooltipTemplateContext(t);this.invokeShowSeriesTooltipAsync(i)}hideSeriesTooltip(){var t=this.getSeriesTooltipPopup();t&&t.close()}getTooltipAnchorRect(t){var e=this.getTooltipAnchorOffset(t);return{x:0,y:0,width:0,height:0,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}getTooltipAnchorOffset(t){return t?t.point:{top:0,left:0}}getCrosshairTooltipPopup(t){var e=this.getCrosshairAxisKey(t),i=this.getCrosshairTooltip(e);if(i)return Ht(i.popupId)}getSeriesTooltipPopup(){return Ht(this.options.seriesTooltipPopupId)}setTooltipPosition(t,e){if(e&&t){var i=this.getTooltipAnchorRect(t);e.options.anchorAlign=t.align,e.options.anchorRect=i,e.positionElement()}}getCrosshairTooltipTemplateContext(t){var e=((t.options||{}).tooltip||{}).format||t.format,i=t.point,r={formattedValue:e&&i&&i.formatValue?i.formatValue(e):String(t.value),axisKey:this.getCrosshairAxisKey(t)};return this.extendWithTooltipStyling(r,t)}getCrosshairAxisKey(t){var{axisName:e,axisIndex:i}=t;return"".concat(e).concat(i)}getCrosshairTooltip(t){var e=this.options.crosshairTooltips;return e?e[t]:{}}getSeriesTooltipTemplateContext(t){if(t.shared)return this.getSeriesTooltipSharedTemplateContext(t);var e=PA({},this.createSeriesTooltipTemplatePoint(t.point,t.format));return this.extendWithTooltipStyling(e,t)}getSeriesTooltipSharedTemplateContext(t){var e=t.points.filter((t=>x(t.series.name))).length>0,i=t.series.length>1,r=1;e&&r++,i&&r++;var n=this.createTooltipTemplatePoints(t),o={category:t.category,categoryText:t.categoryText,points:n,showSeriesColorMarker:i,showSeriesName:e,headerColumnColSpan:r};return this.extendWithTooltipStyling(o,t)}createTooltipTemplatePoints(t){return t.points?t.points.map((e=>this.createSeriesTooltipTemplatePoint(e,t.format))):[]}createSeriesTooltipTemplatePoint(t,e){var i=this.convertToSeriesPoint(t),r=((t.options||{}).tooltip||{}).format||e;return PA(PA({},i),{},{formattedValue:r&&t.formatValue?t.formatValue(r):String(t.value)})}hideElements(t){var e=t.relatedTarget,i=e&&Boolean(e.closest(".k-chart-tooltip")),r=H(this.element,e);e&&(i||r)||this.chartInstance.hideElements()}createSeriesClickEventArgs(t){return this.convertToSeriesPoint(t.point)}convertToSeriesPoint(t){var e,i=v(t.dataItem)?Object.getPrototypeOf(t.dataItem):null;return v(t.dataItem)&&i&&i!==Object.prototype&&(e=f({},i,t.dataItem)),{dataItem:e,category:t.category,categoryIndex:t.categoryIx,seriesIndex:t.series.index,seriesColor:t.series.color,seriesName:t.series.name||"",percentage:t.percentage,pointIndex:t.pointIx||t.index}}extendWithTooltipStyling(t,e){return f(t,{tooltipStyle:M(e.style),tooltipClass:e.className||""})}}var zA={autoBindElements:!0,liveDrag:!1,partialRedraw:!0,tooltip:{visible:!1},seriesDefaults:{tooltip:{visible:!1}}};class BA extends LA{getChartConstructor(){return Zx}extendOptions(t){this.applyNavigatorDefaults(t),super.extendOptions(t)}setOptions(t){this.applyNavigatorDefaults(t);var e=this.getThemeOptions();this.chartInstance.applyOptions(t,e),super.setOptions(t)}applyNavigatorDefaults(t){y(t.navigator,zA)}}i(840);var NA=t=>({x:{location:t.pageX},y:{location:t.pageY}});function jA(t,e){for(var i=0;i<t.length;i++)if(e[t[i]])return!0;return!1}var FA=[{end:"panend",move:"panmove",start:"panstart"},{gesturechange:"pinchmove",gestureend:"pinchend",gesturestart:"pinchstart"},{press:"press"},{tap:"tap"}];class VA{constructor(t,e){this.hammerInstance=t,this.eventHandlers={},this.tap=this.tap.bind(this),this.press=this.press.bind(this),this.panstart=this.panstart.bind(this),this.panmove=this.panmove.bind(this),this.panend=this.panend.bind(this),this.pinchstart=this.pinchstart.bind(this),this.pinchmove=this.pinchmove.bind(this),this.pinchend=this.pinchend.bind(this),e&&this.bind(e)}tap(t){this.trigger("tap",t)}press(t){this.trigger("press",t)}panstart(t){delete this.previous,this.previous=this.trigger("start",t)}panmove(t){this.previous=this.trigger("move",t)}panend(t){this.trigger("end",t),delete this.previous}pinchstart(t){this.trigger("gesturestart",t)}pinchmove(t){this.trigger("gesturechange",t)}pinchend(t){this.trigger("gestureend",t)}trigger(t,e){var i=((t,e)=>{var i=t.pointers,r=i[0],n=r.pageX,o=r.pageY,s=0;if(i.length>1){var a=i[0],l=i[1];s=Math.sqrt(Math.pow(a.pageX-l.pageX,2)+Math.pow(a.pageY-l.pageY,2))}return{distance:s,event:t.srcEvent,preventDefault:function(){t.preventDefault()},target:t.target,touches:i.map(NA),type:t.type,x:{delta:e?n-e.x.location:0,initialDelta:t.deltaX,location:n,startLocation:n-t.deltaX},y:{delta:e?o-e.y.location:0,initialDelta:t.deltaY,location:o,startLocation:o-t.deltaY}}})(e,this.previous);return this.eventHandlers[t]&&this.eventHandlers[t](i),i}bind(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.unbind(),this.eventHandlers=t;for(var e=0;e<FA.length;e++){var i=FA[e],r=Object.keys(i);if(jA(r,t))for(var n=0;n<r.length;n++){var o=i[r[n]];this.hammerInstance.on(o,this[o])}}}unbind(){this.hammerInstance&&this.hammerInstance.off(),this.eventHandlers={}}destroy(){this.hammerInstance&&(this.hammerInstance.destroy(),delete this.hammerInstance),delete this.eventHandlers}toggleDrag(t){this.toggle("pan",t)}toggleZoom(t){this.toggle("pinch",t)}toggle(t,e){this.hammerInstance&&this.hammerInstance.get(t).set({enable:e})}}function HA(t,e,i){var r=q(t);if(r){var n=JSON.parse(e),o=Ht(t),s=f(n,i);if(o)Ft(o,s);else{s.locale.name=t,Ao.setLocale(s.locale);var a=function(t,e,i,r){return new("stockchart"===e._constructor?BA:LA)(t,e,i,r)}(r,s,new wA,Ao);Wt(t,a)}}}function WA(t){jt(t)}function UA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Ds.register(Lo),Mp.register(class{static create(t,e){var i=window.Hammer,r=new i(t,{recognizers:[[i.Tap],[i.Pan],[i.Pinch],[i.Press,{time:0}]]});return new VA(r,e)}});var qA=[Jt.ARROWDOWN,Jt.ARROWRIGHT,Jt.ARROWLEFT,Jt.ARROWUP,Jt.ENTER];class GA extends V{constructor(t,e){super(t,e),UA(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),UA(this,"onKeyDown",(t=>(this.invokeMethodAsync(this.options.jsinterop.keydown,t.name),t.name===Jt.ENTER))),UA(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),this.extendOptions(e),this.initNavigationService(),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("blur",this.invokeBlur)}unbindEvents(){this.element.removeEventListener("blur",this.invokeBlur)}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(qA,this.onKeyDown)}focus(){setTimeout((()=>{this.element.focus()}),100)}}function $A(t,e){Nt(GA,t,e)}function KA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class XA extends V{constructor(t,e){super(t,e),KA(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),KA(this,"closePopup",(()=>(this.element.focus(),this.invokeMethodAsync(this.options.jsinterop.close),!1))),KA(this,"openPopup",(()=>(this.invokeMethodAsync(this.options.jsinterop.open),!1))),this.popupElement=q(e.popupId),this.extendOptions(e),this.initNavigationService(),this.initPopupNavigationService()}destroy(){this.navigationService.destroy(),this.popupNavigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWUP),this.closePopup)}initPopupNavigationService(){this.popupNavigationService=new ie(this.popupElement),this.popupNavigationService.bind([Jt.ESC,"".concat(Qt.ALT," ").concat(Jt.ARROWUP)],this.closePopup)}}function YA(t,e){Nt(XA,t,e)}function ZA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var JA=[Jt.ARROWUP,Jt.ARROWDOWN,Jt.ARROWLEFT,Jt.ARROWRIGHT];class QA extends V{constructor(t,e){super(t,e),ZA(this,"onDrag",(t=>{this.moveDragHandleFromEvent(t),this.throttleChangeValue()})),ZA(this,"onDragEnd",(()=>{this.changeValue(),this.dragHandle.focus()})),ZA(this,"onNavigate",(t=>{var e=N("top",this.dragHandle),i=N("left",this.dragHandle);switch(t.name){case Jt.ARROWDOWN:e+=4;break;case Jt.ARROWUP:e-=4;break;case Jt.ARROWRIGHT:i+=4;break;case Jt.ARROWLEFT:i-=4}this.moveDragHandle(e,i),this.changeValue()})),ZA(this,"onClick",(t=>{this.moveDragHandleFromEvent(t),this.dragHandle.focus(),this.changeValue()})),this.gradient=this.element.querySelector(".k-hsv-rectangle"),this.dragHandle=this.element.querySelector(".k-draghandle"),this.setOptions(e),this.initDraggable(),this.bindEvents(),this.throttleChangeValue=c(this.changeValue,150).bind(this)}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.gradient.addEventListener("click",this.onClick),this.initNavigationService()}unbindEvents(){this.gradient.removeEventListener("click",this.onClick)}setOptions(t){super.setOptions(t),this.hsva=this.options.hsva,this.initDragHandlePosition()}initNavigationService(){this.navigationService=new ie(this.dragHandle),this.navigationService.bind(JA,this.onNavigate)}initDraggable(){this.draggable=new ti(this.element,{filter:".k-hsv-gradient",offsetDropClue:!1,events:{drag:this.onDrag,dragEnd:this.onDragEnd}})}initDragHandlePosition(){var t=(1-this.hsva.v)*this.gradient.offsetHeight,e=this.hsva.s*this.gradient.offsetWidth;this.dragHandle.style.display="block",this.setDragHandlePosition(t,e)}setDragHandlePosition(t,e){this.dragHandle&&(this.dragHandle.style.top="".concat(t,"px"),this.dragHandle.style.left="".concat(e,"px"))}moveDragHandleFromEvent(t){var e=this.gradient.getBoundingClientRect();this.moveDragHandle(t.clientY-e.top,t.clientX-e.left)}moveDragHandle(t,e){var i=Xt(t,0,this.gradient.offsetHeight),r=Xt(e,0,this.gradient.offsetWidth);this.setDragHandlePosition(i,r),this.hsva.s=r/this.gradient.offsetWidth,this.hsva.v=1-i/this.gradient.offsetHeight}changeValue(){this.invokeMethodAsync(this.options.jsinterop.changeValue,this.hsva)}}function tM(t,e){Nt(QA,t,e)}function eM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class iM extends V{constructor(t,e){super(t,e),eM(this,"options",{dotNetInstance:null,jsinterop:{change:""}}),eM(this,"onKeyDown",((t,e)=>{this.isEnterKeyActionable(e.target)||this.invokeMethodAsync(this.options.jsinterop.change)})),eM(this,"onFocusOut",(t=>{H(this.element,t.relatedTarget)||this.invokeChange()})),eM(this,"invokeChange",(()=>{this.invokeMethodAsync(this.options.jsinterop.change)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut)}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind("".concat(Jt.ENTER),this.onKeyDown)}isEnterKeyActionable(t){return!(!t.matches(".k-button")&&t.querySelector(".k-state-selected.k-state-focus"))}}function rM(t,e){Nt(iM,t,e)}function nM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var oM="keydown";class sM extends V{constructor(t,e){super(t,e),nM(this,"options",{dotNetInstance:null,itemListDataId:"",jsinterop:{itemListKeyDown:""}}),nM(this,"onKeyDown",(t=>{var e=[Jt.ARROWRIGHT,Jt.ARROWLEFT,Jt.ARROWUP,Jt.ARROWDOWN].includes(t.key);if(t.key===Jt.TAB){var i=t.target.closest(".k-columnmenu-item-wrapper"),r=i?i.querySelector(".k-columnmenu-item"):null,n="true"===(r?r.getAttribute("aria-expanded"):"");(!n||n&&t.target===r&&t.shiftKey)&&t.preventDefault()}else e&&Y("k-columnmenu-item",t.target)&&t.preventDefault()})),nM(this,"onItemListKeyDown",(t=>{var e=ot(t.target),i=t.target.closest(".k-filter-menu");if(!e||!i||t.key!==Jt.ARROWUP&&t.key!==Jt.ARROWDOWN||t.shiftKey){var r=D(t);this.invokeMethodAsync(this.options.jsinterop.itemListKeyDown,r)}})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=this.getItemListElement();t&&t.addEventListener(oM,this.onItemListKeyDown),this.element.addEventListener(oM,this.onKeyDown)}unbindEvents(){var t=this.getItemListElement();t&&t.removeEventListener(oM,this.onItemListKeyDown),this.element.removeEventListener(oM,this.onKeyDown)}getItemListElement(){return q(this.options.itemListDataId)}}function aM(t,e){Nt(sM,t,e)}function lM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hM extends V{constructor(t,e){super(t,e),lM(this,"options",{selector:"",popupId:""}),lM(this,"onContextMenu",(t=>{t.preventDefault(),this.activeElement=t.target,this.openPopup(t.pageX,t.pageY)})),lM(this,"onPopupKeyDown",(t=>{t.key===Jt.ESC&&(this.closePopup(),this.activeElement.focus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.anchors=null}bindEvents(){this.anchors=document.querySelectorAll(this.options.selector),this.anchors.forEach((t=>{t.addEventListener("contextmenu",this.onContextMenu)})),q(this.options.popupId).addEventListener("keydown",this.onPopupKeyDown)}unbindEvents(){this.anchors.forEach((t=>{t.removeEventListener("contextmenu",this.onContextMenu)}))}openContextMenu(t){var e=t.clientX+window.scrollX,i=t.clientY+window.scrollY;this.openPopup(e,i)}focusFirstMenuItem(){var t=this.getPopup();if(t){var e=t.element.querySelector(".k-context-menu .k-item");e&&e.focus()}}openPopup(t,e){var i=this.getPopup();i.openAsync(null,t,e),this.activeElement&&i.setZIndex(this.activeElement)}closePopup(){this.getPopup().closeAsync()}getPopup(){return Ht(this.options.popupId)}}function cM(t,e){Ht(t)||Wt(t,new hM(null,e))}var pM,uM=function(t){return t?new Date(t.getTime()):null},dM=function(t,e){var i=uM(t);return 0===e&&23===i.getHours()&&i.setHours(i.getHours()+2),i},fM=function(t,e,i,r,n,o,s){void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=new Date(t,e,i,r,n,o,s);return t>-1&&t<100&&a.setFullYear(a.getFullYear()-1900),dM(a,r)},vM=function(t){return function(t,e){var i=uM(t);return i.setDate(i.getDate()+e),dM(i,t.getHours())}(fM(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),-1)},mM=function(t,e){var i=uM(t),r=(12+(i.getMonth()+e)%12)%12;return i.setMonth(i.getMonth()+e),function(t,e){return t.getMonth()!==e?vM(mM(t,-1)):t}(dM(i,t.getHours()),r)};!function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"}(pM||(pM={}));var gM;!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(gM||(gM={}));var yM=function(t){return fM(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)};function bM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class wM{constructor(){bM(this,"symbols",""),bM(this,"partMap",void 0)}}var xM=(t,e)=>(t[e.pattern[0]]=e.type,t);function _M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class kM{get value(){return this._value}constructor(t,e,i,r,n){_M(this,"year",!0),_M(this,"month",!0),_M(this,"date",!0),_M(this,"hours",!0),_M(this,"minutes",!0),_M(this,"seconds",!0),_M(this,"milliseconds",!0),_M(this,"formatPlaceholder",void 0),_M(this,"format",void 0),_M(this,"leadingZero",null),_M(this,"monthNames",[]),_M(this,"typedMonthPart",""),_M(this,"knownParts","adHhmMsEy"),_M(this,"symbols",{E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y"}),_M(this,"_value",yM(new Date)),this.intl=t,this.formatPlaceholder=e||"wide",this.format=i,this.localeId=r||"en",this.cycleTime=n,this.monthNames=this.allFormatedMonths(this.localeId)}setValue(t){var e,i;t?(e=t,i=this._value,!e&&!i||e&&i&&e.getTime()===i.getTime()||(this._value=uM(t),this.modifyExisting(!0))):(this._value=yM(new Date),this.modifyExisting(!1))}hasValue(){return this.intl.splitDateFormat(this.format,this.localeId).reduce(((t,e)=>t||"literal"!==e.type&&"dayperiod"!==e.type&&this.getExisting(e.pattern[0])),!1)}getDateObject(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return uM(this.value)}getFormattedDate(t){return this.intl.formatDate(this.getDateObject(),t,this.localeId)}getTextAndFormat(){var t=this.intl.formatDate(this.value,this.format,this.localeId),e=this.dateFormatString(this.value,this.format);return this.merge(t,e)}modifyExisting(t){for(var e=this.dateFormatString(this.value,this.format).symbols,i=0;i<e.length;i++)this.setExisting(e[i],t)}getExisting(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"m":return this.minutes;case"s":return this.seconds;default:return!0}}setExisting(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear((new Date).getFullYear());break;case"M":this.month=e,!1===e&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;default:return}}modifyPart(t,e){var i=uM(this.value),r=!1;switch(t){case"y":i.setFullYear(i.getFullYear()+e);break;case"M":i=mM(this.value,e);break;case"d":case"E":i.setDate(i.getDate()+e);break;case"h":case"H":i.setHours(i.getHours()+e),r=!0;break;case"m":i.setMinutes(i.getMinutes()+e),r=!0;break;case"s":i.setSeconds(i.getSeconds()+e),r=!0;break;case"a":i.setHours(i.getHours()+12*e),r=!0}r&&!this.cycleTime&&i.getDate()!==this._value.getDate()&&(i.setDate(this._value.getDate()),i.setMonth(this._value.getMonth()),i.setFullYear(this._value.getFullYear())),this.setExisting(t,!0),this._value=i}parsePart(t,e,i){if(!e)return this.resetLeadingZero(),this.setExisting(t,!1),{value:null,switchToNext:!1};for(var r=this.intl.formatDate(this.value,this.format,this.localeId),n=this.dateFormatString(this.value,this.format),o=n.symbols,s=!1,a="",l="",h="",c=0;c<r.length;c++)o[c]===t?(l+=this.getExisting(t)?r[c]:"0",s=!0):s?h+=r[c]:a+=r[c];var p=l.length-3,u=null,d=this.matchMonth(e),f=this.matchDayPeriod(e,t),v="0"===e,m=this.leadingZero||{};v?0!==parseInt(i?e:l+e,10)||this.isAbbrMonth(n.partMap,t)||this.incrementLeadingZero(t):this.resetLeadingZero();for(var g=Math.max(0,p);g<=l.length;g++){var y=i?e:l.substring(g)+e,b=parseInt(y,10);if(!(u=this.intl.parseDate(a+y+h,this.format,this.localeId))&&!isNaN(b)&&!isNaN(parseInt(e,10))){if("M"===t&&!d){var w=b-1;w>-1&&w<12&&((u=uM(this.value)).setMonth(w),u.getMonth()!==w&&(u=vM(mM(u,-1))))}"y"===t&&(u=fM(parseInt(y,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),this.date&&u.getDate()!==this.value.getDate()&&(u=vM(mM(u,-1))))}if(u){var x=this.partPattern(n.partMap,t).pattern,_=this.intl.parseDate("".concat(a).concat(this.peek(y,x)).concat(h),this.format,this.localeId);this._value=u,this.setExisting(t,!0);var k=null===_||m[t]&&x.length<=y.length;return{value:this.value,switchToNext:k}}}return d&&(u=this.intl.parseDate(a+d+h,this.format,this.localeId))?(this._value=u,this.setExisting(t,!0),{value:this.value,switchToNext:!1}):f&&(u=this.intl.parseDate(a+f+h,this.format))?(this._value=u,{value:this.value,switchToNext:!0}):(v&&this.setExisting(t,!1),{value:null,switchToNext:!1})}symbolMap(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(xM,{})[t]}resetLeadingZero(){var t=null!==this.leadingZero;return this.leadingZero=null,t}incrementLeadingZero(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e}isAbbrMonth(t,e){var i=this.partPattern(t,e);return"month"===i.type&&i.names}partPattern(t,e){return t.filter((t=>-1!==t.pattern.indexOf(e)))[0]}peek(t,e){var i,r=t.replace(/^0*/,"")+"0";return i=e.length-r.length,new Array(Math.max(i,0)).fill("0").join("")+r}matchMonth(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var i=parseInt(this.typedMonthPart,10);if(i>=1&&i<=12&&i.toString()===this.typedMonthPart)return this.monthNames[i-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""}matchDayPeriod(t,e){var i=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(i))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(i))return this.dayPeriods.pm}return""}allFormatedMonths(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.intl.splitDateFormat(this.format,this.localeId),i=0;i<e.length;i++)if("month"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return[]}dateFormatString(t,e){for(var i=this.intl.splitDateFormat(e,this.localeId),r=[],n=[],o=0;o<i.length;o++)for(var s=this.intl.formatDate(t,{pattern:i[o].pattern},this.localeId).length;s>0;)r.push(this.symbols[i[o].pattern[0]]||"_"),n.push(i[o]),s--;var a=new wM;return a.symbols=r.join(""),a.partMap=n,a}merge(t,e){for(var i="",r="",n=e.symbols,o=n.length-1;o>=0;o--)if(-1===this.knownParts.indexOf(n[o])||this.getExisting(n[o]))i=t[o]+i,r=n[o]+r;else{for(var s=n[o];o>=0&&s===n[o];)o--;for(o++,i=this.leadingZero&&this.leadingZero[s]?"0"+i:this.dateFieldName(e.partMap[o])+i;r.length<i.length;)r=n[o]+r}return{text:i,format:r}}dateFieldName(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))}}function SM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var CM="dragStart",EM="mouseup",TM="click",AM="input",MM="keydown",OM="focus",DM="blur";class PM extends V{constructor(e,i){var r=new Date(i.selectedDate);isNaN(r.getTime())&&(r=null),super(e,i),SM(this,"options",{dotNetInstance:null,format:"yyyy-MM-dd",selectedDate:null,allowNulls:!1,hasPlaceHolder:!1,cycleTime:!0,locale:null,steps:{second:"",minute:"",hour:"",day:"",month:"",year:""},formatPlaceholder:null,jsinterop:{focus:"",blur:"",updateDate:"",enter:""}}),SM(this,"onElementDragStart",(t=>{t.preventDefault()})),SM(this,"onElementMouseUp",(t=>{t.preventDefault()})),SM(this,"onElementClick",(()=>{this.setSelection(this.selectionByIndex(this.selection.start))})),SM(this,"onElementInput",(()=>{if(this.element&&this.dateObject){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e;var i=((t,e,i,r)=>{var n=t[r+t.length-i.length],o=t.substring(0,r+t.length-i.length),s=i.substring(0,r),a=[];if(o===s&&r>0)return a.push([e[r-1],s[r-1]]),a;if(0===o.indexOf(s)&&(0===s.length||e[s.length-1]!==e[s.length])){var l="";1===s.length&&a.push([e[0],s[0]]);for(var h=s.length;h<o.length;h++)e[h]!==l&&"_"!==e[h]&&(l=e[h],a.push([l,""]));return a}if(0===s.indexOf(o)||"_"===e[r-1]){for(var c=e[0],p=Math.max(0,o.length-1);p<e.length;p++)if("_"!==e[p]){c=e[p];break}return[[c,s[r-1]]]}return" "===s[s.length-1]||s[s.length-1]===n?[[e[r-1],"_"]]:[[e[r-1],s[r-1]]]})(t,this.currentFormat,this.element.value,this.selection.start),r=1===i.length&&"_"===i[0][1],n=!1;if(!r)for(var o=0;o<i.length;o++)n=this.dateObject.parsePart(i[o][0],i[o][1],this.resetSegmentValue).switchToNext;this.resetSegmentValue=!1,this.forceUpdate(),i.length&&"_"!==i[0][0]&&this.setSelection(this.selectionBySymbol(i[0][0])),(n||r)&&this.switchDateSegment(1),this.updateComponentValue()}})),SM(this,"onElementFocus",(()=>{this.isActive=!0,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.focus)})),SM(this,"onElementBlur",(()=>{this.resetSegmentValue=!0,this.isActive=!1,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.blur)})),SM(this,"onElementKeyDown",(t=>{var e=this.options.jsinterop.enter,i=this.currentFormat[this.selection.start],r=this.getStepFromSymbol(i),n=!1;if(!t.altKey&&t.keyCode!==Zt.TAB){switch(t.keyCode){case Zt.ARROWLEFT:this.switchDateSegment(-1),n=!0;break;case Zt.ARROWUP:this.modifyDateSegmentValue(r,i,event),n=!0;break;case Zt.ARROWRIGHT:this.switchDateSegment(1),n=!0;break;case Zt.ARROWDOWN:this.modifyDateSegmentValue(-r,i,event),n=!0;break;case Zt.ENTER:this.invokeMethodAsync(e);break;case Zt.DELETE:case Zt.BACKSPACE:return this.options.allowNulls&&(this.dateObject.setValue(null),this.forceUpdate(),this.updateComponentValue()),void(n=!0);default:return}n&&t.preventDefault()}})),this.extendOptions(i);var n=this.element.getAttribute("data-id");this.extendCulture(n);var o=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern";this.dateObject=new kM(t,o,i.format,n,i.cycleTime),this.dateObject.setValue(r),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0}extendCulture(t){var e=this.options;e.locale.name=t,_r(y({},Ui("en"),e.locale))}destroy(){this.unbindEvents(),super.destroy(),this.dateObject=null}bindEvents(){this.element.addEventListener(CM,this.onElementDragStart),this.element.addEventListener(TM,this.onElementClick),this.element.addEventListener(EM,this.onElementMouseUp),this.element.addEventListener(AM,this.onElementInput),this.element.addEventListener(MM,this.onElementKeyDown),this.element.addEventListener(OM,this.onElementFocus),this.element.addEventListener(DM,this.onElementBlur)}unbindEvents(){this.element.removeEventListener(CM,this.onElementDragStart),this.element.removeEventListener(EM,this.onElementMouseUp),this.element.removeEventListener(TM,this.onElementClick),this.element.removeEventListener(AM,this.onElementInput),this.element.removeEventListener(MM,this.onElementKeyDown),this.element.removeEventListener(OM,this.onElementFocus),this.element.removeEventListener(DM,this.onElementBlur)}focus(){this.element.focus()}get selection(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t}setSelection(t){this._lastSelectedSymbol=this.currentFormat[t.start],this.element&&document.activeElement===this.element&&this.element.setSelectionRange(t.start,t.end)}selectionBySymbol(t){for(var e=-1,i=0,r=0;r<this.currentFormat.length;r++)this.currentFormat[r]===t&&(i=r+1,-1===e&&(e=r));return e<0&&(e=0),{start:e,end:i}}selectionByIndex(t){for(var e={start:t,end:t},i=t,r=t-1;i<this.currentFormat.length||r>=0;i++,r--){if(i<this.currentFormat.length&&"_"!==this.currentFormat[i]){e=this.selectionBySymbol(this.currentFormat[i]);break}if(r>=0&&"_"!==this.currentFormat[r]){e=this.selectionBySymbol(this.currentFormat[r]);break}}return e}switchDateSegment(t){var{start:e,end:i}=this.selection;if(e<i&&this.currentFormat[e]!==this.currentFormat[i-1])return this.setSelection(this.selectionByIndex(t>0?e:i-1)),void(this.resetSegmentValue=!0);for(var r=this.currentFormat[e],n=e+t;n>0&&n<this.currentFormat.length&&(this.currentFormat[n]===r||"_"===this.currentFormat[n]);)n+=t;if("_"!==this.currentFormat[n]){for(var o=n;o>=0&&o<this.currentFormat.length&&this.currentFormat[o]===this.currentFormat[n];)o+=t;n>o&&(o+1!==e||n+1!==i)?(this.setSelection({start:o+1,end:n+1}),this.resetSegmentValue=!0):n<o&&(n!==e||o!==i)&&(this.setSelection({start:n,end:o}),this.resetSegmentValue=!0)}}modifyDateSegmentValue(t,e){if(this.dateObject){var i=1*t;this.dateObject.modifyPart(e,i),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e)),this.updateComponentValue()}}updateValue(t){var e=new Date(t);isNaN(e.getTime())&&(e=null),this.dateObject.setValue(e),this.forceUpdate(),this.togglePlaceholder()}updateComponentValue(){this.invokeMethodAsync(this.options.jsinterop.updateDate,{dateValue:this.dateObject.getFormattedDate("yyyy-MM-dd HH:mm:ss"),inputElementValue:this.element.value})}forceUpdate(){this.setTextAndFormat(),this.setElementValue(this.currentText)}setTextAndFormat(){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e,this.currentText=t}togglePlaceholder(){this.options.hasPlaceHolder&&!this.dateObject.hasValue()&&this.setElementValue(this.isActive?this.currentText:"")}setElementValue(t){this.element.value=t}getStepFromSymbol(t){switch(t){case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}}}function RM(t,e){Nt(PM,t,e)}function IM(t,e){var i=Ht(t);i&&i.updateValue(e)}function LM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class zM extends V{constructor(t,e){super(t,e),LM(this,"onToggleElementClick",(t=>{t.preventDefault()})),LM(this,"onToggleElementMouseDown",(()=>{var t=this.options.jsinterop.mousedown;this.invokeMethodAsync(t)})),LM(this,"onPopupKeyDown",(t=>{(t.keyCode===Zt.ESCAPE||t.keyCode===Zt.ARROWUP&&t.altKey)&&(this.invokeClose(),this.focus(),t.stopPropagation())})),LM(this,"closePopup",(()=>(this.invokeClose(),!1))),LM(this,"openPopup",(()=>(this.invokeOpen(),!1))),LM(this,"onInputFocus",(()=>{this.invokeClose()})),LM(this,"onInputFocusOut",(t=>{H(this.popupElement,t.relatedTarget)||H(this.element,t.relatedTarget)||this.invokeMethodAsync(this.options.jsinterop.blur)})),this.input=this.element.getElementsByClassName("k-input-inner")[0],this.toggleElement=this.element.querySelector(e.toggleElementSelector),this.popupElement=q(e.popupId),this.initTabKeyTrap(),this.initNavigationService()}destroy(){this.tabKeyTrap.destroy(),this.navigationService.destroy(),this.unbindEvents(),super.destroy(),this.input=this.popupElement=this.selectArrow=null,this.tabKeyTrap=null}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWUP),this.closePopup)}initTabKeyTrap(){this.tabKeyTrap=new ne(this.popupElement)}bindEvents(){this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("focusout",this.onInputFocusOut),this.toggleElement.addEventListener("click",this.onToggleElementClick),this.toggleElement.addEventListener("mousedown",this.onToggleElementMouseDown),this.popupElement.addEventListener("keydown",this.onPopupKeyDown,!0),this.tabKeyTrap.enableKeyTrap()}unbindEvents(){this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("focusout",this.onInputFocusOut),this.toggleElement.removeEventListener("click",this.onToggleElementClick),this.toggleElement.removeEventListener("mousedown",this.onToggleElementMouseDown),this.popupElement.removeEventListener("keydown",this.onPopupKeyDown,!0)}focus(){var t=this;setTimeout((()=>{t.input.focus()}),100)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(){this.invokeMethodAsync(this.options.jsinterop.open)}}class BM extends zM{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{close:"",mousedown:""}}),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}function NM(t,e){Nt(BM,t,e)}function jM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class FM extends V{constructor(t,e){super(t,e),jM(this,"options",{dotNetInstance:null,focusOnInit:!1,jsinterop:{click:""}}),jM(this,"onKeyDown",(t=>{t.keyCode===Zt.ARROWUP?(this.onKeyArrowUp(),t.preventDefault()):t.keyCode===Zt.ARROWDOWN?(this.onKeyArrowDown(),t.preventDefault()):t.keyCode===Zt.ENTER&&this.invokeEnter()})),jM(this,"onScroll",(()=>{var t=this;t.element.scrollTop!==t.scrollTop&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t.snapToItem(!0)}),33))})),jM(this,"onMouseDown",(t=>{t.preventDefault()})),jM(this,"onClick",(t=>{var e=t.target.closest("li"),i=this.listElement.querySelectorAll(".k-item"),r=Array.from(i).indexOf(e);e&&(this.scrollTo(e.offsetTop),this.invokeSelect(r))})),jM(this,"onMouseEnter",(()=>{this.timeList.focus()})),jM(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.timeList=this.element.parentElement,this.listElement=this.element.querySelector("ul.k-reset"),this.timeout,this.setDimensions(),this.bindEvents(),this.options.focusOnInit&&this.focusTimeList()}setDimensions(){this.itemHeight=this.listElement.querySelector("li.k-item").offsetHeight,this.elementHeight=this.element.offsetHeight,this.scrollTop=this.element.scrollTop;var t=this.listElement.offsetHeight+(this.elementHeight-this.itemHeight);this.element.querySelector(".k-scrollable-placeholder").setAttribute("style","height: "+t+"px");var e=Math.floor((this.elementHeight-this.itemHeight)/2);this.listElement.setAttribute("style","transform: translateY("+e+"px);")}bindEvents(){this.element.addEventListener("scroll",this.onScroll),this.element.addEventListener("mousedown",this.onMouseDown),this.listElement.addEventListener("click",this.onClick),this.timeList.addEventListener("keydown",this.onKeyDown),this.timeList.addEventListener("mouseenter",this.onMouseEnter),this.timeList.addEventListener("focusout",this.onFocusOut)}destroy(){clearTimeout(this.timeout),this.unbindEvents(),super.destroy(),this.selectedIndex=this.listElement=null}unbindEvents(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("scroll",this.onScroll),this.listElement.removeEventListener("click",this.onClick),this.timeList.removeEventListener("keydown",this.onKeyDown),this.timeList.removeEventListener("mouseenter",this.onMouseEnter),this.timeList.removeEventListener("focusout",this.onFocusOut)}onKeyArrowUp(){var t=this.selectedIndex;this.setSelectedIndex(t-1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}onKeyArrowDown(){var t=this.selectedIndex;this.setSelectedIndex(t+1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}focusTimeList(){var t=this;setTimeout((()=>{t.timeList.focus({preventScroll:!0})}),100)}snapToItem(t){var e=this.element.scrollTop,i=e%this.itemHeight;this.scrollTop>e?e-=i:e+=this.itemHeight-i,this.selectItem(e,t)}selectItem(t,e){if(!Number.isNaN(t)&&(this.scrollTo(t),e)){var i=Math.floor(t/this.itemHeight);this.invokeSelect(i)}}invokeSelect(t){var e=this.options.jsinterop.click,i=Math.min(t,this.listElement.querySelectorAll(".k-item").length-1);this.invokeMethodAsync(e,i)}invokeEnter(){var t=this.options.jsinterop.enter;this.invokeMethodAsync(t)}invokeFocusOut(t){t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)}scrollTo(t){this.element.scrollTop=t,this.scrollTop=this.element.scrollTop}setSelectedIndex(t){this.setDimensions();var e=this.listElement.querySelectorAll(".k-item")[t];e&&(this.selectedIndex=t,this.scrollTo(e.offsetTop))}}function VM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class HM extends zM{constructor(t,e){super(t,e),VM(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{close:"",mousedown:""}}),VM(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===Zt.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===Zt.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.popupElement.querySelector(e);i&&i.focus()}focusFirstCarousel(){this.popupElement&&setTimeout((()=>{var t=this.popupElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function WM(t,e){Nt(HM,t,e)}function UM(t){var e=Ht(t);e&&e.focus()}function qM(t,e){Nt(FM,t,e)}function GM(t,e){var i=Ht(t);i&&i.setSelectedIndex(e)}function $M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var KM="keydown",XM="mousedown",YM="click",ZM="focus",JM="focusout",QM=[Zt.ARROWUP,Zt.ARROWDOWN,Zt.ARROWLEFT,Zt.ARROWRIGHT,Zt.HOME,Zt.END];class tO extends V{constructor(t,e){super(t,e),$M(this,"onKeyDown",(t=>{QM.concat(Zt.ENTER).includes(t.keyCode)?t.preventDefault():(t.shiftKey||t.ctrlKey)&&t.stopPropagation()})),$M(this,"onMouseDown",(t=>{t.preventDefault()})),$M(this,"onClick",(t=>{var e=t.currentTarget;e&&e.focus()})),$M(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),$M(this,"onFocusout",(t=>{t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.tables=this.element.querySelectorAll("table"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.tables=this.navigationService=null}bindEvents(){[...this.tables].forEach((t=>{t.addEventListener(XM,this.onMouseDown),t.addEventListener(YM,this.onClick),t.addEventListener(KM,this.onKeyDown,!0),t.addEventListener(ZM,this.onFocus),t.addEventListener(JM,this.onFocusout)}))}unbindEvents(){[...this.tables].forEach((t=>{t.removeEventListener(XM,this.onMouseDown),t.removeEventListener(YM,this.onClick),t.removeEventListener(KM,this.onKeyDown,!0),t.removeEventListener(ZM,this.onFocus),t.removeEventListener(JM,this.onFocusout)}))}focusTable(){var t=this.tables[0];t&&setTimeout((()=>{t.focus()}),100)}}function eO(t,e){Nt(tO,t,e)}function iO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rO extends zM{constructor(t,e){super(t,e),iO(this,"options",{dotNetInstance:null,jsinterop:{close:"",mousedown:""}}),iO(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===Zt.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===Zt.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.popupElement.querySelector(e);i&&i.focus()}focusTable(){var t=this;setTimeout((()=>{var e=t.popupElement&&t.popupElement.querySelector("table");e instanceof HTMLElement&&e.focus()}),100)}focusFirstCarousel(){this.popupElement&&setTimeout((()=>{var t=this.popupElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function nO(t,e){Nt(rO,t,e)}function oO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sO="blur",aO="click";class lO extends V{constructor(t,e){super(t,e),oO(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{change:"",close:"",open:""}}),oO(this,"onStartEnterKeyDown",(()=>{this.triggerStartChanged(),this.focusEndInput()})),oO(this,"onEndEnterKeyDown",(()=>{this.triggerEndChanged(),this.invokeClose()})),oO(this,"onPopupShiftTab",((t,e)=>{var i=st(this.popupElement,!1);return e.target!==i||(this.focusEndInput(),!1)})),oO(this,"onPopupTab",((t,e)=>{var i=this.popupElement.querySelector("table:last-child");return e.target===i&&this.triggerClose(),!0})),oO(this,"triggerStartOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.startTarget),!0))),oO(this,"triggerEndOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.endTarget),!0))),oO(this,"triggerStartChanged",(()=>{this.invokeChange(this.options.startTarget)})),oO(this,"triggerEndChanged",(()=>{this.invokeChange(this.options.endTarget)})),oO(this,"triggerClose",(()=>(this.invokeClose(),!0))),oO(this,"focusPopupCalendar",(()=>!!this.isClosed()||(this.popupElement.querySelector("table").focus(),!1))),oO(this,"closePopup",(()=>!!this.isClosed()||(this.triggerClose(),this.focusStartInput(),!1)));var i=this.element.querySelectorAll(".k-input");this.startInput=i[0],this.endInput=i[1],this.popupElement=q(e.popupId),this.extendOptions(e),this.initNavigationServices(),this.bindEvents()}bindEvents(){this.startInput.addEventListener(sO,this.triggerStartChanged),this.endInput.addEventListener(sO,this.triggerEndChanged),this.startInput.addEventListener(aO,this.triggerStartOpen,!0),this.endInput.addEventListener(aO,this.triggerEndOpen,!0)}unbindEvents(){this.startInput.removeEventListener(sO,this.triggerStartChanged),this.endInput.removeEventListener(sO,this.triggerEndChanged),this.startInput.removeEventListener(aO,this.triggerStartOpen,!0),this.endInput.removeEventListener(aO,this.triggerEndOpen,!0)}destroy(){this.unbindEvents(),this.navigationServices.forEach((t=>t.destroy())),super.destroy()}initNavigationServices(){this.navigationServices=[this.initStartInputNavigationService(),this.initEndInputNavigationService(),this.initPopupNavigationService()]}initStartInputNavigationService(){var t=new ie(this.startInput);return t.bind([Jt.ESC,"".concat(Qt.ALT," ").concat(Jt.ARROWUP)],this.closePopup),t.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.triggerStartOpen),t.bind(Jt.ENTER,this.onStartEnterKeyDown),t.bind("".concat(Qt.SHIFT," ").concat(Jt.TAB),this.triggerClose),t}initEndInputNavigationService(){var t=new ie(this.endInput);return t.bind([Jt.ESC,"".concat(Qt.ALT," ").concat(Jt.ARROWUP)],this.closePopup),t.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.triggerEndOpen),t.bind(Jt.TAB,this.focusPopupCalendar),t.bind(Jt.ENTER,this.onEndEnterKeyDown),t}initPopupNavigationService(){var t=new ie(this.popupElement);return t.bind("".concat(Qt.SHIFT," ").concat(Jt.TAB),this.onPopupShiftTab),t.bind("".concat(Jt.TAB),this.onPopupTab),t.bind([Jt.ESC,"".concat(Qt.ALT," ").concat(Jt.ARROWUP)],this.closePopup),t}focusStartInput(){this.startInput.focus()}focusEndInput(){this.endInput.focus()}invokeChange(t){this.invokeMethodAsync(this.options.jsinterop.change,t)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t)}isClosed(){return!this.popupElement||!this.popupElement.children[0].children.length}}function hO(t,e){Nt(lO,t,e)}function cO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pO extends V{constructor(t,e){super(t,e),cO(this,"options",{dotNetInstance:null,jsinterop:{keydown:""}}),cO(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==Zt.ESCAPE||this.invokeKeyDown(t)})),this.extendOptions(e),this.bindEvents(),this.elementDataId=this.element.dataset.id,this.enableTabKeyTrap(),this.focusElement()}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown)}onShow(t){this.unbindEvents(),this.options=t[0],this.element=q(this.elementDataId),this.bindEvents(),this.keyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}enableTabKeyTrap(){this.keyTrap=new le(this.element),this.keyTrap.enableKeyTrap()}disableTabKeyTrap(){this.keyTrap&&this.keyTrap.disableTabKeyTrap()}focusElement(){if(this.options.focusedElementSelector){var t=this.element.querySelector(this.options.focusedElementSelector);t instanceof HTMLElement&&tt(t)}else lt(this.elementDataId)}}function uO(t,e){Nt(pO,t,e)}function dO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fO=R("field"),vO=R("text"),mO="k-indicator-container";class gO extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),dO(this,"options",{dotNetInstance:null,parentSelector:".k-grid",dropTargetSelector:".k-grouping-header",dropTarget:{group:null,itemSelector:Ve(mO)},jsinterop:{addGroup:""}}),dO(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=e.getAttribute(fO),r=t.draggable.getElementUnderCursor(t).closest(this.dropTarget.options.itemSelector),n=e.getAttribute(vO),o=Rt(r);if(o<0){var s=Te(this.dropTarget.element.querySelectorAll(this.dropTarget.options.itemSelector));o=Rt(s)}i&&o>=0&&this.invokeAddGroup({field:i,title:n,index:o})})),dO(this,"allowsDragFrom",(t=>!this.containsGroup(t.originalCurrentTarget)&&t.originalCurrentTarget.hasAttribute(fO))),dO(this,"allowsDropFrom",(t=>!this.containsGroup(t.originalCurrentTarget))),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.dropTargetSelector);t&&(this.dropTarget=new Ze(t,y(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}})))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}containsGroup(t){var e=t.getAttribute(fO),i=Array.from(this.element.querySelectorAll(Ve(mO))).map((t=>t.getAttribute(fO))).includes(e);return i}invokeAddGroup(t){this.invokeMethodAsync(this.options.jsinterop.addGroup,t)}}function yO(t,e){Nt(gO,Gt(t,"Groupable"),e)}function bO(t){jt(Gt(t,"Groupable"))}function wO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var xO=R("field"),_O=R("text"),kO="k-drag-status",SO="k-i-plus",CO="k-i-cancel",EO="k-grouping-dropclue",TO=t=>{var e=M({position:"absolute","z-index":2e4}),i=(t=>{if(t instanceof HTMLElement){var e=t.getAttribute(_O)||t.getAttribute(xO)||"";return E(e)}return""})(t),r=t.getAttribute(xO)||"",n=t.getAttribute(_O)||"";return j('<div class="k-header k-drag-clue" style="'.concat(e,'" data-field="').concat(r,'" data-text="').concat(n,'">\n            <span class="k-icon k-drag-status k-i-cancel k-icon-with-modifier">\n                <span class="k-icon k-icon-modifier"></span>\n            </span>\n            ').concat(i,"\n        </div>"))},AO=t=>t&&t.hasAttribute("data-field");class MO extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),wO(this,"options",{parentSelector:".k-grid",draggableSourceSelector:".k-grid-header",draggable:{group:null,filter:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",ignore:".k-grid-filter, .k-checkbox, .k-column-resizer"}}),wO(this,"onDraggableDrag",(t=>{this.canDragToAnyDropTarget(t)||t.preventDefault()})),wO(this,"onDraggableDrop",(()=>{this.destroyDropClue()})),wO(this,"onDropTargetLeave",(()=>{this.showDisabledHint(),this.destroyDropClue()})),wO(this,"onDropTargetOver",(t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()})),wO(this,"ignoreElementUnderCursor",(t=>{var e=t&&t.closest(Ve(EO));return Boolean(e)})),this.extendOptions(e),this.createDraggable()}destroy(){this.destroyDropClue(),this.destroyDraggable(),super.destroy()}extendOptions(t){this.options=y(this.options,t)}createDraggable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.draggableSourceSelector);t&&(this.draggable=new ti(t,y(this.options.draggable,{hint:TO,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{drag:this.onDraggableDrag,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}destroyDraggable(){this.draggable&&this.draggable.destroy()}canDragToAnyDropTarget(t){var e=!1;return this.draggable.forEachDropTarget((i=>{e=e||i.allowsDragFrom(this.draggable,t)})),e}canDrop(t){return t.dropTarget&&t.dropTarget.allowsDropFrom(this.draggable,t)}showEnabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(Ve(kO));X(CO,e),K(SO,e)}}showDisabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(Ve(kO));K(CO,e),X(SO,e)}}createDropClue(){this.dropClue||(this.dropClue=new ei,this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(t.dropTarget&&t.elementUnderCursor){var e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,i=t.draggable.originalCurrentTarget,r=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,n=Pt(e,i),o=n?Dt(e,i):r&&!AO(e),s=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:n});if(s){this.createDropClue();var a=this.dropClue.getOffsetState(s,o);if(!o){var{width:l}=this.dropClueSize;a.left-=l/2}this.showDropClue(a)}}}getDropClueOffsetElement(t){var{elementUnderCursor:e,dropTargeElement:i,dropTargetItemSelector:r,isDragInSiblings:n}=t,o=e.closest(r),s=this.getDropTargetIndicators(i,r),a=s.filter(AO),l=Te(s),h=Te(a)||l;return o&&(n||AO(o))&&(h=o),h}showDropClue(t){var{top:e,left:i,height:r}=t;this.dropClue||this.createDropClue(),this.dropClue.setState({top:e,left:i,height:r}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}}function OO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Nt(MO,Gt(t,"ColumnDraggable"),e)}function DO(t){jt(Gt(t,"ColumnDraggable"))}function PO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RO=R("reorderable"),IO=R("parent-col-initialization-index");class LO extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),PO(this,"options",{parentSelector:".k-grid",reorderableSourceSelector:".k-grid-header",dropTarget:{itemSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)"}}),PO(this,"allowsDragFrom",(t=>{var e=Boolean(t.originalCurrentTarget.getAttribute(RO)),i=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&i})),PO(this,"allowsDropFrom",((t,e)=>{var i=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),r=t.originalCurrentTarget;if(!i||!r)return!1;var n=Boolean(r.getAttribute(RO)),o=B(IO,i),s=B(IO,r);return n&&i!==r&&o===s})),PO(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector),r=De(e),n=De(i),o=r>=0?r:Rt(e,this.options.dropTarget.itemSelector),s=n>=0?n:Rt(i,this.options.dropTarget.itemSelector);document.activeElement&&document.activeElement.blur(),this.reorderColumn(o,s)})),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.reorderableSourceSelector);this.dropTarget=new Ze(t,y(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderColumn(t,e){t>=0&&e>=0&&t!==e&&this.invokeMethodAsync(this.options.jsinterop.reorderColumn,{fromIndex:t,toIndex:e})}}function zO(t,e){Nt(LO,Gt(t,"ColumnReorderable"),e)}function BO(t){jt(Gt(t,"ColumnReorderable"))}function NO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class jO extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),NO(this,"options",{events:{resizeStart:null,resize:null,resizeEnd:null},draggable:{filter:""}}),NO(this,"onDraggableDragStart",(t=>{this.initialLocation={pageX:t.pageX,pageY:t.pageY},this.location={pageX:t.pageX,pageY:t.pageY},this.delta={x:0,y:0},this.initialDelta={x:0,y:0},this.trigger("resizeStart",t)})),NO(this,"onDraggableDrag",(t=>{this.setCursorStyle(t.sender.originalCurrentTarget.style.cursor),this.calculateInitialDelta(t),this.calculateDelta(t),this.setLocation(t),this.trigger("resize",t)})),NO(this,"onDraggableDragEnd",(t=>{this.resetCursorStyle(),this.trigger("resizeEnd",t)})),this.extendOptions(e),this.createDraggable(t)}destroy(){this.destroyDraggable(),super.destroy()}createDraggable(){this.draggable=new ti(this.element,y(this.options.draggable,{events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd}}))}destroyDraggable(){this.draggable&&this.draggable.destroy()}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,f(e,{initialLocation:this.initialLocation,location:this.location,delta:this.delta,initialDelta:this.initialDelta}))}calculateDelta(t){this.delta={x:t.pageX-this.location.pageX,y:t.pageY-this.location.pageY}}calculateInitialDelta(t){this.initialDelta={x:t.pageX-this.initialLocation.pageX,y:t.pageY-this.initialLocation.pageY}}setLocation(t){var{pageX:e,pageY:i}=t;this.location={pageX:e,pageY:i}}setCursorStyle(t){t&&(document.body.style.cursor=t)}resetCursorStyle(){document.body.style.cursor=""}}function FO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var VO="dblclick",HO=Array.from,WO=t=>parseFloat(t)+"px",UO=(t,e)=>{t.style.width=WO(e)},qO=t=>t.getBoundingClientRect().width,GO=t=>Boolean(t.style.width),$O=(t,e,i)=>i?Xt(t,e,i):Math.max(t,e),KO="k-column-resizer";class XO extends V{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),FO(this,"options",{parentSelector:".k-grid",resizableSourceSelector:".k-grid-header",dataRowSelector:"tr:not(.k-grouping-row)",columnSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",contentTableSelector:".k-grid-table",contentRowSelector:"tr.k-master-row",contentCellSelector:"td:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",footerTableSelector:".k-grid-footer table",footerRowSelector:"tr.k-group-footer",columns:[],defaultMinResizableWidth:30,dragResizing:!0,resizable:{draggable:{filter:".k-column-resizer"}},jsinterop:{resizeColumns:""}}),FO(this,"onResizableResizeStart",(t=>{this.resetState(),this.setFixedWidths();var e=t.originalCurrentTarget.closest(this.options.columnSelector);this.setState({originColumn:{element:e,initialWidth:qO(e)}}),this.rescaleColumns()})),FO(this,"onResizableResize",(t=>{var e=this.state.originColumn.element,i=qO(e),r=this.getColumnIndex(e),{minWidth:n,maxWidth:o}=this.getResizingConstraints(r),s=this.state.originColumn.initialWidth+t.initialDelta.x,a=o&&o<i||n>i,l=t.delta.x>0&&s<=n,h=o&&t.delta.x<0&&s>=o;(a||!l&&!h)&&this.applyResizeDelta(e,t.delta.x)})),FO(this,"onResizableResizeEnd",(()=>{this.state.columns.length>0&&this.invokeResizeColumns({columns:this.state.columns,tableWidth:this.state.tableWidth})})),FO(this,"onDoubleClick",(t=>{if(Y(KO,t.target)){var e=t.target.closest(this.options.columnSelector);this.autoFitColumnElements([e])}})),this.extendOptions(e),this.bindEvents(),this.options.dragResizing&&this.createResizable(),this.resetState()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}createResizable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.resizableSourceSelector);this.resizable=new jO(t,y(this.options.resizable,{events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&this.resizable.destroy()}bindEvents(){this.element.addEventListener(VO,this.onDoubleClick)}unbindEvents(){this.element.removeEventListener(VO,this.onDoubleClick)}setState(t){this.state=f(this.state||{},t)}resetState(){this.setState({columns:[],tableWidth:null,originColumn:{element:{},initialWidth:null}})}setColumns(t){this.options.columns=t}autoFitAllColumns(){var t=this.getLeafHeaderCells();this.autoFitColumnElements(t)}autoFitColumns(t){var e=t.map((t=>this.element.querySelector(Ee(t))));this.autoFitColumnElements(e)}autoFitColumnElements(t){var e=[];this.setFixedWidths(),this.rescaleColumns(),t.forEach((t=>{if(t&&!Oe(t)){var i=this.getHeaderCellLeafIndex(t),r=this.getColumnIndex(t);if(this.isContentCellVisible(i)){var n=this.getColumnWidth(i,r);this.resizeColumn(t,n);var o=qO(t);e.push({index:r,width:WO(o)})}}})),e.length>0&&this.invokeResizeColumns({columns:e,tableWidth:WO(qO(this.getHeaderTable()))})}getColumnWidth(t,e){var i=this.getContentColumnWidth(t,e),r=this.getHeaderColumnWidth(t,e),n=this.getFooterColumnWidth(t,e);return Math.max(i,r,n)}getContentColumnWidth(t,e){var i=this.getContentCellVirtualIndex(t);return i<0?0:this.calculateColumnWidth({columnIndex:i,columnInitializationIndex:e,tableElement:this.getContentTable(),cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-content"})}getHeaderColumnWidth(t,e){return this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:this.getHeaderTable(),cellSelector:this.options.columnSelector,scrollContainerSelector:".k-grid-header-wrap"})}getFooterColumnWidth(t,e){var i=this.getFooterTable();return i?this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:i,cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-footer-wrap"}):0}calculateColumnWidth(t){var{columnIndex:e,columnInitializationIndex:i,tableElement:r,cellSelector:n,scrollContainerSelector:o}=t,s=this.getTableColumns(r)[e],a=o?r.closest(o):null,l=s.style.width,h=null!==a?a.scrollLeft:0;s.style.width="",K("k-autofitting",r);var c=r.querySelector(Ee(i))||r.querySelector(this.options.dataRowSelector).querySelectorAll(n)[e],p=qO(c);return X("k-autofitting",r),s.style.width=l,a&&(a.scrollLeft=h),p}setFixedWidths(){var t=this.getHeaderColumns(),e=this.getHeaderTable(),i=this.getContentTable(),r=this.getFooterTable();if(!(t.every(GO)&&GO(e)&&GO(i))){UO(e,qO(e)),UO(i,qO(i)),r&&UO(r,qO(r));var n=this.hasMultiColumnHeaders()?this.getLeafHeaderCells():this.getHeaderCells(),o=this.getHeaderCells().sort(Be);this.leafHeaderCellsFixedWidths=[],this.headerCellsFixedWidths=[];for(var s=0;s<n.length;s++){var a=qO(n[s]);this.leafHeaderCellsFixedWidths.push(a)}for(var l=0;l<o.length;l++){var h=qO(o[l]);this.headerCellsFixedWidths.push(h)}for(var c=0;c<n.length;c++)this.resizeHeaderColumn(c,this.leafHeaderCellsFixedWidths[c]),this.resizeContentColumn(c,this.leafHeaderCellsFixedWidths[c]),r&&this.resizeFooterColumn(c,this.leafHeaderCellsFixedWidths[c])}}applyResizeDelta(t,e){t&&this.resizeColumn(t,qO(t)+e,e)}resizeColumn(t,e){var i=this.getFooterTable(),r=[];if(t){var n,o=this.getColumnIndex(t),s=this.hasMultiColumnHeaders(),a=this.getHeaderCellLeafIndex(t),l=[];if(s)l=((t,e)=>{var i=Ie(t,e);return i.filter((t=>i.every((e=>!Ne(t.element,e.element)))))})(t,this.getHeaderCells().sort(ze));n=l.length>0?{minWidth:this.options.defaultMinResizableWidth,maxWidth:null}:this.getResizingConstraints(o);var h=$O(e,n.minWidth,n.maxWidth),c=h-qO(t);if(!(-.05<=c&&c<=.05)){if(r.push({index:o,width:WO(h)}),l.length){var p=[],u=0,d=c/l.length;l.forEach((t=>{var e=t.index,i=t.leafIndex,r=this.getHeaderColWidth(t.leafIndex),{minWidth:n,maxWidth:o}=this.getResizingConstraints(t.index),s=$O(r+d,n,o);p.push({index:e,leafIndex:i,newWidth:s})})),p.forEach((t=>{this.resizeHeaderColumn(t.leafIndex,t.newWidth),this.resizeContentColumn(t.leafIndex,t.newWidth),u+=t.newWidth,r.push({index:t.index,width:WO(t.newWidth)})})),r[0].width=WO(u);var f=u-qO(t);this.resizeHeaderTable(f),this.resizeContentTable(f),this.resizeLockedColumns(),i&&(this.resizeFooterTable(f),p.forEach((t=>{this.resizeFooterColumn(t.leafIndex,t.newWidth)})))}else this.resizeHeaderTable(c),this.resizeContentTable(c),this.resizeHeaderColumn(a,h),this.resizeContentColumn(a,h),this.resizeLockedColumns(),i&&(this.resizeFooterTable(c),this.resizeFooterColumn(a,h));this.setState({columns:r,tableWidth:WO(qO(this.getHeaderTable()))})}}}resizeHeaderColumn(t,e){var i=this.getHeaderColumnByIndex(t);UO(i,e)}resizeContentColumn(t,e){var i=this.getContentColumnByIndex(t);UO(i,e)}resizeFooterColumn(t,e){var i=this.getFooterColumnByIndex(t);UO(i,e)}resizeHeaderTable(t){this.resizeTable(this.getHeaderTable(),t)}resizeContentTable(t){this.resizeTable(this.getContentTable(),t)}resizeFooterTable(t){this.resizeTable(this.getFooterTable(),t)}resizeTable(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&UO(t,qO(t)+e)}resizeLockedColumns(){this.resizeLockedHeaderCells(),this.resizeLockedContentCells(),this.resizeLockedFooterCells()}resizeLockedHeaderCells(){var t=this.getHeaderCells().sort(ze);this.setLockedCellsOffsets(t)}resizeLockedContentCells(){var t=this.getContentRows();this.resizeLockedCellsForRows(t)}resizeLockedFooterCells(){var t=this.getFooterRows();this.resizeLockedCellsForRows(t)}resizeLockedCellsForRows(t){for(var e=0;e<t.length;e++){var i=t[e].querySelectorAll(this.options.contentCellSelector);this.setLockedCellsOffsets(i)}}setLockedCellsOffsets(t){this.setLockedCellsOffsetLeft(t),this.setLockedCellsOffsetRight(t)}setLockedCellsOffsetLeft(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.left=WO(e)})(t,e)}))}setLockedCellsOffsetRight(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.right=WO(e)})(t,e)}),{iterateBackwards:!0})}setLockedCellOffset(t,e){for(var{iterateBackwards:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getMaxLevel(t),n=new Array(r).fill(0),o=0;o<t.length;o++){var s=t[i?t.length-1-o:o];if(ve(s)){var a=qO(s),l=Me(s),h=Math.max(0,l-1);if(e(s,n[h]),Oe(s))n[h]+=a;else for(var c=h;c<n.length;c++)n[c]+=a}}}getMaxLevel(t){for(var e=1,i=0;i<t.length;i++){var r=Me(t[i]);e=Math.max(e,r)}return e}invokeResizeColumns(t){if(x(t.columns)&&x(t.tableWidth))return this.invokeMethodAsync(this.options.jsinterop.resizeColumns,{columns:t.columns,tableWidth:t.tableWidth})}rescaleColumns(){this.headerCellsFixedWidths&&(this.invokeRescaleColumns(this.headerCellsFixedWidths.map((t=>"".concat(t,"px")))),this.headerCellsFixedWidths=null)}invokeRescaleColumns(t){return this.invokeMethodAsync(this.options.jsinterop.rescaleColumns,t)}getHeaderTable(){return this.element.closest("table")}getContentTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.contentTableSelector)}getFooterTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.footerTableSelector)}getHeaderColumnByIndex(t){return this.getHeaderColumns()[t]}getHeaderColumns(){return this.getTableColumns(this.getHeaderTable())}getHeaderColWidth(t){var e,i,r=this.getHeaderColumnByIndex(t);return e=r,i=parseFloat(e.style.width),Number.isNaN(i)?qO(e):i}getHeaderCellByIndex(t){return this.getHeaderCells()[t]}getHeaderCells(){return HO(this.element.querySelectorAll(this.options.columnSelector))}getLeafHeaderCells(){var t=this.getHeaderCells();return Le(t).sort(ze)}getHeaderCellLeafIndex(t){return this.getLeafHeaderCells().indexOf(t)}getContentColumnByIndex(t){return this.getContentColumns()[t]}getContentColumns(){return this.getTableColumns(this.getContentTable())}getTableColumns(t){var e=t.querySelector("colgroup").querySelectorAll("col:not(.k-group-col):not(.k-hierarchy-col):not(.k-drag-col)");return HO(e)}getContentRows(){return this.queryContentTable(this.options.contentRowSelector)}getFooterColumnByIndex(t){return this.getFooterColumns()[t]}getFooterColumns(){return this.getTableColumns(this.getFooterTable())}getFooterRows(){return this.queryContentTable(this.options.footerRowSelector)}getColumnIndex(t){var e=De(t);return e>=0?e:Rt(t,this.options.columnSelector)}queryContentTable(t){var e=this.getContentTable().querySelectorAll(t);return HO(e)}hasMultiColumnHeaders(){return this.element.querySelectorAll("tr").length>1}getFirstContentRow(){return this.getContentTable().querySelector(this.options.dataRowSelector)}getContentCellVirtualIndex(t){var e=this.getFirstContentRow();if(!e)return-1;var i=e.querySelector(this.options.contentCellSelector),r=t;return i&&i.colSpan>1&&(r-=i.colSpan-1),r}isContentCellVisible(t){var e=this.getContentCellVirtualIndex(t),i=this.getFirstContentRow();if(!i)return!1;var r=i.querySelectorAll(this.options.contentCellSelector);return!!r&&(e>=0&&e<r.length)}getResizingConstraints(t){var e=this.options.columns[t]||{};return{minWidth:Math.max(e.minResizableWidth,this.options.defaultMinResizableWidth),maxWidth:e.maxResizableWidth}}}function YO(t,e){Nt(XO,Gt(t,"ColumnResizable"),e)}function ZO(t){jt(Gt(t,"ColumnResizable"))}function JO(t,e){var i=Ht(Gt(t,"ColumnResizable"));i&&i.autoFitColumns(e)}function QO(t){var e=Ht(Gt(t,"ColumnResizable"));e&&e.autoFitAllColumns()}function tD(t,e){var i=Ht(Gt(t,"ColumnResizable"));i&&i.setColumns(e)}function eD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var iD=[Jt.ENTER,Jt.ARROWDOWN,Jt.ARROWUP],rD=()=>S(20);class nD extends V{constructor(t,e){super(t,e),eD(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",focusout:"",collapse:""},mode:"",duration:0}),eD(this,"onMouseDown",(t=>{var e=t.target;"overlay"!==this.options.mode||J(e,[this.element])||this.invokeCollapse()})),eD(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),eD(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.bindEvents(),this.createNavigationService()}expandAsync(){return rD().then((()=>this.onTransitionEnd()))}collapseAsync(){return rD().then((()=>this.onTransitionEnd()))}destroy(){this.unbindEvents(),this.destroyNavigationService(),super.destroy()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("mousedown",this.onMouseDown,!0)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("mousedown",this.onMouseDown,!0)}focusItem(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e instanceof HTMLElement&&e.focus()}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}onTransitionEnd(){var t=this.options.duration;return this.timer=C(t),this.timer.promise}createNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(iD,this.onKeyDown)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocusOut(t){var e=t.target.closest(".k-drawer-item[role='menuitem'"),i=e?parseInt(e.getAttribute("data-index")):null;setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,i)}),1)}invokeCollapse(){this.invokeMethodAsync(this.options.jsinterop.collapse)}}function oD(t,e){Nt(nD,t,e)}function sD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aD=[Jt.ENTER,Jt.ESC],lD=[Jt.HOME,Jt.END];class hD extends V{constructor(t,e){super(t,e),sD(this,"options",{dotNetInstance:null,popupId:null,jsinterop:{focus:null,blur:null,keydown:null}}),sD(this,"onKeyDown",(t=>(this.invokeKeyDown(t),this.isClosed()))),sD(this,"onPopupKeys",(t=>!!this.isClosed()||(this.invokeKeyDown(t),!1))),sD(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),sD(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),sD(this,"invokeFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),this.extendOptions(e),this.popupElement=q(e.popupId),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.popupElement=null,super.destroy()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(aD,this.onKeyDown),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.onKeyDown),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWUP),this.onKeyDown),this.navigationService.bind(lD,this.onPopupKeys)}destroyNavigationService(){this.navigationService.destroy()}isClosed(){return!this.popupElement||!this.popupElement.children[0].children.length}}function cD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pD="blur",uD="focus";class dD extends hD{constructor(t,e){super(t,e),cD(this,"options",{value:null}),cD(this,"onBlur",(t=>{var e=t.relatedTarget;H(this.popupElement,e)||H(this.element,e)?this.focus():this.invokeBlur()})),cD(this,"onFocus",(()=>{this.invokeFocus()})),this.extendOptions(e),this.input=this.element.querySelector("input"),this.setValue(e.value),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.input=null}bindEvents(){this.input.addEventListener(pD,this.onBlur),this.input.addEventListener(uD,this.onFocus)}unbindEvents(){this.input.removeEventListener(pD,this.onBlur),this.input.removeEventListener(uD,this.onFocus)}setValue(t){this.input&&(this.input.value=t)}focus(){this.input&&this.input.focus()}}var fD=[Jt.ARROWDOWN,Jt.ARROWUP];class vD extends dD{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(fD,this.onPopupKeys)}}function mD(t,e){Nt(vD,t,e)}var gD=[Jt.ARROWDOWN,Jt.ARROWUP];class yD extends dD{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(gD,this.invokeKeyDown)}}function bD(t,e){Nt(yD,t,e)}function wD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var xD="blur",_D=[Jt.ARROWDOWN,Jt.ARROWUP];class kD extends hD{constructor(t,e){super(t,e),wD(this,"onBlur",(t=>{var e=t.relatedTarget;H(this.popupElement,e)?e.closest(".k-list-filter")||this.element.focus():this.invokeBlur()})),wD(this,"onFocus",(()=>{this.invokeFocus()})),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(xD,this.onBlur),this.element.addEventListener("focus",this.onFocus),this.navigationService.bind(_D,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.element.removeEventListener(xD,this.onBlur)}focus(){this.element.focus()}}function SD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var CD="blur",ED=[Jt.ARROWDOWN,Jt.ARROWUP,Jt.ENTER,Jt.ESC,"".concat(Qt.ALT," ").concat(Jt.ARROWUP)];class TD extends V{constructor(t,e){super(t,e),SD(this,"options",{dotNetInstance:null,anchorDataId:"",jsinterop:{blur:null,keydown:null}}),SD(this,"onBlur",(t=>{var e=t.relatedTarget;e&&e.closest('[data-id="'.concat(this.options.anchorDataId,'"]'))||(H(this.element.closest(".k-popup"),e)?this.element.focus():this.invokeBlur())})),SD(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),SD(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),SD(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(CD,this.onBlur)}unbindEvents(){this.element.removeEventListener(CD,this.onBlur)}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(ED,this.onKeyDown)}destroyNavigationService(){this.navigationService.destroy()}}function AD(t,e){Nt(kD,t,e)}function MD(t,e){Nt(TD,t,e)}var OD="click";class DD extends dD{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onClick",(t=>{t.target instanceof HTMLElement&&!t.target.closest(".k-chip")&&!t.target.closest(".k-clear-value")&&(this.focus(),this.invokeClick())})),this.bindMultiSelectEvents()}destroy(){this.unbindMultiSelectEvents(),super.destroy()}bindMultiSelectEvents(){this.element.addEventListener(OD,this.onClick,!0),this.navigationService.bind([Jt.ARROWDOWN,Jt.ARROWUP],this.onPopupKeys),this.navigationService.bind([Jt.ARROWLEFT,Jt.ARROWRIGHT],this.onTagFocus.bind(this)),this.navigationService.bind([Jt.BACKSPACE,Jt.DELETE],this.onTagDelete.bind(this))}unbindMultiSelectEvents(){this.element.removeEventListener(OD,this.onClick,!0)}onTagDelete(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}onTagFocus(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}invokeClick(){var t=this.options.jsinterop.click;this.invokeMethodAsync(t)}}function PD(t,e){Nt(DD,t,e)}function RD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ID extends V{constructor(t,e){super(t,e),RD(this,"options",{dotNetInstance:null,selector:".k-list-scroller",jsinterop:{focus:null,blur:null,keydown:null}}),RD(this,"onScroll",(()=>{var t=At(this.scrollableContainer,"li");if(t){var e=B("data-group-index",t);this.currentGroupIndex!==e&&(this.currentGroupIndex=e,this.invokeMethodAsync(this.options.jsinterop.groupChanged,e))}})),this.extendOptions(e),this.scrollableContainer=t.closest(".k-list").querySelector(this.options.parentSelector),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.scrollableContainer.addEventListener("scroll",this.onScroll)}unbindEvents(){this.scrollableContainer.removeEventListener("scroll",this.onScroll)}}function LD(t,e){Nt(ID,t,e)}function zD(t){this.content=t}zD.prototype={constructor:zD,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,i){var r=i&&i!=t?this.remove(i):this,n=r.find(t),o=r.content.slice();return-1==n?o.push(i||t,e):(o[n+1]=e,i&&(o[n]=i)),new zD(o)},remove:function(t){var e=this.find(t);if(-1==e)return this;var i=this.content.slice();return i.splice(e,2),new zD(i)},addToStart:function(t,e){return new zD([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var i=this.remove(t).content.slice();return i.push(t,e),new zD(i)},addBefore:function(t,e,i){var r=this.remove(e),n=r.content.slice(),o=r.find(t);return n.splice(-1==o?n.length:o,0,e,i),new zD(n)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=zD.from(t)).size?new zD(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=zD.from(t)).size?new zD(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=zD.from(t);for(var i=0;i<t.content.length;i+=2)e=e.remove(t.content[i]);return e},get size(){return this.content.length>>1}},zD.from=function(t){if(t instanceof zD)return t;var e=[];if(t)for(var i in t)e.push(i,t[i]);return new zD(e)};const BD=zD;function ND(t,e,i){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:i;var n=t.child(r),o=e.child(r);if(n!=o){if(!n.sameMarkup(o))return i;if(n.isText&&n.text!=o.text){for(var s=0;n.text[s]==o.text[s];s++)i++;return i}if(n.content.size||o.content.size){var a=ND(n.content,o.content,i+1);if(null!=a)return a}i+=n.nodeSize}else i+=n.nodeSize}}function jD(t,e,i,r){for(var n=t.childCount,o=e.childCount;;){if(0==n||0==o)return n==o?null:{a:i,b:r};var s=t.child(--n),a=e.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:i,b:r};if(s.isText&&s.text!=a.text){for(var h=0,c=Math.min(s.text.length,a.text.length);h<c&&s.text[s.text.length-h-1]==a.text[a.text.length-h-1];)h++,i--,r--;return{a:i,b:r}}if(s.content.size||a.content.size){var p=jD(s.content,a.content,i-1,r-1);if(p)return p}i-=l,r-=l}else i-=l,r-=l}}var FD=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var i=0;i<t.length;i++)this.size+=t[i].nodeSize},VD={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};FD.prototype.nodesBetween=function(t,e,i,r,n){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==i(a,r+s,n,o)&&a.content.size){var h=s+1;a.nodesBetween(Math.max(0,t-h),Math.min(a.content.size,e-h),i,r+h)}s=l}},FD.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},FD.prototype.textBetween=function(t,e,i,r){var n="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(n+=s.text.slice(Math.max(t,a)-a,e-a),o=!i):s.isLeaf&&r?(n+=r,o=!i):!o&&s.isBlock&&(n+=i,o=!0)}),0),n},FD.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,i=t.firstChild,r=this.content.slice(),n=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),n=1);n<t.content.length;n++)r.push(t.content[n]);return new FD(r,this.size+t.size)},FD.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var i=[],r=0;if(e>t)for(var n=0,o=0;o<e;n++){var s=this.content[n],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),i.push(s),r+=s.nodeSize),o=a}return new FD(i,r)},FD.prototype.cutByIndex=function(t,e){return t==e?FD.empty:0==t&&e==this.content.length?this:new FD(this.content.slice(t,e))},FD.prototype.replaceChild=function(t,e){var i=this.content[t];if(i==e)return this;var r=this.content.slice(),n=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new FD(r,n)},FD.prototype.addToStart=function(t){return new FD([t].concat(this.content),this.size+t.nodeSize)},FD.prototype.addToEnd=function(t){return new FD(this.content.concat(t),this.size+t.nodeSize)},FD.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},VD.firstChild.get=function(){return this.content.length?this.content[0]:null},VD.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},VD.childCount.get=function(){return this.content.length},FD.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},FD.prototype.maybeChild=function(t){return this.content[t]},FD.prototype.forEach=function(t){for(var e=0,i=0;e<this.content.length;e++){var r=this.content[e];t(r,i,e),i+=r.nodeSize}},FD.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),ND(this,t,e)},FD.prototype.findDiffEnd=function(t,e,i){return void 0===e&&(e=this.size),void 0===i&&(i=t.size),jD(this,t,e,i)},FD.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return WD(0,t);if(t==this.size)return WD(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var i=0,r=0;;i++){var n=r+this.child(i).nodeSize;if(n>=t)return n==t||e>0?WD(i+1,n):WD(i,r);r=n}},FD.prototype.toString=function(){return"<"+this.toStringInner()+">"},FD.prototype.toStringInner=function(){return this.content.join(", ")},FD.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},FD.fromJSON=function(t,e){if(!e)return FD.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new FD(e.map(t.nodeFromJSON))},FD.fromArray=function(t){if(!t.length)return FD.empty;for(var e,i=0,r=0;r<t.length;r++){var n=t[r];i+=n.nodeSize,r&&n.isText&&t[r-1].sameMarkup(n)?(e||(e=t.slice(0,r)),e[e.length-1]=n.withText(e[e.length-1].text+n.text)):e&&e.push(n)}return new FD(e||t,i)},FD.from=function(t){if(!t)return FD.empty;if(t instanceof FD)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new FD([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(FD.prototype,VD);var HD={index:0,offset:0};function WD(t,e){return HD.index=t,HD.offset=e,HD}function UD(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var i=Array.isArray(t);if(Array.isArray(e)!=i)return!1;if(i){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!UD(t[r],e[r]))return!1}else{for(var n in t)if(!(n in e)||!UD(t[n],e[n]))return!1;for(var o in e)if(!(o in t))return!1}return!0}FD.empty=new FD([],0);var qD=function(t,e){this.type=t,this.attrs=e};function GD(t){var e=Error.call(this,t);return e.__proto__=GD.prototype,e}qD.prototype.addToSet=function(t){for(var e,i=!1,r=0;r<t.length;r++){var n=t[r];if(this.eq(n))return t;if(this.type.excludes(n.type))e||(e=t.slice(0,r));else{if(n.type.excludes(this.type))return t;!i&&n.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),i=!0),e&&e.push(n)}}return e||(e=t.slice()),i||e.push(this),e},qD.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},qD.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},qD.prototype.eq=function(t){return this==t||this.type==t.type&&UD(this.attrs,t.attrs)},qD.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},qD.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var i=t.marks[e.type];if(!i)throw new RangeError("There is no mark type "+e.type+" in this schema");return i.create(e.attrs)},qD.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0},qD.setFrom=function(t){if(!t||0==t.length)return qD.none;if(t instanceof qD)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},qD.none=[],GD.prototype=Object.create(Error.prototype),GD.prototype.constructor=GD,GD.prototype.name="ReplaceError";var $D=function(t,e,i){this.content=t,this.openStart=e,this.openEnd=i},KD={size:{configurable:!0}};function XD(t,e,i){var r=t.findIndex(e),n=r.index,o=r.offset,s=t.maybeChild(n),a=t.findIndex(i),l=a.index,h=a.offset;if(o==e||s.isText){if(h!=i&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(i))}if(n!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(XD(s.content,e-o-1,i-o-1)))}function YD(t,e,i,r){var n=t.findIndex(e),o=n.index,s=n.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,i)?null:t.cut(0,e).append(i).append(t.cut(e));var l=YD(a.content,e-s-1,i);return l&&t.replaceChild(o,a.copy(l))}function ZD(t,e,i){if(i.openStart>t.depth)throw new GD("Inserted content deeper than insertion position");if(t.depth-i.openStart!=e.depth-i.openEnd)throw new GD("Inconsistent open depths");return JD(t,e,i,0)}function JD(t,e,i,r){var n=t.index(r),o=t.node(r);if(n==e.index(r)&&r<t.depth-i.openStart){var s=JD(t,e,i,r+1);return o.copy(o.content.replaceChild(n,s))}if(i.content.size){if(i.openStart||i.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var i=e.depth-t.openStart,r=e.node(i).copy(t.content),n=i-1;n>=0;n--)r=e.node(n).copy(FD.from(r));return{start:r.resolveNoCache(t.openStart+i),end:r.resolveNoCache(r.content.size-t.openEnd-i)}}(i,t);return rP(o,nP(t,a.start,a.end,e,r))}var l=t.parent,h=l.content;return rP(l,h.cut(0,t.parentOffset).append(i.content).append(h.cut(e.parentOffset)))}return rP(o,oP(t,e,r))}function QD(t,e){if(!e.type.compatibleContent(t.type))throw new GD("Cannot join "+e.type.name+" onto "+t.type.name)}function tP(t,e,i){var r=t.node(i);return QD(r,e.node(i)),r}function eP(t,e){var i=e.length-1;i>=0&&t.isText&&t.sameMarkup(e[i])?e[i]=t.withText(e[i].text+t.text):e.push(t)}function iP(t,e,i,r){var n=(e||t).node(i),o=0,s=e?e.index(i):n.childCount;t&&(o=t.index(i),t.depth>i?o++:t.textOffset&&(eP(t.nodeAfter,r),o++));for(var a=o;a<s;a++)eP(n.child(a),r);e&&e.depth==i&&e.textOffset&&eP(e.nodeBefore,r)}function rP(t,e){if(!t.type.validContent(e))throw new GD("Invalid content for node "+t.type.name);return t.copy(e)}function nP(t,e,i,r,n){var o=t.depth>n&&tP(t,e,n+1),s=r.depth>n&&tP(i,r,n+1),a=[];return iP(null,t,n,a),o&&s&&e.index(n)==i.index(n)?(QD(o,s),eP(rP(o,nP(t,e,i,r,n+1)),a)):(o&&eP(rP(o,oP(t,e,n+1)),a),iP(e,i,n,a),s&&eP(rP(s,oP(i,r,n+1)),a)),iP(r,null,n,a),new FD(a)}function oP(t,e,i){var r=[];(iP(null,t,i,r),t.depth>i)&&eP(rP(tP(t,e,i+1),oP(t,e,i+1)),r);return iP(e,null,i,r),new FD(r)}KD.size.get=function(){return this.content.size-this.openStart-this.openEnd},$D.prototype.insertAt=function(t,e){var i=YD(this.content,t+this.openStart,e,null);return i&&new $D(i,this.openStart,this.openEnd)},$D.prototype.removeBetween=function(t,e){return new $D(XD(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},$D.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},$D.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},$D.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},$D.fromJSON=function(t,e){if(!e)return $D.empty;var i=e.openStart||0,r=e.openEnd||0;if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new $D(FD.fromJSON(t,e.content),i,r)},$D.maxOpen=function(t,e){void 0===e&&(e=!0);for(var i=0,r=0,n=t.firstChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.firstChild)i++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new $D(t,i,r)},Object.defineProperties($D.prototype,KD),$D.empty=new $D(FD.empty,0,0);var sP=function(t,e,i){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=i},aP={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};sP.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},aP.parent.get=function(){return this.node(this.depth)},aP.doc.get=function(){return this.node(0)},sP.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},sP.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},sP.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},sP.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},sP.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},sP.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},sP.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},aP.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},aP.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r},aP.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},sP.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var i=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,n=0;n<t;n++)r+=i.child(n).nodeSize;return r},sP.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return qD.none;if(this.textOffset)return t.child(e).marks;var i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){var n=i;i=r,r=n}for(var o=i.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},sP.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var i=e.marks,r=t.parent.maybeChild(t.index()),n=0;n<i.length;n++)!1!==i[n].type.spec.inclusive||r&&i[n].isInSet(r.marks)||(i=i[n--].removeFromSet(i));return i},sP.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},sP.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new pP(this,t,i)},sP.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},sP.prototype.max=function(t){return t.pos>this.pos?t:this},sP.prototype.min=function(t){return t.pos<this.pos?t:this},sP.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},sP.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var i=[],r=0,n=e,o=t;;){var s=o.content.findIndex(n),a=s.index,l=s.offset,h=n-l;if(i.push(o,a,r+l),!h)break;if((o=o.child(a)).isText)break;n=h-1,r+=l+1}return new sP(e,i,n)},sP.resolveCached=function(t,e){for(var i=0;i<lP.length;i++){var r=lP[i];if(r.pos==e&&r.doc==t)return r}var n=lP[hP]=sP.resolve(t,e);return hP=(hP+1)%cP,n},Object.defineProperties(sP.prototype,aP);var lP=[],hP=0,cP=12,pP=function(t,e,i){this.$from=t,this.$to=e,this.depth=i},uP={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};uP.start.get=function(){return this.$from.before(this.depth+1)},uP.end.get=function(){return this.$to.after(this.depth+1)},uP.parent.get=function(){return this.$from.node(this.depth)},uP.startIndex.get=function(){return this.$from.index(this.depth)},uP.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(pP.prototype,uP);var dP=Object.create(null),fP=function(t,e,i,r){this.type=t,this.attrs=e,this.content=i||FD.empty,this.marks=r||qD.none},vP={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};vP.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},vP.childCount.get=function(){return this.content.childCount},fP.prototype.child=function(t){return this.content.child(t)},fP.prototype.maybeChild=function(t){return this.content.maybeChild(t)},fP.prototype.forEach=function(t){this.content.forEach(t)},fP.prototype.nodesBetween=function(t,e,i,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,i,r,this)},fP.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},vP.textContent.get=function(){return this.textBetween(0,this.content.size,"")},fP.prototype.textBetween=function(t,e,i,r){return this.content.textBetween(t,e,i,r)},vP.firstChild.get=function(){return this.content.firstChild},vP.lastChild.get=function(){return this.content.lastChild},fP.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},fP.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},fP.prototype.hasMarkup=function(t,e,i){return this.type==t&&UD(this.attrs,e||t.defaultAttrs||dP)&&qD.sameSet(this.marks,i||qD.none)},fP.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},fP.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},fP.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},fP.prototype.slice=function(t,e,i){if(void 0===e&&(e=this.content.size),void 0===i&&(i=!1),t==e)return $D.empty;var r=this.resolve(t),n=this.resolve(e),o=i?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,n.pos-s);return new $D(a,r.depth-o,n.depth-o)},fP.prototype.replace=function(t,e,i){return ZD(this.resolve(t),this.resolve(e),i)},fP.prototype.nodeAt=function(t){for(var e=this;;){var i=e.content.findIndex(t),r=i.index,n=i.offset;if(!(e=e.maybeChild(r)))return null;if(n==t||e.isText)return e;t-=n+1}},fP.prototype.childAfter=function(t){var e=this.content.findIndex(t),i=e.index,r=e.offset;return{node:this.content.maybeChild(i),index:i,offset:r}},fP.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),i=e.index,r=e.offset;if(r<t)return{node:this.content.child(i),index:i,offset:r};var n=this.content.child(i-1);return{node:n,index:i-1,offset:r-n.nodeSize}},fP.prototype.resolve=function(t){return sP.resolveCached(this,t)},fP.prototype.resolveNoCache=function(t){return sP.resolve(this,t)},fP.prototype.rangeHasMark=function(t,e,i){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return i.isInSet(t.marks)&&(r=!0),!r})),r},vP.isBlock.get=function(){return this.type.isBlock},vP.isTextblock.get=function(){return this.type.isTextblock},vP.inlineContent.get=function(){return this.type.inlineContent},vP.isInline.get=function(){return this.type.isInline},vP.isText.get=function(){return this.type.isText},vP.isLeaf.get=function(){return this.type.isLeaf},vP.isAtom.get=function(){return this.type.isAtom},fP.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),gP(this.marks,t)},fP.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},fP.prototype.canReplace=function(t,e,i,r,n){void 0===i&&(i=FD.empty),void 0===r&&(r=0),void 0===n&&(n=i.childCount);var o=this.contentMatchAt(t).matchFragment(i,r,n),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<n;a++)if(!this.type.allowsMarks(i.child(a).marks))return!1;return!0},fP.prototype.canReplaceWith=function(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;var n=this.contentMatchAt(t).matchType(i),o=n&&n.matchFragment(this.content,e);return!!o&&o.validEnd},fP.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},fP.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},fP.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},fP.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}var r=FD.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,i)},Object.defineProperties(fP.prototype,vP);var mP=function(t){function e(e,i,r,n){if(t.call(this,e,i,null,n),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gP(this.marks,JSON.stringify(this.text))},i.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},i.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,i),e}(fP);function gP(t,e){for(var i=t.length-1;i>=0;i--)e=t[i].type.name+"("+e+")";return e}var yP=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},bP={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};yP.parse=function(t,e){var i=new wP(t,e);if(null==i.next)return yP.empty;var r=_P(i);i.next&&i.err("Unexpected trailing text");var n=function(t){var e=Object.create(null);return i(AP(t,0));function i(r){var n=[];r.forEach((function(e){t[e].forEach((function(e){var i=e.term,r=e.to;if(i){var o=n.indexOf(i),s=o>-1&&n[o+1];AP(t,r).forEach((function(t){s||n.push(i,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new yP(r.indexOf(t.length-1)>-1),s=0;s<n.length;s+=2){var a=n[s+1].sort(TP);o.next.push(n[s],e[a.join(",")]||i(a))}return o}}(function(t){var e=[[]];return n(o(t,0),i()),e;function i(){return e.push([])-1}function r(t,i,r){var n={term:r,to:i};return e[t].push(n),n}function n(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,i){return t.concat(o(i,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;n(a,e=i())}else{if("star"==t.type){var l=i();return r(e,l),n(o(t.expr,l),l),[r(l)]}if("plus"==t.type){var h=i();return n(o(t.expr,e),h),n(o(t.expr,h),h),[r(h)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var c=e,p=0;p<t.min;p++){var u=i();n(o(t.expr,c),u),c=u}if(-1==t.max)n(o(t.expr,c),c);else for(var d=t.min;d<t.max;d++){var f=i();r(c,f),n(o(t.expr,c),f),c=f}return[r(c)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var i=0,r=[t];i<r.length;i++){for(var n=r[i],o=!n.validEnd,s=[],a=0;a<n.next.length;a+=2){var l=n.next[a],h=n.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==r.indexOf(h)&&r.push(h)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(n,i),n},yP.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},yP.prototype.matchFragment=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.childCount);for(var r=this,n=e;r&&n<i;n++)r=r.matchType(t.child(n).type);return r},bP.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},bP.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},yP.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var i=0;i<t.next.length;i+=2)if(this.next[e]==t.next[i])return!0;return!1},yP.prototype.fillBefore=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0);var r=[this];return function n(o,s){var a=o.matchFragment(t,i);if(a&&(!e||a.validEnd))return FD.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var h=o.next[l],c=o.next[l+1];if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(c)){r.push(c);var p=n(c,s.concat(h));if(p)return p}}}(this,[])},yP.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var i=this.computeWrapping(t);return this.wrapCache.push(t,i),i},yP.prototype.computeWrapping=function(t){for(var e=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var r=i.shift(),n=r.match;if(n.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<n.next.length;a+=2){var l=n.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||r.type&&!n.next[a+1].validEnd||(i.push({match:l.contentMatch,type:l,via:r}),e[l.name]=!0)}}},bP.edgeCount.get=function(){return this.next.length>>1},yP.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},yP.prototype.toString=function(){var t=[];return function e(i){t.push(i);for(var r=1;r<i.next.length;r+=2)-1==t.indexOf(i.next[r])&&e(i.next[r])}(this),t.map((function(e,i){for(var r=i+(e.validEnd?"*":" ")+" ",n=0;n<e.next.length;n+=2)r+=(n?", ":"")+e.next[n].name+"->"+t.indexOf(e.next[n+1]);return r})).join("\n")},Object.defineProperties(yP.prototype,bP),yP.empty=new yP(!0);var wP=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},xP={next:{configurable:!0}};function _P(t){var e=[];do{e.push(kP(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function kP(t){var e=[];do{e.push(SP(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function SP(t){for(var e=function(t){if(t.eat("(")){var e=_P(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var i=function(t,e){var i=t.nodeTypes,r=i[e];if(r)return[r];var n=[];for(var o in i){var s=i[o];s.groups.indexOf(e)>-1&&n.push(s)}0==n.length&&t.err("No node type or group '"+e+"' found");return n}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=EP(t,e)}return e}function CP(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function EP(t,e){var i=CP(t),r=i;return t.eat(",")&&(r="}"!=t.next?CP(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:i,max:r,expr:e}}function TP(t,e){return e-t}function AP(t,e){var i=[];return function e(r){var n=t[r];if(1==n.length&&!n[0].term)return e(n[0].to);i.push(r);for(var o=0;o<n.length;o++){var s=n[o],a=s.term,l=s.to;a||-1!=i.indexOf(l)||e(l)}}(e),i.sort(TP)}function MP(t){var e=Object.create(null);for(var i in t){var r=t[i];if(!r.hasDefault)return null;e[i]=r.default}return e}function OP(t,e){var i=Object.create(null);for(var r in t){var n=e&&e[r];if(void 0===n){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);n=o.default}i[r]=n}return i}function DP(t){var e=Object.create(null);if(t)for(var i in t)e[i]=new IP(t[i]);return e}xP.next.get=function(){return this.tokens[this.pos]},wP.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},wP.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(wP.prototype,xP);var PP=function(t,e,i){this.name=t,this.schema=e,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=DP(i.attrs),this.defaultAttrs=MP(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t},RP={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};RP.isInline.get=function(){return!this.isBlock},RP.isTextblock.get=function(){return this.isBlock&&this.inlineContent},RP.isLeaf.get=function(){return this.contentMatch==yP.empty},RP.isAtom.get=function(){return this.isLeaf||this.spec.atom},PP.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},PP.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},PP.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:OP(this.attrs,t)},PP.prototype.create=function(t,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fP(this,this.computeAttrs(t),FD.from(e),qD.setFrom(i))},PP.prototype.createChecked=function(t,e,i){if(e=FD.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new fP(this,this.computeAttrs(t),e,qD.setFrom(i))},PP.prototype.createAndFill=function(t,e,i){if(t=this.computeAttrs(t),(e=FD.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var n=this.contentMatch.matchFragment(e).fillBefore(FD.empty,!0);return n?new fP(this,t,e.append(n),qD.setFrom(i)):null},PP.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0},PP.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},PP.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},PP.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:qD.empty:t},PP.compile=function(t,e){var i=Object.create(null);t.forEach((function(t,r){return i[t]=new PP(t,e,r)}));var r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var n in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i},Object.defineProperties(PP.prototype,RP);var IP=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},LP={isRequired:{configurable:!0}};LP.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(IP.prototype,LP);var zP=function(t,e,i,r){this.name=t,this.schema=i,this.spec=r,this.attrs=DP(r.attrs),this.rank=e,this.excluded=null;var n=MP(this.attrs);this.instance=n&&new qD(this,n)};zP.prototype.create=function(t){return!t&&this.instance?this.instance:new qD(this,OP(this.attrs,t))},zP.compile=function(t,e){var i=Object.create(null),r=0;return t.forEach((function(t,n){return i[t]=new zP(t,r++,e,n)})),i},zP.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},zP.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},zP.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var BP=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=BD.from(t.nodes),this.spec.marks=BD.from(t.marks),this.nodes=PP.compile(this.spec.nodes,this),this.marks=zP.compile(this.spec.marks,this);var i=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var n=this.nodes[r],o=n.spec.content||"",s=n.spec.marks;n.contentMatch=i[o]||(i[o]=yP.parse(o,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet="_"==s?null:s?NP(this,s.split(" ")):""!=s&&n.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],h=l.spec.excludes;l.excluded=null==h?[l]:""==h?[]:NP(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function NP(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r],o=t.marks[n],s=o;if(o)i.push(o);else for(var a in t.marks){var l=t.marks[a];("_"==n||l.spec.group&&l.spec.group.split(" ").indexOf(n)>-1)&&i.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return i}BP.prototype.node=function(t,e,i,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof PP))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,r)},BP.prototype.text=function(t,e){var i=this.nodes.text;return new mP(i,i.defaultAttrs,t,qD.setFrom(e))},BP.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},BP.prototype.nodeFromJSON=function(t){return fP.fromJSON(this,t)},BP.prototype.markFromJSON=function(t){return qD.fromJSON(this,t)},BP.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var jP=function(t,e){var i=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?i.tags.push(t):t.style&&i.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var i=t.nodes[e.node];return i.contentMatch.matchType(i)}))};jP.prototype.parse=function(t,e){void 0===e&&(e={});var i=new qP(this,e,!1);return i.addAll(t,null,e.from,e.to),i.finish()},jP.prototype.parseSlice=function(t,e){void 0===e&&(e={});var i=new qP(this,e,!0);return i.addAll(t,null,e.from,e.to),$D.maxOpen(i.finish())},jP.prototype.matchTag=function(t,e,i){for(var r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){var n=this.tags[r];if($P(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){var o=n.getAttrs(t);if(!1===o)continue;n.attrs=o}return n}}},jP.prototype.matchStyle=function(t,e,i,r){for(var n=r?this.styles.indexOf(r)+1:0;n<this.styles.length;n++){var o=this.styles[n];if(!(0!=o.style.indexOf(t)||o.context&&!i.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var s=o.getAttrs(e);if(!1===s)continue;o.attrs=s}return o}}},jP.schemaRules=function(t){var e=[];function i(t){for(var i=null==t.priority?50:t.priority,r=0;r<e.length;r++){var n=e[r];if((null==n.priority?50:n.priority)<i)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){i(t=KP(t)),t.mark=e}))};for(var n in t.marks)r(n);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach((function(t){i(t=KP(t)),t.node=s}));return e},jP.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new jP(t,jP.schemaRules(t)))};var FP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VP={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},HP={ol:!0,ul:!0};function WP(t){return(t?1:0)|("full"===t?2:0)}var UP=function(t,e,i,r,n,o,s){this.type=t,this.attrs=e,this.solid=n,this.match=o||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=i,this.activeMarks=qD.none,this.pendingMarks=r,this.stashMarks=[]};UP.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(FD.from(t));if(!e){var i,r=this.type.contentMatch;return(i=r.findWrapping(t.type))?(this.match=r,i):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},UP.prototype.finish=function(t){if(!(1&this.options)){var e,i=this.content[this.content.length-1];i&&i.isText&&(e=/[ \t\r\n\u000c]+$/.exec(i.text))&&(i.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-e[0].length)))}var r=FD.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(FD.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},UP.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},UP.prototype.applyPending=function(t){for(var e=0,i=this.pendingMarks;e<i.length;e++){var r=i[e];(this.type?this.type.allowsMarkType(r.type):XP(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var qP=function(t,e,i){this.parser=t,this.options=e,this.isOpen=i;var r,n=e.topNode,o=WP(e.preserveWhitespace)|(i?4:0);r=n?new UP(n.type,n.attrs,qD.none,qD.none,!0,e.topMatch||n.type.contentMatch,o):new UP(i?null:t.schema.topNodeType,null,qD.none,qD.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},GP={top:{configurable:!0},currentPos:{configurable:!0}};function $P(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function KP(t){var e={};for(var i in t)e[i]=t[i];return e}function XP(t,e){var i=e.schema.nodes,r=function(r){var n=i[r];if(n.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var i=0;i<t.edgeCount;i++){var r=t.edge(i),n=r.type,a=r.next;if(n==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(n.contentMatch)?{v:!0}:void 0}};for(var n in i){var o=r(n);if(o)return o.v}}GP.top.get=function(){return this.nodes[this.open]},qP.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),i=e?this.readStyles(function(t){var e,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=i.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=i)for(var n=0;n<i.length;n++)this.addPendingMark(i[n]);if(this.addElement(t),null!=i)for(var o=0;o<i.length;o++)this.removePendingMark(i[o],r)}},qP.prototype.addTextNode=function(t){var e=t.nodeValue,i=this.top;if((i.type?i.type.inlineContent:i.content.length&&i.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&i.options)2&i.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=i.content[i.content.length-1],n=t.previousSibling;(!r||n&&"BR"==n.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},qP.prototype.addElement=function(t,e){var i,r=t.nodeName.toLowerCase();HP.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,i=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&HP.hasOwnProperty(r)&&i?(i.appendChild(e),e=i):"li"==r?i=e:r&&(i=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,e));if(n?n.ignore:VP.hasOwnProperty(r))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var o,s=this.top,a=this.needsBlock;if(FP.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,n,!1===n.consuming?i:null)},qP.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},qP.prototype.readStyles=function(t){var e=qD.none;t:for(var i=0;i<t.length;i+=2)for(var r=null;;){var n=this.parser.matchStyle(t[i],t[i+1],this,r);if(!n)continue t;if(n.ignore)return null;if(e=this.parser.schema.marks[n.mark].create(n.attrs).addToSet(e),!1!==n.consuming)break;r=n}return e},qP.prototype.addElementByRule=function(t,e,i){var r,n,o,s=this;e.node?(n=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(n.create(e.attrs))||this.leafFallback(t):r=this.enter(n,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var a=this.top;if(n&&n.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,r)}r&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},qP.prototype.addAll=function(t,e,i,r){for(var n=i||0,o=i?t.childNodes[i]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++n)this.findAtPoint(t,n),this.addDOM(o),e&&FP.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,n)},qP.prototype.findPlace=function(t){for(var e,i,r=this.open;r>=0;r--){var n=this.nodes[r],o=n.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,i=n,!o.length))break;if(n.solid)break}if(!e)return!1;this.sync(i);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},qP.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var i=this.top;i.applyPending(t.type),i.match&&(i.match=i.match.matchType(t.type));for(var r=i.activeMarks,n=0;n<t.marks.length;n++)i.type&&!i.type.allowsMarkType(t.marks[n].type)||(r=t.marks[n].addToSet(r));return i.content.push(t.mark(r)),!0}return!1},qP.prototype.enter=function(t,e,i){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,i),r},qP.prototype.enterInner=function(t,e,i,r){this.closeExtra();var n=this.top;n.applyPending(t),n.match=n.match&&n.match.matchType(t,e);var o=null==r?-5&n.options:WP(r);4&n.options&&0==n.content.length&&(o|=4),this.nodes.push(new UP(t,e,n.activeMarks,n.pendingMarks,i,null,o)),this.open++},qP.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},qP.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},qP.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},GP.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var i=this.nodes[e].content,r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t},qP.prototype.findAtPoint=function(t,e){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)},qP.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},qP.prototype.findAround=function(t,e,i){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}},qP.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},qP.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var i=t.split("/"),r=this.options.context,n=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(n?0:1),s=function(t,a){for(;t>=0;t--){var l=i[t];if(""==l){if(t==i.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var h=a>0||0==a&&n?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!h||h.name!=l&&-1==h.groups.indexOf(l))return!1;a--}return!0};return s(i.length-1,this.open)},qP.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var r in this.parser.schema.nodes){var n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}},qP.prototype.addPendingMark=function(t){var e=function(t,e){for(var i=0;i<e.length;i++)if(t.eq(e[i]))return e[i]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},qP.prototype.removePendingMark=function(t,e){for(var i=this.open;i>=0;i--){var r=this.nodes[i];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var n=r.popFromStashMark(t);n&&(r.activeMarks=n.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(qP.prototype,GP);var YP=function(t,e){this.nodes=t||{},this.marks=e||{}};function ZP(t){var e={};for(var i in t){var r=t[i].spec.toDOM;r&&(e[i]=r)}return e}function JP(t){return t.document||window.document}YP.prototype.serializeFragment=function(t,e,i){var r=this;void 0===e&&(e={}),i||(i=JP(e).createDocumentFragment());var n=i,o=null;return t.forEach((function(t){if(o||t.marks.length){o||(o=[]);for(var i=0,s=0;i<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[i])||!1===a.type.spec.spanning)break;i+=2,s++}else s++}for(;i<o.length;)n=o.pop(),o.pop();for(;s<t.marks.length;){var l=t.marks[s++],h=r.serializeMark(l,t.isInline,e);h&&(o.push(l,n),n.appendChild(h.dom),n=h.contentDOM||h.dom)}}n.appendChild(r.serializeNode(t,e))})),i},YP.prototype.serializeNode=function(t,e){void 0===e&&(e={});var i=YP.renderSpec(JP(e),this.nodes[t.type.name](t)),r=i.dom,n=i.contentDOM;if(n){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,n,e):this.serializeFragment(t.content,e,n)}return r},YP.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var i=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var n=this.serializeMark(t.marks[r],t.isInline,e);n&&((n.contentDOM||n.dom).appendChild(i),i=n.dom)}return i},YP.prototype.serializeMark=function(t,e,i){void 0===i&&(i={});var r=this.marks[t.type.name];return r&&YP.renderSpec(JP(i),r(t,e))},YP.renderSpec=function(t,e,i){if(void 0===i&&(i=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],n=r.indexOf(" ");n>0&&(i=r.slice(0,n),r=r.slice(n+1));var o=null,s=i?t.createElementNS(i,r):t.createElement(r),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var h in l=2,a)if(null!=a[h]){var c=h.indexOf(" ");c>0?s.setAttributeNS(h.slice(0,c),h.slice(c+1),a[h]):s.setAttribute(h,a[h])}for(var p=l;p<e.length;p++){var u=e[p];if(0===u){if(p<e.length-1||p>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var d=YP.renderSpec(t,u,i),f=d.dom,v=d.contentDOM;if(s.appendChild(f),v){if(o)throw new RangeError("Multiple content holes");o=v}}return{dom:s,contentDOM:o}},YP.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new YP(this.nodesFromSchema(t),this.marksFromSchema(t)))},YP.nodesFromSchema=function(t){var e=ZP(t.nodes);return e.text||(e.text=function(t){return t.text}),e},YP.marksFromSchema=function(t){return ZP(t.marks)};var QP=Math.pow(2,16);function tR(t,e){return t+e*QP}function eR(t){return 65535&t}var iR=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null),this.pos=t,this.deleted=e,this.recover=i},rR=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};rR.prototype.recover=function(t){var e=0,i=eR(t);if(!this.inverted)for(var r=0;r<i;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*i]+e+function(t){return(t-(65535&t))/QP}(t)},rR.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},rR.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},rR.prototype._map=function(t,e,i){for(var r=0,n=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var l=this.ranges[s+n],h=this.ranges[s+o],c=a+l;if(t<=c){var p=a+r+((l?t==a?-1:t==c?1:e:e)<0?0:h);if(i)return p;var u=t==(e<0?a:c)?null:tR(s/3,t-a);return new iR(p,e<0?t!=a:t!=c,u)}r+=h-l}return i?t+r:new iR(t+r)},rR.prototype.touches=function(t,e){for(var i=0,r=eR(e),n=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?i:0);if(a>t)break;var l=this.ranges[s+n];if(t<=a+l&&s==3*r)return!0;i+=this.ranges[s+o]-l}return!1},rR.prototype.forEach=function(t){for(var e=this.inverted?2:1,i=this.inverted?1:2,r=0,n=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?n:0),a=o+(this.inverted?0:n),l=this.ranges[r+e],h=this.ranges[r+i];t(s,s+l,a,a+h),n+=h-l}},rR.prototype.invert=function(){return new rR(this.ranges,!this.inverted)},rR.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},rR.offset=function(t){return 0==t?rR.empty:new rR(t<0?[0,-t,0]:[0,0,t])},rR.empty=new rR([]);var nR=function(t,e,i,r){this.maps=t||[],this.from=i||0,this.to=null==r?this.maps.length:r,this.mirror=e};function oR(t){var e=Error.call(this,t);return e.__proto__=oR.prototype,e}nR.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new nR(this.maps,this.mirror,t,e)},nR.prototype.copy=function(){return new nR(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},nR.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},nR.prototype.appendMapping=function(t){for(var e=0,i=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?i+r:null)}},nR.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},nR.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},nR.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?i-r-1:null)}},nR.prototype.invert=function(){var t=new nR;return t.appendMappingInverted(this),t},nR.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t},nR.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},nR.prototype._map=function(t,e,i){for(var r=!1,n=this.from;n<this.to;n++){var o=this.maps[n].mapResult(t,e);if(null!=o.recover){var s=this.getMirror(n);if(null!=s&&s>n&&s<this.to){n=s,t=this.maps[s].recover(o.recover);continue}}o.deleted&&(r=!0),t=o.pos}return i?t:new iR(t,r)},oR.prototype=Object.create(Error.prototype),oR.prototype.constructor=oR,oR.prototype.name="TransformError";var sR=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new nR},aR={before:{configurable:!0},docChanged:{configurable:!0}};function lR(){throw new Error("Override me")}aR.before.get=function(){return this.docs.length?this.docs[0]:this.doc},sR.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new oR(e.failed);return this},sR.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},aR.docChanged.get=function(){return this.steps.length>0},sR.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(sR.prototype,aR);var hR=Object.create(null),cR=function(){};cR.prototype.apply=function(t){return lR()},cR.prototype.getMap=function(){return rR.empty},cR.prototype.invert=function(t){return lR()},cR.prototype.map=function(t){return lR()},cR.prototype.merge=function(t){return null},cR.prototype.toJSON=function(){return lR()},cR.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var i=hR[e.stepType];if(!i)throw new RangeError("No step type "+e.stepType+" defined");return i.fromJSON(t,e)},cR.jsonID=function(t,e){if(t in hR)throw new RangeError("Duplicate use of step JSON ID "+t);return hR[t]=e,e.prototype.jsonID=t,e};var pR=function(t,e){this.doc=t,this.failed=e};pR.ok=function(t){return new pR(t,null)},pR.fail=function(t){return new pR(null,t)},pR.fromReplace=function(t,e,i,r){try{return pR.ok(t.replace(e,i,r))}catch(t){if(t instanceof GD)return pR.fail(t.message);throw t}};var uR=function(t){function e(e,i,r,n){t.call(this),this.from=e,this.to=i,this.slice=r,this.structure=!!n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&fR(t,this.from,this.to)?pR.fail("Structure replace would overwrite content"):pR.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new rR([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var i=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return i.deleted&&r.deleted?null:new e(i.pos,Math.max(i.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var i=this.slice.size+t.slice.size==0?$D.empty:new $D(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,i,this.structure)}var r=this.slice.size+t.slice.size==0?$D.empty:new $D(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(i.from,i.to,$D.fromJSON(t,i.slice),!!i.structure)},e}(cR);cR.jsonID("replace",uR);var dR=function(t){function e(e,i,r,n,o,s,a){t.call(this),this.from=e,this.to=i,this.gapFrom=r,this.gapTo=n,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(fR(t,this.from,this.gapFrom)||fR(t,this.gapTo,this.to)))return pR.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return pR.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,e.content);return i?pR.fromReplace(t,this.from,this.to,i):pR.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new rR([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var i=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return i.deleted&&r.deleted||n<i.pos||o>r.pos?null:new e(i.pos,r.pos,n,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(i.from,i.to,i.gapFrom,i.gapTo,$D.fromJSON(t,i.slice),i.insert,!!i.structure)},e}(cR);function fR(t,e,i){for(var r=t.resolve(e),n=i-e,o=r.depth;n>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,n--;if(n>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));n>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,n--}return!1}function vR(t,e,i){return(0==e||t.canReplace(e,t.childCount))&&(i==t.childCount||t.canReplace(0,i))}function mR(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),i=t.depth;;--i){var r=t.$from.node(i),n=t.$from.index(i),o=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(n,o,e))return i;if(0==i||r.type.spec.isolating||!vR(r,n,o))break}}function gR(t){return{type:t,attrs:null}}function yR(t,e,i,r){void 0===i&&(i=1);var n=t.resolve(e),o=n.depth-i,s=r&&r[r.length-1]||n.parent;if(o<0||n.parent.type.spec.isolating||!n.parent.canReplace(n.index(),n.parent.childCount)||!s.type.validContent(n.parent.content.cutByIndex(n.index(),n.parent.childCount)))return!1;for(var a=n.depth-1,l=i-2;a>o;a--,l--){var h=n.node(a),c=n.index(a);if(h.type.spec.isolating)return!1;var p=h.content.cutByIndex(c,h.childCount),u=r&&r[l]||h;if(u!=h&&(p=p.replaceChild(0,u.type.create(u.attrs))),!h.canReplace(c+1,h.childCount)||!u.type.validContent(p))return!1}var d=n.indexAfter(o),f=r&&r[0];return n.node(o).canReplaceWith(d,d,f?f.type:n.node(o+1).type)}function bR(t,e){var i=t.resolve(e),r=i.index();return wR(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(r,r+1)}function wR(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function xR(t,e,i){var r=t.resolve(e);if(!i.content.size)return e;for(var n=i.content,o=0;o<i.openStart;o++)n=n.firstChild.content;for(var s=1;s<=(0==i.openStart&&i.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,h=r.index(a)+(l>0?1:0);if(1==s?r.node(a).canReplace(h,h,n):r.node(a).contentMatchAt(h).findWrapping(n.firstChild.type))return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function _R(t,e,i){for(var r=[],n=0;n<t.childCount;n++){var o=t.child(n);o.content.size&&(o=o.copy(_R(o.content,e,o))),o.isInline&&(o=e(o,i,n)),r.push(o)}return FD.fromArray(r)}cR.jsonID("replaceAround",dR),sR.prototype.lift=function(t,e){for(var i=t.$from,r=t.$to,n=t.depth,o=i.before(n+1),s=r.after(n+1),a=o,l=s,h=FD.empty,c=0,p=n,u=!1;p>e;p--)u||i.index(p)>0?(u=!0,h=FD.from(i.node(p).copy(h)),c++):a--;for(var d=FD.empty,f=0,v=n,m=!1;v>e;v--)m||r.after(v+1)<r.end(v)?(m=!0,d=FD.from(r.node(v).copy(d)),f++):l++;return this.step(new dR(a,l,o,s,new $D(h.append(d),c,f),h.size-c,!0))},sR.prototype.wrap=function(t,e){for(var i=FD.empty,r=e.length-1;r>=0;r--)i=FD.from(e[r].type.create(e[r].attrs,i));var n=t.start,o=t.end;return this.step(new dR(n,o,n,o,new $D(i,0,0),e.length,!0))},sR.prototype.setBlockType=function(t,e,i,r){var n=this;if(void 0===e&&(e=t),!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(i,r)&&function(t,e,i){var r=t.resolve(e),n=r.index();return r.parent.canReplaceWith(n,n+1,i)}(n.doc,n.mapping.slice(o).map(e),i)){n.clearIncompatible(n.mapping.slice(o).map(e,1),i);var s=n.mapping.slice(o),a=s.map(e,1),l=s.map(e+t.nodeSize,1);return n.step(new dR(a,l,a+1,l-1,new $D(FD.from(i.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},sR.prototype.setNodeMarkup=function(t,e,i,r){var n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at given position");e||(e=n.type);var o=e.create(i,null,r||n.marks);if(n.isLeaf)return this.replaceWith(t,t+n.nodeSize,o);if(!e.validContent(n.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new dR(t,t+n.nodeSize,t+1,t+n.nodeSize-1,new $D(FD.from(o),0,0),1,!0))},sR.prototype.split=function(t,e,i){void 0===e&&(e=1);for(var r=this.doc.resolve(t),n=FD.empty,o=FD.empty,s=r.depth,a=r.depth-e,l=e-1;s>a;s--,l--){n=FD.from(r.node(s).copy(n));var h=i&&i[l];o=FD.from(h?h.type.create(h.attrs,o):r.node(s).copy(o))}return this.step(new uR(t,t,new $D(n.append(o),e,e),!0))},sR.prototype.join=function(t,e){void 0===e&&(e=1);var i=new uR(t-e,t+e,$D.empty,!0);return this.step(i)};var kR=function(t){function e(e,i,r){t.call(this),this.from=e,this.to=i,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,i=t.slice(this.from,this.to),r=t.resolve(this.from),n=r.node(r.sharedDepth(this.to)),o=new $D(_R(i.content,(function(t,i){return t.isAtom&&i.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),n),i.openStart,i.openEnd);return pR.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new SR(this.from,this.to,this.mark)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return i.deleted&&r.deleted||i.pos>=r.pos?null:new e(i.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(i.from,i.to,t.markFromJSON(i.mark))},e}(cR);cR.jsonID("addMark",kR);var SR=function(t){function e(e,i,r){t.call(this),this.from=e,this.to=i,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,i=t.slice(this.from,this.to),r=new $D(_R(i.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),i.openStart,i.openEnd);return pR.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new kR(this.from,this.to,this.mark)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return i.deleted&&r.deleted||i.pos>=r.pos?null:new e(i.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(i.from,i.to,t.markFromJSON(i.mark))},e}(cR);function CR(t,e,i){return!i.openStart&&!i.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),i.content)}cR.jsonID("removeMark",SR),sR.prototype.addMark=function(t,e,i){var r=this,n=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,l,h){if(r.isInline){var c=r.marks;if(!i.isInSet(c)&&h.type.allowsMarkType(i.type)){for(var p=Math.max(l,t),u=Math.min(l+r.nodeSize,e),d=i.addToSet(c),f=0;f<c.length;f++)c[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(c[f])?s.to=u:n.push(s=new SR(p,u,c[f])));a&&a.to==p?a.to=u:o.push(a=new kR(p,u,i))}}})),n.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},sR.prototype.removeMark=function(t,e,i){var r=this;void 0===i&&(i=null);var n=[],o=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){o++;var a=null;if(i instanceof zP){var l=i.isInSet(r.marks);l&&(a=[l])}else i?i.isInSet(r.marks)&&(a=[i]):a=r.marks;if(a&&a.length)for(var h=Math.min(s+r.nodeSize,e),c=0;c<a.length;c++){for(var p=a[c],u=void 0,d=0;d<n.length;d++){var f=n[d];f.step==o-1&&p.eq(n[d].style)&&(u=f)}u?(u.to=h,u.step=o):n.push({style:p,from:Math.max(s,t),to:h,step:o})}}})),n.forEach((function(t){return r.step(new SR(t.from,t.to,t.style))})),this},sR.prototype.clearIncompatible=function(t,e,i){void 0===i&&(i=e.contentMatch);for(var r=this.doc.nodeAt(t),n=[],o=t+1,s=0;s<r.childCount;s++){var a=r.child(s),l=o+a.nodeSize,h=i.matchType(a.type,a.attrs);if(h){i=h;for(var c=0;c<a.marks.length;c++)e.allowsMarkType(a.marks[c].type)||this.step(new SR(o,l,a.marks[c]))}else n.push(new uR(o,l,$D.empty));o=l}if(!i.validEnd){var p=i.fillBefore(FD.empty,!0);this.replace(o,o,new $D(p,0,0))}for(var u=n.length-1;u>=0;u--)this.step(n[u]);return this},sR.prototype.replace=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=$D.empty);var r=function(t,e,i,r){if(void 0===i&&(i=e),void 0===r&&(r=$D.empty),e==i&&!r.size)return null;var n=t.resolve(e),o=t.resolve(i);return CR(n,o,r)?new uR(e,i,r):new ER(n,o,r).fit()}(this.doc,t,e,i);return r&&this.step(r),this},sR.prototype.replaceWith=function(t,e,i){return this.replace(t,e,new $D(FD.from(i),0,0))},sR.prototype.delete=function(t,e){return this.replace(t,e,$D.empty)},sR.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var ER=function(t,e,i){this.$to=e,this.$from=t,this.unplaced=i,this.frontier=[];for(var r=0;r<=t.depth;r++){var n=t.node(r);this.frontier.push({type:n.type,match:n.contentMatchAt(t.indexAfter(r))})}this.placed=FD.empty;for(var o=t.depth;o>0;o--)this.placed=FD.from(t.node(o).copy(this.placed))},TR={depth:{configurable:!0}};function AR(t,e,i){return 0==e?t.cutByIndex(i):t.replaceChild(0,t.firstChild.copy(AR(t.firstChild.content,e-1,i)))}function MR(t,e,i){return 0==e?t.append(i):t.replaceChild(t.childCount-1,t.lastChild.copy(MR(t.lastChild.content,e-1,i)))}function OR(t,e){for(var i=0;i<e;i++)t=t.firstChild.content;return t}function DR(t,e,i){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,DR(r.firstChild,e-1,1==r.childCount?i-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),i<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(FD.empty,!0)))),t.copy(r)}function PR(t,e,i,r,n){var o=t.node(e),s=n?t.indexAfter(e):t.index(e);if(s==o.childCount&&!i.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!function(t,e,i){for(var r=i;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(i,o.content,s)?a:null}function RR(t,e,i,r,n){if(e<i){var o=t.firstChild;t=t.replaceChild(0,o.copy(RR(o.content,e+1,i,r,o)))}if(e>r){var s=n.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(FD.empty,!0))}return t}function IR(t,e){for(var i=[],r=Math.min(t.depth,e.depth);r>=0;r--){var n=t.start(r);if(n<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;n==e.start(r)&&i.push(r)}return i}TR.depth.get=function(){return this.frontier.length-1},ER.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,r=this.$from,n=this.close(e<0?this.$to:r.doc.resolve(e));if(!n)return null;for(var o=this.placed,s=r.depth,a=n.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new $D(o,s,a);return e>-1?new dR(r.pos,e,this.$to.pos,this.$to.end(),l,i):l.size||r.pos!=this.$to.pos?new uR(r.pos,n.pos,l):void 0},ER.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var i=void 0,r=(e?(i=OR(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,n=this.depth;n>=0;n--){var o=this.frontier[n],s=o.type,a=o.match,l=void 0,h=void 0;if(1==t&&(r?a.matchType(r.type)||(h=a.fillBefore(FD.from(r),!1)):s.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:n,parent:i,inject:h};if(2==t&&r&&(l=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:n,parent:i,wrap:l};if(i&&a.matchType(i.type))break}},ER.prototype.openMore=function(){var t=this.unplaced,e=t.content,i=t.openStart,r=t.openEnd,n=OR(e,i);return!(!n.childCount||n.firstChild.isLeaf)&&(this.unplaced=new $D(e,i+1,Math.max(r,n.size+i>=e.size-r?i+1:0)),!0)},ER.prototype.dropNode=function(){var t=this.unplaced,e=t.content,i=t.openStart,r=t.openEnd,n=OR(e,i);if(n.childCount<=1&&i>0){var o=e.size-i<=i+n.size;this.unplaced=new $D(AR(e,i-1,1),i-1,o?i-1:r)}else this.unplaced=new $D(AR(e,i,1),i,r)},ER.prototype.placeNodes=function(t){for(var e=t.sliceDepth,i=t.frontierDepth,r=t.parent,n=t.inject,o=t.wrap;this.depth>i;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,l=r?r.content:a.content,h=a.openStart-e,c=0,p=[],u=this.frontier[i],d=u.match,f=u.type;if(n){for(var v=0;v<n.childCount;v++)p.push(n.child(v));d=d.matchFragment(n)}for(var m=l.size+e-(a.content.size-a.openEnd);c<l.childCount;){var g=l.child(c),y=d.matchType(g.type);if(!y)break;(++c>1||0==h||g.content.size)&&(d=y,p.push(DR(g.mark(f.allowedMarks(g.marks)),1==c?h:0,c==l.childCount?m:-1)))}var b=c==l.childCount;b||(m=-1),this.placed=MR(this.placed,i,FD.from(p)),this.frontier[i].match=d,b&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,x=l;w<m;w++){var _=x.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),x=_.content}this.unplaced=b?0==e?$D.empty:new $D(AR(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new $D(AR(a.content,e,c),a.openStart,a.openEnd)},ER.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!PR(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var i=this.$to.depth,r=this.$to.after(i);i>1&&r==this.$to.end(--i);)++r;return r},ER.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var i=this.frontier[e],r=i.match,n=i.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=PR(t,e,n,r,o);if(s){for(var a=e-1;a>=0;a--){var l=this.frontier[a],h=l.match,c=PR(t,a,l.type,h,!0);if(!c||c.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},ER.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=MR(this.placed,e.depth,e.fit)),t=e.move;for(var i=e.depth+1;i<=t.depth;i++){var r=t.node(i),n=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,n)}return t},ER.prototype.openFrontierNode=function(t,e,i){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=MR(this.placed,this.depth,FD.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})},ER.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(FD.empty,!0);t.childCount&&(this.placed=MR(this.placed,this.frontier.length,t))},Object.defineProperties(ER.prototype,TR),sR.prototype.replaceRange=function(t,e,i){if(!i.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),n=this.doc.resolve(e);if(CR(r,n,i))return this.step(new uR(t,e,i));var o=IR(r,this.doc.resolve(e));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var h=r.node(a).type.spec;if(h.defining||h.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==l&&o.splice(1,0,-a)}for(var c=o.indexOf(s),p=[],u=i.openStart,d=i.content,f=0;;f++){var v=d.firstChild;if(p.push(v),f==i.openStart)break;d=v.content}u>0&&p[u-1].type.spec.defining&&r.node(c).type!=p[u-1].type?u-=1:u>=2&&p[u-1].isTextblock&&p[u-2].type.spec.defining&&r.node(c).type!=p[u-2].type&&(u-=2);for(var m=i.openStart;m>=0;m--){var g=(m+u+1)%(i.openStart+1),y=p[g];if(y)for(var b=0;b<o.length;b++){var w=o[(b+c)%o.length],x=!0;w<0&&(x=!1,w=-w);var _=r.node(w-1),k=r.index(w-1);if(_.canReplaceWith(k,k,y.type,y.marks))return this.replace(r.before(w),x?n.after(w):e,new $D(RR(i.content,0,i.openStart,g),g,i.openEnd))}}for(var S=this.steps.length,C=o.length-1;C>=0&&(this.replace(t,e,i),!(this.steps.length>S));C--){var E=o[C];C<0||(t=r.before(E),e=n.after(E))}return this},sR.prototype.replaceRangeWith=function(t,e,i){if(!i.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,i){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),i))return e;if(0==r.parentOffset)for(var n=r.depth-1;n>=0;n--){var o=r.index(n);if(r.node(n).canReplaceWith(o,o,i))return r.before(n+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,i))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,i.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new $D(FD.from(i),0,0))},sR.prototype.deleteRange=function(t,e){for(var i=this.doc.resolve(t),r=this.doc.resolve(e),n=IR(i,r),o=0;o<n.length;o++){var s=n[o],a=o==n.length-1;if(a&&0==s||i.node(s).type.contentMatch.validEnd)return this.delete(i.start(s),r.end(s));if(s>0&&(a||i.node(s-1).canReplace(i.index(s-1),r.indexAfter(s-1))))return this.delete(i.before(s),r.after(s))}for(var l=1;l<=i.depth&&l<=r.depth;l++)if(t-i.start(l)==i.depth-l&&e>i.end(l)&&r.end(l)-e!=r.depth-l)return this.delete(i.before(l),e);return this.delete(t,e)};var LR=Object.create(null),zR=function(t,e,i){this.ranges=i||[new NR(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},BR={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};BR.anchor.get=function(){return this.$anchor.pos},BR.head.get=function(){return this.$head.pos},BR.from.get=function(){return this.$from.pos},BR.to.get=function(){return this.$to.pos},BR.$from.get=function(){return this.ranges[0].$from},BR.$to.get=function(){return this.ranges[0].$to},BR.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},zR.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},zR.prototype.replace=function(t,e){void 0===e&&(e=$D.empty);for(var i=e.content.lastChild,r=null,n=0;n<e.openEnd;n++)r=i,i=i.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],h=l.$from,c=l.$to,p=t.mapping.slice(o);t.replaceRange(p.map(h.pos),p.map(c.pos),a?$D.empty:e),0==a&&GR(t,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}},zR.prototype.replaceWith=function(t,e){for(var i=t.steps.length,r=this.ranges,n=0;n<r.length;n++){var o=r[n],s=o.$from,a=o.$to,l=t.mapping.slice(i),h=l.map(s.pos),c=l.map(a.pos);n?t.deleteRange(h,c):(t.replaceRangeWith(h,c,e),GR(t,i,e.isInline?-1:1))}},zR.findFrom=function(t,e,i){var r=t.parent.inlineContent?new jR(t):qR(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(var n=t.depth-1;n>=0;n--){var o=e<0?qR(t.node(0),t.node(n),t.before(n+1),t.index(n),e,i):qR(t.node(0),t.node(n),t.after(n+1),t.index(n)+1,e,i);if(o)return o}},zR.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new WR(t.node(0))},zR.atStart=function(t){return qR(t,t,0,0,1)||new WR(t)},zR.atEnd=function(t){return qR(t,t,t.content.size,t.childCount,-1)||new WR(t)},zR.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=LR[e.type];if(!i)throw new RangeError("No selection type "+e.type+" defined");return i.fromJSON(t,e)},zR.jsonID=function(t,e){if(t in LR)throw new RangeError("Duplicate use of selection JSON ID "+t);return LR[t]=e,e.prototype.jsonID=t,e},zR.prototype.getBookmark=function(){return jR.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(zR.prototype,BR),zR.prototype.visible=!0;var NR=function(t,e){this.$from=t,this.$to=e},jR=function(t){function e(e,i){void 0===i&&(i=e),t.call(this,e,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={$cursor:{configurable:!0}};return i.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(i,r){var n=i.resolve(r.map(this.head));if(!n.parent.inlineContent)return t.near(n);var o=i.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:n,n)},e.prototype.replace=function(e,i){if(void 0===i&&(i=$D.empty),t.prototype.replace.call(this,e,i),i==$D.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new FR(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,i){if("number"!=typeof i.anchor||"number"!=typeof i.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(i.anchor),t.resolve(i.head))},e.create=function(t,e,i){void 0===i&&(i=e);var r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))},e.between=function(i,r,n){var o=i.pos-r.pos;if(n&&!o||(n=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,n,!0)||t.findFrom(r,-n,!0);if(!s)return t.near(r,n);r=s.$head}return i.parent.inlineContent||(0==o||(i=(t.findFrom(i,-n,!0)||t.findFrom(i,n,!0)).$anchor).pos<r.pos!=o<0)&&(i=r),new e(i,r)},Object.defineProperties(e.prototype,i),e}(zR);zR.jsonID("text",jR);var FR=function(t,e){this.anchor=t,this.head=e};FR.prototype.map=function(t){return new FR(t.map(this.anchor),t.map(this.head))},FR.prototype.resolve=function(t){return jR.between(t.resolve(this.anchor),t.resolve(this.head))};var VR=function(t){function e(e){var i=e.nodeAfter,r=e.node(0).resolve(e.pos+i.nodeSize);t.call(this,e,r),this.node=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(i,r){var n=r.mapResult(this.anchor),o=n.deleted,s=n.pos,a=i.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new $D(FD.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new HR(this.anchor)},e.fromJSON=function(t,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(i.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(zR);VR.prototype.visible=!1,zR.jsonID("node",VR);var HR=function(t){this.anchor=t};HR.prototype.map=function(t){var e=t.mapResult(this.anchor),i=e.deleted,r=e.pos;return i?new FR(r,r):new HR(r)},HR.prototype.resolve=function(t){var e=t.resolve(this.anchor),i=e.nodeAfter;return i&&VR.isSelectable(i)?new VR(e):zR.near(e)};var WR=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,i){if(void 0===i&&(i=$D.empty),i==$D.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,i)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return UR},e}(zR);zR.jsonID("all",WR);var UR={map:function(){return this},resolve:function(t){return new WR(t)}};function qR(t,e,i,r,n,o){if(e.inlineContent)return jR.create(t,i);for(var s=r-(n>0?0:1);n>0?s<e.childCount:s>=0;s+=n){var a=e.child(s);if(a.isAtom){if(!o&&VR.isSelectable(a))return VR.create(t,i-(n<0?a.nodeSize:0))}else{var l=qR(t,a,i+n,n<0?a.childCount:0,n,o);if(l)return l}i+=a.nodeSize*n}}function GR(t,e,i){var r=t.steps.length-1;if(!(r<e)){var n,o=t.steps[r];if(o instanceof uR||o instanceof dR)t.mapping.maps[r].forEach((function(t,e,i,r){null==n&&(n=r)})),t.setSelection(zR.near(t.doc.resolve(n),i))}}var $R=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return i.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},i.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return qD.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},i.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,i){t.prototype.addStep.call(this,e,i),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var i=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||qD.none))),i.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,i){void 0===i&&(i=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,i);var n=this.storedMarks;if(!n){var o=this.doc.resolve(e);n=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,n)),this.selection.empty||this.setSelection(zR.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},i.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},i.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,i),e}(sR);function KR(t,e){return e&&t?t.bind(e):t}var XR=function(t,e,i){this.name=t,this.init=KR(e.init,i),this.apply=KR(e.apply,i)},YR=[new XR("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new XR("selection",{init:function(t,e){return t.selection||zR.atStart(e.doc)},apply:function(t){return t.selection}}),new XR("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,i,r){return r.selection.$cursor?t.storedMarks:null}}),new XR("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],ZR=function(t,e){var i=this;this.schema=t,this.fields=YR.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(i.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");i.plugins.push(t),i.pluginsByKey[t.key]=t,t.spec.state&&i.fields.push(new XR(t.key,t.spec.state,t))}))},JR=function(t){this.config=t},QR={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};QR.schema.get=function(){return this.config.schema},QR.plugins.get=function(){return this.config.plugins},JR.prototype.apply=function(t){return this.applyTransaction(t).state},JR.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=e){var r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},JR.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],i=this.applyInner(t),r=null;;){for(var n=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,l=r?r[o].state:this,h=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,i);if(h&&i.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!r){r=[];for(var c=0;c<this.config.plugins.length;c++)r.push(c<o?{state:i,n:e.length}:{state:this,n:0})}e.push(h),i=i.applyInner(h),n=!0}r&&(r[o]={state:i,n:e.length})}}if(!n)return{state:i,transactions:e}}},JR.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new JR(this.config),i=this.config.fields,r=0;r<i.length;r++){var n=i[r];e[n.name]=n.apply(t,this[n.name],this,e)}for(var o=0;o<tI.length;o++)tI[o](this,t,e);return e},QR.tr.get=function(){return new $R(this)},JR.create=function(t){for(var e=new ZR(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new JR(e),r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i},JR.prototype.reconfigure=function(t){for(var e=new ZR(this.schema,t.plugins),i=e.fields,r=new JR(e),n=0;n<i.length;n++){var o=i[n].name;r[o]=this.hasOwnProperty(o)?this[o]:i[n].init(t,r)}return r},JR.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var i in t){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[i],n=r.spec.state;n&&n.toJSON&&(e[i]=n.toJSON.call(r,this[r.key]))}return e},JR.fromJSON=function(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new ZR(t.schema,t.plugins),n=new JR(r);return r.fields.forEach((function(r){if("doc"==r.name)n.doc=fP.fromJSON(t.schema,e.doc);else if("selection"==r.name)n.selection=zR.fromJSON(n.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(n.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(var o in i){var s=i[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(n[r.name]=a.fromJSON.call(s,t,e[o],n))}n[r.name]=r.init(t,n)}})),n},JR.addApplyListener=function(t){tI.push(t)},JR.removeApplyListener=function(t){var e=tI.indexOf(t);e>-1&&tI.splice(e,1)},Object.defineProperties(JR.prototype,QR);var tI=[];function eI(t,e,i){for(var r in t){var n=t[r];n instanceof Function?n=n.bind(e):"handleDOMEvents"==r&&(n=eI(n,e,{})),i[r]=n}return i}var iI=function(t){this.props={},t.props&&eI(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:nI("plugin")};iI.prototype.getState=function(t){return t[this.key]};var rI=Object.create(null);function nI(t){return t in rI?t+"$"+ ++rI[t]:(rI[t]=0,t+"$")}var oI=function(t){void 0===t&&(t="key"),this.key=nI(t)};oI.prototype.get=function(t){return t.config.pluginsByKey[this.key]},oI.prototype.getState=function(t){return t[this.key]};var sI=function(t,e,i){var r,n=document.createElement("template");"content"in n?(n.innerHTML=t,r=n.content):r=(new DOMParser).parseFromString(t,"text/html").body||document.createDocumentFragment();return jP.fromSchema(e).parse(r,i)},aI=function(t,e,i){return void 0===e&&(e="setHTML"),void 0===i&&(i={preserveWhitespace:"full"}),function(r,n){return n(r.tr.setSelection(new WR(r.doc)).replaceSelectionWith(sI(t,r.schema,i)).setMeta("commandName",e))}};var lI=function(){return lI=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},lI.apply(this,arguments)};function hI(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}var cI=function(t,e){var i=e.style,r=e.value,n=e.newValue;if(!t)return{changed:!1,style:null};var o=t.split(/\s*;\s*/).filter((function(t){return Boolean(t)})),s=o.filter((function(t){var e=t.split(/\s*:\s*/);return!(e[0].toLowerCase()===i&&r.test(e[1]))}));return n&&s.push(i+": "+n),{style:s.join("; ")+(s.length?";":""),changed:Boolean(n)||s.length!==o.length}},pI=function(t){return t instanceof fP?t.type.name:t.name},uI=function(t,e){return void 0===e&&(e=1),function(i){return function(t,e){return void 0===e&&(e=1),function(i){for(var r=i.$from,n=r.depth;n>0;n--){var o=r.node(n);if(t(o)&&0==(e-=1))return{depth:n,node:o}}}}((function(e){return pI(e)===pI(t)}),e)(i)}},dI=function(t,e){return function(i,r){var n=i.tr.replaceSelectionWith(t);e&&n.scrollIntoView(),r(n)}},fI=function(t,e,i){for(var r=function(r){var n=e[r],o=n.$from,s=n.$to,a=0===o.depth&&t.type.allowsMarkType(i);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(i)})),a)return{v:!0}},n=0;n<e.length;n++){var o=r(n);if(o)return o.v}return!1},vI=function(t,e,i){return function(r,n){var o=r.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!fI(r.doc,l,t))return!1;if(n)if(a)t.isInSet(r.storedMarks||a.marks())?n(i.removeStoredMark(t)):n(i.addStoredMark(t.create(e)));else{for(var h=!1,c=0;!h&&c<l.length;c++){var p=l[c],u=p.$from,d=p.$to;h=r.doc.rangeHasMark(u.pos,d.pos,t)}for(c=0;c<l.length;c++){var f=l[c];u=f.$from,d=f.$to;h?i.removeMark(u.pos,d.pos,t):i.addMark(u.pos,d.pos,t.create(e))}n(i.scrollIntoView())}return!0}},mI=function(t,e,i,r){void 0===r&&(r=null);var n=[],o=0;return t.doc.nodesBetween(e,i,(function(t,s){if(t.isInline){o++;var a=null;if(r instanceof zP){var l=r.isInSet(t.marks);l&&(a=[l])}else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length)for(var h=Math.min(s+t.nodeSize,i),c=0;c<a.length;c++){for(var p=a[c],u=void 0,d=0;d<n.length;d++){var f=n[d];f.step===o-1&&p.eq(f.style)&&(u=f)}u?(u.to=h,u.step=o):n.push({style:p,from:Math.max(s,e),to:h,step:o})}}})),n.forEach((function(e){return t.step(new SR(e.from,e.to,e.style))})),t},gI=function(t,e){var i=e.except,r=t.doc,n=t.selection,o=r.type.schema,s=n.empty,a=n.ranges,l=(i||[]).map((function(t){return t.name}));if(!s){var h=Object.keys(o.marks).map((function(t){return o.marks[t]})).filter((function(t){return-1===l.indexOf(t.name)}));a.forEach((function(e){var i=e.$from,r=e.$to;h.forEach((function(e){return t.removeMark(i.pos,r.pos,e)}))}))}},yI=function(t,e){var i,r=t.schema.marks,n=(e.altMarks||[]).filter((function(t){return r[t]})),o=e.altStyle,s=t.selection,a=s.from,l=s.$from,h=s.to,c=s.empty,p=r[e.mark],u=t.doc,d=!1;return c?(i=t.storedMarks||l.marks(),d=p&&p.isInSet(i)||n.some((function(t){return r[t].isInSet(i)}))):d=p&&u.rangeHasMark(a,h,p)||n.some((function(t){return u.rangeHasMark(a,h,r[t])})),!d&&o&&r.style?wI(t,r.style).some((function(t){return null!==bI(t,o)})):Boolean(d)},bI=function(t,e){for(var i=(t&&t.attrs.style||"").split(/\s*;\s*/).filter((function(t){return Boolean(t)})),r=0;r<i.length;r++){var n=i[r].split(/\s*:\s*/);if(n[0].toLowerCase()===e.name&&e.value.test(n[1]))return n[1]}return null},wI=function(t,e){var i=t.selection,r=i.from,n=i.$from,o=i.to,s=i.empty,a=[];return s?a.push(e.isInSet(t.storedMarks||n.marks())):t.doc.nodesBetween(r,o,(function(t){t.isInline&&a.push(e.isInSet(t.marks))})),a},xI=function(t,e){var i=wI(t,e),r=i.filter((function(t){return Boolean(t)}));return{hasNodesWithoutMarks:i.length!==r.length,marks:r}},_I=function(t,e){var i=t.find((function(t){return"style"===t.type.name})),r=i&&i.attrs.style;return cI(r,e)},kI=function(t,e,i,r,n){var o=n.create({style:r.style}),s=[],a=[],l=null,h=null;return t.doc.nodesBetween(e,i,(function(t,c,p){if(t.isInline){var u=t.marks;if(!o.isInSet(u)&&p.type.allowsMarkType(o.type)){var d=Math.max(c,e),f=Math.min(c+t.nodeSize,i),v=_I(u,r);if(v.changed||r.newValue){for(var m=v.changed?{style:v.style||null}:{style:[r.style]+": "+r.newValue+";"},g=n.isInSet(u)?u.find((function(t){return"style"===t.type.name})):null,y=g?lI({},g.attrs,m):m,b=n.create(y),w=b.addToSet(u),x=0;x<u.length;x++)u[x].isInSet(w)||(l&&l.to===d&&l.mark.eq(u[x])?l.to=f:(l=new SR(d,f,u[x]),s.push(l)));var _=h&&h.to===d,k=_&&b.attrs.style===h.mark.attrs.style;_&&k?h.to=f:Object.keys(y).some((function(t){return null!==y[t]}))&&(h=new kR(d,f,b),a.push(h))}}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)})),s.length+a.length>0},SI=function(t,e){var i=t.schema.marks.style;return(i?wI(t,i):[]).map((function(t){return bI(t,e)})).filter((function(t){return null!==t}))},CI=function(t,e){return function(i,r,n){var o=i.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!fI(i.doc,l,t))return!1;var h,c,p,u,d=!1;if(r)if(n=n||i.tr,a){var f=i.storedMarks||a.marks();if(t.isInSet(f)){var v=_I(f,e),m=f.find((function(t){return"style"===t.type.name})),g=lI({},m?m.attrs:{},{style:v.style||null});if(h=m.attrs,c=g,p=Object.keys(h),u=Object.keys(c),p.length===u.length&&p.every((function(t){return h[t]===c[t]})))return!1;r(n.removeStoredMark(t)),Object.keys(g).some((function(t){return null!==g[t]}))&&r(n.addStoredMark(t.create(g))),d=!0}}else{for(var y=0;y<l.length;y++){var b=l[y],w=b.$from,x=b.$to;d=kI(n,w.pos,x.pos,e,t)}d&&(n.scrollIntoView(),r(n))}return d}},EI=function(t,e,i){return function(r,n){var o=r.schema.marks,s=t.altStyle,a=t.altMarks,l=void 0===a?[]:a,h=t.mark;e=e||r.tr;var c=!1,p=!1,u=function(){return p=!0};s&&o.style&&(c=CI(o.style,{style:s.name,value:s.value})(r,u,e));var d=[h].concat(l).filter((function(t){return o[t]})).map((function(t){return yI(r,{mark:t})&&o[t]})).filter((function(t){return t}));return d.length?function(t,e,i,r){var n=e.selection,o=n.$cursor,s=n.ranges;if(r=r||e.tr,o)t.forEach((function(t){t.isInSet(e.storedMarks||o.marks())&&i(r.removeStoredMark(t))}));else{for(var a=function(e){var i=s[e],n=i.$from,o=i.$to;t.forEach((function(t){mI(r,n.pos,o.pos,t)}))},l=0;l<s.length;l++)a(l);i(r.scrollIntoView())}}(d,r,u,e):c||vI(o[h],i,e)(r,u),p&&n(e),p}},TI=function(t,e){return function(i,r){var n=i.schema.marks.style,o={style:t.style,value:/^.+$/,newValue:t.value},s=i.tr;e&&s.setMeta("commandName",e),s.setMeta("args",t);var a=i.selection,l=a.empty,h=a.$cursor,c=a.ranges;if(l&&!h||!n||!fI(i.doc,c,n))return!1;if(h){var p=i.storedMarks||h.marks(),u=n.isInSet(p)?p.find((function(t){return"style"===t.type.name})):null,d={style:null};if(u&&u.attrs.style){var f=cI(u.attrs.style,o);f.changed&&f.style&&(d.style=f.style)}else o.newValue&&(d.style=[o.style]+": "+o.newValue+";");var v=u?lI({},u.attrs,d):d;return Object.keys(v).some((function(t){return null!==v[t]}))?r(s.addStoredMark(n.create(v))):r(s.removeStoredMark(n)),!0}return CI(n,o)(i,r,s)}},AI=function(t,e){return function(i,r){var n=i.selection.$cursor;if(n){var o=n.parent,s=n.index(),a=i.schema.marks[t.mark],l=o.child(s).marks.find((function(t){return t.type===a})),h=o.childCount,c=n.pos-n.textOffset,p=o.child(s).nodeSize,u=void 0,d=void 0;for(u=s-1;u>=0&&l.isInSet(o.child(u).marks);)p+=d=o.child(u).nodeSize,c-=d,u-=1;for(u=s+1;u<h&&l.isInSet(o.child(u).marks);)p+=o.child(u).nodeSize,u+=1;r(mI(e||i.tr,c,c+p,l))}else EI(t,e)(i,r)}},MI=function(t,e){var i=t.mark,r=t.attrs;return void 0===e&&(e="link"),function(t,n){var o=t.schema.marks,s=t.tr;e&&(s.setMeta("commandName",e),s.setMeta("args",r));var a=!1,l=function(){return a=!0};if(function(t,e){var i=wI(t,e);return 1===i.length&&i[0]?i[0]:null}(t,o[i]))!function(t,e){return function(i,r){var n=i.selection,o=n.$cursor,s=n.from,a=n.to,l=i.schema.marks[t.mark];if(o){var h=o.parent,c=o.index(),p=h.child(c).marks.find((function(t){return t.type===l})),u=h.childCount,d=o.pos-o.textOffset,f=h.child(c).nodeSize,v=void 0,m=void 0;for(v=c-1;v>=0&&p.isInSet(h.child(v).marks);)f+=m=h.child(v).nodeSize,d-=m,v-=1;for(v=c+1;v<u&&p.isInSet(h.child(v).marks);)f+=h.child(v).nodeSize,v+=1;e.removeMark(d,d+f,l),e.addMark(d,d+f,l.create(t.attrs)),r(e)}else e.doc.nodesBetween(s,a,(function(i,n){i.isInline&&l.isInSet(i.marks)&&(e.removeMark(n,n+i.nodeSize,l),e.addMark(n,n+i.nodeSize,l.create(t.attrs)),r(e))}))}}({mark:i,attrs:r},s)(t,l);else{var h=t;yI(t,{mark:i})&&(AI({mark:i,attrs:r},s)(t,l),h=JR.create({doc:s.doc,selection:s.selection})),a?vI(o[i],r,s)(h,l):EI({mark:i},s,r)(h,l)}return a&&n(s),a}},OI=function(t,e,i,r){if(!i.isTextblock)return!1;t.selection.ranges.forEach((function(n){var o=t.steps.length,s=n.$from.pos,a=n.$to.pos;t.doc.nodesBetween(s,a,(function(n,s){if(n.eq(e)&&n.isTextblock&&!n.hasMarkup(i,r)&&function(t,e,i){var r=t.resolve(e),n=r.index();return r.parent.canReplaceWith(n,n+1,i)}(t.doc,t.mapping.slice(o).map(s),i)){t.clearIncompatible(t.mapping.slice(o).map(s,1),i);var a=t.mapping.slice(o),l=a.map(s,1),h=a.map(s+n.nodeSize,1),c=new $D(FD.from(i.create(r,null,n.marks)),0,0);return t.step(new dR(l,h,l+1,h-1,c,1,!0)),!1}}))}))},DI=function(t,e){void 0===e&&(e={blocksInSelection:!1});var i=t.doc,r=t.selection,n=r.$from,o=r.ranges,s=e.blocksInSelection,a=[],l=r instanceof VR?r.node:void 0;return l?l.isBlock?(a.push(l),l.nodesBetween(0,l.content.size,(function(t){t.isBlock&&a.push(t)}))):!s&&n.parent&&n.parent.isBlock&&a.push(n.parent):o.forEach((function(t){var e=t.$from.pos,r=t.$to.pos;i.nodesBetween(e,r,(function(t,i,n,o){t.isBlock&&(!s||i>=e&&i+t.content.size+2<=r)&&a.push(t)}))})),a},PI=function(t,e){var i,r,n=t.attrs.style;n&&e.forEach((function(t){r={style:t.name,value:/^.+$/,newValue:t.value},i=cI(n,r),n=i.changed?i.style:n}));return n=n||e.reduce((function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""}),""),Object.assign({},t.attrs,{style:n||null})},RI=function(t,e){var i=t.selection,r=i.from,n=i.to,o=!1;return t.doc.nodesBetween(r,n,(function(t){return!(o=o||t.type===e)})),o},II=function(t){var e=function(t){var e=DI(t),i=t.schema.nodes,r=[];return e.forEach((function(t){t.type===i.paragraph?r.push("p"):t.type===i.heading?r.push("h"+t.attrs.level):t.type===i.blockquote&&r.push("blockquote")})),r}(t);return 1===new Set(e).size?e[0]:null},LI=function(t,e){var i=DI(t),r=!1;return i.forEach((function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var i=e.find((function(e){return e.node===t.type.name}));i&&(r=i.style.every((function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)})))}})),r};function zI(t,e){return function(i,r){var n=i.selection,o=n.$from,s=n.$to,a=o.blockRange(s),l=!1,h=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(t)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var c=i.doc.resolve(a.start-2);h=new pP(c,c,a.depth),a.endIndex<a.parent.childCount&&(a=new pP(o,i.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var p=function(t,e,i,r){void 0===r&&(r=t);var n=function(t,e){var i=t.parent,r=t.startIndex,n=t.endIndex,o=i.contentMatchAt(r).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return i.canReplaceWith(r,n,s)?o:null}(t,e),o=n&&function(t,e){var i=t.parent,r=t.startIndex,n=t.endIndex,o=i.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,l=r;a&&l<n;l++)a=a.matchType(i.child(l).type);return a&&a.validEnd?s:null}(r,e);return o?n.map(gR).concat({type:e,attrs:i}).concat(o.map(gR)):null}(h,t,e,a);return!!p&&(r&&r(function(t,e,i,r,n){for(var o=FD.empty,s=i.length-1;s>=0;s--)o=FD.from(i[s].type.create(i[s].attrs,o));t.step(new dR(e.start-(r?2:0),e.end,e.start,e.end,new $D(o,0,0),i.length,!0));for(var a=0,l=0;l<i.length;l++)i[l].type==n&&(a=l+1);for(var h=i.length-a,c=e.start+i.length-(r?2:0),p=e.parent,u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&yR(t.doc,c,h)&&(t.split(c,h),c+=2*h),c+=p.child(u).nodeSize;return t}(i.tr,a,p,l,t).scrollIntoView()),!0)}}function BI(t){return function(e,i){var r=e.selection,n=r.$from,o=r.$to,s=n.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!i||(n.node(s.depth-1).type==t?function(t,e,i,r){var n=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(n.step(new dR(o-1,s,o,s,new $D(FD.from(i.create(null,r.parent.copy())),1,0),1,!0)),r=new pP(n.doc.resolve(r.$from.pos),n.doc.resolve(s),r.depth));return e(n.lift(r,mR(r)).scrollIntoView()),!0}(e,i,t,s):function(t,e,i){for(var r=t.tr,n=i.parent,o=i.end,s=i.endIndex-1,a=i.startIndex;s>a;s--)o-=n.child(s).nodeSize,r.delete(o-1,o+1);var l=r.doc.resolve(i.start),h=l.nodeAfter,c=0==i.startIndex,p=i.endIndex==n.childCount,u=l.node(-1),d=l.index(-1);if(!u.canReplace(d+(c?0:1),d+1,h.content.append(p?FD.empty:FD.from(n))))return!1;var f=l.pos,v=f+h.nodeSize;return r.step(new dR(f-(c?1:0),v+(p?1:0),f+1,v-1,new $D((c?FD.empty:FD.from(n.copy(FD.empty))).append(p?FD.empty:FD.from(n.copy(FD.empty))),c?0:1,p?0:1),c?0:1)),e(r.scrollIntoView()),!0}(e,i,s)))}}function NI(t){return function(e,i){var r=e.selection,n=r.$from,o=r.$to,s=n.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,h=l.child(a-1);if(h.type!=t)return!1;if(i){var c=h.lastChild&&h.lastChild.type==l.type,p=FD.from(c?t.create():null),u=new $D(FD.from(t.create(null,FD.from(l.type.create(null,p)))),c?3:1,0),d=s.start,f=s.end;i(e.tr.step(new dR(d-(c?3:1),f,d,f,u,1,!0)).scrollIntoView())}return!0}}var jI={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},FI={listType:jI.orderedList,types:lI({},jI)},VI={listType:jI.bulletList,types:lI({},jI)},HI={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:lI({},jI)},WI={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:lI({},jI)},UI=function(t,e,i){return function(r,n){var o=DI(r),s=r.tr;s.setMeta("commandName",e),o.forEach((function(e){if(e.type.isTextblock){var r=void 0,n=t.find((function(t){return t.node===e.type.name}));if(n){var o="rtl"===i?n.rtlStyle:n.style,a={name:o,value:n.step>0?""+n.step+n.unit:""};if(e.attrs.style){var l=new RegExp(o+":\\s?(\\d+)"+n.unit,"i"),h=e.attrs.style.match(l);if(h){var c=parseFloat(h[1])+n.step;c=c<=0?"":c,a.value=""+c+(c?n.unit:"")}}r=PI(e,[a])}r&&OI(s,e,e.type,r)}}));var a=s.docChanged;return a&&n(s.scrollIntoView()),a}},qI=function(t,e,i){var r=DI(t),n=!1;return r.forEach((function(t){if(!n&&t.type.isTextblock&&t.attrs.style){var r=e.find((function(e){return e.node===t.type.name}));if(r){var o="rtl"===i?r.rtlStyle:r.style,s=new RegExp(o+":\\s?\\d+"+r.unit,"i");n=s.test(t.attrs.style)}}})),n},GI=function(t,e){return NI(e)(t)},$I=function(t,e){var i=t.schema.nodes[e.listsTypes.listItem],r=t.schema.nodes[e.listsTypes.orderedList],n=t.schema.nodes[e.listsTypes.bulletList],o=!!uI(r,2)(t.selection),s=!!uI(n,2)(t.selection);return(o||s)&&BI(i)(t)},KI=function(t,e){var i=t.schema.nodes,r=i[HI.listsTypes.listItem];return(qI(t,e.nodes)||HI.nodes.some((function(e){return i[e.node]&&RI(t,i[e.node])})))&&!RI(t,r)},XI=function(t,e){var i=t.schema.nodes[HI.listsTypes.listItem],r=KI(t,HI);GI(t,i)?NI(i)(t,e):r&&UI(HI.nodes)(t,e)},YI=function(t,e){var i=t.schema.nodes[WI.listsTypes.listItem],r=KI(t,WI);$I(t,WI)?BI(i)(t,e):r&&UI(WI.nodes)(t,e)};function ZI(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function JI(t,e,i){var r=t.selection.$cursor;if(!r||(i?!i.endOfTextblock("backward",t):r.parentOffset>0))return!1;var n=eL(r);if(!n){var o=r.blockRange(),s=o&&mR(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}var a=n.nodeBefore;if(!a.type.spec.isolating&&cL(t,n,e))return!0;if(0==r.parent.content.size&&(QI(a,"end")||VR.isSelectable(a))){if(e){var l=t.tr.deleteRange(r.before(),r.after());l.setSelection(QI(a,"end")?zR.findFrom(l.doc.resolve(l.mapping.map(n.pos,-1)),-1):VR.create(l.doc,n.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}return!(!a.isAtom||n.depth!=r.depth-1)&&(e&&e(t.tr.delete(n.pos-a.nodeSize,n.pos).scrollIntoView()),!0)}function QI(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function tL(t,e,i){var r=t.selection,n=r.$head,o=n;if(!r.empty)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("backward",t):n.parentOffset>0)return!1;o=eL(n)}var s=o&&o.nodeBefore;return!(!s||!VR.isSelectable(s))&&(e&&e(t.tr.setSelection(VR.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function eL(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function iL(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var i=t.node(e);if(t.index(e)+1<i.childCount)return t.doc.resolve(t.after(e+1));if(i.type.spec.isolating)break}return null}function rL(t,e){var i=t.selection,r=i.$head,n=i.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(n))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function nL(t){for(var e=0;e<t.edgeCount;e++){var i=t.edge(e).type;if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}function oL(t,e){var i=t.selection,r=i.$head,n=i.$anchor;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;var o=r.node(-1),s=r.indexAfter(-1),a=nL(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(e){var l=r.after(),h=t.tr.replaceWith(l,l,a.createAndFill());h.setSelection(zR.near(h.doc.resolve(l),1)),e(h.scrollIntoView())}return!0}function sL(t,e){var i=t.selection,r=i.$from,n=i.$to;if(r.parent.inlineContent||n.parent.inlineContent)return!1;var o=nL(r.parent.contentMatchAt(n.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){var s=(!r.parentOffset&&n.index()<n.parent.childCount?r:n).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(jR.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}function aL(t,e){var i=t.selection.$cursor;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){var r=i.before();if(yR(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var n=i.blockRange(),o=n&&mR(n);return null!=o&&(e&&e(t.tr.lift(n,o).scrollIntoView()),!0)}function lL(t,e){var i=t.selection,r=i.$from,n=i.$to;if(t.selection instanceof VR&&t.selection.node.isBlock)return!(!r.parentOffset||!yR(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(e){var o=n.parentOffset==n.parent.content.size,s=t.tr;t.selection instanceof jR&&s.deleteSelection();var a=0==r.depth?null:nL(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=o&&a?[{type:a}]:null,h=yR(s.doc,s.mapping.map(r.pos),1,l);l||h||!yR(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])||(l=[{type:a}],h=!0),h&&(s.split(s.mapping.map(r.pos),1,l),o||r.parentOffset||r.parent.type==a||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),FD.from([a.create(),r.parent]))||s.setNodeMarkup(s.mapping.map(r.before()),a)),e(s.scrollIntoView())}return!0}function hL(t,e){return lL(t,e&&function(i){var r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();r&&i.ensureMarks(r),e(i)})}function cL(t,e,i){var r,n,o=e.nodeBefore,s=e.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,i){var r=e.nodeBefore,n=e.nodeAfter,o=e.index();return!(!(r&&n&&r.type.compatibleContent(n.type))||(!r.content.size&&e.parent.canReplace(o-1,o)?(i&&i(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(o,o+1)||!n.isTextblock&&!bR(t.doc,e.pos)||(i&&i(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,i))return!0;var a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(r=(n=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&n.matchType(r[0]||s.type).validEnd){if(i){for(var l=e.pos+s.nodeSize,h=FD.empty,c=r.length-1;c>=0;c--)h=FD.from(r[c].create(null,h));h=FD.from(o.copy(h));var p=t.tr.step(new dR(e.pos-1,l,e.pos,l,new $D(h,1,0),r.length,!0)),u=l+2*r.length;bR(p.doc,u)&&p.join(u),i(p.scrollIntoView())}return!0}var d=zR.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),v=f&&mR(f);if(null!=v&&v>=e.depth)return i&&i(t.tr.lift(f,v).scrollIntoView()),!0;if(a&&s.isTextblock&&QI(o,"end")){for(var m=o,g=[];g.push(m),!m.isTextblock;)m=m.lastChild;if(m.canReplace(m.childCount,m.childCount,s.content)){if(i){for(var y=FD.empty,b=g.length-1;b>=0;b--)y=FD.from(g[b].copy(y));i(t.tr.step(new dR(e.pos-g.length,e.pos+s.nodeSize,e.pos+1,e.pos+s.nodeSize-1,new $D(y,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function pL(t,e){if(Array.isArray(e)){var i=e;e=function(t){return i.indexOf(t.type.name)>-1}}return function(i,r){return t(i,r&&function(t,e){return function(i){if(!i.isGeneric)return t(i);for(var r=[],n=0;n<i.mapping.maps.length;n++){for(var o=i.mapping.maps[n],s=0;s<r.length;s++)r[s]=o.map(r[s]);o.forEach((function(t,e,i,n){return r.push(i,n)}))}for(var a=[],l=0;l<r.length;l+=2)for(var h=r[l],c=r[l+1],p=i.doc.resolve(h),u=p.sharedDepth(c),d=p.node(u),f=p.indexAfter(u),v=p.after(u+1);v<=c;++f){var m=d.maybeChild(f);if(!m)break;if(f&&-1==a.indexOf(v)){var g=d.child(f-1);g.type==m.type&&e(g,m)&&a.push(v)}v+=m.nodeSize}a.sort((function(t,e){return t-e}));for(var y=a.length-1;y>=0;y--)bR(i.doc,a[y])&&i.join(a[y]);t(i)}}(r,e))}}function uL(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,i,r){for(var n=0;n<t.length;n++)if(t[n](e,i,r))return!0;return!1}}var dL=uL(ZI,JI,tL),fL=uL(ZI,(function(t,e,i){var r=t.selection.$cursor;if(!r||(i?!i.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var n=iL(r);if(!n)return!1;var o=n.nodeAfter;if(cL(t,n,e))return!0;if(0==r.parent.content.size&&(QI(o,"start")||VR.isSelectable(o))){if(e){var s=t.tr.deleteRange(r.before(),r.after());s.setSelection(QI(o,"start")?zR.findFrom(s.doc.resolve(s.mapping.map(n.pos)),1):VR.create(s.doc,s.mapping.map(n.pos))),e(s.scrollIntoView())}return!0}return!(!o.isAtom||n.depth!=r.depth-1)&&(e&&e(t.tr.delete(n.pos,n.pos+o.nodeSize).scrollIntoView()),!0)}),(function(t,e,i){var r=t.selection,n=r.$head,o=n;if(!r.empty)return!1;if(n.parent.isTextblock){if(i?!i.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;o=iL(n)}var s=o&&o.nodeAfter;return!(!s||!VR.isSelectable(s))&&(e&&e(t.tr.setSelection(VR.create(t.doc,o.pos)).scrollIntoView()),!0)})),vL={Enter:uL(rL,sL,aL,lL),"Mod-Enter":oL,Backspace:dL,"Mod-Backspace":dL,Delete:fL,"Mod-Delete":fL,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new WR(t.doc))),!0}},mL={"Ctrl-h":vL.Backspace,"Alt-Backspace":vL["Mod-Backspace"],"Ctrl-d":vL.Delete,"Ctrl-Alt-Backspace":vL["Mod-Delete"],"Alt-Delete":vL["Mod-Delete"],"Alt-d":vL["Mod-Delete"]};for(var gL in vL)mL[gL]=vL[gL];var yL=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?mL:vL,bL=function(t,e,i){for(var r=e.depth,n=t.nodes[i.bulletList],o=t.nodes[i.orderedList],s=t.nodes[i.listItem],a=e.depth;a>0;a--){var l=e.node(a);if(l.type!==n&&l.type!==o||(r=a),l.type!==n&&l.type!==o&&l.type!==s)break}return r-1};function wL(t){return function(e,i,r){if(!r)return!1;var n,o=(e=r.state).schema.nodes[t.listType],s=e.selection,a=s.$from,l=s.$to,h=a.node(-2),c=a.node(-3),p=function(t,e,i,r){return 0===function(t,e,i){var r=Array(),n=function(t,e){var i=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;var r=e.node(e.depth),n=e;for(;e.depth>=1;)(r=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==i.indexOf(r.type.name)&&(n=e);return n}(t,e).depth,o=t.resolve(e.start(n));for(;o.pos<=i.start(i.depth);){var s=Math.min(o.depth,n),a=o.node(s);if(a&&r.push(a),0===s)break;var l=t.resolve(o.after(s));if(l.start(s)>=t.nodeSize-2)break;l.depth!==o.depth&&(l=t.resolve(l.pos+2)),o=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return r}(t,e,i).filter((function(t){return t.type!==r})).length}(e.doc,a,l,o);return(h&&h.type===o||c&&c.type===o)&&p?_L(t)(e,i):(p||(_L(t)(e,i),e=r.state),pL(zI(n=o),(function(t,e){return t.type===e.type&&t.type===n}))(e,i))}}function xL(t,e,i,r){r||(r=t.schema.nodes.listItem);var n=e.$from,o=e.$to,s=n.blockRange(o,(function(t){return t.childCount&&t.firstChild.type===r}));if(!s||s.depth<2||n.node(s.depth-1).type!==r)return i;var a=s.end,l=o.end(s.depth);return a<l&&(i.step(new dR(a-1,l,a,l,new $D(FD.from(r.create(void 0,s.parent.copy())),1,0),1,!0)),s=new pP(i.doc.resolve(n.pos),i.doc.resolve(l),s.depth)),i.lift(s,mR(s)).scrollIntoView()}function _L(t){return function(e,i){var r=e.tr,n=e.selection,o=n.$from,s=n.$to;return r.doc.nodesBetween(o.pos,s.pos,(function(i,n){if(i.isTextblock||"blockquote"===i.type.name||"div"===i.type.name){var o=new VR(r.doc.resolve(r.mapping.map(n))),s=o.$from.blockRange(o.$to);if(!s||o.$from.parent.type!==e.schema.nodes[t.listItem])return!1;var a=s&&mR(s);if(null==a)return!1;r.lift(s,a)}})),i&&i(r),!0}}var kL=function(t,e,i,r,n){var o=r.listType,s=t.selection,a=s.$from.node(s.$from.depth-2),l=s.$to.node(s.$to.depth-2);if(a&&a.type.name===o&&l&&l.type.name===o){var h=i.state.schema.nodes,c={bulletList:h[r.bulletList],orderedList:h[r.orderedList],listItem:h[r.listItem]},p=function(t,e){for(var i,r=e.bulletList,n=e.orderedList,o=e.listItem,s=t.depth-1;s>0;s--){var a=t.node(s);if(a.type!==r&&a.type!==n||(i=s),a.type!==r&&a.type!==n&&a.type!==o)break}return i}(s.$to,c),u=function(t,e,i,r,n,o){o||(o=t.schema.nodes.listItem);var s=!1;return n.doc.nodesBetween(e,i,(function(i,a){if(!s&&i.type===o&&a>e){s=!0;for(var l=r+3;l>r+2;){var h=n.doc.resolve(n.mapping.map(a));l=h.depth;var c=n.doc.resolve(n.mapping.map(a+i.textContent.length)),p=new jR(h,c);n=xL(t,p,n,o)}}})),n}(t,s.$to.pos,s.$to.end(p),p,i.state.tr,c.listItem);return u=function(t,e,i){var r=t.selection,n=r.from,o=r.to,s=t.schema.nodes,a=s.paragraph,l=s.heading,h=[];e.doc.nodesBetween(n,o,(function(t,e){t.type!==a&&t.type!==l||h.push({node:t,pos:e})}));for(var c=h.length-1;c>=0;c--){var p=h[c],u=e.doc.resolve(e.mapping.map(p.pos));if(u.depth>0){var d=void 0;d=p.node.textContent&&p.node.textContent.length>0?e.doc.resolve(e.mapping.map(p.pos+p.node.textContent.length)):e.doc.resolve(e.mapping.map(p.pos+1));var f=u.blockRange(d);f&&e.lift(f,bL(t.schema,u,i))}}return e}(t,u,r),u.setMeta("commandName",n),e(u),!0}return wL(r)(t,e,i)};function SL(t,e,i){return kL(t,e,i,lI({listType:VI.listType},VI.types))}function CL(t,e,i){return kL(t,e,i,lI({listType:FI.listType},FI.types))}for(var EL=function(t){return function(e,i){return function(t){return function(e,i){var r=e.selection,n=r.$from,o=r.$to,s=r.node;if(s&&s.isBlock||n.depth<2||!n.sameParent(o))return!1;var a=n.node(-1);if(a.type!=t)return!1;if(0==n.parent.content.size&&n.node(-1).childCount==n.indexAfter(-1)){if(2==n.depth||n.node(-3).type!=t||n.index(-2)!=n.node(-2).childCount-1)return!1;if(i){for(var l=FD.empty,h=n.index(-1)>0,c=n.depth-(h?1:2);c>=n.depth-3;c--)l=FD.from(n.node(c).copy(l));l=l.append(FD.from(t.createAndFill()));var p=e.tr.replace(n.before(h?null:-1),n.after(-3),new $D(l,h?3:2,2));p.setSelection(e.selection.constructor.near(p.doc.resolve(n.pos+(h?3:2)))),i(p.scrollIntoView())}return!0}var u=o.pos==n.end()?a.contentMatchAt(0).defaultType:null,d=e.tr.delete(n.pos,o.pos),f=u&&[null,{type:u}];return!!yR(d.doc,n.pos,2,f)&&(i&&i(d.split(n.pos,2,f).scrollIntoView()),!0)}}(t)(e,(function(t){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&t.ensureMarks(r),i(t)}))}},TL=function(t,e){return{name:t,value:e}},AL=[{node:"paragraph",style:[TL("text-align","left")]},{node:"heading",style:[TL("text-align","left")]}],ML=[{node:"paragraph",style:[TL("text-align","right")]},{node:"heading",style:[TL("text-align","right")]}],OL=[{node:"paragraph",style:[TL("text-align","center")]},{node:"heading",style:[TL("text-align","center")]}],DL=[{node:"paragraph",style:[TL("text-align","justify")]},{node:"heading",style:[TL("text-align","justify")]}],PL=(TL("text-align",""),TL("text-align",""),{8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"}),RL={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},IL="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),LL="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),zL="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),BL="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),NL="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),jL=IL&&(BL||+IL[1]<57)||zL&&BL,FL=0;FL<10;FL++)PL[48+FL]=PL[96+FL]=String(FL);for(FL=1;FL<=24;FL++)PL[FL+111]="F"+FL;for(FL=65;FL<=90;FL++)PL[FL]=String.fromCharCode(FL+32),RL[FL]=String.fromCharCode(FL);for(var VL in PL)RL.hasOwnProperty(VL)||(RL[VL]=PL[VL]);var HL="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function WL(t){var e,i,r,n,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))n=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);HL?n=!0:i=!0}}return e&&(s="Alt-"+s),i&&(s="Ctrl-"+s),n&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function UL(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==i&&e.shiftKey&&(t="Shift-"+t),t}function qL(t){return new iI({props:{handleKeyDown:GL(t)}})}function GL(t){var e=function(t){var e=Object.create(null);for(var i in t)e[WL(i)]=t[i];return e}(t);return function(t,i){var r,n=function(t){var e=!(jL&&(t.ctrlKey||t.altKey||t.metaKey)||(LL||NL)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?RL:PL)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(i),o=1==n.length&&" "!=n,s=e[UL(n,i,!o)];if(s&&s(t.state,t.dispatch,t))return!0;if(o&&(i.shiftKey||i.altKey||i.metaKey||n.charCodeAt(0)>127)&&(r=PL[i.keyCode])&&r!=n){var a=e[UL(r,i,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(o&&i.shiftKey){var l=e[UL(n,i,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}var $L={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var KL=/Edge\/(\d+)/.exec(navigator.userAgent),XL=/MSIE \d/.test(navigator.userAgent),YL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);$L.mac=/Mac/.test(navigator.platform);var ZL=$L.ie=!!(XL||YL||KL);$L.ie_version=XL?document.documentMode||6:YL?+YL[1]:KL?+KL[1]:null,$L.gecko=!ZL&&/gecko\/(\d+)/i.test(navigator.userAgent),$L.gecko_version=$L.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var JL=!ZL&&/Chrome\/(\d+)/.exec(navigator.userAgent);$L.chrome=!!JL,$L.chrome_version=JL&&+JL[1],$L.safari=!ZL&&/Apple Computer/.test(navigator.vendor),$L.ios=$L.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),$L.android=/Android \d/.test(navigator.userAgent),$L.webkit="webkitFontSmoothing"in document.documentElement.style,$L.webkit_version=$L.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var QL=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},tz=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},ez=null,iz=function(t,e,i){var r=ez||(ez=document.createRange());return r.setEnd(t,null==i?t.nodeValue.length:i),r.setStart(t,e||0),r},rz=function(t,e,i,r){return i&&(oz(t,e,i,r,-1)||oz(t,e,i,r,1))},nz=/^(img|br|input|textarea|hr)$/i;function oz(t,e,i,r,n){for(;;){if(t==i&&e==r)return!0;if(e==(n<0?0:sz(t))){var o=t.parentNode;if(1!=o.nodeType||az(t)||nz.test(t.nodeName)||"false"==t.contentEditable)return!1;e=QL(t)+(n<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(n<0?-1:0)]).contentEditable)return!1;e=n<0?sz(t):0}}}function sz(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function az(t){for(var e,i=t;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var lz=function(t){var e=t.isCollapsed;return e&&$L.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function hz(t,e){var i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=t,i.key=i.code=e,i}function cz(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function pz(t,e){return"number"==typeof t?t:t[e]}function uz(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth,top:e.top,bottom:e.top+t.clientHeight}}function dz(t,e,i){for(var r=t.someProp("scrollThreshold")||0,n=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=i||t.dom;s;s=tz(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,l=a?cz(o):uz(s),h=0,c=0;if(e.top<l.top+pz(r,"top")?c=-(l.top-e.top+pz(n,"top")):e.bottom>l.bottom-pz(r,"bottom")&&(c=e.bottom-l.bottom+pz(n,"bottom")),e.left<l.left+pz(r,"left")?h=-(l.left-e.left+pz(n,"left")):e.right>l.right-pz(r,"right")&&(h=e.right-l.right+pz(n,"right")),h||c)if(a)o.defaultView.scrollBy(h,c);else{var p=s.scrollLeft,u=s.scrollTop;c&&(s.scrollTop+=c),h&&(s.scrollLeft+=h);var d=s.scrollLeft-p,f=s.scrollTop-u;e={left:e.left-d,top:e.top-f,right:e.right-d,bottom:e.bottom-f}}if(a)break}}function fz(t){for(var e=[],i=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=i);t=tz(t));return e}function vz(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=r.dom,o=r.top,s=r.left;n.scrollTop!=o+e&&(n.scrollTop=o+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}var mz=null;function gz(t,e){for(var i,r,n=2e8,o=0,s=e.top,a=e.top,l=t.firstChild,h=0;l;l=l.nextSibling,h++){var c=void 0;if(1==l.nodeType)c=l.getClientRects();else{if(3!=l.nodeType)continue;c=iz(l).getClientRects()}for(var p=0;p<c.length;p++){var u=c[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var d=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(d<n){i=l,n=d,r=d&&3==i.nodeType?{left:u.right<e.left?u.right:u.left,top:e.top}:e,1==l.nodeType&&d&&(o=h+(e.left>=(u.left+u.right)/2?1:0));continue}}!i&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(o=h+1)}}return i&&3==i.nodeType?function(t,e){for(var i=t.nodeValue.length,r=document.createRange(),n=0;n<i;n++){r.setEnd(t,n+1),r.setStart(t,n);var o=xz(r,1);if(o.top!=o.bottom&&yz(e,o))return{node:t,offset:n+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}(i,r):!i||n&&1==i.nodeType?{node:t,offset:o}:gz(i,r)}function yz(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function bz(t,e,i){var r=t.childNodes.length;if(r&&i.top<i.bottom)for(var n=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-i.top)/(i.bottom-i.top))-2)),o=n;;){var s=t.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var h=a[l];if(yz(e,h))return bz(s,e,h)}if((o=(o+1)%r)==n)break}return t}function wz(t,e){var i,r,n,o,s=t.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(n=(i=a).offsetNode,o=i.offset)}catch(t){}if(!n&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(n=(r=l).startContainer,o=r.startOffset)}var h,c=s.elementFromPoint(e.left,e.top+1);if(!c||!t.dom.contains(1!=c.nodeType?c.parentNode:c)){var p=t.dom.getBoundingClientRect();if(!yz(e,p))return null;if(!(c=bz(t.dom,e,p)))return null}if($L.safari&&c.draggable&&(n=o=null),c=function(t,e){var i=t.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<t.getBoundingClientRect().left?i:t}(c,e),n){if($L.gecko&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var u,d=n.childNodes[o];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}n==t.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?h=t.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(h=function(t,e,i,r){for(var n=-1,o=e;o!=t.dom;){var s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)n=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;n=s.posAfter}}o=s.dom.parentNode}return n>-1?n:t.docView.posFromDOM(e,i)}(t,n,o,e))}null==h&&(h=function(t,e,i){var r=gz(e,i),n=r.node,o=r.offset,s=-1;if(1==n.nodeType&&!n.firstChild){var a=n.getBoundingClientRect();s=a.left!=a.right&&i.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(n,o,s)}(t,c,e));var f=t.docView.nearestDesc(c,!0);return{pos:h,inside:f?f.posAtStart-f.border:-1}}function xz(t,e){var i=t.getClientRects();return i.length?i[e<0?0:i.length-1]:t.getBoundingClientRect()}var _z=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kz(t,e,i){var r=t.docView.domFromPos(e,i<0?-1:1),n=r.node,o=r.offset,s=$L.webkit||$L.gecko;if(3==n.nodeType){if(!s||!_z.test(n.nodeValue)&&(i<0?o:o!=n.nodeValue.length)){var a=o,l=o,h=i<0?1:-1;return i<0&&!o?(l++,h=-1):i>=0&&o==n.nodeValue.length?(a--,h=1):i<0?a--:l++,Sz(xz(iz(n,a,l),h),h<0)}var c=xz(iz(n,o,o),i);if($L.gecko&&o&&/\s/.test(n.nodeValue[o-1])&&o<n.nodeValue.length){var p=xz(iz(n,o-1,o-1),-1);if(p.top==c.top){var u=xz(iz(n,o,o+1),-1);if(u.top!=c.top)return Sz(u,u.left<p.left)}}return c}if(!t.state.doc.resolve(e).parent.inlineContent){if(o&&(i<0||o==sz(n))){var d=n.childNodes[o-1];if(1==d.nodeType)return Cz(d.getBoundingClientRect(),!1)}if(o<sz(n)){var f=n.childNodes[o];if(1==f.nodeType)return Cz(f.getBoundingClientRect(),!0)}return Cz(n.getBoundingClientRect(),i>=0)}if(o&&(i<0||o==sz(n))){var v=n.childNodes[o-1],m=3==v.nodeType?iz(v,sz(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(m)return Sz(xz(m,1),!1)}if(o<sz(n)){var g=n.childNodes[o],y=3==g.nodeType?iz(g,0,s?0:1):1==g.nodeType?g:null;if(y)return Sz(xz(y,-1),!0)}return Sz(xz(3==n.nodeType?iz(n):n,-i),i>=0)}function Sz(t,e){if(0==t.width)return t;var i=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:i,right:i}}function Cz(t,e){if(0==t.height)return t;var i=e?t.top:t.bottom;return{top:i,bottom:i,left:t.left,right:t.right}}function Ez(t,e,i){var r=t.state,n=t.root.activeElement;r!=e&&t.updateState(e),n!=t.dom&&t.focus();try{return i()}finally{r!=e&&t.updateState(r),n!=t.dom&&n&&n.focus()}}var Tz=/[\u0590-\u08ac]/;var Az=null,Mz=null,Oz=!1;function Dz(t,e,i){return Az==e&&Mz==i?Oz:(Az=e,Mz=i,Oz="up"==i||"down"==i?function(t,e,i){var r=e.selection,n="up"==i?r.$from:r.$to;return Ez(t,e,(function(){for(var e=t.docView.domFromPos(n.pos,"up"==i?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var o=kz(t,n.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=iz(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var h=a[l];if(h.bottom>h.top&&("up"==i?h.bottom<o.top+1:h.top>o.bottom-1))return!1}}return!0}))}(t,e,i):function(t,e,i){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var n=r.parentOffset,o=!n,s=n==r.parent.content.size,a=getSelection();return Tz.test(r.parent.textContent)&&a.modify?Ez(t,e,(function(){var e=a.getRangeAt(0),n=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",i,"character");var l=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||n==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==i||"backward"==i?o:s}(t,e,i))}var Pz=function(t,e,i,r){this.parent=t,this.children=e,this.dom=i,i.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Rz={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};Pz.prototype.matchesWidget=function(){return!1},Pz.prototype.matchesMark=function(){return!1},Pz.prototype.matchesNode=function(){return!1},Pz.prototype.matchesHack=function(){return!1},Rz.beforePosition.get=function(){return!1},Pz.prototype.parseRule=function(){return null},Pz.prototype.stopEvent=function(){return!1},Rz.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},Rz.border.get=function(){return 0},Pz.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},Pz.prototype.posBeforeChild=function(t){for(var e=0,i=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return i;i+=r.size}},Rz.posBefore.get=function(){return this.parent.posBeforeChild(this)},Rz.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Rz.posAfter.get=function(){return this.posBefore+this.size},Rz.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Pz.prototype.localPosFromDOM=function(t,e,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){var r,n;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(n=r.pmViewDesc)||n.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(n)+n.size:this.posAtStart}var o,s;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var h=t;;h=h.parentNode){if(h==this.dom){a=!0;break}if(h.parentNode.lastChild!=h)break}}return(null==a?i>0:a)?this.posAtEnd:this.posAtStart},Pz.prototype.nearestDesc=function(t,e){for(var i=!0,r=t;r;r=r.parentNode){var n=this.getDesc(r);if(n&&(!e||n.node)){if(!i||!n.nodeDOM||(1==n.nodeDOM.nodeType?n.nodeDOM.contains(1==t.nodeType?t:t.parentNode):n.nodeDOM==t))return n;i=!1}}},Pz.prototype.getDesc=function(t){for(var e=t.pmViewDesc,i=e;i;i=i.parent)if(i==this)return e},Pz.prototype.posFromDOM=function(t,e,i){for(var r=t;r;r=r.parentNode){var n=this.getDesc(r);if(n)return n.localPosFromDOM(t,e,i)}return-1},Pz.prototype.descAt=function(t){for(var e=0,i=0;e<this.children.length;e++){var r=this.children[e],n=i+r.size;if(i==t&&n!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<n)return r.descAt(t-i-r.border);i=n}},Pz.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var i=0,r=0,n=!0;;r++,n=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)i+=this.children[r++].size;var o=r==this.children.length?null:this.children[r];if(i==t&&(0==e||!o||o.border||e<0&&n)||o&&o.domAtom&&t<i+o.size)return{node:this.contentDOM,offset:o?QL(o.dom):this.contentDOM.childNodes.length};if(!o)throw new Error("Invalid position "+t);var s=i+o.size;if(!o.domAtom&&(e<0&&!o.border?s>=t:s>t))return o.domFromPos(t-i-o.border,e);i=s}},Pz.prototype.parseRange=function(t,e,i){if(void 0===i&&(i=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,n=-1,o=i,s=0;;s++){var a=this.children[s],l=o+a.size;if(-1==r&&t<=l){var h=o+a.border;if(t>=h&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,h);t=o;for(var c=s;c>0;c--){var p=this.children[c-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=QL(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&(l>e||s==this.children.length-1)){e=l;for(var u=s+1;u<this.children.length;u++){var d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){n=QL(d.dom);break}e+=d.size}-1==n&&(n=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:n}},Pz.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},Pz.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),i=e.node,r=e.offset;if(1!=i.nodeType||r==i.childNodes.length)throw new RangeError("No node after pos "+t);return i.childNodes[r]},Pz.prototype.setSelection=function(t,e,i,r){for(var n=Math.min(t,e),o=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],h=a+l.size;if(n>a&&o<h)return l.setSelection(t-a-l.border,e-a-l.border,i,r);a=h}var c=this.domFromPos(t,t?-1:1),p=e==t?c:this.domFromPos(e,e?-1:1),u=i.getSelection(),d=!1;if(($L.gecko||$L.safari)&&t==e)if(3==c.node.nodeType)d=c.offset&&"\n"==c.node.nodeValue[c.offset-1];else{var f=c.node.childNodes[c.offset-1];d=f&&("BR"==f.nodeName||"false"==f.contentEditable)}if(r||d&&$L.safari||!rz(c.node,c.offset,u.anchorNode,u.anchorOffset)||!rz(p.node,p.offset,u.focusNode,u.focusOffset)){var v=!1;if((u.extend||t==e)&&!d){u.collapse(c.node,c.offset);try{t!=e&&u.extend(p.node,p.offset),v=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!v){if(t>e){var m=c;c=p,p=m}var g=document.createRange();g.setEnd(p.node,p.offset),g.setStart(c.node,c.offset),u.removeAllRanges(),u.addRange(g)}}},Pz.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Rz.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Pz.prototype.markDirty=function(t,e){for(var i=0,r=0;r<this.children.length;r++){var n=this.children[r],o=i+n.size;if(i==o?t<=o&&e>=i:t<o&&e>i){var s=i+n.border,a=o-n.border;if(t>=s&&e<=a)return this.dirty=t==i||e==o?2:1,void(t!=s||e!=a||!n.contentLost&&n.dom.parentNode==this.contentDOM?n.markDirty(t-s,e-s):n.dirty=3);n.dirty=3}i=o}this.dirty=2},Pz.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var i=1==t?2:1;e.dirty<i&&(e.dirty=i)}},Rz.domAtom.get=function(){return!1},Object.defineProperties(Pz.prototype,Rz);var Iz=[],Lz=function(t){function e(e,i,r,n){var o,s=i.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:n}))),!i.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,Iz,s,null),this.widget=i,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return i.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},i.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(Pz),zz=function(t){function e(e,i,r,n){t.call(this,e,Iz,i,null),this.textDOM=r,this.text=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,i),e}(Pz),Bz=function(t){function e(e,i,r,n){t.call(this,e,[],r,n),this.mark=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,i,r,n){var o=n.nodeViews[i.type.name],s=o&&o(i,n,r);return s&&s.dom||(s=YP.renderSpec(document,i.type.spec.toDOM(i,r))),new e(t,i,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,i){if(t.prototype.markDirty.call(this,e,i),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,i,r){var n=e.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;i<s&&(o=tB(o,i,s,r)),t>0&&(o=tB(o,0,t,r));for(var a=0;a<o.length;a++)o[a].parent=n;return n.children=o,n},e}(Pz),Nz=function(t){function e(e,i,r,n,o,s,a,l,h){t.call(this,e,i.isLeaf?Iz:[],o,s),this.nodeDOM=a,this.node=i,this.outerDeco=r,this.innerDeco=n,s&&this.updateChildren(l,h)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,i,r,n,o,s){var a,l,h=o.nodeViews[i.type.name],c=h&&h(i,o,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r),p=c&&c.dom,u=c&&c.contentDOM;if(i.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(i.text);else p||(p=(a=YP.renderSpec(document,i.type.spec.toDOM(i))).dom,u=a.contentDOM);u||i.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),i.type.spec.draggable&&(p.draggable=!0));var d=p;return p=Xz(p,r,i),c?l=new Hz(t,i,r,n,p,u,d,c,o,s+1):i.isText?new Fz(t,i,r,n,p,d,o):new e(t,i,r,n,p,u,d,o,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?FD.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,i){return 0==this.dirty&&t.eq(this.node)&&Yz(e,this.outerDeco)&&i.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var i=this,r=this.node.inlineContent,n=e,o=r&&t.composing&&this.localCompositionNode(t,e),s=new Jz(this,o&&o.node);!function(t,e,i,r){var n=e.locals(t),o=0;if(0==n.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,n,e.forChild(o,a),s),o+=a.nodeSize}return}for(var l=0,h=[],c=null,p=0;;){if(l<n.length&&n[l].to==o){for(var u=n[l++],d=void 0;l<n.length&&n[l].to==o;)(d||(d=[u])).push(n[l++]);if(d){d.sort(Qz);for(var f=0;f<d.length;f++)i(d[f],p,!!c)}else i(u,p,!!c)}var v=void 0,m=void 0;if(c)m=-1,v=c,c=null;else{if(!(p<t.childCount))break;m=p,v=t.child(p++)}for(var g=0;g<h.length;g++)h[g].to<=o&&h.splice(g--,1);for(;l<n.length&&n[l].from<=o&&n[l].to>o;)h.push(n[l++]);var y=o+v.nodeSize;if(v.isText){var b=y;l<n.length&&n[l].from<b&&(b=n[l].from);for(var w=0;w<h.length;w++)h[w].to<b&&(b=h[w].to);b<y&&(c=v.cut(b-o),v=v.cut(0,b-o),y=b,m=-1)}r(v,h.length?v.isInline&&!v.isLeaf?h.filter((function(t){return!t.inline})):h.slice():Iz,e.forChild(o,v),m),o=y}}(this.node,this.innerDeco,(function(e,o,a){e.spec.marks?s.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&s.syncToMarks(o==i.node.childCount?qD.none:i.node.child(o).marks,r,t),s.placeWidget(e,t,n)}),(function(e,i,o,a){s.syncToMarks(e.marks,r,t),s.findNodeMatch(e,i,o,a)||s.updateNextNode(e,i,o,t,a)||s.addNode(e,i,o,t,n),n+=e.nodeSize})),s.syncToMarks(Iz,r,t),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(o&&this.protectLocalComposition(t,o),Wz(this.contentDOM,this.children,t),$L.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var i=t.state.selection,r=i.from,n=i.to;if(!(!(t.state.selection instanceof jR)||r<e||n>e+this.node.content.size)){var o=t.root.getSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=sz(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(o.focusNode,o.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(t,e,i,r){for(var n=0,o=0;n<t.childCount&&o<=r;){var s=t.child(n++),a=o;if(o+=s.nodeSize,s.isText){for(var l=s.text;n<t.childCount;){var h=t.child(n++);if(o+=h.nodeSize,!h.isText)break;l+=h.text}if(o>=i){var c=l.lastIndexOf(e,r-a);if(c>=0&&c+e.length+a>=i)return a+c}}}return-1}(this.node.content,a,r-e,n-e);return l<0?null:{node:s,pos:l,text:a}}}},e.prototype.protectLocalComposition=function(t,e){var i=e.node,r=e.pos,n=e.text;if(!this.getDesc(i)){for(var o=i;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new zz(this,o,i,n);t.compositionNodes.push(s),this.children=tB(this.children,r,r+n.length,t,s)}},e.prototype.update=function(t,e,i,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,i,r),!0)},e.prototype.updateInner=function(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!Yz(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=$z(this.dom,this.nodeDOM,Gz(this.outerDeco,this.node,e),Gz(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},i.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,i),e}(Pz);function jz(t,e,i,r,n){return Xz(r,e,t),new Nz(null,t,e,i,r,r,r,n,0)}var Fz=function(t){function e(e,i,r,n,o,s,a){t.call(this,e,i,r,n,o,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,i,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,i,r){return e==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,i,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,i,r){var n=this.node.cut(t,i),o=document.createTextNode(n.text);return new e(this.parent,n,this.outerDeco,this.innerDeco,o,o,r)},i.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,i),e}(Nz),Vz=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},i.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(Pz),Hz=function(t){function e(e,i,r,n,o,s,a,l,h,c){t.call(this,e,i,r,n,o,s,a,h,c),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,i,r,n){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,i);return o&&this.updateInner(e,i,r,n),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,i,r,n)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,i,r,n){this.spec.setSelection?this.spec.setSelection(e,i,r):t.prototype.setSelection.call(this,e,i,r,n)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Nz);function Wz(t,e,i){for(var r=t.firstChild,n=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=Zz(r),n=!0;r=r.nextSibling}else n=!0,t.insertBefore(a,r);if(s instanceof Bz){var l=r?r.previousSibling:t.lastChild;Wz(s.contentDOM,s.children,i),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Zz(r),n=!0;n&&i.trackWrites==t&&(i.trackWrites=null)}function Uz(t){t&&(this.nodeName=t)}Uz.prototype=Object.create(null);var qz=[new Uz];function Gz(t,e,i){if(0==t.length)return qz;for(var r=i?qz[0]:new Uz,n=[r],o=0;o<t.length;o++){var s=t[o].type.attrs;if(s)for(var a in s.nodeName&&n.push(r=new Uz(s.nodeName)),s){var l=s[a];null!=l&&(i&&1==n.length&&n.push(r=new Uz(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+l:"style"==a?r.style=(r.style?r.style+";":"")+l:"nodeName"!=a&&(r[a]=l))}}return n}function $z(t,e,i,r){if(i==qz&&r==qz)return e;for(var n=e,o=0;o<r.length;o++){var s=r[o],a=i[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&n!=t&&(l=n.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(n),a=qz[0]),n=l}Kz(n,a||qz[0],s)}return n}function Kz(t,e,i){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in i||t.removeAttribute(r);for(var n in i)"class"!=n&&"style"!=n&&"nodeName"!=n&&i[n]!=e[n]&&t.setAttribute(n,i[n]);if(e.class!=i.class){for(var o=e.class?e.class.split(" "):Iz,s=i.class?i.class.split(" "):Iz,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var l=0;l<s.length;l++)-1==o.indexOf(s[l])&&t.classList.add(s[l])}if(e.style!=i.style){if(e.style)for(var h,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;h=c.exec(e.style);)t.style.removeProperty(h[1]);i.style&&(t.style.cssText+=i.style)}}function Xz(t,e,i){return $z(t,t,qz,Gz(e,i,1!=t.nodeType))}function Yz(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].type.eq(e[i].type))return!1;return!0}function Zz(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Jz=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var i=function(t,e){for(var i=[],r=t.childCount,n=e.length-1;r>0&&n>=0;n--){var o=e[n],s=o.node;if(s){if(s!=t.child(r-1))break;i.push(o),--r}}return{nodes:i.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=i.nodes,this.preMatchOffset=i.offset};function Qz(t,e){return t.type.side-e.type.side}function tB(t,e,i,r,n){for(var o=[],s=0,a=0;s<t.length;s++){var l=t[s],h=a,c=a+=l.size;h>=i||c<=e?o.push(l):(h<e&&o.push(l.slice(0,e-h,r)),n&&(o.push(n),n=null),c>i&&o.push(l.slice(i-h,l.size,r)))}return o}function eB(t,e){var i=t.root.getSelection(),r=t.state.doc;if(!i.focusNode)return null;var n=t.docView.nearestDesc(i.focusNode),o=n&&0==n.size,s=t.docView.posFromDOM(i.focusNode,i.focusOffset);if(s<0)return null;var a,l,h=r.resolve(s);if(lz(i)){for(a=h;n&&!n.node;)n=n.parent;if(n&&n.node.isAtom&&VR.isSelectable(n.node)&&n.parent&&(!n.node.isInline||!function(t,e,i){for(var r=0==e,n=e==sz(t);r||n;){if(t==i)return!0;var o=QL(t);if(!(t=t.parentNode))return!1;r=r&&0==o,n=n&&o==sz(t)}}(i.focusNode,i.focusOffset,n.dom))){var c=n.posBefore;l=new VR(s==c?h:r.resolve(c))}}else{var p=t.docView.posFromDOM(i.anchorNode,i.anchorOffset);if(p<0)return null;a=r.resolve(p)}l||(l=hB(t,a,h,"pointer"==e||t.state.selection.head<h.pos&&!o?1:-1));return l}function iB(t,e){var i=t.state.selection;if(aB(t,i),t.editable?t.hasFocus():cB(t)&&document.activeElement&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),i=document.createRange(),r=t.cursorWrapper.dom,n="IMG"==r.nodeName;n?i.setEnd(r.parentNode,QL(r)+1):i.setEnd(r,0);i.collapse(!1),e.removeAllRanges(),e.addRange(i),!n&&!t.state.selection.visible&&$L.ie&&$L.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var r,n,o=i.anchor,s=i.head;!rB||i instanceof jR||(i.$from.parent.inlineContent||(r=nB(t,i.from)),i.empty||i.$from.parent.inlineContent||(n=nB(t,i.to))),t.docView.setSelection(o,s,t.root,e),rB&&(r&&sB(r),n&&sB(n)),i.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var i=t.root.getSelection(),r=i.anchorNode,n=i.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){i.anchorNode==r&&i.anchorOffset==n||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Jz.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},Jz.prototype.destroyBetween=function(t,e){if(t!=e){for(var i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Jz.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Jz.prototype.syncToMarks=function(t,e,i){for(var r=0,n=this.stack.length>>1,o=Math.min(n,t.length);r<o&&(r==n-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<n;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[n])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=Bz.create(this.top,t[n],e,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,n++}},Jz.prototype.findNodeMatch=function(t,e,i,r){var n=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(t,e,i))n=s.indexOf(o);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var h=s[a];if(h.matchesNode(t,e,i)&&this.preMatched.indexOf(h)<0){n=a;break}}return!(n<0)&&(this.destroyBetween(this.index,n),this.index++,!0)},Jz.prototype.updateNextNode=function(t,e,i,r,n){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof Nz){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=n)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&Yz(e,s.outerDeco)))&&s.update(t,e,i,r))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},Jz.prototype.addNode=function(t,e,i,r,n){this.top.children.splice(this.index++,0,Nz.create(this.top,t,e,i,r,n)),this.changed=!0},Jz.prototype.placeWidget=function(t,e,i){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var n=new Lz(this.top,t,e,i);this.top.children.splice(this.index++,0,n),this.changed=!0}else this.index++},Jz.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof Bz;)t=t.children[t.children.length-1];if(!t||!(t instanceof Fz)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new Vz(this.top,Iz,e,null)),this.changed=!0}};var rB=$L.safari||$L.chrome&&$L.chrome_version<63;function nB(t,e){var i=t.docView.domFromPos(e,0),r=i.node,n=i.offset,o=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if($L.safari&&o&&"false"==o.contentEditable)return oB(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return oB(o);if(s)return oB(s)}}function oB(t){return t.contentEditable="true",$L.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function sB(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function aB(t,e){if(e instanceof VR){var i=t.docView.descAt(e.from);i!=t.lastSelectedViewDesc&&(lB(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else lB(t)}function lB(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function hB(t,e,i,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,i)}))||jR.between(e,i,r)}function cB(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function pB(t,e){var i=t.selection,r=i.$anchor,n=i.$head,o=e>0?r.max(n):r.min(n),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&zR.findFrom(s,e)}function uB(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function dB(t,e,i){var r=t.state.selection;if(!(r instanceof jR)){if(r instanceof VR&&r.node.isInline)return uB(t,new jR(e>0?r.$to:r.$from));var n=pB(t.state,e);return!!n&&uB(t,n)}if(!r.empty||i.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var o=pB(t.state,e);return!!(o&&o instanceof VR)&&uB(t,o)}if(!($L.mac&&i.indexOf("m")>-1)){var s,a=r.$head,l=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var h=e<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=t.docView.descAt(h))&&!s.contentDOM)&&(VR.isSelectable(l)?uB(t,new VR(e<0?t.state.doc.resolve(a.pos-l.nodeSize):a)):!!$L.webkit&&uB(t,new jR(t.state.doc.resolve(e<0?h:h+l.nodeSize))))}}function fB(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function vB(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function mB(t){var e=t.root.getSelection(),i=e.focusNode,r=e.focusOffset;if(i){var n,o,s=!1;for($L.gecko&&1==i.nodeType&&r<fB(i)&&vB(i.childNodes[r])&&(s=!0);;)if(r>0){if(1!=i.nodeType)break;var a=i.childNodes[r-1];if(vB(a))n=i,o=--r;else{if(3!=a.nodeType)break;r=(i=a).nodeValue.length}}else{if(yB(i))break;for(var l=i.previousSibling;l&&vB(l);)n=i.parentNode,o=QL(l),l=l.previousSibling;if(l)r=fB(i=l);else{if((i=i.parentNode)==t.dom)break;r=0}}s?bB(t,e,i,r):n&&bB(t,e,n,o)}}function gB(t){var e=t.root.getSelection(),i=e.focusNode,r=e.focusOffset;if(i){for(var n,o,s=fB(i);;)if(r<s){if(1!=i.nodeType)break;if(!vB(i.childNodes[r]))break;n=i,o=++r}else{if(yB(i))break;for(var a=i.nextSibling;a&&vB(a);)n=a.parentNode,o=QL(a)+1,a=a.nextSibling;if(a)r=0,s=fB(i=a);else{if((i=i.parentNode)==t.dom)break;r=s=0}}n&&bB(t,e,n,o)}}function yB(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function bB(t,e,i,r){if(lz(e)){var n=document.createRange();n.setEnd(i,r),n.setStart(i,r),e.removeAllRanges(),e.addRange(n)}else e.extend&&e.extend(i,r);t.domObserver.setCurSelection();var o=t.state;setTimeout((function(){t.state==o&&iB(t)}),50)}function wB(t,e,i){var r=t.state.selection;if(r instanceof jR&&!r.empty||i.indexOf("s")>-1)return!1;if($L.mac&&i.indexOf("m")>-1)return!1;var n=r.$from,o=r.$to;if(!n.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=pB(t.state,e);if(s&&s instanceof VR)return uB(t,s)}if(!n.parent.inlineContent){var a=zR.findFrom(e<0?n:o,e);return!a||uB(t,a)}return!1}function xB(t,e){if(!(t.state.selection instanceof jR))return!0;var i=t.state.selection,r=i.$head,n=i.$anchor,o=i.empty;if(!r.sameParent(n))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function _B(t,e,i){t.domObserver.stop(),e.contentEditable=i,t.domObserver.start()}function kB(t,e){var i=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==i||$L.mac&&72==i&&"c"==r?xB(t,-1)||mB(t):46==i||$L.mac&&68==i&&"c"==r?xB(t,1)||gB(t):13==i||27==i||(37==i?dB(t,-1,r)||mB(t):39==i?dB(t,1,r)||gB(t):38==i?wB(t,-1,r)||mB(t):40==i?function(t){if($L.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),i=e.focusNode,r=e.focusOffset;if(i&&1==i.nodeType&&0==r&&i.firstChild&&"false"==i.firstChild.contentEditable){var n=i.firstChild;_B(t,n,!0),setTimeout((function(){return _B(t,n,!1)}),20)}}}(t)||wB(t,1,r)||gB(t):r==($L.mac?"m":"c")&&(66==i||73==i||89==i||90==i))}function SB(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if($L.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(t.parentNode.lastChild==t||$L.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function CB(t,e,i,r,n){if(e<0){var o=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=eB(t,o);if(s&&!t.state.selection.eq(s)){var a=t.state.tr.setSelection(s);"pointer"==o?a.setMeta("pointer",!0):"key"==o&&a.scrollIntoView(),t.dispatch(a)}}else{var l=t.state.doc.resolve(e),h=l.sharedDepth(i);e=l.before(h+1),i=t.state.doc.resolve(i).after(h+1);var c=t.state.selection,p=function(t,e,i){var r=t.docView.parseRange(e,i),n=r.node,o=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,h=t.root.getSelection(),c=null,p=h.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(c=[{node:p,offset:h.anchorOffset}],lz(h)||c.push({node:h.focusNode,offset:h.focusOffset})),$L.chrome&&8===t.lastKeyCode)for(var u=s;u>o;u--){var d=n.childNodes[u-1],f=d.pmViewDesc;if("BR"==d.nodeType&&!f){s=u;break}if(!f||f.size)break}var v=t.state.doc,m=t.someProp("domParser")||jP.fromSchema(t.state.schema),g=v.resolve(a),y=null,b=m.parse(n,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:c,ruleFromNode:SB,context:g});if(c&&null!=c[0].pos){var w=c[0].pos,x=c[1]&&c[1].pos;null==x&&(x=w),y={anchor:w+a,head:x+a}}return{doc:b,sel:y,from:a,to:l}}(t,e,i);if($L.chrome&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from){var u=t.cursorWrapper.deco.type.toDOM.nextSibling,d=u&&u.nodeValue?u.nodeValue.length:1;p.sel={anchor:p.sel.anchor+d,head:p.sel.anchor+d}}var f,v,m=t.state.doc,g=m.slice(p.from,p.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(f=t.state.selection.to,v="end"):(f=t.state.selection.from,v="start"),t.lastKeyCode=null;var y=function(t,e,i,r,n){var o=t.findDiffStart(e,i);if(null==o)return null;var s=t.findDiffEnd(e,i+t.size,i+e.size),a=s.a,l=s.b;if("end"==n){r-=a+Math.max(0,o-Math.min(a,l))-o}if(a<o&&t.size<e.size){l=(o-=r<=o&&r>=a?o-r:0)+(l-a),a=o}else if(l<o){a=(o-=r<=o&&r>=l?o-r:0)+(a-l),l=o}return{start:o,endA:a,endB:l}}(g.content,p.doc.content,p.from,f,v);if(!y){if(!(r&&c instanceof jR&&!c.empty&&c.$head.sameParent(c.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if($L.ios&&t.lastIOSEnter>Date.now()-225&&n.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,hz(13,"Enter"))})))return void(t.lastIOSEnter=0);if(p.sel){var b=EB(t,t.state.doc,p.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}y={start:c.from,endA:c.to,endB:c.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof jR&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),$L.ie&&$L.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>p.from&&"  "==p.doc.textBetween(y.start-p.from-1,y.start-p.from+1)&&(y.start--,y.endA--,y.endB--);var w,x=p.doc.resolveNoCache(y.start-p.from),_=p.doc.resolveNoCache(y.endB-p.from),k=x.sameParent(_)&&x.parent.inlineContent;if(($L.ios&&t.lastIOSEnter>Date.now()-225&&(!k||n.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!k&&x.pos<p.doc.content.size&&(w=zR.findFrom(p.doc.resolve(x.pos+1),1,!0))&&w.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,hz(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,i,r,n){if(!r.parent.isTextblock||i-e<=n.pos-r.pos||TB(r,!0,!1)<n.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve(TB(o,!0,!0));if(!s.parent.isTextblock||s.pos>i||TB(s,!0,!1)<i)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,y.start,y.endA,x,_)&&t.someProp("handleKeyDown",(function(e){return e(t,hz(8,"Backspace"))})))$L.android&&$L.chrome&&t.domObserver.suppressSelectionUpdates();else{$L.android&&!k&&x.start()!=_.start()&&0==_.parentOffset&&x.depth==_.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==y.endA&&(y.endB-=2,_=p.doc.resolveNoCache(y.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,hz(13,"Enter"))}))}),20));var S,C,E,T,A=y.start,M=y.endA;if(k)if(x.pos==_.pos)$L.ie&&$L.ie_version<=11&&0==x.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return iB(t)}),20)),S=t.state.tr.delete(A,M),C=m.resolve(y.start).marksAcross(m.resolve(y.endA));else if(y.endA==y.endB&&(T=m.resolve(y.start))&&(E=function(t,e){for(var i,r,n,o=t.firstChild.marks,s=e.firstChild.marks,a=o,l=s,h=0;h<s.length;h++)a=s[h].removeFromSet(a);for(var c=0;c<o.length;c++)l=o[c].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],i="add",n=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=l.length)return null;r=l[0],i="remove",n=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],u=0;u<e.childCount;u++)p.push(n(e.child(u)));if(FD.from(p).eq(t))return{mark:r,type:i}}(x.parent.content.cut(x.parentOffset,_.parentOffset),T.parent.content.cut(T.parentOffset,y.endA-T.start()))))S=t.state.tr,"add"==E.type?S.addMark(A,M,E.mark):S.removeMark(A,M,E.mark);else if(x.parent.child(x.index()).isText&&x.index()==_.index()-(_.textOffset?0:1)){var O=x.parent.textBetween(x.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,A,M,O)})))return;S=t.state.tr.insertText(O,A,M)}if(S||(S=t.state.tr.replace(A,M,p.doc.slice(y.start-p.from,y.endB-p.from))),p.sel){var D=EB(t,S.doc,p.sel);D&&!($L.chrome&&$L.android&&t.composing&&D.empty&&(D.head==A||D.head==S.mapping.map(M)-1)||$L.ie&&D.empty&&D.head==A)&&S.setSelection(D)}C&&S.ensureMarks(C),t.dispatch(S.scrollIntoView())}}}function EB(t,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:hB(t,e.resolve(i.anchor),e.resolve(i.head))}function TB(t,e,i){for(var r=t.depth,n=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,n++,e=!1;if(i)for(var o=t.node(r).maybeChild(t.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,n++;return n}function AB(t,e){for(var i=[],r=e.content,n=e.openStart,o=e.openEnd;n>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){n--,o--;var s=r.firstChild;i.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=t.someProp("clipboardSerializer")||YP.fromSchema(t.state.schema),l=zB(),h=l.createElement("div");h.appendChild(a.serializeFragment(r,{document:l}));for(var c,p=h.firstChild;p&&1==p.nodeType&&(c=IB[p.nodeName.toLowerCase()]);){for(var u=c.length-1;u>=0;u--){for(var d=l.createElement(c[u]);h.firstChild;)d.appendChild(h.firstChild);h.appendChild(d)}p=h.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",n+" "+o+" "+JSON.stringify(i)),{dom:h,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function MB(t,e,i,r,n){var o,s,a=n.parent.type.spec.code;if(!i&&!e)return null;var l=e&&(r||a||!i);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,a||r)})),a)return new $D(FD.from(t.state.schema.text(e)),0,0);var h=t.someProp("clipboardTextParser",(function(t){return t(e,n,r)}));h?s=h:(o=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){o.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){i=t(i)})),o=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var i,r=zB().createElement("div"),n=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),o=0;(i=n&&IB[n[1].toLowerCase()])&&(t=i.map((function(t){return"<"+t+">"})).join("")+t+i.map((function(t){return"</"+t+">"})).reverse().join(""),o=i.length);r.innerHTML=t;for(var s=0;s<o;s++)r=r.firstChild;return r}(i);var c=o&&o.querySelector("[data-pm-slice]"),p=c&&/^(\d+) (\d+) (.*)/.exec(c.getAttribute("data-pm-slice"));if(!s){var u=t.someProp("clipboardParser")||t.someProp("domParser")||jP.fromSchema(t.state.schema);s=u.parseSlice(o,{preserveWhitespace:!(!l&&!p),context:n})}return s=p?function(t,e){if(!t.size)return t;var i,r=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch(e){return t}for(var n=t.content,o=t.openStart,s=t.openEnd,a=i.length-2;a>=0;a-=2){var l=r.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;n=FD.from(l.create(i[a+1],n)),o++,s++}return new $D(n,o,s)}(function(t,e,i){e<t.openStart&&(t=new $D(RB(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));i<t.openEnd&&(t=new $D(RB(t.content,1,i,t.openEnd,0,0),t.openStart,i));return t}(s,+p[1],+p[2]),p[3]):$D.maxOpen(function(t,e){if(t.childCount<2)return t;for(var i=function(i){var r=e.node(i).contentMatchAt(e.index(i)),n=void 0,o=[];if(t.forEach((function(t){if(o){var e,i=r.findWrapping(t.type);if(!i)return o=null;if(e=o.length&&n.length&&DB(i,n,t,o[o.length-1],0))o[o.length-1]=e;else{o.length&&(o[o.length-1]=PB(o[o.length-1],n.length));var s=OB(t,i);o.push(s),r=r.matchType(s.type,s.attrs),n=i}}})),o)return{v:FD.from(o)}},r=e.depth;r>=0;r--){var n=i(r);if(n)return n.v}return t}(s.content,n),!1),t.someProp("transformPasted",(function(t){s=t(s)})),s}function OB(t,e,i){void 0===i&&(i=0);for(var r=e.length-1;r>=i;r--)t=e[r].create(null,FD.from(t));return t}function DB(t,e,i,r,n){if(n<t.length&&n<e.length&&t[n]==e[n]){var o=DB(t,e,i,r.lastChild,n+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(n==t.length-1?i.type:t[n+1]))return r.copy(r.content.append(FD.from(OB(i,t,n+1))))}}function PB(t,e){if(0==e)return t;var i=t.content.replaceChild(t.childCount-1,PB(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(FD.empty,!0);return t.copy(i.append(r))}function RB(t,e,i,r,n,o){var s=e<0?t.firstChild:t.lastChild,a=s.content;return n<r-1&&(a=RB(a,e,i,r,n+1,o)),n>=i&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||o<=n).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(FD.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}var IB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},LB=null;function zB(){return LB||(LB=document.implementation.createHTMLDocument("title"))}var BB={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},NB=$L.ie&&$L.ie_version<=11,jB=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};jB.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},jB.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var FB=function(t,e){var i=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)i.queue.push(t[e]);$L.ie&&$L.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?i.flushSoon():i.flush()})),this.currentSelection=new jB,NB&&(this.onCharData=function(t){i.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};FB.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},FB.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},FB.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,BB),NB&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},FB.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var i=0;i<e.length;i++)this.queue.push(e[i]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}NB&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},FB.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},FB.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},FB.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},FB.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&cB(t)){var t;if(this.suppressingSelectionUpdates)return iB(this.view);if($L.ie&&$L.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&rz(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},FB.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},FB.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},FB.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&cB(this.view)&&!this.ignoreSelectionChange(e),r=-1,n=-1,o=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var l=this.registerMutation(t[a],s);l&&(r=r<0?l.from:Math.min(l.from,r),n=n<0?l.to:Math.max(l.to,n),l.typeOver&&(o=!0))}if($L.gecko&&s.length>1){var h=s.filter((function(t){return"BR"==t.nodeName}));if(2==h.length){var c=h[0],p=h[1];c.parentNode&&c.parentNode.parentNode==p.parentNode?p.remove():c.remove()}}(r>-1||i)&&(r>-1&&(this.view.docView.markDirty(r,n),function(t){if(VB)return;VB=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,n,o,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||iB(this.view))}},FB.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,n=t.nextSibling;if($L.ie&&$L.ie_version<=11&&t.addedNodes.length)for(var o=0;o<t.addedNodes.length;o++){var s=t.addedNodes[o],a=s.previousSibling,l=s.nextSibling;(!a||Array.prototype.indexOf.call(t.addedNodes,a)<0)&&(r=a),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(n=l)}for(var h=r&&r.parentNode==t.target?QL(r)+1:0,c=i.localPosFromDOM(t.target,h,-1),p=n&&n.parentNode==t.target?QL(n):t.target.childNodes.length,u=0;u<t.addedNodes.length;u++)e.push(t.addedNodes[u]);return{from:c,to:i.localPosFromDOM(t.target,p,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var VB=!1;var HB={},WB={};function UB(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function qB(t){t.someProp("handleDOMEvents",(function(e){for(var i in e)t.eventHandlers[i]||t.dom.addEventListener(i,t.eventHandlers[i]=function(e){return GB(t,e)})}))}function GB(t,e){return t.someProp("handleDOMEvents",(function(i){var r=i[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function $B(t){return{left:t.clientX,top:t.clientY}}function KB(t,e,i,r,n){if(-1==r)return!1;for(var o=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>o.depth?e(t,i,o.nodeAfter,o.before(r),n,!0):e(t,i,o.node(r),o.before(r),n,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function XB(t,e,i){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==i&&r.setMeta("pointer",!0),t.dispatch(r)}function YB(t,e,i,r,n){return KB(t,"handleClickOn",e,i,r)||t.someProp("handleClick",(function(i){return i(t,e,r)}))||(n?function(t,e){if(-1==e)return!1;var i,r,n=t.state.selection;n instanceof VR&&(i=n.node);for(var o=t.state.doc.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(VR.isSelectable(a)){r=i&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?o.before(n.$from.depth):o.before(s);break}}return null!=r&&(XB(t,VR.create(t.state.doc,r),"pointer"),!0)}(t,i):function(t,e){if(-1==e)return!1;var i=t.state.doc.resolve(e),r=i.nodeAfter;return!!(r&&r.isAtom&&VR.isSelectable(r))&&(XB(t,new VR(i),"pointer"),!0)}(t,i))}function ZB(t,e,i,r){return KB(t,"handleDoubleClickOn",e,i,r)||t.someProp("handleDoubleClick",(function(i){return i(t,e,r)}))}function JB(t,e,i,r){return KB(t,"handleTripleClickOn",e,i,r)||t.someProp("handleTripleClick",(function(i){return i(t,e,r)}))||function(t,e){var i=t.state.doc;if(-1==e)return!!i.inlineContent&&(XB(t,jR.create(i,0,i.content.size),"pointer"),!0);for(var r=i.resolve(e),n=r.depth+1;n>0;n--){var o=n>r.depth?r.nodeAfter:r.node(n),s=r.before(n);if(o.inlineContent)XB(t,jR.create(i,s+1,s+1+o.content.size),"pointer");else{if(!VR.isSelectable(o))continue;XB(t,VR.create(i,s),"pointer")}return!0}}(t,i)}function QB(t){return sN(t)}WB.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!iN(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!$L.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(i){return i(t,e)}))||kB(t,e)?e.preventDefault():UB(t,"key");else{var i=Date.now();t.lastIOSEnter=i,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==i&&(t.someProp("handleKeyDown",(function(e){return e(t,hz(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},WB.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},WB.keypress=function(t,e){if(!(iN(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||$L.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(i){return i(t,e)})))e.preventDefault();else{var i=t.state.selection;if(!(i instanceof jR&&i.$from.sameParent(i.$to))){var r=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,i.$from.pos,i.$to.pos,r)}))||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}}};var tN=$L.mac?"metaKey":"ctrlKey";HB.mousedown=function(t,e){t.shiftKey=e.shiftKey;var i=QB(t),r=Date.now(),n="singleClick";r-t.lastClick.time<500&&function(t,e){var i=e.x-t.clientX,r=e.y-t.clientY;return i*i+r*r<100}(e,t.lastClick)&&!e[tN]&&("singleClick"==t.lastClick.type?n="doubleClick":"doubleClick"==t.lastClick.type&&(n="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:n};var o=t.posAtCoords($B(e));o&&("singleClick"==n?t.mouseDown=new eN(t,o,e,i):("doubleClick"==n?ZB:JB)(t,o.pos,o.inside,e)?e.preventDefault():UB(t,"pointer"))};var eN=function(t,e,i,r){var n,o,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=i,this.flushed=r,this.selectNode=i[tN],this.allowDefault=i.shiftKey,e.inside>-1)n=t.state.doc.nodeAt(e.inside),o=e.inside;else{var a=t.state.doc.resolve(e.pos);n=a.parent,o=a.depth?a.before():0}this.mightDrag=null;var l=r?null:i.target,h=l?t.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null,(n.type.spec.draggable&&!1!==n.type.spec.selectable||t.state.selection instanceof VR&&o==t.state.selection.from)&&(this.mightDrag={node:n,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&$L.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),UB(t,"pointer")};function iN(t,e){return!!t.composing||!!($L.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}eN.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},eN.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords($B(t))),this.allowDefault||!e?UB(this.view,"pointer"):YB(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||$L.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||$L.chrome&&!(this.view.state.selection instanceof jR)&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(XB(this.view,zR.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):UB(this.view,"pointer")}},eN.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),UB(this.view,"pointer")},HB.touchdown=function(t){QB(t),UB(t,"pointer")},HB.contextmenu=function(t){return QB(t)};var rN=$L.android?5e3:-1;function nN(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return sN(t)}),e))}function oN(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function sN(t,e){if(t.domObserver.forceFlush(),oN(t),e||t.docView.dirty){var i=eB(t);return i&&!i.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(i)):t.updateState(t.state),!0}return!1}WB.compositionstart=WB.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||i.marks(),sN(t,!0),t.markCursor=null;else if(sN(t),$L.gecko&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length)for(var r=t.root.getSelection(),n=r.focusNode,o=r.focusOffset;n&&1==n.nodeType&&0!=o;){var s=o<0?n.lastChild:n.childNodes[o-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}n=s,o=-1}t.composing=!0}nN(t,rN)},WB.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,nN(t,20))};var aN=$L.ie&&$L.ie_version<15||$L.ios&&$L.webkit_version<604;function lN(t,e,i,r){var n=MB(t,e,i,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,n||$D.empty)})))return!0;if(!n)return!1;var o=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(n),s=o?t.state.tr.replaceSelectionWith(o,t.shiftKey):t.state.tr.replaceSelection(n);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}HB.copy=WB.cut=function(t,e){var i=t.state.selection,r="cut"==e.type;if(!i.empty){var n=aN?null:e.clipboardData,o=AB(t,i.content()),s=o.dom,a=o.text;n?(e.preventDefault(),n.clearData(),n.setData("text/html",s.innerHTML),n.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var i=t.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),n=document.createRange();n.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(n),setTimeout((function(){i.parentNode&&i.parentNode.removeChild(i),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},WB.paste=function(t,e){var i=aN?null:e.clipboardData;i&&lN(t,i.getData("text/plain"),i.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var i=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),i?lN(t,r.value,null,e):lN(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var hN=function(t,e){this.slice=t,this.move=e},cN=$L.mac?"altKey":"ctrlKey";for(var pN in HB.dragstart=function(t,e){var i=t.mouseDown;if(i&&i.done(),e.dataTransfer){var r=t.state.selection,n=r.empty?null:t.posAtCoords($B(e));if(n&&n.pos>=r.from&&n.pos<=(r instanceof VR?r.to-1:r.to));else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(VR.create(t.state.doc,i.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var o=t.docView.nearestDesc(e.target,!0);if(!o||!o.node.type.spec.draggable||o==t.docView)return;t.dispatch(t.state.tr.setSelection(VR.create(t.state.doc,o.posBefore)))}var s=t.state.selection.content(),a=AB(t,s),l=a.dom,h=a.text;e.dataTransfer.clearData(),e.dataTransfer.setData(aN?"Text":"text/html",l.innerHTML),aN||e.dataTransfer.setData("text/plain",h),t.dragging=new hN(s,!e[cN])}},HB.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},WB.dragover=WB.dragenter=function(t,e){return e.preventDefault()},WB.drop=function(t,e){var i=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords($B(e));if(r){var n=t.state.doc.resolve(r.pos);if(n){var o=i&&i.slice||MB(t,e.dataTransfer.getData(aN?"Text":"text/plain"),aN?null:e.dataTransfer.getData("text/html"),!1,n),s=i&&!e[cN];if(t.someProp("handleDrop",(function(i){return i(t,e,o||$D.empty,s)})))e.preventDefault();else if(o){e.preventDefault();var a=o?xR(t.state.doc,n.pos,o):n.pos;null==a&&(a=n.pos);var l=t.state.tr;s&&l.deleteSelection();var h=l.mapping.map(a),c=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,p=l.doc;if(c?l.replaceRangeWith(h,h,o.content.firstChild):l.replaceRange(h,h,o),!l.doc.eq(p)){var u=l.doc.resolve(h);if(c&&VR.isSelectable(o.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new VR(u));else{var d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(t,e,i,r){return d=r})),l.setSelection(hB(t,u,l.doc.resolve(d)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},HB.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&iB(t)}),20))},HB.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},HB.beforeinput=function(t,e){if($L.chrome&&$L.android&&"deleteContentBackward"==e.inputType){var i=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==i&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,hz(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},WB)HB[pN]=WB[pN];function uN(t,e){if(t==e)return!0;for(var i in t)if(t[i]!==e[i])return!1;for(var r in e)if(!(r in t))return!1;return!0}var dN=function(t,e){this.spec=e||bN,this.side=this.spec.side||0,this.toDOM=t};dN.prototype.map=function(t,e,i,r){var n=t.mapResult(e.from+r,this.side<0?-1:1),o=n.pos;return n.deleted?null:new mN(o-i,o-i,this)},dN.prototype.valid=function(){return!0},dN.prototype.eq=function(t){return this==t||t instanceof dN&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&uN(this.spec,t.spec))};var fN=function(t,e){this.spec=e||bN,this.attrs=t};fN.prototype.map=function(t,e,i,r){var n=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return n>=o?null:new mN(n,o,this)},fN.prototype.valid=function(t,e){return e.from<e.to},fN.prototype.eq=function(t){return this==t||t instanceof fN&&uN(this.attrs,t.attrs)&&uN(this.spec,t.spec)},fN.is=function(t){return t.type instanceof fN};var vN=function(t,e){this.spec=e||bN,this.attrs=t};vN.prototype.map=function(t,e,i,r){var n=t.mapResult(e.from+r,1);if(n.deleted)return null;var o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=n.pos?null:new mN(n.pos-i,o.pos-i,this)},vN.prototype.valid=function(t,e){var i=t.content.findIndex(e.from),r=i.index,n=i.offset;return n==e.from&&n+t.child(r).nodeSize==e.to},vN.prototype.eq=function(t){return this==t||t instanceof vN&&uN(this.attrs,t.attrs)&&uN(this.spec,t.spec)};var mN=function(t,e,i){this.from=t,this.to=e,this.type=i},gN={spec:{configurable:!0},inline:{configurable:!0}};mN.prototype.copy=function(t,e){return new mN(t,e,this.type)},mN.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},mN.prototype.map=function(t,e,i){return this.type.map(t,this,e,i)},mN.widget=function(t,e,i){return new mN(t,t,new dN(e,i))},mN.inline=function(t,e,i,r){return new mN(t,e,new fN(i,r))},mN.node=function(t,e,i,r){return new mN(t,e,new vN(i,r))},gN.spec.get=function(){return this.type.spec},gN.inline.get=function(){return this.type instanceof fN},Object.defineProperties(mN.prototype,gN);var yN=[],bN={},wN=function(t,e){this.local=t&&t.length?t:yN,this.children=e&&e.length?e:yN};wN.create=function(t,e){return e.length?EN(e,t,0,bN):xN},wN.prototype.find=function(t,e,i){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,i),r},wN.prototype.findInner=function(t,e,i,r,n){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!n||n(s.spec))&&i.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,i,r+l,n)}},wN.prototype.map=function(t,e,i){return this==xN||0==t.maps.length?this:this.mapInner(t,e,0,0,i||bN)},wN.prototype.mapInner=function(t,e,i,r,n){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(t,i,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):n.onRemove&&n.onRemove(this.local[s].spec)}return this.children.length?function(t,e,i,r,n,o,s){for(var a=t.slice(),l=function(t,e,i,r){for(var s=0;s<a.length;s+=3){var l=a[s+1],h=void 0;-1==l||t>l+o||(e>=a[s]+o?a[s+1]=-1:i>=n&&(h=r-i-(e-t))&&(a[s]+=h,a[s+1]+=h))}},h=0;h<i.maps.length;h++)i.maps[h].forEach(l);for(var c=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var u=i.map(t[p]+o),d=u-n;if(d<0||d>=r.content.size){c=!0;continue}var f=i.map(t[p+1]+o,-1)-n,v=r.content.findIndex(d),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==d&&g+y.nodeSize==f){var b=a[p+2].mapInner(i,y,u+1,t[p]+o+1,s);b!=xN?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,c=!0)}else c=!0}if(c){var w=function(t,e,i,r,n,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var l=t.local[o].map(r,n,e);l?i.push(l):s.onRemove&&s.onRemove(t.local[o].spec)}for(var h=0;h<t.children.length;h+=3)a(t.children[h+2],t.children[h]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+o+1);return i}(a,t,e||[],i,n,o,s),x=EN(w,r,0,s);e=x.local;for(var _=0;_<a.length;_+=3)a[_+1]<0&&(a.splice(_,3),_-=3);for(var k=0,S=0;k<x.children.length;k+=3){for(var C=x.children[k];S<a.length&&a[S]<C;)S+=3;a.splice(S,0,x.children[k],x.children[k+1],x.children[k+2])}}return new wN(e&&e.sort(TN),a)}(this.children,o,t,e,i,r,n):o?new wN(o.sort(TN)):xN},wN.prototype.add=function(t,e){return e.length?this==xN?wN.create(t,e):this.addInner(t,e,0):this},wN.prototype.addInner=function(t,e,i){var r,n=this,o=0;t.forEach((function(t,s){var a,l=s+i;if(a=SN(e,t,l)){for(r||(r=n.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(t,a,l+1):r.splice(o,0,s,s+t.nodeSize,EN(a,t,l+1,bN)),o+=3}}));for(var s=0;s<e.length;s++){var a=e[s];a&&!a.type.valid(t,a)&&(e[s]=null,o=1)}var l=kN(o?CN(e):e,-i);return new wN(l.length?this.local.concat(l).sort(TN):this.local,r||this.children)},wN.prototype.remove=function(t){return 0==t.length||this==xN?this:this.removeInner(t,0)},wN.prototype.removeInner=function(t,e){for(var i=this.children,r=this.local,n=0;n<i.length;n+=3){for(var o=void 0,s=i[n]+e,a=i[n+1]+e,l=0,h=void 0;l<t.length;l++)(h=t[l])&&h.from>s&&h.to<a&&(t[l]=null,(o||(o=[])).push(h));if(o){i==this.children&&(i=this.children.slice());var c=i[n+2].removeInner(o,s+1);c!=xN?i[n+2]=c:(i.splice(n,3),n-=3)}}if(r.length)for(var p=0,u=void 0;p<t.length;p++)if(u=t[p])for(var d=0;d<r.length;d++)r[d].eq(u,e)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return i==this.children&&r==this.local?this:r.length||i.length?new wN(r,i):xN},wN.prototype.forChild=function(t,e){if(this==xN)return this;if(e.isLeaf)return wN.empty;for(var i,r,n=0;n<this.children.length;n+=3)if(this.children[n]>=t){this.children[n]==t&&(i=this.children[n+2]);break}for(var o=t+1,s=o+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof fN){var h=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;h<c&&(r||(r=[])).push(l.copy(h,c))}}if(r){var p=new wN(r.sort(TN));return i?new _N([p,i]):p}return i||xN},wN.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof wN)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=t.children[i]||this.children[i+1]!=t.children[i+1]||!this.children[i+2].eq(t.children[i+2]))return!1;return!0},wN.prototype.locals=function(t){return AN(this.localsInner(t))},wN.prototype.localsInner=function(t){if(this==xN)return yN;if(t.inlineContent||!this.local.some(fN.is))return this.local;for(var e=[],i=0;i<this.local.length;i++)this.local[i].type instanceof fN||e.push(this.local[i]);return e};var xN=new wN;wN.empty=xN,wN.removeOverlap=AN;var _N=function(t){this.members=t};function kN(t,e){if(!e||!t.length)return t;for(var i=[],r=0;r<t.length;r++){var n=t[r];i.push(new mN(n.from+e,n.to+e,n.type))}return i}function SN(t,e,i){if(e.isLeaf)return null;for(var r=i+e.nodeSize,n=null,o=0,s=void 0;o<t.length;o++)(s=t[o])&&s.from>i&&s.to<r&&((n||(n=[])).push(s),t[o]=null);return n}function CN(t){for(var e=[],i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function EN(t,e,i,r){var n=[],o=!1;e.forEach((function(e,s){var a=SN(t,e,s+i);if(a){o=!0;var l=EN(a,e,i+s+1,r);l!=xN&&n.push(s,s+e.nodeSize,l)}}));for(var s=kN(o?CN(t):t,-i).sort(TN),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||n.length?new wN(s,n):xN}function TN(t,e){return t.from-e.from||t.to-e.to}function AN(t){for(var e=t,i=0;i<e.length-1;i++){var r=e[i];if(r.from!=r.to)for(var n=i+1;n<e.length;n++){var o=e[n];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[i]=r.copy(r.from,o.from),MN(e,n,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[n]=o.copy(o.from,r.to),MN(e,n+1,o.copy(r.to,o.to)))}}return e}function MN(t,e,i){for(;e<t.length&&TN(i,t[e])>0;)e++;t.splice(e,0,i)}function ON(t){var e=[];return t.someProp("decorations",(function(i){var r=i(t.state);r&&r!=xN&&e.push(r)})),t.cursorWrapper&&e.push(wN.create(t.state.doc,[t.cursorWrapper.deco])),_N.from(e)}_N.prototype.forChild=function(t,e){if(e.isLeaf)return wN.empty;for(var i=[],r=0;r<this.members.length;r++){var n=this.members[r].forChild(t,e);n!=xN&&(n instanceof _N?i=i.concat(n.members):i.push(n))}return _N.from(i)},_N.prototype.eq=function(t){if(!(t instanceof _N)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},_N.prototype.locals=function(t){for(var e,i=!0,r=0;r<this.members.length;r++){var n=this.members[r].localsInner(t);if(n.length)if(e){i&&(e=e.slice(),i=!1);for(var o=0;o<n.length;o++)e.push(n[o])}else e=n}return e?AN(i?e:e.sort(TN)):yN},_N.from=function(t){switch(t.length){case 0:return xN;case 1:return t[0];default:return new _N(t)}};var DN,PN,RN=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=BN(this),this.markCursor=null,this.cursorWrapper=null,zN(this),this.nodeViews=NN(this),this.docView=jz(this.state.doc,LN(this),ON(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new FB(t,(function(e,i,r,n){return CB(t,e,i,r,n)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var i=HB[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var i=e.target;i!=t.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||GB(t,e)||!t.editable&&e.type in WB||i(t,e)})};for(var i in HB)e(i);$L.safari&&t.dom.addEventListener("input",(function(){return null})),qB(t)}(this),this.pluginViews=[],this.updatePluginViews()},IN={props:{configurable:!0},root:{configurable:!0}};function LN(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(i){if("function"==typeof i&&(i=i(t.state)),i)for(var r in i)"class"==r?e.class+=" "+i[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(i[r]))})),[mN.node(0,t.state.doc.content.size,e)]}function zN(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:mN.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function BN(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function NN(t){var e={};return t.someProp("nodeViews",(function(t){for(var i in t)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=t[i])})),e}if(IN.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},RN.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qB(this),this._props=t,this.updateStateInner(t.state,!0)},RN.prototype.setProps=function(t){var e={};for(var i in this._props)e[i]=this._props[i];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},RN.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},RN.prototype.updateStateInner=function(t,e){var i=this,r=this.state,n=!1,o=!1;if(t.storedMarks&&this.composing&&(oN(this),o=!0),this.state=t,e){var s=NN(this);(function(t,e){var i=0,r=0;for(var n in t){if(t[n]!=e[n])return!0;i++}for(var o in e)r++;return i!=r})(s,this.nodeViews)&&(this.nodeViews=s,n=!0),qB(this)}this.editable=BN(this),zN(this);var a=ON(this),l=LN(this),h=e?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",c=n||!this.docView.matchesNode(t.doc,l,a);!c&&t.selection.eq(r.selection)||(o=!0);var p,u,d,f,v,m,g="preserve"==h&&o&&null==this.dom.style.overflowAnchor&&function(t){for(var e,i,r=t.dom.getBoundingClientRect(),n=Math.max(0,r.top),o=(r.left+r.right)/2,s=n+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(o,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=n-20){e=a,i=l.top;break}}}return{refDOM:e,refTop:i,stack:fz(t.dom)}}(this);if(o){this.domObserver.stop();var y=c&&($L.ie||$L.chrome)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&(f=r.selection,v=t.selection,m=Math.min(f.$anchor.sharedDepth(f.head),v.$anchor.sharedDepth(v.head)),f.$anchor.start(m)!=v.$anchor.start(m));if(c){var b=$L.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!n&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=jz(t.doc,l,a,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,u=p.docView.domFromPos(p.state.selection.anchor,0),d=p.root.getSelection(),rz(u.node,u.offset,d.anchorNode,d.anchorOffset)))?iB(this,y):(aB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var w=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(i)}))||(t.selection instanceof VR?dz(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),w):dz(this,this.coordsAtPos(t.selection.head,1),w))}else g&&function(t){var e=t.refDOM,i=t.refTop,r=t.stack,n=e?e.getBoundingClientRect().top:0;vz(r,0==n?0:n-i)}(g)},RN.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},RN.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var i=this.pluginViews[e];i.update&&i.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}},RN.prototype.someProp=function(t,e){var i,r=this._props&&this._props[t];if(null!=r&&(i=e?e(r):r))return i;var n=this.state.plugins;if(n)for(var o=0;o<n.length;o++){var s=n[o].props[t];if(null!=s&&(i=e?e(s):s))return i}},RN.prototype.hasFocus=function(){return this.root.activeElement==this.dom},RN.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(mz)return t.focus(mz);var e=fz(t);t.focus(null==mz?{get preventScroll(){return mz={preventScroll:!0},!0}}:void 0),mz||(mz=!1,vz(e,0))}(this.dom),iB(this),this.domObserver.start()},IN.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},RN.prototype.posAtCoords=function(t){return wz(this,t)},RN.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),kz(this,t,e)},RN.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},RN.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},RN.prototype.posAtDOM=function(t,e,i){void 0===i&&(i=-1);var r=this.docView.posFromDOM(t,e,i);if(null==r)throw new RangeError("DOM position not inside the editor");return r},RN.prototype.endOfTextblock=function(t,e){return Dz(this,e||this.state,t)},RN.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ON(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},RN.prototype.dispatchEvent=function(t){return function(t,e){GB(t,e)||!HB[e.type]||!t.editable&&e.type in WB||HB[e.type](t,e)}(this,t)},RN.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(RN.prototype,IN),"undefined"!=typeof WeakMap){var jN=new WeakMap;DN=function(t){return jN.get(t)},PN=function(t,e){return jN.set(t,e),e}}else{var FN=[],VN=0;DN=function(t){for(var e=0;e<FN.length;e+=2)if(FN[e]==t)return FN[e+1]},PN=function(t,e){return 10==VN&&(VN=0),FN[VN++]=t,FN[VN++]=e}}var HN=function(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r},WN=function(t,e,i,r){this.width=t,this.height=e,this.map=i,this.problems=r};function UN(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],i=0;i<t.colspan;i++)e.push(0);return e}function qN(t,e){var i=t.getAttribute("data-colwidth"),r=i&&/^\d+(,\d+)*$/.test(i)?i.split(",").map((function(t){return Number(t)})):null,n=Number(t.getAttribute("colspan")||1),o={colspan:n,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==n?r:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(o[s]=l)}return o}function GN(t,e){var i={};for(var r in 1!=t.attrs.colspan&&(i.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(i.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(i["data-colwidth"]=t.attrs.colwidth.join(",")),e){var n=e[r].setDOMAttr;n&&n(t.attrs[r],i)}return i}function $N(t){var e=t.cached.tableNodeTypes;if(!e)for(var i in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[i],n=r.spec.tableRole;n&&(e[n]=r)}return e}WN.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var i=this.map[e];if(i==t){for(var r=e%this.width,n=e/this.width|0,o=r+1,s=n+1,a=1;o<this.width&&this.map[e+a]==i;a++)o++;for(var l=1;s<this.height&&this.map[e+this.width*l]==i;l++)s++;return new HN(r,n,o,s)}}throw new RangeError("No cell with offset "+t+" found")},WN.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},WN.prototype.nextCell=function(t,e,i){var r=this.findCell(t),n=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==e?(i<0?0==n:o==this.width)?null:this.map[s*this.width+(i<0?n-1:o)]:(i<0?0==s:a==this.height)?null:this.map[n+this.width*(i<0?s-1:a)]},WN.prototype.rectBetween=function(t,e){var i=this.findCell(t),r=i.left,n=i.right,o=i.top,s=i.bottom,a=this.findCell(e),l=a.left,h=a.right,c=a.top,p=a.bottom;return new HN(Math.min(r,l),Math.min(o,c),Math.max(n,h),Math.max(s,p))},WN.prototype.cellsInRect=function(t){for(var e=[],i={},r=t.top;r<t.bottom;r++)for(var n=t.left;n<t.right;n++){var o=r*this.width+n,s=this.map[o];i[s]||(i[s]=!0,n==t.left&&n&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s||e.push(s))}return e},WN.prototype.positionAt=function(t,e,i){for(var r=0,n=0;;r++){var o=n+i.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<n;)s++;return s==a?o-1:this.map[s]}n=o}},WN.get=function(t){return DN(t)||PN(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,i=!1,r=0;r<t.childCount;r++){var n=t.child(r),o=0;if(i)for(var s=0;s<r;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var h=a.child(l);s+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}for(var c=0;c<n.childCount;c++){var p=n.child(c);o+=p.attrs.colspan,p.attrs.rowspan>1&&(i=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}(t),i=t.childCount,r=[],n=0,o=null,s=[],a=0,l=e*i;a<l;a++)r[a]=0;for(var h=0,c=0;h<i;h++){var p=t.child(h);c++;for(var u=0;;u++){for(;n<r.length&&0!=r[n];)n++;if(u==p.childCount)break;for(var d=p.child(u),f=d.attrs,v=f.colspan,m=f.rowspan,g=f.colwidth,y=0;y<m;y++){if(y+h>=i){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:m-y});break}for(var b=n+y*e,w=0;w<v;w++){0==r[b+w]?r[b+w]=c:(o||(o=[])).push({type:"collision",row:h,pos:c,n:v-w});var x=g&&g[w];if(x){var _=(b+w)%e*2,k=s[_];null==k||k!=x&&1==s[_+1]?(s[_]=x,s[_+1]=1):k==x&&s[_+1]++}}}n+=v,c+=d.nodeSize}for(var S=(h+1)*e,C=0;n<S;)0==r[n++]&&C++;C&&(o||(o=[])).push({type:"missing",row:h,n:C}),c++}for(var E=new WN(e,i,r,o),T=!1,A=0;!T&&A<s.length;A+=2)null!=s[A]&&s[A+1]<i&&(T=!0);T&&function(t,e,i){t.problems||(t.problems=[]);for(var r=0,n={};r<t.map.length;r++){var o=t.map[r];if(!n[o]){n[o]=!0;for(var s=i.nodeAt(o),a=null,l=0;l<s.attrs.colspan;l++){var h=e[2*((r+l)%t.width)];null==h||s.attrs.colwidth&&s.attrs.colwidth[l]==h||((a||(a=UN(s.attrs)))[l]=h)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}(E,s,t);return E}(t))};var KN=new oI("selectingCells");function XN(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function YN(t){for(var e=t.selection.$head,i=e.depth;i>0;i--)if("row"==e.node(i).type.spec.tableRole)return!0;return!1}function ZN(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:XN(e.$head)||function(t){for(var e=t.nodeAfter,i=t.pos;e;e=e.firstChild,i++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(i)}for(var n=t.nodeBefore,o=t.pos;n;n=n.lastChild,o--){var s=n.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(o-n.nodeSize)}}(e.$head)}function JN(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function QN(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function tj(t,e,i){var r=t.start(-1),n=WN.get(t.node(-1)).nextCell(t.pos-r,e,i);return null==n?null:t.node(0).resolve(r+n)}function ej(t,e,i){var r={};for(var n in t)r[n]=t[n];return r[e]=i,r}function ij(t,e,i){void 0===i&&(i=1);var r=ej(t,"colspan",t.colspan-i);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,i),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function rj(t,e,i){void 0===i&&(i=1);var r=ej(t,"colspan",t.colspan+i);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var n=0;n<i;n++)r.colwidth.splice(e,0,0)}return r}var nj=function(t){function e(e,i){void 0===i&&(i=e);var r=e.node(-1),n=WN.get(r),o=e.start(-1),s=n.rectBetween(e.pos-o,i.pos-o),a=e.node(0),l=n.cellsInRect(s).filter((function(t){return t!=i.pos-o}));l.unshift(i.pos-o);var h=l.map((function(t){var e=r.nodeAt(t),i=t+o+1;return new NR(a.resolve(i),a.resolve(i+e.content.size))}));t.call(this,h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,i){var r=t.resolve(i.map(this.$anchorCell.pos)),n=t.resolve(i.map(this.$headCell.pos));if(JN(r)&&JN(n)&&QN(r,n)){var o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?e.rowSelection(r,n):o&&this.isColSelection()?e.colSelection(r,n):new e(r,n)}return jR.between(r,n)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=WN.get(t),i=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),n={},o=[],s=r.top;s<r.bottom;s++){for(var a=[],l=s*e.width+r.left,h=r.left;h<r.right;h++,l++){var c=e.map[l];if(!n[c]){n[c]=!0;var p=e.findCell(c),u=t.nodeAt(c),d=r.left-p.left,f=p.right-r.right;if(d>0||f>0){var v=u.attrs;d>0&&(v=ij(v,0,d)),f>0&&(v=ij(v,v.colspan-f,f)),u=p.left<r.left?u.type.createAndFill(v):u.type.create(v,u.content)}if(p.top<r.top||p.bottom>r.bottom){var m=ej(u.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));u=p.top<r.top?u.type.createAndFill(m):u.type.create(m,u.content)}a.push(u)}}o.push(t.child(s).copy(FD.from(a)))}var g=this.isColSelection()&&this.isRowSelection()?t:o;return new $D(FD.from(g),1,1)},e.prototype.replace=function(e,i){void 0===i&&(i=$D.empty);for(var r=e.steps.length,n=this.ranges,o=0;o<n.length;o++){var s=n[o],a=s.$from,l=s.$to,h=e.mapping.slice(r);e.replace(h.map(a.pos),h.map(l.pos),o?$D.empty:i)}var c=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);c&&e.setSelection(c)},e.prototype.replaceWith=function(t,e){this.replace(t,new $D(FD.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),i=WN.get(e),r=this.$anchorCell.start(-1),n=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<n.length;o++)t(e.nodeAt(n[o]),r+n[o])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var i=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,i){void 0===i&&(i=t);var r=WN.get(t.node(-1)),n=t.start(-1),o=r.findCell(t.pos-n),s=r.findCell(i.pos-n),a=t.node(0);return o.top<=s.top?(o.top>0&&(t=a.resolve(n+r.map[o.left])),s.bottom<r.height&&(i=a.resolve(n+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(i=a.resolve(n+r.map[s.left])),o.bottom<r.height&&(t=a.resolve(n+r.map[r.width*(r.height-1)+o.right-1]))),new e(t,i)},e.prototype.isRowSelection=function(){var t=WN.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(i,r)>0)return!1;var n=i+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(n,o)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,i){void 0===i&&(i=t);var r=WN.get(t.node(-1)),n=t.start(-1),o=r.findCell(t.pos-n),s=r.findCell(i.pos-n),a=t.node(0);return o.left<=s.left?(o.left>0&&(t=a.resolve(n+r.map[o.top*r.width])),s.right<r.width&&(i=a.resolve(n+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(i=a.resolve(n+r.map[s.top*r.width])),o.right<r.width&&(t=a.resolve(n+r.map[r.width*(o.top+1)-1]))),new e(t,i)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,i){return new e(t.resolve(i.anchor),t.resolve(i.head))},e.create=function(t,i,r){return void 0===r&&(r=i),new e(t.resolve(i),t.resolve(r))},e.prototype.getBookmark=function(){return new oj(this.$anchorCell.pos,this.$headCell.pos)},e}(zR);nj.prototype.visible=!1,zR.jsonID("cell",nj);var oj=function(t,e){this.anchor=t,this.head=e};function sj(t){if(!(t.selection instanceof nj))return null;var e=[];return t.selection.forEachCell((function(t,i){e.push(mN.node(i,i+t.nodeSize,{class:"selectedCell"}))})),wN.create(t.doc,e)}function aj(t){if(!t.size)return null;for(var e=t.content,i=t.openStart,r=t.openEnd;1==e.childCount&&(i>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)i--,r--,e=e.firstChild.content;var n=e.firstChild,o=n.type.spec.tableRole,s=n.type.schema,a=[];if("row"==o)for(var l=0;l<e.childCount;l++){var h=e.child(l).content,c=l?0:Math.max(0,i-1),p=l<e.childCount-1?0:Math.max(0,r-1);(c||p)&&(h=lj($N(s).row,new $D(h,c,p)).content),a.push(h)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(i||r?lj($N(s).row,new $D(e,i,r)).content:e)}return function(t,e){for(var i=[],r=0;r<e.length;r++)for(var n=e[r],o=n.childCount-1;o>=0;o--)for(var s=n.child(o).attrs,a=s.rowspan,l=s.colspan,h=r;h<r+a;h++)i[h]=(i[h]||0)+l;for(var c=0,p=0;p<i.length;p++)c=Math.max(c,i[p]);for(var u=0;u<i.length;u++)if(u>=e.length&&e.push(FD.empty),i[u]<c){for(var d=$N(t).cell.createAndFill(),f=[],v=i[u];v<c;v++)f.push(d);e[u]=e[u].append(FD.from(f))}return{height:e.length,width:c,rows:e}}(s,a)}function lj(t,e){var i=t.createAndFill();return new sR(i).replace(0,i.content.size,e).doc}function hj(t,e,i,r,n,o,s,a){if(0==s||s==e.height)return!1;for(var l=!1,h=n;h<o;h++){var c=s*e.width+h,p=e.map[c];if(e.map[c-e.width]==p){l=!0;var u=i.nodeAt(p),d=e.findCell(p),f=d.top,v=d.left;t.setNodeMarkup(t.mapping.slice(a).map(p+r),null,ej(u.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,i)),u.type.createAndFill(ej(u.attrs,"rowspan",f+u.attrs.rowspan-s))),h+=u.attrs.colspan-1}}return l}function cj(t,e,i,r,n,o,s,a){if(0==s||s==e.width)return!1;for(var l=!1,h=n;h<o;h++){var c=h*e.width+s,p=e.map[c];if(e.map[c-1]==p){l=!0;var u=i.nodeAt(p),d=e.colCount(p),f=t.mapping.slice(a).map(p+r);t.setNodeMarkup(f,null,ij(u.attrs,s-d,u.attrs.colspan-(s-d))),t.insert(f+u.nodeSize,u.type.createAndFill(ij(u.attrs,0,s-d))),h+=u.attrs.rowspan-1}}return l}function pj(t,e,i,r,n){var o=i?t.doc.nodeAt(i-1):t.doc,s=WN.get(o),a=r.top,l=r.left,h=l+n.width,c=a+n.height,p=t.tr,u=0;function d(){o=i?p.doc.nodeAt(i-1):p.doc,s=WN.get(o),u=p.mapping.maps.length}(function(t,e,i,r,n,o,s){var a,l,h=$N(t.doc.type.schema);if(n>e.width)for(var c=0,p=0;c<e.height;c++){var u=i.child(c);p+=u.nodeSize;var d=[],f=void 0;f=null==u.lastChild||u.lastChild.type==h.cell?a||(a=h.cell.createAndFill()):l||(l=h.header_cell.createAndFill());for(var v=e.width;v<n;v++)d.push(f);t.insert(t.mapping.slice(s).map(p-1+r),d)}if(o>e.height){for(var m=[],g=0,y=(e.height-1)*e.width;g<Math.max(e.width,n);g++){var b=!(g>=e.width)&&i.nodeAt(e.map[y+g]).type==h.header_cell;m.push(b?l||(l=h.header_cell.createAndFill()):a||(a=h.cell.createAndFill()))}for(var w=h.row.create(null,FD.from(m)),x=[],_=e.height;_<o;_++)x.push(w);t.insert(t.mapping.slice(s).map(r+i.nodeSize-2),x)}return!(!a&&!l)})(p,s,o,i,h,c,u)&&d(),hj(p,s,o,i,l,h,a,u)&&d(),hj(p,s,o,i,l,h,c,u)&&d(),cj(p,s,o,i,a,c,l,u)&&d(),cj(p,s,o,i,a,c,h,u)&&d();for(var f=a;f<c;f++){var v=s.positionAt(f,l,o),m=s.positionAt(f,h,o);p.replace(p.mapping.slice(u).map(v+i),p.mapping.slice(u).map(m+i),new $D(n.rows[f-a],0,0))}d(),p.setSelection(new nj(p.doc.resolve(i+s.positionAt(a,l,o)),p.doc.resolve(i+s.positionAt(c-1,h-1,o)))),e(p)}oj.prototype.map=function(t){return new oj(t.map(this.anchor),t.map(this.head))},oj.prototype.resolve=function(t){var e=t.resolve(this.anchor),i=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==i.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&i.index()<i.parent.childCount&&QN(e,i)?new nj(e,i):zR.near(i,1)};var uj=GL({ArrowLeft:fj("horiz",-1),ArrowRight:fj("horiz",1),ArrowUp:fj("vert",-1),ArrowDown:fj("vert",1),"Shift-ArrowLeft":vj("horiz",-1),"Shift-ArrowRight":vj("horiz",1),"Shift-ArrowUp":vj("vert",-1),"Shift-ArrowDown":vj("vert",1),Backspace:mj,"Mod-Backspace":mj,Delete:mj,"Mod-Delete":mj});function dj(t,e,i){return!i.eq(t.selection)&&(e&&e(t.tr.setSelection(i).scrollIntoView()),!0)}function fj(t,e){return function(i,r,n){var o=i.selection;if(o instanceof nj)return dj(i,r,zR.near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;var s=wj(n,t,e);if(null==s)return!1;if("horiz"==t)return dj(i,r,zR.near(i.doc.resolve(o.head+e),e));var a,l=i.doc.resolve(s),h=tj(l,t,e);return a=h?zR.near(h,1):e<0?zR.near(i.doc.resolve(l.before(-1)),-1):zR.near(i.doc.resolve(l.after(-1)),1),dj(i,r,a)}}function vj(t,e){return function(i,r,n){var o=i.selection;if(!(o instanceof nj)){var s=wj(n,t,e);if(null==s)return!1;o=new nj(i.doc.resolve(s))}var a=tj(o.$headCell,t,e);return!!a&&dj(i,r,new nj(o.$anchorCell,a))}}function mj(t,e){var i=t.selection;if(!(i instanceof nj))return!1;if(e){var r=t.tr,n=$N(t.schema).cell.createAndFill().content;i.forEachCell((function(t,e){t.content.eq(n)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new $D(n,0,0))})),r.docChanged&&e(r)}return!0}function gj(t,e){var i=XN(t.state.doc.resolve(e));return!!i&&(t.dispatch(t.state.tr.setSelection(new nj(i))),!0)}function yj(t,e,i){if(!YN(t.state))return!1;var r=aj(i),n=t.state.selection;if(n instanceof nj){r||(r={width:1,height:1,rows:[FD.from(lj($N(t.state.schema).cell,i))]});var o=n.$anchorCell.node(-1),s=n.$anchorCell.start(-1),a=WN.get(o).rectBetween(n.$anchorCell.pos-s,n.$headCell.pos-s);return r=function(t,e,i){var r=t.width,n=t.height,o=t.rows;if(r!=e){for(var s=[],a=[],l=0;l<o.length;l++){for(var h=o[l],c=[],p=s[l]||0,u=0;p<e;u++){var d=h.child(u%h.childCount);p+d.attrs.colspan>e&&(d=d.type.create(ij(d.attrs,d.attrs.colspan,p+d.attrs.colspan-e),d.content)),c.push(d),p+=d.attrs.colspan;for(var f=1;f<d.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+d.attrs.colspan}a.push(FD.from(c))}o=a,r=e}if(n!=i){for(var v=[],m=0,g=0;m<i;m++,g++){for(var y=[],b=o[g%n],w=0;w<b.childCount;w++){var x=b.child(w);m+x.attrs.rowspan>i&&(x=x.type.create(ej(x.attrs,"rowspan",Math.max(1,i-x.attrs.rowspan)),x.content)),y.push(x)}v.push(FD.from(y))}o=v,n=i}return{width:r,height:n,rows:o}}(r,a.right-a.left,a.bottom-a.top),pj(t.state,t.dispatch,s,a,r),!0}if(r){var l=ZN(t.state),h=l.start(-1);return pj(t.state,t.dispatch,h,WN.get(l.node(-1)).findCell(l.pos-h),r),!0}return!1}function bj(t,e){if(!e.ctrlKey&&!e.metaKey){var i,r=xj(t,e.target);if(e.shiftKey&&t.state.selection instanceof nj)n(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(i=XN(t.state.selection.$anchor))&&_j(t,e).pos!=i.pos)n(i,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function n(e,i){var r=_j(t,i),n=null==KN.getState(t.state);if(!r||!QN(e,r)){if(!n)return;r=e}var o=new nj(e,r);if(n||!t.state.selection.eq(o)){var s=t.state.tr.setSelection(o);n&&s.setMeta(KN,e.pos),t.dispatch(s)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=KN.getState(t.state)&&t.dispatch(t.state.tr.setMeta(KN,-1))}function s(i){var s,a=KN.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(xj(t,i.target)!=r&&!(s=_j(t,e)))return o();s&&n(s,i)}}function wj(t,e,i){if(!(t.state.selection instanceof jR))return null;for(var r=t.state.selection.$head,n=r.depth-1;n>=0;n--){var o=r.node(n);if((i<0?r.index(n):r.indexAfter(n))!=(i<0?0:o.childCount))return null;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){var s=r.before(n),a="vert"==e?i>0?"down":"up":i>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function xj(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function _j(t,e){var i=t.posAtCoords({left:e.clientX,top:e.clientY});return i&&i?XN(t.state.doc.resolve(i.pos)):null}var kj=new oI("fix-tables");function Sj(t,e,i,r){var n=t.childCount,o=e.childCount;t:for(var s=0,a=0;s<o;s++){for(var l=e.child(s),h=a,c=Math.min(n,s+3);h<c;h++)if(t.child(h)==l){a=h+1,i+=l.nodeSize;continue t}r(l,i),a<n&&t.child(a).sameMarkup(l)?Sj(t.child(a),l,i+1,r):l.nodesBetween(0,l.content.size,r,i+1),i+=l.nodeSize}}function Cj(t,e){var i,r=function(e,r){"table"==e.type.spec.tableRole&&(i=function(t,e,i,r){var n=WN.get(e);if(!n.problems)return r;r||(r=t.tr);for(var o,s,a=[],l=0;l<n.height;l++)a.push(0);for(var h=0;h<n.problems.length;h++){var c=n.problems[h];if("collision"==c.type){for(var p=e.nodeAt(c.pos),u=0;u<p.attrs.rowspan;u++)a[c.row+u]+=c.n;r.setNodeMarkup(r.mapping.map(i+1+c.pos),null,ij(p.attrs,p.attrs.colspan-c.n,c.n))}else if("missing"==c.type)a[c.row]+=c.n;else if("overlong_rowspan"==c.type){var d=e.nodeAt(c.pos);r.setNodeMarkup(r.mapping.map(i+1+c.pos),null,ej(d.attrs,"rowspan",d.attrs.rowspan-c.n))}else if("colwidth mismatch"==c.type){var f=e.nodeAt(c.pos);r.setNodeMarkup(r.mapping.map(i+1+c.pos),null,ej(f.attrs,"colwidth",c.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==o&&(o=v),s=v);for(var m=0,g=i+1;m<n.height;m++){var y=e.child(m),b=g+y.nodeSize,w=a[m];if(w>0){var x="cell";y.firstChild&&(x=y.firstChild.type.spec.tableRole);for(var _=[],k=0;k<w;k++)_.push($N(t.schema)[x].createAndFill());var S=0!=m&&o!=m-1||s!=m?b-1:g+1;r.insert(r.mapping.map(S),_)}g=b}return r.setMeta(kj,{fixTables:!0})}(t,e,r,i))};return e?e.doc!=t.doc&&Sj(e.doc,t.doc,0,r):t.doc.descendants(r),i}function Ej(t){var e,i=t.selection,r=ZN(t),n=r.node(-1),o=r.start(-1),s=WN.get(n);return(e=i instanceof nj?s.rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o):s.findCell(r.pos-o)).tableStart=o,e.map=s,e.table=n,e}function Tj(t,e,i){var r=e.map,n=e.tableStart,o=e.table,s=i>0?-1:0;(function(t,e,i){for(var r=$N(e.type.schema).header_cell,n=0;n<t.height;n++)if(e.nodeAt(t.map[i+n*t.width]).type!=r)return!1;return!0})(r,o,i+s)&&(s=0==i||i==r.width?null:0);for(var a=0;a<r.height;a++){var l=a*r.width+i;if(i>0&&i<r.width&&r.map[l-1]==r.map[l]){var h=r.map[l],c=o.nodeAt(h);t.setNodeMarkup(t.mapping.map(n+h),null,rj(c.attrs,i-r.colCount(h))),a+=c.attrs.rowspan-1}else{var p=null==s?$N(o.type.schema).cell:o.nodeAt(r.map[l+s]).type,u=r.positionAt(a,i,o);t.insert(t.mapping.map(n+u),p.createAndFill())}}return t}function Aj(t,e){if(!YN(t))return!1;if(e){var i=Ej(t);e(Tj(t.tr,i,i.left))}return!0}function Mj(t,e){if(!YN(t))return!1;if(e){var i=Ej(t);e(Tj(t.tr,i,i.right))}return!0}function Oj(t,e,i){for(var r=e.map,n=e.table,o=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var l=a*r.width+i,h=r.map[l],c=n.nodeAt(h);if(i>0&&r.map[l-1]==h||i<r.width-1&&r.map[l+1]==h)t.setNodeMarkup(t.mapping.slice(s).map(o+h),null,ij(c.attrs,i-r.colCount(h)));else{var p=t.mapping.slice(s).map(o+h);t.delete(p,p+c.nodeSize)}a+=c.attrs.rowspan}}function Dj(t,e){if(!YN(t))return!1;if(e){var i=Ej(t),r=t.tr;if(0==i.left&&i.right==i.map.width)return!1;for(var n=i.right-1;Oj(r,i,n),n!=i.left;n--)i.table=i.tableStart?r.doc.nodeAt(i.tableStart-1):r.doc,i.map=WN.get(i.table);e(r)}return!0}function Pj(t,e,i){for(var r=e.map,n=e.tableStart,o=e.table,s=n,a=0;a<i;a++)s+=o.child(a).nodeSize;var l=[],h=i>0?-1:0;(function(t,e,i){for(var r=$N(e.type.schema).header_cell,n=0;n<t.width;n++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0})(r,o,i+h)&&(h=0==i||i==r.height?null:0);for(var c=0,p=r.width*i;c<r.width;c++,p++)if(i>0&&i<r.height&&r.map[p]==r.map[p-r.width]){var u=r.map[p],d=o.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,ej(d,"rowspan",d.rowspan+1)),c+=d.colspan-1}else{var f=null==h?$N(o.type.schema).cell:o.nodeAt(r.map[p+h*r.width]).type;l.push(f.createAndFill())}return t.insert(s,$N(o.type.schema).row.create(null,l)),t}function Rj(t,e){if(!YN(t))return!1;if(e){var i=Ej(t);e(Pj(t.tr,i,i.top))}return!0}function Ij(t,e){if(!YN(t))return!1;if(e){var i=Ej(t);e(Pj(t.tr,i,i.bottom))}return!0}function Lj(t,e,i){for(var r=e.map,n=e.table,o=e.tableStart,s=0,a=0;a<i;a++)s+=n.child(a).nodeSize;var l=s+n.child(i).nodeSize,h=t.mapping.maps.length;t.delete(s+o,l+o);for(var c=0,p=i*r.width;c<r.width;c++,p++){var u=r.map[p];if(i>0&&u==r.map[p-r.width]){var d=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(h).map(u+o),null,ej(d,"rowspan",d.rowspan-1)),c+=d.colspan-1}else if(i<r.width&&u==r.map[p+r.width]){var f=n.nodeAt(u),v=f.type.create(ej(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(i+1,c,n);t.insert(t.mapping.slice(h).map(o+m),v),c+=f.attrs.colspan-1}}}function zj(t,e){if(!YN(t))return!1;if(e){var i=Ej(t),r=t.tr;if(0==i.top&&i.bottom==i.map.height)return!1;for(var n=i.bottom-1;Lj(r,i,n),n!=i.top;n--)i.table=i.tableStart?r.doc.nodeAt(i.tableStart-1):r.doc,i.map=WN.get(i.table);e(r)}return!0}function Bj(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Nj(t,e){var i=t.selection;if(!(i instanceof nj)||i.$anchorCell.pos==i.$headCell.pos)return!1;var r=Ej(t),n=r.map;if(function(t,e){for(var i=t.width,r=t.height,n=t.map,o=e.top*i+e.left,s=o,a=(e.bottom-1)*i+e.left,l=o+(e.right-e.left-1),h=e.top;h<e.bottom;h++){if(e.left>0&&n[s]==n[s-1]||e.right<i&&n[l]==n[l+1])return!0;s+=i,l+=i}for(var c=e.left;c<e.right;c++){if(e.top>0&&n[o]==n[o-i]||e.bottom<r&&n[a]==n[a+i])return!0;o++,a++}return!1}(n,r))return!1;if(e){for(var o,s,a=t.tr,l={},h=FD.empty,c=r.top;c<r.bottom;c++)for(var p=r.left;p<r.right;p++){var u=n.map[c*n.width+p],d=r.table.nodeAt(u);if(!l[u])if(l[u]=!0,null==o)o=u,s=d;else{Bj(d)||(h=h.append(d.content));var f=a.mapping.map(u+r.tableStart);a.delete(f,f+d.nodeSize)}}if(a.setNodeMarkup(o+r.tableStart,null,ej(rj(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),h.size){var v=o+1+s.content.size,m=Bj(s)?o+1:v;a.replaceWith(m+r.tableStart,v+r.tableStart,h)}a.setSelection(new nj(a.doc.resolve(o+r.tableStart))),e(a)}return!0}function jj(t,e){var i,r=$N(t.schema);return(i=function(t){var e=t.node;return r[e.type.spec.tableRole]},function(t,e){var r,n,o=t.selection;if(o instanceof nj){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,n=o.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var i=t.node(e).type.spec.tableRole;if("cell"===i||"header_cell"===i)return t.node(e)}return null}(o.$from)))return!1;n=XN(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(e){var s=r.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=ej(s,"rowspan",1)),s.colspan>1&&(s=ej(s,"colspan",1));for(var h,c=Ej(t),p=t.tr,u=0;u<c.right-c.left;u++)a.push(l?ej(s,"colwidth",l&&l[u]?[l[u]]:null):s);for(var d=c.top;d<c.bottom;d++){var f=c.map.positionAt(d,c.left,c.table);d==c.top&&(f+=r.nodeSize);for(var v=c.left,m=0;v<c.right;v++,m++)v==c.left&&d==c.top||p.insert(h=p.mapping.map(f+c.tableStart,1),i({node:r,row:d,col:v}).createAndFill(a[m]))}p.setNodeMarkup(n,i({node:r,row:c.top,col:c.left}),a[0]),o instanceof nj&&p.setSelection(new nj(p.doc.resolve(o.$anchorCell.pos),h&&p.doc.resolve(h))),e(p)}return!0})(t,e)}function Fj(t,e,i){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),n=0;n<r.length;n++){var o=e.table.nodeAt(r[n]);if(o&&o.type!==i.header_cell)return!1}return!0}function Vj(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,i){if(!YN(e))return!1;if(i){for(var r=$N(e.schema),n=Ej(e),o=e.tr,s=n.map.cellsInRect("column"==t?new HN(n.left,0,n.right,n.map.height):"row"==t?new HN(0,n.top,n.map.width,n.bottom):n),a=s.map((function(t){return n.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==r.header_cell&&o.setNodeMarkup(n.tableStart+s[l],r.cell,a[l].attrs);if(0==o.steps.length)for(var h=0;h<s.length;h++)o.setNodeMarkup(n.tableStart+s[h],r.header_cell,a[h].attrs);i(o)}return!0}}(t):function(e,i){if(!YN(e))return!1;if(i){var r=$N(e.schema),n=Ej(e),o=e.tr,s=Fj("row",n,r),a=Fj("column",n,r),l=("column"===t?s:"row"===t&&a)?1:0,h="column"==t?new HN(0,l,1,n.map.height):"row"==t?new HN(l,0,n.map.width,1):n,c="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;n.map.cellsInRect(h).forEach((function(t){var e=t+n.tableStart,i=o.doc.nodeAt(e);i&&o.setNodeMarkup(e,c,i.attrs)})),i(o)}return!0}}Vj("row",{useDeprecatedLogic:!0}),Vj("column",{useDeprecatedLogic:!0}),Vj("cell",{useDeprecatedLogic:!0});function Hj(t,e){for(var i=t.selection.$anchor,r=i.depth;r>0;r--){if("table"==i.node(r).type.spec.tableRole)return e&&e(t.tr.delete(i.before(r),i.after(r)).scrollIntoView()),!0}return!1}var Wj=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Uj(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Uj(t,e,i,r,n,o){for(var s=0,a=!0,l=e.firstChild,h=t.firstChild,c=0,p=0;c<h.childCount;c++)for(var u=h.child(c).attrs,d=u.colspan,f=u.colwidth,v=0;v<d;v++,p++){var m=n==p?o:f&&f[v],g=m?m+"px":"";s+=m||r,m||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(i.style.width=s+"px",i.style.minWidth=""):(i.style.width="",i.style.minWidth=s+"px")}Wj.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Uj(t,this.colgroup,this.table,this.cellMinWidth),!0)},Wj.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var qj=new oI("tableColumnResizing");var Gj=function(t,e){this.activeHandle=t,this.dragging=e};function $j(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new iI({key:KN,state:{init:function(){return null},apply:function(t,e){var i=t.getMeta(KN);if(null!=i)return-1==i?null:i;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),n=r.deleted,o=r.pos;return n?null:o}},props:{decorations:sj,handleDOMEvents:{mousedown:bj},createSelectionBetween:function(t){if(null!=KN.getState(t.state))return t.state.selection},handleTripleClick:gj,handleKeyDown:uj,handlePaste:yj},appendTransaction:function(t,i,r){return function(t,e,i){var r,n,o=(e||t).selection,s=(e||t).doc;if(o instanceof VR&&(n=o.node.type.spec.tableRole)){if("cell"==n||"header_cell"==n)r=nj.create(s,o.from);else if("row"==n){var a=s.resolve(o.from+1);r=nj.rowSelection(a,a)}else if(!i){var l=WN.get(o.node),h=o.from+1,c=h+l.map[l.width*l.height-1];r=nj.create(s,h+1,c)}}else o instanceof jR&&function(t){var e=t.$from,i=t.$to;if(e.pos==i.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,n=i.pos,o=e.depth;o>=0&&!(e.after(o+1)<e.end(o));o--,r++);for(var s=i.depth;s>=0&&!(i.before(s+1)>i.start(s));s--,n--);return r==n&&/row|table/.test(e.node(o).type.spec.tableRole)}(o)?r=jR.create(s,o.from):o instanceof jR&&function(t){for(var e,i,r=t.$from,n=t.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=n.depth;a>0;a--){var l=n.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){i=l;break}}return e!==i&&0===n.parentOffset}(o)&&(r=jR.create(s,o.$from.start(),o.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,Cj(r,i),e)}})}Gj.prototype.apply=function(t){var e=this,i=t.getMeta(qj);if(i&&null!=i.setHandle)return new Gj(i.setHandle,null);if(i&&void 0!==i.setDragging)return new Gj(e.activeHandle,i.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);JN(t.doc.resolve(r))||(r=null),e=new Gj(r,e.dragging)}return e};var Kj=["blockquote",0],Xj=["hr"],Yj=["pre",["code",0]],Zj=["ol",0],Jj=["ul",0],Qj=["li",0],tF=function(t){for(var e,i={},r=t.attributes,n=0;n<r.length;n++)i[(e=r[n]).name]=e.value;return i},eF=function(t,e){for(var i in t)if(i&&null!==t[i]&&i!==e)return!0;return!1},iF=function(t,e){var i={};for(var r in t)r&&null!==t[r]&&r!==e&&(i[r]=t[r]);return i},rF=function(t){var e;return(e={})[t]={name:t,inclusive:!0,parseDOM:[{tag:t}],toDOM:function(){return[t,0]}},e},nF=lI({link:{attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}},{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:tF}],toDOM:function(t){return["a",iF(t.attrs),0]}}},rF("strong"),rF("b"),rF("em"),rF("i"),rF("u"),rF("del"),rF("sub"),rF("sup"),rF("code"),{style:{attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"span",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["span",iF(t.attrs),0]:["span",0]}}}),oF=lI({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"p",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["p",iF(t.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"div",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["div",iF(t.attrs),0]:["div",0]}},blockquote:{attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["blockquote",iF(t.attrs),0]:Kj}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return Xj}},heading:{attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}},{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(t){return lI({},tF(t),{level:1})}},{tag:"h2",getAttrs:function(t){return lI({},tF(t),{level:2})}},{tag:"h3",getAttrs:function(t){return lI({},tF(t),{level:3})}},{tag:"h4",getAttrs:function(t){return lI({},tF(t),{level:4})}},{tag:"h5",getAttrs:function(t){return lI({},tF(t),{level:5})}},{tag:"h6",getAttrs:function(t){return lI({},tF(t),{level:6})}}],toDOM:function(t){return eF(t.attrs,"level")?["h"+t.attrs.level,iF(t.attrs,"level"),0]:["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return Yj}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:lI({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["img",iF(t.attrs)]:["img"]}},hard_break:{inline:!0,attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["br",iF(t.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}},{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(t){return lI({},tF(t),{order:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"1",10):1})}}],toDOM:function(t){return 1===t.attrs.order?eF(t.attrs,"order")?["ol",iF(t.attrs,"order"),0]:Zj:["ol",lI({},iF(t.attrs,"order"),{start:t.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"ul",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["ul",iF(t.attrs),0]:Jj}},list_item:{content:"(paragraph | heading) block*",attrs:lI({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"li",getAttrs:tF}],toDOM:function(t){return eF(t.attrs)?["li",iF(t.attrs),0]:Qj},defining:!0}},function(t){var e=t.cellAttributes||{},i={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)i[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:i,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return qN(t,e)}}],toDOM:function(t){return["td",GN(t,e),0]}},table_header:{content:t.cellContent,attrs:i,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return qN(t,e)}}],toDOM:function(t){return["th",GN(t,e),0]}}}}({tableGroup:"block",cellContent:"block+",cellAttributes:{}})),sF=200,aF=function(){};aF.prototype.append=function(t){return t.length?(t=aF.from(t),!this.length&&t||t.length<sF&&this.leafAppend(t)||this.length<sF&&t.leafPrepend(this)||this.appendInner(t)):this},aF.prototype.prepend=function(t){return t.length?aF.from(t).append(this):this},aF.prototype.appendInner=function(t){return new hF(this,t)},aF.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?aF.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},aF.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},aF.prototype.forEach=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)},aF.prototype.map=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length);var r=[];return this.forEach((function(e,i){return r.push(t(e,i))}),e,i),r},aF.from=function(t){return t instanceof aF?t:t&&t.length?new lF(t):aF.empty};var lF=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,i){return 0==t&&i==this.length?this:new e(this.values.slice(t,i))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,i,r){for(var n=e;n<i;n++)if(!1===t(this.values[n],r+n))return!1},e.prototype.forEachInvertedInner=function(t,e,i,r){for(var n=e-1;n>=i;n--)if(!1===t(this.values[n],r+n))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=sF)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=sF)return new e(t.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(e.prototype,i),e}(aF);aF.empty=new lF([]);var hF=function(t){function e(e,i){t.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,i,r){var n=this.left.length;return!(e<n&&!1===this.left.forEachInner(t,e,Math.min(i,n),r))&&(!(i>n&&!1===this.right.forEachInner(t,Math.max(e-n,0),Math.min(this.length,i)-n,r+n))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,i,r){var n=this.left.length;return!(e>n&&!1===this.right.forEachInvertedInner(t,e-n,Math.max(i,n)-n,r+n))&&(!(i<n&&!1===this.left.forEachInvertedInner(t,Math.min(e,n),i,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var i=this.left.length;return e<=i?this.left.slice(t,e):t>=i?this.right.slice(t-i,e-i):this.left.slice(t,i).append(this.right.slice(0,e-i))},e.prototype.leafAppend=function(t){var i=this.right.leafAppend(t);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(t){var i=this.left.leafPrepend(t);if(i)return new e(i,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(aF);const cF=aF;var pF=function(t,e){this.items=t,this.eventCount=e};pF.prototype.popEvent=function(t,e){var i=this;if(0==this.eventCount)return null;for(var r,n,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}e&&(r=this.remapping(o,this.items.length),n=r.maps.length);var s,a,l=t.tr,h=[],c=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=i.remapping(o,e+1),n=r.maps.length),n--,void c.push(t);if(r){c.push(new uF(t.map));var p,u=t.step.map(r.slice(n));u&&l.maybeStep(u).doc&&(p=l.mapping.maps[l.mapping.maps.length-1],h.push(new uF(p,null,null,h.length+c.length))),n--,p&&r.appendMap(p,n)}else l.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(n)):t.selection,a=new pF(i.items.slice(0,o).append(c.reverse().concat(h)),i.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},pF.prototype.addTransform=function(t,e,i,r){for(var n=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var h,c=t.steps[l].invert(t.docs[l]),p=new uF(t.mapping.maps[l],c,e);(h=a&&a.merge(p))&&(p=h,l?n.pop():s=s.slice(0,s.length-1)),n.push(p),e&&(o++,e=null),r||(a=p)}var u,d,f,v=o-i.depth;return v>fF&&(d=v,(u=s).forEach((function(t,e){if(t.selection&&0==d--)return f=e,!1})),s=u.slice(f),o-=v),new pF(s.append(n),o)},pF.prototype.remapping=function(t,e){var i=new nR;return this.items.forEach((function(e,r){var n=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?i.maps.length-e.mirrorOffset:null;i.appendMap(e.map,n)}),t,e),i},pF.prototype.addMaps=function(t){return 0==this.eventCount?this:new pF(this.items.append(t.map((function(t){return new uF(t)}))),this.eventCount)},pF.prototype.rebased=function(t,e){if(!this.eventCount)return this;var i=[],r=Math.max(0,this.items.length-e),n=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=n.getMirror(--a);if(null!=r){o=Math.min(o,r);var l=n.maps[r];if(e.step){var h=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(n.slice(a+1,r));c&&s++,i.push(new uF(l,h,c))}else i.push(new uF(l))}}),r);for(var l=[],h=e;h<o;h++)l.push(new uF(n.maps[h]));var c=this.items.slice(0,r).append(l).append(i),p=new pF(c,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-i.length)),p},pF.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},pF.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),i=e.maps.length,r=[],n=0;return this.items.forEach((function(o,s){if(s>=t)r.push(o),o.selection&&n++;else if(o.step){var a=o.step.map(e.slice(i)),l=a&&a.getMap();if(i--,l&&e.appendMap(l,i),a){var h=o.selection&&o.selection.map(e.slice(i));h&&n++;var c,p=new uF(l.invert(),a,h),u=r.length-1;(c=r.length&&r[u].merge(p))?r[u]=c:r.push(p)}}else o.map&&i--}),this.items.length,0),new pF(cF.from(r.reverse()),n)},pF.empty=new pF(cF.empty,0);var uF=function(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r};uF.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new uF(e.getMap().invert(),e,this.selection)}};var dF=function(t,e,i,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r},fF=20;function vF(t){var e=[];return t.forEach((function(t,i,r,n){return e.push(r,n)})),e}function mF(t,e){if(!t)return null;for(var i=[],r=0;r<t.length;r+=2){var n=e.map(t[r],1),o=e.map(t[r+1],-1);n<=o&&i.push(n,o)}return i}function gF(t,e,i,r){var n=wF(e),o=xF.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(s){var a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,n),h=new dF(r?l:s.remaining,r?s.remaining:l,null,0);i(s.transform.setSelection(a).setMeta(xF,{redo:r,historyState:h}).scrollIntoView())}}var yF=!1,bF=null;function wF(t){var e=t.plugins;if(bF!=e){yF=!1,bF=e;for(var i=0;i<e.length;i++)if(e[i].spec.historyPreserveItems){yF=!0;break}}return yF}var xF=new oI("history"),_F=new oI("closeHistory");function kF(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new iI({key:xF,state:{init:function(){return new dF(pF.empty,pF.empty,null,0)},apply:function(e,i,r){return function(t,e,i,r){var n,o=i.getMeta(xF);if(o)return o.historyState;i.getMeta(_F)&&(t=new dF(t.done,t.undone,null,0));var s=i.getMeta("appendedTransaction");if(0==i.steps.length)return t;if(s&&s.getMeta(xF))return s.getMeta(xF).redo?new dF(t.done.addTransform(i,null,r,wF(e)),t.undone,vF(i.mapping.maps[i.steps.length-1]),t.prevTime):new dF(t.done,t.undone.addTransform(i,null,r,wF(e)),null,t.prevTime);if(!1===i.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(n=i.getMeta("rebased"))?new dF(t.done.rebased(i,n),t.undone.rebased(i,n),mF(t.prevRanges,i.mapping),t.prevTime):new dF(t.done.addMaps(i.mapping.maps),t.undone.addMaps(i.mapping.maps),mF(t.prevRanges,i.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(i.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var i=!1;return t.mapping.maps[0].forEach((function(t,r){for(var n=0;n<e.length;n+=2)t<=e[n+1]&&r>=e[n]&&(i=!0)})),i}(i,t.prevRanges)),l=s?mF(t.prevRanges,i.mapping):vF(i.mapping.maps[i.steps.length-1]);return new dF(t.done.addTransform(i,a?e.selection.getBookmark():null,r,wF(e)),pF.empty,l,i.time)}(i,r,e,t)}},config:t})}function SF(t,e){var i=xF.getState(t);return!(!i||0==i.done.eventCount)&&(e&&gF(i,t,e,!1),!0)}function CF(t,e){var i=xF.getState(t);return!(!i||0==i.undone.eventCount)&&(e&&gF(i,t,e,!0),!0)}var EF=function(t,e){var i;this.match=t,this.handler="string"==typeof e?(i=e,function(t,e,r,n){var o=i;if(e[1]){var s=e[0].lastIndexOf(e[1]);o+=e[0].slice(s+e[1].length);var a=(r+=s)-n;a>0&&(o=e[0].slice(s-a,s)+o,r=n)}return t.tr.insertText(o,r,n)}):e};function TF(t,e){for(var i=t.plugins,r=0;r<i.length;r++){var n=i[r],o=void 0;if(n.spec.isInputRules&&(o=n.getState(t))){if(e){for(var s=t.tr,a=o.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(o.text){var h=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,h))}else s.delete(o.from,o.to);e(s)}return!0}}return!1}new EF(/--$/,"—"),new EF(/\.\.\.$/,"…"),new EF(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new EF(/"$/,"”"),new EF(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new EF(/'$/,"’");var AF={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},MF={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},OF={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},DF={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},PF={mark:"sub"},RF={mark:"sup"},IF={mark:"link"},LF="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),zF=function(t){var e={};if(e["Mod-z"]=SF,e["Shift-Mod-z"]=CF,e.Backspace=uL(TF,ZI,JI,tL),e.Enter=uL(rL,sL,aL,hL),LF||(e["Mod-y"]=CF),t.marks.strong&&(e["Mod-b"]=EI(AF)),t.marks.em&&(e["Mod-i"]=EI(MF)),t.marks.underline&&(e["Mod-u"]=EI(OF)),t.nodes.hard_break){var i=t.nodes.hard_break,r=uL(oL,(function(t,e){return e(t.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0}));e["Shift-Enter"]=r}return e},BF=function(t){var e={};return t.nodes.list_item&&(e.Enter=EL(t.nodes.list_item)),e},NF=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,jF=function(t){return/^MsoListParagraph/.test(t.className)},FF=function(t){var e=t.innerHTML;return e=(e=e.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},VF=function(t,e){var i=document.createElement(t);return i.style.listStyleType=e,i},HF=function(t){var e=null;return/^\d/.test(t)||(e=(/^[a-z]/.test(t)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(t)?"roman":"alpha")),e},WF=function(t,e){var i=[];Array.from(t).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var r=t;r.getAttribute("datalist")?(i.push(t),e.add(i)):jF(r)&&i.length?i.push(t):(i=[],"DIV"===r.nodeName?WF(r.children,e):"TABLE"===r.nodeName&&Array.from(r.querySelectorAll("td,th")).forEach((function(t){WF(t.children,e)})))}}))},UF=function(t){var e,i=t.innerHTML,r=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return i=i.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(i)?{tag:"ul",style:(e=r(FF(t)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(i)?{tag:"ol",style:HF(r(FF(t)))}:void 0},qF=function(t){var e,i=t.nodeName.toLowerCase();t.firstChild&&t.firstChild.nodeType===Node.COMMENT_NODE&&t.removeChild(t.firstChild),1===t.childNodes.length?e=t.firstChild.nodeType===Node.TEXT_NODE?FF(t):t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(t.removeChild(t.firstChild),3===t.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(t.firstChild.nodeValue)&&t.removeChild(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&t.removeChild(t.firstChild),e="p"!==i?"<"+i+">"+t.innerHTML+"</"+i+">":t.innerHTML),t.parentNode.removeChild(t);var r=document.createElement("li");return r.innerHTML=e,r},GF=function(t){var e=document.createElement("div");e.innerHTML=function(t){return t.replace(NF,(function(t,e,i){return'datalist="'+e+'" datalevel="'+i+'" '+t}))}(t);var i=new Set;return WF(e.children,i),i.forEach((function(t){return function(t){var e,i,r,n,o,s,a,l,h,c,p,u,d,f=-1,v={};for(l=0;l<t.length;l++){var m=(d={datalist:(h=t[l]).getAttribute("datalist"),datalevel:h.getAttribute("datalevel")}).datalist,g=UF(h);if(c=g&&g.tag){if(p=d.datalevel||parseFloat(h.style.marginLeft||0),d.datalevel||h.style.marginLeft){var y=c+m;v[p]||(v[p]={}),(!i||i<0)&&(i=p,r=m,n=(a=t.filter((function(t){return t.getAttribute("datalist")===String(r)})))[a.length-1],s=VF(c,g&&g.style),h.parentNode.insertBefore(s,h),f=p,v[p][y]=s),o=n===h,u=v[p][y],(p>f||!u)&&(u=VF(c,g&&g.style),v[p][y]=u,e.appendChild(u)),e=qF(h),u.appendChild(e),o?i=f=-1:f=p}}else!e||o&&!jF(h)||(h.style.marginLeft&&(h.style.marginLeft=""),h.style.marginLeft&&(h.style.margin=""),e.appendChild(h))}}(t)})),e.innerHTML},$F=function(t){t.ownerElement&&t.ownerElement.removeAttribute(t.name)},KF=function(t){/^Mso/.test(t.value)&&$F(t)},XF=/\s*;\s*/,YF=/\s*:\s*/,ZF=function(t){var e,i,r=t.value.split(XF).filter((function(t){return Boolean(t)})),n=t.ownerElement.style,o="";r.forEach((function(t){var r;r=t.split(YF),e=r[0],i=r[1],void 0!==n[e]&&(o+=e+": "+i+"; ")})),(o=o.trim())?t.value=o:$F(t)},JF=function(t,e){var i=t;if(e.convertMsLists&&(i=GF(i)),e.stripTags&&(i=function(t,e){return t.replace(new RegExp("<\\/?("+e+")(?:\\s[^>]*?)?>","gi"),"")}(i,e.stripTags)),e.attributes){var r=document.createElement("div");r.innerHTML=i,Array.from(r.querySelectorAll("*")).forEach((function(t){return function(t,e){if(t.nodeType===Node.ELEMENT_NODE){for(var i=t.attributes.length-1;i>=0;i--){var r=t.attributes[i];e[r.name]?e[r.name](r):e["*"]&&e["*"](r)}"SPAN"===t.nodeName&&0===t.attributes.length&&function(t){var e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}(t)}}(t,e.attributes)})),i=r.innerHTML}return i};new oI("highlight");var QF=function(t,e){var i=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return i[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};QF.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var i=e.name,r=e.handler;return t.editorView.dom.removeEventListener(i,r)}))},QF.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},QF.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},QF.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var i=e.nodeBefore,r=e.nodeAfter;if(i||r){var n=this.editorView.nodeDOM(this.cursorPos-(i?i.nodeSize:0)).getBoundingClientRect(),o=i?n.bottom:n.top;i&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:n.left,right:n.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var l=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-l.left+"px",this.element.style.top=t.top-l.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},QF.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},QF.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var i=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=xR(this.editorView.state.doc,i,this.editorView.dragging.slice))&&(i=e.pos),this.setCursor(i),this.scheduleRemoval(5e3)}}},QF.prototype.dragend=function(){this.scheduleRemoval(20)},QF.prototype.drop=function(){this.scheduleRemoval(20)},QF.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var tV=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(i,r){var n=i.resolve(r.map(this.head));return e.valid(n)?new e(n):t.near(n)},e.prototype.content=function(){return $D.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,i){if("number"!=typeof i.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(i.pos))},e.prototype.getBookmark=function(){return new eV(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var i=t.index(e);if(0!=i)for(var r=t.node(e).child(i-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var i=t.indexAfter(e),r=t.node(e);if(i!=r.childCount)for(var n=r.child(i);;n=n.firstChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(t))return!1;var i=e.type.spec.allowGapCursor;if(null!=i)return i;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,i,r){t:for(;;){if(!r&&e.valid(t))return t;for(var n=t.pos,o=null,s=t.depth;;s--){var a=t.node(s);if(i>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(i>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;n+=i;var l=t.doc.resolve(n);if(e.valid(l))return l}for(;;){var h=i>0?o.firstChild:o.lastChild;if(!h){if(o.isAtom&&!o.isText&&!VR.isSelectable(o)){t=t.doc.resolve(n+o.nodeSize*i),r=!1;continue t}break}o=h,n+=i;var c=t.doc.resolve(n);if(e.valid(c))return c}return null}},e}(zR);tV.prototype.visible=!1,zR.jsonID("gapcursor",tV);var eV=function(t){this.pos=t};eV.prototype.map=function(t){return new eV(t.map(this.pos))},eV.prototype.resolve=function(t){var e=t.resolve(this.pos);return tV.valid(e)?new tV(e):zR.near(e)};GL({ArrowLeft:iV("horiz",-1),ArrowRight:iV("horiz",1),ArrowUp:iV("vert",-1),ArrowDown:iV("vert",1)});function iV(t,e){var i="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,n){var o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof jR){if(!n.endOfTextblock(i)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var l=tV.findFrom(s,e,a);return!!l&&(r&&r(t.tr.setSelection(new tV(l))),!0)}}function rV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function nV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rV(Object(i),!0).forEach((function(e){oV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function oV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sV=t=>{for(var e,i={},r=t.attributes,n=0;n<r.length;n++)i[(e=r[n]).name]=e.value;return i},aV=(t,e)=>{var i={};for(var r in t)r&&null!==t[r]&&r!==e&&(i[r]=t[r]);return i},lV=t=>{var e=nV({},t);return 1!==t.colspan?e.colspan=t.colspan:e.colspan=null,1!==t.rowspan?e.rowspan=t.rowspan:e.rowspan=null,e},hV=()=>cV(["class","id","style"]),cV=t=>t.reduce(((t,e)=>nV(nV({},t),{},{[e]:{default:null}})),{});function pV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function uV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pV(Object(i),!0).forEach((function(e){dV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function dV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fV=uV(uV({},oF),{},{table:{attrs:{id:{default:null},style:{default:null},class:{default:"k-table"},cellspacing:{default:null},cellpadding:{default:null}},content:"(table_body | table_row | table_head | table_foot | table_colgroup)+",tableRole:"table",isolating:!0,group:"block",parseDOM:[{getAttrs:sV,tag:"table"}],toDOM:t=>["table",t.attrs,["tbody",0]]},table_row:{content:"(table_cell | table_header)*",attrs:uV({},hV()),tableRole:"row",parseDOM:[{getAttrs:sV,tag:"tr"}],toDOM:t=>["tr",t.attrs,0]},table_cell:{content:"block+",attrs:uV(uV(uV({},hV()),cV(["headers"])),{},{colspan:{default:1},rowspan:{default:1}}),tableRole:"cell",isolating:!0,parseDOM:[{getAttrs:sV,tag:"td"}],toDOM:t=>["td",lV(t.attrs),0]},table_header:{content:"block+",attrs:uV(uV(uV({},hV()),cV(["headers","abbr","scope"])),{},{colspan:{default:1},rowspan:{default:1}}),tableRole:"header_cell",isolating:!0,parseDOM:[{getAttrs:sV,tag:"th"}],toDOM:t=>["th",lV(t.attrs),0]},table_body:{attrs:uV({},hV()),content:"table_row+",isolating:!0,parseDOM:[{getAttrs:sV,tag:"tbody"}],toDOM:t=>["tbody",t.attrs,0]},table_foot:{attrs:uV({},hV()),content:"table_row+",isolating:!0,parseDOM:[{getAttrs:sV,tag:"tfoot"}],toDOM:t=>["tfoot",t.attrs,0]},table_head:{attrs:uV({},hV()),content:"table_row+",isolating:!0,parseDOM:[{getAttrs:sV,tag:"thead"}],toDOM:t=>["thead",t.attrs,0]},table_col:{attrs:uV(uV({},hV()),cV(["span"])),selectable:!1,atom:!0,parseDOM:[{getAttrs:sV,tag:"col"}],toDOM:t=>["col",t.attrs]},table_colgroup:{attrs:uV(uV({},hV()),cV(["span"])),content:"table_col*",selectable:!1,parseDOM:[{getAttrs:sV,tag:"colgroup"}],toDOM:t=>["colgroup",t.attrs,0]},video:{attrs:uV({src:{default:null},controls:{},poster:{default:null},width:{default:null},height:{default:null}},hV()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"video",getAttrs:sV}],toDOM:t=>["video",aV(t.attrs),0]},audio:{attrs:uV({controls:{},src:{default:null},width:{default:null},height:{default:null}},hV()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"audio",getAttrs:sV}],toDOM:t=>["audio",aV(t.attrs),0]},iframe:{attrs:uV({src:{},width:{default:null},height:{default:null}},hV()),group:"block",draggable:!0,parseDOM:[{tag:"iframe",getAttrs:sV}],toDOM:t=>["iframe",aV(t.attrs)]},source:{attrs:{src:{default:null},type:{default:null}},inline:!0,group:"inline",parseDOM:[{tag:"source",getAttrs:sV}],toDOM:t=>["source",t.attrs]}}),vV=new BP({nodes:fV,marks:nF});function mV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function gV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?mV(Object(i),!0).forEach((function(e){yV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function yV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var bV=t=>(e,i)=>{var r,n;LI(e,t)||(r=t,function(t,e){var i=DI(t),o=t.tr;o.setMeta("commandName",n),i.forEach((function(t){if(t.type.isTextblock){var e={},i=r.find((function(e){return e.node===t.type.name}));i&&(e=PI(t,i.style)),OI(o,t,t.type,e)}}));var s=o.docChanged;return s&&e(o.scrollIntoView()),s})(e,i)},wV={alignCenter:()=>bV(OL),alignJustify:()=>bV(DL),alignLeft:()=>bV(AL),alignRight:()=>bV(ML),format:t=>{return e=t.value,function(t,r){var n=DI(t),o=t.schema.nodes,s=t.tr;s.setMeta("commandName",i),s.setMeta("args",{value:e}),n.forEach((function(t){if(t.type.isTextblock)if("p"===e){var i=t.attrs,r=i.level,n=hI(i,["level"]);OI(s,t,o.paragraph,n)}else if(/^h[1-6]$/i.test(e))r=parseInt(e.substr(1),10),OI(s,t,o.heading,lI({},t.attrs,{level:r}));else if("blockquote"===e){var a=t.attrs;r=a.level,n=hI(a,["level"]),OI(s,t,o.blockquote,n)}}));var a=s.docChanged;return a&&r(s.scrollIntoView()),a};var e,i},insertOrderedList:()=>CL,insertUnorderedList:()=>SL,outdent:()=>YI,indent:()=>XI,insertImage:t=>{return e=t,function(t,i){var r=t.schema.nodes.image.createAndFill(e);dI(r)(t,(function(t){return i(t.setMeta("commandName","insertImage").setMeta("args",e))}))};var e},redo:()=>CF,undo:()=>SF,setHtml:t=>aI(t.value),insertHtml:t=>(t=>(e,i)=>{var r=document.createElement("div");r.innerHTML=t.value;var n=jP.fromSchema(vV).parse(r,{topNode:t.inline?vV.nodes.paragraph.create():null});n&&n.firstChild&&i(e.tr.replaceSelectionWith(n.firstChild,!1))})(t)},xV={insertTable:t=>(t=>(e,i)=>{var r=function(t,e,i){for(var r,n=t.table,o=t.table_row,s=t.table_cell,a=[],l=0;l<e+1;l++){r=[];for(var h=0;h<i+1;h++)r.push(s.createAndFill());a.push(o.createAndFill(void 0,r))}return n.createAndFill(void 0,a)}(e.schema.nodes,t.rows,t.cols);r&&dI(r,!0)(e,i)})(t),addColumnBefore:()=>Aj,addColumnAfter:()=>Mj,addRowBefore:()=>Rj,addRowAfter:()=>Ij,deleteRow:()=>zj,deleteColumn:()=>Dj,mergeCells:()=>Nj,splitCell:()=>jj,deleteTable:()=>Hj},_V=gV(gV(gV({},{bold:()=>EI(AF),cleanFormatting:()=>{return t={except:vV.marks.link},e=(void 0===t?{}:t).except,i=void 0===e?[]:e,function(t,e){var r,n=t.tr;gI(n,{except:(r=i,r instanceof Array?r:[r])}),n.docChanged&&e(n)};var t,e,i},createLink:t=>MI({mark:"link",attrs:t}),fontFamily:t=>TI({style:"font-family",value:t.value}),fontSize:t=>TI({style:"font-size",value:t.value}),insertFile:t=>MI({mark:"link",attrs:t}),insertText:t=>{return e=t,function(t,i){i(t.tr.insertText(e.text,e.from,e.to))};var e},italic:()=>EI(MF),strikethrough:()=>EI(DF),subscript:()=>EI(PF),superscript:()=>EI(RF),underline:()=>EI(OF),unlink:()=>AI(IF),foreColor:t=>TI({style:"color",value:t.value}),backColor:t=>TI({style:"background-color",value:t.value})}),wV),xV),kV=(t,e)=>{var i=t.enabled===e.enabled,r=!0;return r=t.hasOwnProperty("selectedValue")?t.selectedValue===e.selectedValue:t.selected===e.selected,i&&r},SV=(t,e)=>{var i=[...SI(t,{name:e,value:/^.+$/})];return 1===i.length?i[0]:null},CV=t=>t.selection instanceof nj?null:function(t){return{tag:II(t)||""}}(t).tag,EV=t=>({alignCenter:{selected:LI(t,OL),enabled:!0},alignJustify:{selected:LI(t,DL),enabled:!0},alignLeft:{selected:LI(t,AL),enabled:!0},alignRight:{selected:LI(t,ML),enabled:!0},bold:{selected:yI(t,AF),enabled:!0},cleanFormatting:{selected:!1,enabled:!t.selection.empty},format:{selectedValue:CV(t),enabled:!0},indent:{enabled:GI(t,vV.nodes.list_item)||KI(t,HI)},insertOrderedList:{selected:RI(t,vV.nodes.ordered_list),enabled:!0},insertUnorderedList:{selected:RI(t,vV.nodes.bullet_list),enabled:!0},italic:{selected:yI(t,MF),enabled:!0},unlink:{enabled:yI(t,IF)},outdent:{enabled:$I(t,WI)||qI(t,WI.nodes)},redo:{enabled:CF(t)},strikethrough:{selected:yI(t,DF),enabled:!0},style:{selected:xI(t,vV.marks.style),enabled:!0},fontFamily:{selectedValue:SV(t,"font-family"),enabled:!0},fontSize:{selectedValue:SV(t,"font-size"),enabled:!0},foreColor:{selectedValue:SV(t,"color"),enabled:!0},backColor:{selectedValue:SV(t,"background-color"),enabled:!0},subscript:{selected:yI(t,PF),enabled:!0},superscript:{selected:yI(t,RF),enabled:!0},underline:{selected:yI(t,OF),enabled:!0},undo:{enabled:SF(t)},createLink:{enabled:!t.selection.empty||yI(t,IF)},insertFile:{enabled:!t.selection.empty},insertImage:{enabled:!0},viewSource:{enabled:!0},insertTable:{enabled:!0},addColumnBefore:{enabled:Aj(t)},addColumnAfter:{enabled:Mj(t)},addRowBefore:{enabled:Rj(t)},addRowAfter:{enabled:Ij(t)},deleteRow:{enabled:zj(t)},deleteColumn:{enabled:Dj(t)},mergeCells:{enabled:Nj(t)},splitCell:{enabled:jj(t)},deleteTable:{enabled:Hj(t)}}),TV=t=>({createLink:()=>{var e=function(t,e){var i=wI(t,e),r=i.filter((function(t){return Boolean(t)}));return i.length===r.length?i[0]:void 0}(t.state,vV.marks.link);return{href:e?e.attrs.href:null,title:e?e.attrs.title:null,target:e?e.attrs.target:null}},insertImage:()=>{var e=function(t){if(t.selection instanceof VR)return t.selection.node}(t.state);return{src:e?e.attrs.src:null,alt:e?e.attrs.alt:null,width:e?e.attrs.width:null,height:e?e.attrs.height:null}},setHtml:()=>{return{value:(e=t.state,i=YP.fromSchema(e.schema).serializeFragment(e.doc.content),r=document.createElement("div"),r.appendChild(i),r.innerHTML)};var e,i,r}});function AV(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function MV(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?AV(Object(i),!0).forEach((function(e){OV(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):AV(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function OV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var DV="iframe",PV="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent);class RV extends V{constructor(t,e){super(t,e),OV(this,"options",{editMode:DV,debounceDelay:100}),OV(this,"initialize",(()=>{this.initContent(),this.initEditor()})),this.extendOptions(e),this.iframeEditMode=this.options.editMode===DV,this.iframe=this.element.querySelector(".k-iframe"),this.div=this.element.querySelector(".k-content"),this.toolbar=this.element.querySelector(".k-toolbar"),this.bindEvents(),PV&&!this.shouldInitialize()||this.initialize()}bindEvents(){PV&&this.iframeEditMode&&this.iframe.addEventListener("load",this.initialize,!0),this.toolbar.addEventListener("mousedown",this.onToolBarMouseDown)}unbindEvents(){PV&&this.iframeEditMode&&this.iframe.removeEventListener("load",this.initialize,!0),this.toolbar.removeEventListener("mousedown",this.onToolBarMouseDown)}shouldInitialize(){return!this.iframeEditMode||"complete"===(this.iframe.contentDocument||this.iframe.contentWindow.document).readyState}initEditor(){var t=this.options.debounceDelay,e=[new iI({view:()=>({update:()=>{this.updateToolBarState()}}),key:new oI("toolbar-tools-update-plugin")}),new iI({view:()=>({update:p(this.valueChanged,t).bind(this)}),key:new oI("value-changed-plugin")}),kF(),qL(BF(vV)),qL(zF(vV)),qL(yL),$j()];this.valueContainer=this.element.querySelector("textarea");var i=JR.create({schema:vV,plugins:e,doc:jP.fromSchema(vV).parse(this.valueContainer)});this.view=new RN({mount:this.content},{state:i,transformPastedHTML:t=>this.options.pasteSettings?this.executePasteCleanup(t):t}),this.value=this.view.dom.innerHTML}initContent(){this.content=this.iframeEditMode?this.setupIframe():this.setupDiv()}setupIframe(){var t=this.iframe.contentWindow.document,e=t.createElement("meta");e.setAttribute("charset","utf-8"),t.head.appendChild(e);var i=t.createElement("style");i.appendChild(t.createTextNode('\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\ndiv.ProseMirror {\n  position: relative;\n  min-height: 100%;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\ndiv.ProseMirror:focus {\n  outline: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror li {\n  position: relative;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px;\n  top: -2px;\n  bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n.ProseMirror .tableWrapper {\n    overflow-x: auto;\n    margin: 1em 0;\n  }\n\n  .ProseMirror table {\n    margin: 0;\n    border-collapse: collapse;\n    table-layout: fixed;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  .ProseMirror td, .ProseMirror th {\n    min-width: 1em;\n    border: 1px solid #ddd;\n    padding: 3px 5px;\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .ProseMirror th {\n    font-weight: bold;\n    text-align: left;\n  }\n\n  .ProseMirror .column-resize-handle {\n    position: absolute;\n    right: -2px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    z-index: 20;\n    background-color: #adf;\n    pointer-events: none;\n  }\n\n  .ProseMirror.resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize;\n  }\n\n  /* Give selected cells a blue overlay */\n  .ProseMirror .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: "";\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n')),t.head.appendChild(i);var r=t.createElement("div");return t.body.appendChild(r),t.body.querySelector("div")}setupDiv(){return this.div}getDialogArgs(t){return TV(this.view)[t]()}exec(t){var e=t.commandName;_V[e](t)(this.view.state,this.view.dispatch,this.view),t.shouldFocusView&&this.view.focus()}focus(){this.view.focus()}setOptions(t){super.setOptions(t)}setValue(){aI(this.valueContainer.innerHTML)(this.view.state,this.view.dispatch),this.value=this.view.dom.innerHTML}updateToolBarState(){var{stateChanged:t,state:e}=((t,e)=>{var i=EV(t),r=Object.keys(e),n=!1;for(var o of r){var s=i[o],a=e[o];s&&a&&!kV(s,a)&&(n=!0,e[o]=s)}return{stateChanged:n,state:e}})(this.view.state,this.options.toolStates);t&&(this.options.toolStates=e,this.invokeToolBarUpdate(e))}onToolBarMouseDown(t){nt(t.target,".k-button",!0)&&t.preventDefault()}executePasteCleanup(t){var e=this.options.pasteSettings,i=this.getPasteCleanupAttributes(),r=function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")}(t);return e.removeComments&&(r=function(t){return t.replace(/<!--[\s\S]+?-->/g,"")}(r)),JF(r,{convertMsLists:e.convertMsLists,stripTags:e.stripTags?e.stripTags.join("|"):[],attributes:i})}getPasteCleanupAttributes(){var t=this.options.pasteSettings,e={};return t.removeAllAttributes?{"*":$F}:(t.removeMsStyles&&(e.style=ZF),t.removeMsClasses&&(e.class=KF),t.removeAttributes.reduce(((t,e)=>MV(MV({},t),{},{[e]:$F})),e))}valueChanged(){(function(t,e,i,r){var n=FD.from(sI(t,i,r)),o=FD.from(sI(e,i,r));return n.eq(o)})(this.view.dom.innerHTML,this.value,vV)||(this.value=this.view.dom.innerHTML,this.invokeValueChanged())}invokeToolBarUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateToolBarState,t)}invokeValueChanged(){this.invokeMethodAsync(this.options.jsinterop.valueChanged,this.value)}destroy(){super.destroy(),this.unbindEvents(),this.view.destroy(),this.content=this.view=this.iframe=this.div=null}}function IV(t,e){Nt(RV,t,e)}function LV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zV="focus",BV="focusout";class NV extends V{constructor(t,e){super(t,e),LV(this,"options",{dotNetInstance:null}),LV(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),LV(this,"onFocus",(()=>{this.invokeFocus()})),LV(this,"onFocusOut",(()=>{this.invokeFocusOut()})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener(zV,this.onFocus),this.element.addEventListener(BV,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(zV,this.onFocus),this.element.removeEventListener(BV,this.onFocusOut)}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind("".concat(Qt.ALT," ").concat(Jt.ARROWDOWN),this.onKeyDown)}destroy(){this.disableTabKeyTrap(),this.navigationService.destroy(),super.destroy()}enableTabKeyTrap(t){if(this.options.navigable){var e=q(t);this.formKeyTrap=new le(e),this.formKeyTrap.enableKeyTrap()}}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}}function jV(t,e){Nt(NV,t,e)}function FV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class VV extends V{constructor(t,e){super(t,e),FV(this,"options",{dotNetInstance:null,jsinterop:{}}),FV(this,"onTimeLineScroll",(()=>{this.timelineHeader.scrollLeft=this.timelineContent.scrollLeft,this.treeListContent.scrollTop=this.timelineContent.scrollTop})),FV(this,"onTreeListWheelFF",(t=>{this.onTreeListScroll(t,-40*t.detail)})),FV(this,"onTreeListWheel",(t=>{this.onTreeListScroll(t,t.wheelDelta)})),FV(this,"onTreeListScroll",((t,e)=>{if(this.timelineContent){var i=this.timelineContent.scrollTop-e;this.timelineContent.scrollTop=i}else{var r=this.treeListContent.scrollTop-e;this.treeListContent.scrollTop=r}t.preventDefault()})),this.extendOptions(e),this.timelineContent=this.element.querySelector(".k-gantt-timeline .k-grid-content"),this.timelineHeader=this.element.querySelector(".k-gantt-timeline .k-grid-header-wrap"),this.treeListContent=this.element.querySelector(".k-gantt-treelist .k-grid-content"),this.unifyFilterRowHeight(),this.setTreeListHeight(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.timelineContent&&this.timelineContent.addEventListener("scroll",this.onTimeLineScroll),he.firefox?this.treeListContent.addEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.addEventListener("wheel",this.onTreeListWheel)}unbindEvents(){this.timelineContent&&this.timelineContent.removeEventListener("scroll",this.onTimeLineScroll),he.firefox?this.treeListContent.removeEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.removeEventListener("wheel",this.onTreeListWheel)}unifyFilterRowHeight(){var t=this.element.querySelector(".k-gantt-timeline .k-filter-row"),e=this.element.querySelector(".k-gantt-treelist .k-filter-row");e&&t&&(t.style.height="".concat(e.offsetHeight,"px"))}setTreeListHeight(){var t=this.element.querySelector(".k-gantt-treelist"),e=t.querySelector(".k-grid-header");this.treeListContent.style.height=t.offsetHeight-e.offsetHeight+"px"}}function HV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class WV extends V{constructor(t,e){super(t,e),HV(this,"options",{dotNetInstance:null,jsinterop:{moveTask:"",updatePercentComplete:"",getDragTaskTooltipDates:"",createDependency:""}}),HV(this,"renderMoveHints",(()=>{this.moveTarget&&(this.destroyHint(),this.destroyTooltip(),this.hint=this.createHint(),this.tooltip=this.createTooltip(),this.tooltipContent=this.tooltip.querySelector(".k-tooltip-content"),this.getContentElement().appendChild(this.hint),this.getContentElement().appendChild(this.tooltip))})),HV(this,"createHint",(()=>{var t=document.createElement("div");t.className="k-marquee k-gantt-marquee",t.style.top="0px",t.style.height=this.getTablesWrapperElement().getBoundingClientRect().height+"px",t.style.left=this.originalLeft+"px",t.style.width=this.originalWidth+"px";var e=document.createElement("div");return e.className="k-marquee-color",t.appendChild(e),t})),HV(this,"destroyHint",(()=>{this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)})),HV(this,"createTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip k-gantt-resize-hint",t.style.zIndex="100002",t.style.minWidth="160px";var e=document.createElement("div");return e.className="k-tooltip-content",t.appendChild(e),t})),HV(this,"destroyTooltip",(()=>{this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.tooltipContent=null)})),HV(this,"renderPercentDragTooltip",(()=>{this.destroyPercentDragTooltip(),this.percentDragTooltip=this.createPercentDragTooltip(),this.element.appendChild(this.percentDragTooltip)})),HV(this,"createPercentDragTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip",t.style.zIndex="100002";var e=document.createElement("div");e.className="k-tooltip-content",t.appendChild(e);var i=document.createElement("div");return i.className="k-callout k-callout-s",t.appendChild(i),t})),HV(this,"destroyPercentDragTooltip",(()=>{this.percentDragTooltip&&(this.percentDragTooltip.parentNode.removeChild(this.percentDragTooltip),this.percentDragTooltip=null)})),HV(this,"renderDependencyDragHint",(()=>{this.destroyDependencyDragHint(),this.dependencyDragHint=this.createDependencyDragHint(),this.element.querySelector(".k-gantt-dependencies-svg").appendChild(this.dependencyDragHint)})),HV(this,"createDependencyDragHint",(()=>{var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");return t.style.fill="none",t.style.stroke="black",t.style.strokeWidth="2",t})),HV(this,"destroyDependencyDragHint",(()=>{this.dependencyDragHint&&(this.dependencyDragHint.parentNode.removeChild(this.dependencyDragHint),this.dependencyDragHint=null)})),HV(this,"getContentElement",(()=>this.element.querySelector(".k-grid-content"))),HV(this,"getTablesWrapperElement",(()=>this.getContentElement().querySelector(".k-gantt-tables"))),HV(this,"getRowHeight",(()=>this.element.querySelector(".k-gantt-tables tr").getBoundingClientRect().height)),HV(this,"getMilestoneWidth",(()=>{var t=j('<div class="k-task-wrap k-milestone-wrap">\n                <div class="k-task k-task-milestone" >\n                </div>\n            </div>');this.getTablesWrapperElement().appendChild(t);var e=t.querySelector(".k-task").getBoundingClientRect().width;return t.parentNode.removeChild(t),e})),this.extendOptions(e),this.bindEvents(),this.createMovable()}destroy(){this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){}unbindEvents(){}createMovable(){this.destroyMovable(),this.movable=new Xe({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;e&&(e.closest(".k-task")?this.onTaskDragStart(t):e.closest(".k-task-dot")?this.onDependencyDragStart(t):e.closest(".k-task-draghandle")&&this.onPercentDragStart(t))}onTaskDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task"),this.resizeTask=!0,this.resizeStart=Boolean(e.closest(".k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-e"));var i=this.moveTarget.getBoundingClientRect();this.originalLeft=this.currentLeft=i.left-this.getTablesWrapperElement().getBoundingClientRect().left,this.originalWidth=this.currentWidth=i.width,this.originalTaskMouseOffset=t.clientX-i.left}onDependencyDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-dot");var i=this.moveTarget.getBoundingClientRect(),r=this.getTablesWrapperElement().getBoundingClientRect(),n=r.x,o=r.y;this.dependencyDragOptions={predecessorIndex:this.getTaskIndex(e),fromStart:Y("k-task-start",this.moveTarget),startX:i.x+i.width/2-n,startY:i.y+i.height/2-o}}onPercentDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-draghandle");var i=this.moveTarget.parentElement.querySelector(".k-task");this.percentCompleteBarElement=i.querySelector(".k-task-complete");var r=i.getBoundingClientRect();this.maxPercentWidth=r.width,this.originalWidth=this.currentWidth=t.clientX-r.left,this.originalLeft=t.clientX}onMovableDrag(t){if(this.moveTarget)return this.dragStarted?void(this.resizeTask?this.onTaskDrag(t):this.dependencyDragOptions?this.onDependencyDrag(t):this.onPercentDrag(t)):(this.dragStarted=!0,void(this.resizeTask?this.renderMoveHints():this.dependencyDragOptions?this.renderDependencyDragHint():this.renderPercentDragTooltip()))}onTaskDrag(t){var e=t.clientX-this.getTablesWrapperElement().getBoundingClientRect().left;e<0&&(e=0),this.resizeStart?(this.currentLeft=e,this.currentLeft>this.originalLeft+this.originalWidth&&(this.currentLeft=this.originalLeft+this.originalWidth)):this.resizeEnd||(this.currentLeft=e-this.originalTaskMouseOffset),this.resizeStart?this.currentWidth=this.originalWidth+this.originalLeft-e:this.resizeEnd&&(this.currentWidth=e-this.originalLeft),this.currentWidth<0&&(this.currentWidth=0),this.invokeMethodAsync(this.options.jsinterop.getDragTaskTooltipDates,{start:this.currentLeft,end:this.currentLeft+this.currentWidth}).then((t=>{if(this.dragStarted){this.tooltipContent.innerHTML="<div>Start: "+t.start+"</div><div>End: "+t.end+"</div>";var e=this.currentLeft-this.tooltip.getBoundingClientRect().width/2;this.resizeEnd&&(e+=this.currentWidth),e<0&&(e=0),this.tooltip.style.left=e+"px";var i=this.moveTarget.getBoundingClientRect().top-this.getTablesWrapperElement().getBoundingClientRect().top,r=this.tooltip.getBoundingClientRect().height;i-r<0?i+=this.moveTarget.getBoundingClientRect().height:i-=r,this.tooltip.style.top=i+"px",this.hint.style.left=this.currentLeft+"px",this.hint.style.width=this.currentWidth+"px"}}))}onDependencyDrag(t){var e=this.getTablesWrapperElement().getBoundingClientRect(),i=e.x,r=e.y;if(!this.dependencyDragOptions.startX){var n=this.moveTarget.getBoundingClientRect();this.dependencyDragOptions.startX=n.x+n.width/2-i,this.dependencyDragOptions.startY=n.y+n.height/2-r}var o=t.clientX-i,s=t.clientY-r;this.dependencyDragHint.setAttribute("points","".concat(this.dependencyDragOptions.startX,",").concat(this.dependencyDragOptions.startY," ").concat(o,",").concat(s))}onPercentDrag(t){var e=this.element.getBoundingClientRect(),i=this.moveTarget.parentElement.querySelector(".k-task").getBoundingClientRect(),r=this.percentDragTooltip.getBoundingClientRect(),n=this.originalWidth+(t.clientX-this.originalLeft);if(!(n<0||n>this.maxPercentWidth)){this.currentWidth=n;var o=Math.round(this.currentWidth/this.maxPercentWidth*100);this.moveTarget.style.left=this.currentWidth+"px",this.percentCompleteBarElement.style.width=this.currentWidth+"px",this.percentDragTooltip.querySelector(".k-tooltip-content").textContent=o+"%",this.percentDragTooltip.style.left=t.clientX-e.left-r.width/2+"px",this.percentDragTooltip.style.top=i.top-e.top-r.height-6+"px"}}onMovableDrop(t){if(this.destroyHint(),this.destroyTooltip(),this.destroyPercentDragTooltip(),this.destroyDependencyDragHint(),this.dragStarted)if(this.resizeTask)this.invokeMethodAsync(this.options.jsinterop.moveTask,{resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,left:this.currentLeft,right:this.currentLeft+this.currentWidth});else if(this.dependencyDragOptions){var e=this.getElementUnderCursor(t);e.closest(".k-task-dot")&&this.invokeMethodAsync(this.options.jsinterop.createDependency,{predecessorIndex:this.dependencyDragOptions.predecessorIndex,fromStart:this.dependencyDragOptions.fromStart,successorIndex:this.getTaskIndex(e),toStart:Y("k-task-start",e.closest(".k-task-dot"))})}else{var i=Math.round(this.currentWidth/this.maxPercentWidth*100)/100;this.invokeMethodAsync(this.options.jsinterop.updatePercentComplete,i)}this.dragStarted=!1,this.moveTarget=null,this.resizeTask=this.resizeStart=this.resizeEnd=!1,this.dependencyDragOptions=null}getTaskIndex(t){return parseInt(t.closest(".k-task-wrap").getAttribute("data-index"))}getElementUnderCursor(t){return document.elementFromPoint(t.clientX,t.clientY)}}function UV(t,e){Nt(VV,t,e)}function qV(t,e){Nt(WV,t,e)}var GV=t=>"".concat(parseFloat(t),"px");class $V extends xA{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return gk}setOptions(t){super.setOptions(t),this.showCenterLabel()}getCenterLabel(){return this.element.querySelector(".k-arcgauge-label")}showCenterLabel(){var t=this.getCenterLabel();if(t){var e=this.getCenterLabelPosition();t.style.top=GV(e.top),t.style.left=GV(e.left),t.style.display=""}}getCenterLabelPosition(){var t=this.getCenterLabel(),e={top:0,left:0};if(t){var i=t.style.display;t.style.visibility="hidden",t.style.display="block",e=this.getLabelPositionFromGauge(),t.style.display=i,t.style.visibility=""}return e}getLabelPositionFromGauge(){var t=this.getCenterLabel(),e=t?t.offsetWidth:0,i=t?t.offsetHeight:0,r=this.widget.centerLabelPosition(e,i);return{top:r.top,left:r.left}}}function KV(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class XV extends gA{constructor(){super(...arguments),KV(this,"store",{}),KV(this,"loaded",!1),KV(this,"element",null)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.loaded||(this.readTheme(),this.loaded=!0)}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--gauge-pointer"></div>\n    <div class="k-var--gauge-track"></div>\n    <div class="k-var--normal-text-color"></div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}readTheme(){this.createElement();try{var t=this.queryColor("gauge-pointer"),e=this.queryColor("gauge-track"),i=this.queryColor("normal-text-color");this.store={pointer:{color:t},scale:{labels:{color:i},rangePlaceholderColor:e,minorTicks:{color:i},majorTicks:{color:i},line:{color:i}}}}finally{this.destroyElement()}}setStyle(t,e){this.set(t,e)}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element.querySelector(".k-var--".concat(t));return window.getComputedStyle(e)}}function YV(t){var{id:e="",widgetOptions:i={},componentOptions:r={},componentConstructor:n}=t;_A({id:e,widgetOptions:i,componentOptions:r,services:{themeService:new XV,intlService:Ao},componentConstructor:n})}function ZV(t,e,i){YV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:$V})}class JV extends $V{getWidgetConstructor(){return bk}getCenterLabel(){return this.element.querySelector(".k-circulargauge-label")}}function QV(t,e,i){YV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:JV})}class tH extends xA{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return U_}}function eH(t,e,i){YV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:tH})}class iH extends xA{constructor(t,e,i,r){super(t,e,i,r),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return hk}}function rH(t,e,i){YV({id:t,widgetOptions:e,componentOptions:i,componentConstructor:iH})}class nH extends fi{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},componentSelector:".k-grid",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e),this.options.rowDraggable&&this.createRowDraggable()}destroy(){super.destroy()}}function oH(t,e){Nt(nH,t,e)}function sH(t){jt(t)}function aH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var lH,hH="focusout";class cH extends V{constructor(t,e){super(t,e),aH(this,"options",{dotNetInstance:null,jsinterop:{focusout:""}}),aH(this,"onFocusOut",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(hH,this.onFocusOut)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener(hH,this.onFocusOut)}focus(){this.element.focus()}}function pH(t,e){Nt(cH,t,e)}!function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(lH||(lH={}));var uH=function(){function t(t,e,i){void 0===i&&(i=lH.Undefined),this.value=t,this.rest=e,this.type=i}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,i){return t.chain((function(t,i){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}(),dH=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}(),fH=function(t){return(t||"").split("")},vH=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof dH?this.parse(t):this.parse(new dH(fH(t),fH(e)))},t.prototype.map=function(e){var i=this;return new t((function(t){return i.parse(t).map(e)}))},t.prototype.chain=function(e){var i=this;return new t((function(t){return i.parse(t).chain((function(t,i){return e(t).run(i)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===lH.Literal},t}(),mH=function(t,e){return new vH((function(i){var r=i.next().char,n=t[r];return"\\"===r?(r=i.next().char,new uH(e.literal(r),i)):new uH(n?e.mask(n):e.literal(r),i)}))},gH=function(t){var e=t.prompt,i=t.promptPlaceholder;return new vH((function(t){var r=t.next().char;return new uH(r===e?i:r,t)}))},yH=function(t){return new vH((function(e){var i=e.next().char;return new uH(t?i:"",e)}))},bH=function(t){return t.reduce((function(t,e){return i=e,t.chain((function(t){return i.map((function(e){return t.concat([e])}))}));var i}),(e=[],new vH((function(t){return new uH(e,t)}))));var e},wH=function(t){return new vH((function(e){for(var i=new uH([],e);!e.eof();)i=i.concat(t.run(e));return i}))},xH=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,i=void 0===e?"":e,r=t.prompt,n=void 0===r?"":r,o=t.promptPlaceholder,s=void 0===o?" ":o,a=t.rules,l=void 0===a?{}:a,h=t.includeLiterals,c=void 0!==h&&h;this.mask=i,this.prompt=n,this.promptPlaceholder=s,this.rules=l,this.includeLiterals=c,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return bH(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(bH(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(bH(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,i){return t.length<e.length?this.maskRemoved(t,e,i):this.maskInserted(t,e,i)},t.prototype.maskInRange=function(t,e,i,r){var n="",o=r,s=e.split("").slice(0,i),a=e.split("").slice(r);return bH(this.maskTokens.slice(i,r)).run(t).fold((function(t){n=s.concat(t).concat(a).join("")})),{selection:o,value:n}},t.prototype.maskRemoved=function(t,e,i){var r=this,n="",o=i,s=t.split("").slice(i),a=t.split("").slice(0,i).join(""),l=this.maskTokens.length-(t.length-i);return bH(this.maskTokens.slice(0,l)).run(a,e).fold((function(t){o=r.adjustPosition(t,o),n=t.concat(s).join("")})),{selection:o,value:n}},t.prototype.adjustPosition=function(t,e){var i=t[e];return this.maskTokens[e].isLiteral(i)||i===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,i){var r=this,n="",o=i,s=t.slice(0,i);return bH(this.unmaskTokens).run(s,e).chain((function(t){o=t.join("").length;var i=e.slice(o);return bH(r.maskTokens).run(t.join("")+i,e)})).fold((function(t){n=t.join("")})),{selection:o,value:n}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return e=t,new vH((function(t){return t.peek().char===e?(t.eat(),new uH(e,t,lH.Literal)):new uH(e,t,lH.Literal)}));var e},mask:function(i){return function(t){var e=t.prompt,i=t.promptPlaceholder;return function(t){return new vH((function(r){for(;!r.eof();){var n=r.peek(),o=n.char,s=n.control;if(o===s&&s===e)return r.eat(),new uH(e,r,lH.Mask);if(t.test(o))return r.eat(),new uH(o,r,lH.Mask);if(o===i)return r.eat(),new uH(e,r,lH.Mask);r.eat_input()}return r.eat(),new uH(e,r,lH.Mask)}))}}({prompt:t,promptPlaceholder:e})(i)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return e=t,new vH((function(t){return t.eof()?new uH("",t):(t.peek().char===e&&t.eat(),new uH(e,t))}));var e},mask:function(e){return(i=t.prompt,function(t){return new vH((function(e){for(;!e.eof();){var r=e.peek(),n=r.char,o=r.control;if(n===i&&o===i)return e.eat(),new uH(n,e);if(t.test(n))return e.eat(),new uH(n,e);e.eat_input()}return e.eat(),new uH("",e)}))})(e);var i}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,i=t.promptPlaceholder,r=t.includeLiterals;return{literal:function(t){return yH(r)},mask:function(t){return gH({prompt:e,promptPlaceholder:i})}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return yH(!1)},mask:function(e){return gH({prompt:t,promptPlaceholder:""})}}},enumerable:!0,configurable:!0}),t.prototype.tokenize=function(){var t=this;wH(mH(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,i){t.maskTokens=e})),wH(mH(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,i){t.unmaskTokens=e})),wH(mH(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,i){t.rawTokens=e})),wH(mH(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,i){t.validationTokens=e}))},t}();function _H(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class kH extends V{constructor(t,e){super(t,e),_H(this,"defaultRules",{"#":/[\d\s\+\-]/,"&":/[\S]/,0:/[\d]/,9:/[\d\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,C:/./,L:/[a-zA-Z]/,a:/[a-zA-Z0-9\s]/}),_H(this,"options",{dotNetInstance:null,includeLiterals:!1,mask:"",prompt:"",promptPlaceholder:"",maskOnFocus:!1,rules:this.defaultRules,value:"",debounceDelay:150,jsinterop:{blur:"",updateValue:"",change:""}}),_H(this,"state",{selection:[0,0],isPasted:!1,shouldFocusOnClick:!1,service:null,isFocused:!1,maskedValue:"",value:""}),_H(this,"onFocus",(()=>{this.state.isFocused=!0,this.options.maskOnFocus&&this.isMaskEmpty()&&(this.updateInput(this.state.service.maskRaw(this.state.value)),this.setSelection(0,0)),this.invokeFocus()})),_H(this,"onPaste",(t=>{var{selectionStart:e,selectionEnd:i}=t.target;i!==e&&(this.state.isPasted=!0,this.state.selection=[e,i])})),_H(this,"onBlur",(()=>{this.state.isFocused=!1,this.state.shouldFocusOnClick=!1,this.options.maskOnFocus&&this.isMaskEmpty()&&this.updateInput(this.state.maskedValue),this.invokeBlur()})),_H(this,"onClick",(()=>{if(this.state.isFocused&&!this.state.shouldFocusOnClick){this.state.shouldFocusOnClick=!0;var{selectionStart:t,selectionEnd:e}=this.element;t===e&&this.setFocusSelection()}})),_H(this,"onInput",(t=>{var e,i=t.target.value,[r,n]=this.state.selection;if(!this.options.mask)return this.updateComponentValue(i),void(this.state.isPasted=!1);if(this.state.isPasted){this.state.isPasted=!1;var o=this.state.maskedValue.length-n,s=i.length-o;e=this.state.service.maskInRange(i.slice(r,s),this.state.maskedValue,r,n)}else e=this.state.service.maskInput(i,this.state.maskedValue,t.target.selectionStart);this.updateInput(e.value,e.selection),this.debounceUpdateComponentValue(e.value)})),this.extendOptions(e),this.bindEvents(),this.state.service=new xH,this.updateService(),this.setValue(this.options.value),this.debounceUpdateComponentValue=p(this.updateComponentValue,this.options.debounceDelay).bind(this)}bindEvents(){this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("input",this.onInput),this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("click",this.onClick),this.element.addEventListener("paste",this.onPaste)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur),this.element.removeEventListener("input",this.onInput),this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("paste",this.onPaste)}focus(){this.element.focus()}updateService(){this.state.service.update({includeLiterals:this.options.includeLiterals,mask:this.options.mask,prompt:this.options.prompt,promptPlaceholder:this.options.promptPlaceholder,rules:this.options.rules})}setOptions(t){var e=this.options.promptPlaceholder,i=this.options.includeLiterals;this.extendOptions(t),this.updateService(),this.setValue(this.options.value),e===this.options.promptPlaceholder&&i===this.options.includeLiterals||this.updateComponentValue(this.state.maskedValue)}updateComponentValue(t){this.options.mask&&!this.state.service.validationValue(t)?this.state.value="":this.state.value=this.state.service.rawValue(t),this.invokeUpdate(this.state.value)}setValue(t){if(this.state.value=t,this.options.mask){var e=this.state.service.maskRaw(this.state.value);this.updateInput(e)}else this.updateInput(this.state.value)}setFocusSelection(){var t=this.element.selectionStart,e=this.state.maskedValue?this.state.maskedValue.indexOf(this.options.prompt):0;e>=0&&e<t&&(this.state.selection=[e,e],this.setSelection())}updateInput(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.state.maskedValue=t;var i=this.shouldResetValue()?"":t;this.element.value=i,void 0!==e&&this.setSelection(e,e)}setSelection(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selection[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.selection[1];this.state.isFocused&&this.element.setSelectionRange(t,e)}isMaskEmpty(){return this.state.service.maskRaw()===this.state.maskedValue}shouldResetValue(){return this.options.maskOnFocus&&!this.state.isFocused&&this.isMaskEmpty()}invokeBlur(){this.invokeMethodAsync(this.options.jsinterop.blur)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateValue,t)}}function SH(t,e){Nt(kH,t,e)}function CH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var EH="k-spinner-increase",TH="k-spinner-decrease",AH=[Zt.ARROWDOWN,Zt.ARROWUP];class MH extends V{constructor(t,e){super(t,e),CH(this,"options",{dotNetInstance:null,decimals:0,separator:"\\.",min:null,max:null,value:"",jsinterop:{blur:""}}),CH(this,"onKeyDown",(t=>{AH.includes(t.keyCode)&&t.preventDefault()})),this.extendOptions(e),this.element.value=this.options.value,this.upArrowElement=t.parentElement.getElementsByClassName(EH)[0],this.downArrowElement=t.parentElement.getElementsByClassName(TH)[0],this.bindEvents()}bindEvents(){this.onKeyPress=this.onKeyPress.bind(this),this.onPaste=this.onPaste.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onBlur=this.onBlur.bind(this),this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("keypress",this.onKeyPress),this.element.addEventListener("paste",this.onPaste),this.element.addEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.addEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.addEventListener("mousedown",this.onMouseDown)}destroy(){this.unbindEvents(),super.destroy(),this.upArrowElement=null,this.downArrowElement=null}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("keypress",this.onKeyPress),this.element.removeEventListener("paste",this.onPaste),this.element.removeEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.removeEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.removeEventListener("mousedown",this.onMouseDown)}focus(){this.element.focus()}onKeyPress(t){var e=String.fromCharCode(t.which);this.isValid(e)||t.keyCode===Zt.ENTER||t.preventDefault()}onPaste(t){this.isValid(t.clipboardData.getData("text/plain"))||t.preventDefault()}onMouseDown(t){t.preventDefault(),document.activeElement!==this.element&&this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}numericRegex(){var t=this.options.separator,e=this.options.decimals,i="{0,"+e+"}";return e?new RegExp("^(-)?(((\\d+(["+t+"]\\d"+i+")?)|(["+t+"]\\d"+i+")))?$"):/^(-)?(\d*)$/}caret(){return[this.element.selectionStart,this.element.selectionEnd]}isValid(t){var e=this.element.value,i=this.caret();return e=e.substring(0,i[0])+t+e.substring(i[1]),!!this.numericRegex().test(e)}}function OH(t,e){Nt(MH,t,e)}class DH extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,jsinterop:{blur:""}}),this.extendOptions(e),this.bindEvents()}bindEvents(){this.onBlur=this.onBlur.bind(this),this.element.addEventListener("blur",this.onBlur)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur)}focus(){this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}}class PH extends DH{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{autoSize:!1,debounceDelay:150,jsinterop:{updateValue:""}}),this.extendOptions(e),this.resize(),this.debounceChangeValue=p(this.changeValue,this.options.debounceDelay).bind(this)}destroy(){super.destroy()}bindEvents(){super.bindEvents(),this.onInput=this.onInput.bind(this),this.element.addEventListener("input",this.onInput)}unbindEvents(){this.element.removeEventListener("input",this.onInput),super.unbindEvents()}onInput(){this.resize(),this.debounceChangeValue()}setValue(t){this.element.value=t,this.resize()}resize(){if(this.options.autoSize){var t,e=this.element;e.style.height="",e.style.height=(t=e.scrollHeight,"".concat(t,"px"))}}changeValue(){this.element&&this.invokeMethodAsync(this.options.jsinterop.updateValue,this.element.value)}}function RH(t,e){Nt(PH,t,e)}function IH(t,e){Nt(DH,t,e)}function LH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class zH extends V{constructor(t,e){super(t,e),LH(this,"options",{dotNetInstance:null,jsinterop:{onSpaceKeyDown:""}}),LH(this,"onSpaceKeyDown",(()=>(this.invokeMethodAsync(this.options.jsinterop.onSpaceKeyDown),!1))),this.extendOptions(e),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}focus(){this.element.focus()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(Jt.SPACE,this.onSpaceKeyDown)}}function BH(t,e){Nt(zH,t,e)}class NH extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"snapValue",(t=>{var e=Yt(t-this.options.min,this.options.smallStep)+this.options.min;return Xt(e,this.options.min,this.options.max)})),this.extendOptions(e),this.sliderTrack=this.element.querySelector(".k-slider-track-wrap"),this.throttleChangeValue=c(this.invokeChangeValue,150).bind(this)}eventValue(t){var e=this.calculatePercentageValue(t),i=this.convertToValue(e);return this.snapValue(i)}calculatePercentageValue(t){var e=this.sliderTrack.getBoundingClientRect();return"vertical"===this.options.orientation?100-(t.clientY-e.top)/e.height*100:(t.clientX-e.left)/e.width*100}convertToValue(t){return this.options.min+t*(this.options.max-this.options.min)/100}convertToPercentage(t){return(t-this.options.min)/(this.options.max-this.options.min)*100}setSliderEnd(t){this.endValue=t,this.element&&this.element.style.setProperty("--kendo-slider-end",this.convertToPercentage(t))}setSliderStart(t){this.startValue=t,this.element&&this.element.style.setProperty("--kendo-slider-start",this.convertToPercentage(t))}invokeChangeValue(t){var{isChangeCommitted:e}=t,i=this.options.jsinterop.changeValue;if(this.dotNetInstance&&this.dotNetInstance.invokeMethodAsync&&i){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return this.dotNetInstance.invokeMethodAsync(i,...n,e)}}}function jH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var FH=[Jt.ARROWUP,Jt.ARROWDOWN,Jt.ARROWLEFT,Jt.ARROWRIGHT,Jt.PAGE_UP,Jt.PAGE_DOWN,Jt.HOME,Jt.END];class VH extends NH{constructor(t,e){super(t,e),jH(this,"onDragStart",(()=>{X("k-slider-transitions",this.element)})),jH(this,"onDrag",(t=>{var e=this.eventValue(t);this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.endValue)})),jH(this,"onDragEnd",(()=>{this.changeValue(this.endValue),K("k-slider-transitions",this.element)})),jH(this,"onClick",(t=>{var e=this.eventValue(t);e!==this.endValue&&this.changeValue(e),this.dragHandle.focus()})),jH(this,"onNavigate",(t=>{this.invokeNavigate(t.name)})),this.extendOptions(e),this.dragHandle=this.element.querySelector(".k-draghandle"),this.endValue=this.options.value,this.bindEvents(),K("k-slider-transitions",this.element)}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){super.setOptions(t),Y("k-slider-transitions")||K("k-slider-transitions",this.element)}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.draggable.destroy(),this.navigationService.destroy(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.draggable=new ti(this.element,{filter:".k-draghandle",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}})}initNavigationService(){this.navigationService=new ie(this.dragHandle),this.navigationService.bind(FH,this.onNavigate)}changeValue(t){var e=null===t?this.options.min:t;this.setSliderEnd(Math.max(e,this.options.min)),this.invokeChangeValue({isChangeCommitted:!0},this.endValue)}invokeNavigate(t){this.invokeMethodAsync(this.options.jsinterop.navigate,t).then((t=>this.setSliderEnd(t)))}}function HH(t,e){Nt(VH,t,e)}function WH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var UH=[Jt.ARROWUP,Jt.ARROWDOWN,Jt.ARROWLEFT,Jt.ARROWRIGHT,Jt.PAGE_UP,Jt.PAGE_DOWN,Jt.HOME,Jt.END];class qH extends NH{constructor(t,e){super(t,e),WH(this,"onStartHandleDrag",(t=>{var e=this.eventValue(t);e>this.endValue&&this.setSliderEnd(e),this.setSliderStart(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),WH(this,"onEndHandleDrag",(t=>{var e=this.eventValue(t);e<this.startValue&&this.setSliderStart(e),this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),WH(this,"onDragEnd",(()=>{this.changeValue(this.startValue,this.endValue)})),WH(this,"onClick",(t=>{var e=this.eventValue(t);e<=this.startValue||e<(this.startValue+this.endValue)/2?(e!==this.startValue&&this.changeValue(e,this.endValue),this.startHandle.focus()):(e>=this.endValue||e>=(this.startValue+this.endValue)/2)&&(e!==this.endValue&&this.changeValue(this.startValue,e),this.endHandle.focus())})),WH(this,"onStartHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.startNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),WH(this,"onEndHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.endNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),this.startHandle=this.element.querySelector(".k-draghandle-start"),this.endHandle=this.element.querySelector(".k-draghandle-end"),this.startValue=this.options.startValue,this.endValue=this.options.endValue,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.startHandle=this.endHandle=null}setOptions(t){super.setOptions(t),this.startValue=this.options.startValue,this.endValue=this.options.endValue}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.destroyDraggable(),this.destroyNavigationService(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.startDraggable=new ti(this.element,{filter:".k-draghandle-start",events:{drag:this.onStartHandleDrag,dragEnd:this.onDragEnd}}),this.endDraggable=new ti(this.element,{filter:".k-draghandle-end",events:{drag:this.onEndHandleDrag,dragEnd:this.onDragEnd}})}destroyDraggable(){this.startDraggable.destroy(),this.endDraggable.destroy()}initNavigationService(){this.startNavigationService=new ie(this.startHandle),this.endNavigationService=new ie(this.endHandle),this.startNavigationService.bind(UH,this.onStartHandleNavigate),this.endNavigationService.bind(UH,this.onEndHandleNavigate)}destroyNavigationService(){this.startNavigationService.destroy(),this.endNavigationService.destroy()}changeValue(t,e){var i=null===t?this.options.min:t,r=null===e?this.options.min:e;this.setSliderStart(Math.max(i,this.options.min)),this.setSliderEnd(Math.max(r,this.options.min,i)),this.invokeChangeValue({isChangeCommitted:!0},this.startValue,this.endValue)}}function GH(t,e){Nt(qH,t,e)}function $H(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var KH=[Jt.ENTER,Jt.SPACE,Jt.HOME,Jt.END,Jt.ARROWDOWN,Jt.ARROWUP,Jt.ARROWLEFT,Jt.ARROWRIGHT];class XH extends V{constructor(t,e){super(t,e),$H(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),$H(this,"onFocus",(()=>{this.invokeFocus()})),$H(this,"onFocusOut",(()=>{this.invokeFocusOut()})),$H(this,"onClick",(()=>{this.invokeClick()})),this.popup=q(e.popupId),this.options=e,this.bindEvents(),this.initNavigationService()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(KH,this.onKeyDown)}bindEvents(){this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("focusout",this.onFocusOut),this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("focusout",this.onFocusOut),this.element.removeEventListener("click",this.onClick)}destroy(){this.unbindEvents(),super.destroy(),this.popup=null}hasParentPopupWithDisplayNone(t){if("none"===t.style.display)return!0;var e=t.closest(".k-popup")!==t?t.closest(".k-popup"):null,i=e!==t?e:null;return i&&this.hasParentPopupWithDisplayNone(i)}focusNode(){this.element&&(this.hasParentPopupWithDisplayNone(this.element)?tt(this.element):document.activeElement!==this.element&&this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}invokeClick(){this.invokeMethodAsync(this.options.jsinterop.click)}}function YH(t,e){Nt(XH,t,e)}var ZH="keydown",JH=[Zt.ARROWLEFT,Zt.ARROWRIGHT,Zt.ARROWUP,Zt.ARROWDOWN,Zt.HOME,Zt.END,Zt.ENTER,Zt.SPACE];class QH extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{JH.includes(t.keyCode)&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(ZH,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(ZH,this.onKeyDown)}focusStep(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e&&e.focus()}}function tW(t,e){Nt(QH,t,e)}var eW="keydown",iW="vertical",rW=[Zt.ARROWUP,Zt.ARROWDOWN],nW=[Zt.ARROWLEFT,Zt.ARROWRIGHT],oW=[Zt.HOME,Zt.END];class sW extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{(this.options.orientation===iW?rW:nW).concat(oW).includes(t.keyCode)&&t.preventDefault()})),this.tabList=this.element.querySelector(".k-tabstrip-items"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.tabList.addEventListener(eW,this.onKeyDown)}unbindEvents(){this.tabList.removeEventListener(eW,this.onKeyDown)}focusTab(t){var e=this.tabList.querySelectorAll(".k-item")[t];e&&e.focus()}}function aW(t,e){Nt(sW,t,e)}function lW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var hW="keydown",cW="mousedown",pW=[Zt.ARROWLEFT,Zt.ARROWRIGHT,Zt.ARROWUP,Zt.ARROWDOWN,Zt.HOME,Zt.END,Zt.ENTER];class uW extends V{constructor(t,e){super(t,e),lW(this,"onKeyDown",(t=>{pW.includes(t.keyCode)&&t.preventDefault()})),lW(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),lW(this,"createHint",(t=>{var e=t.textContent;return j('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),lW(this,"onItemDrop",(t=>{var e=this.getDestinationTree(t.destinationItem);this.invokeMethodAsync(this.options.jsinterop.drop,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),destinationIndex:t.destinationItem.getAttribute("data-treeindex"),treeviewDotNetInstance:e,dropPosition:t.dropPosition})})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),this.draggable&&this.draggable.destroy(),super.destroy()}bindEvents(){this.element.addEventListener(hW,this.onKeyDown),this.element.addEventListener(cW,this.onMouseDown),this.options.draggable&&this.createDraggable()}unbindEvents(){this.element.removeEventListener(hW,this.onKeyDown),this.element.removeEventListener(cW,this.onMouseDown)}setOptions(t){this.options.draggable!==t.draggable&&(t.draggable?this.createDraggable():this.draggable.destroy()),this.extendOptions(t)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}createDraggable(){this.element&&(this.draggable=new li(this.element,{componentSelector:".k-treeview",group:".k-treeview",filter:".k-treeview-leaf",dropClueTargetSelector:".k-treeview-mid",itemSelector:".k-treeview-item",offsetDropClue:!0,hint:this.createHint,events:{itemDrop:this.onItemDrop}}))}getDestinationTree(t){var e=this.element,i=t.closest(".k-treeview");if(i&&e!==i){var r=Ht(i.getAttribute("data-id"));return r&&r.dotNetInstance}return this.dotNetInstance}}function dW(t,e){Nt(uW,t,e)}var fW=[Jt.ARROWLEFT,Jt.ARROWRIGHT,Jt.HOME,Jt.END],vW=":not([disabled]):not([data-focusable='false']):not(.k-picker > .k-button):not(.k-spin-button > .k-button)",mW="a[href], area[href], input".concat(vW,", select").concat(vW,", textarea").concat(vW,", button").concat(vW,", [tabindex]").concat(vW);class gW extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{var e=this.element.querySelectorAll(mW),i=this.element.querySelector(":focus"),r=e.length-1,n=[...e].indexOf(i),o=-1;t.name===Jt.ARROWRIGHT&&n===r||t.name===Jt.HOME?o=0:t.name===Jt.ARROWLEFT&&0===n||t.name===Jt.END?o=r:t.name===Jt.ARROWRIGHT?o=n+1:t.name===Jt.ARROWLEFT&&(o=n-1),-1!==o&&(this.setTabIndices(o),e[o].focus())})),this.setTabIndices(0),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(fW,this.onKeyDown)}setTabIndices(t){this.element.querySelectorAll(mW).forEach(((e,i)=>{var r=t===i?0:-1;e.setAttribute("tabindex",r)}))}}function yW(t,e){Nt(gW,t,e)}class bW extends qs{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{click:"onObserverMapClick",pan:"onObserverMapPan",panEnd:"onObserverMapPanEnd",markerMouseEnter:"onObserverMarkerMouseEnter",markerMouseLeave:"onObserverMarkerMouseLeave",markerClick:"onObserverMarkerClick",markerActivate:"onObserverMarkerActivate",shapeClick:"onObserverShapeClick"})}}function wW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class xW extends xA{constructor(t,e){super(t,e),wW(this,"options",{markerTooltipId:"",jsinterop:{onObserverMapClick:"",onObserverMapPan:"",onObserverMapPanEnd:"",onObserverMarkerClick:"",onObserverMarkerMouseEnter:"",onObserverMarkerMouseLeave:"",onObserverMarkerActivate:"",onObserverShapeClick:""}}),wW(this,"onObserverMapClick",(t=>{var e=this.createMapClickEventArgs(t);this.invokeMapClickAsync(e)})),wW(this,"onObserverMapPan",(t=>{this.hideMarkerTooltip(t)})),wW(this,"onObserverMapPanEnd",(()=>{this.showMarkerTooltip(this._hoveredMarker)})),wW(this,"onObserverMarkerActivate",(t=>{this.repositionMarkerTooltip(t.marker)})),wW(this,"onObserverMarkerClick",(t=>{var e=this.createMarkerClickEventArgs(t);this.invokeMarkerClickAsync(e)})),wW(this,"onObserverMarkerMouseEnter",(t=>{this._hoveredMarker=t.marker;var e=this.createMarkerEventArgs(t);this.invokeMarkerMouseEnterAsync(e)})),wW(this,"onObserverMarkerMouseLeave",(()=>{this._hoveredMarker=null})),wW(this,"onObserverShapeClick",(t=>{var e=this.createShapeClickEventArgs(t);this.invokeShapeClickAsync(e)})),this.extendOptions(e),this.createInstanceObserver(),this.initWidget()}destroy(){this.destroyInstanceObserver(),this._hoveredMarker=null,this.widget&&(this.widget.destroy(),this.widget=null)}getThemeOptions(){return{}}getWidgetConstructor(){return iA}createInstanceObserver(){this.instanceObserver=new bW(this)}destroyInstanceObserver(){this.instanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeMapClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMapClick,t)}invokeMarkerClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerClick,t)}invokeMarkerMouseEnterAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerMouseEnter,t)}invokeShapeClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShapeClick,t)}createMapClickEventArgs(t){var e=t.location||{lat:null,lng:null},i={location:{latitude:e.lat,longitude:e.lng}};return this.extendWithOriginalMouseEvent(i,t)}createMarkerClickEventArgs(t){var e=this.createMarkerEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createShapeClickEventArgs(t){var e=this.createShapeEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createMarkerEventArgs(t){return{layerIndex:t.layerIndex,markerIndex:t.markerIndex}}createShapeEventArgs(t){var e=t.shape.dataItem,i=t.shape.location&&t.shape.value;return{layerIndex:t.layerIndex,shapeIndex:t.shapeIndex,geoJsonDataItem:i?null:e}}getOriginalEvent(t){var e=t.originalEvent;return(e||{}).event||e}extendWithOriginalMouseEvent(t,e){var i=this.getOriginalEvent(e);return f(t,{eventArgs:P(i)})}repositionMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor===t.element&&e.repositionPopup()}}showMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor&&i.anchor===t.element&&e.open(i.anchor)}}hideMarkerTooltip(){var t=this.getMarkerTooltip();if(t){var e=t.getPopupComponent();e&&e.anchor&&t.close(e.anchor)}}getMarkerTooltip(){return Ht(this.options.markerTooltipId)}}function _W(t,e,i){var r=q(t);if(r){var n=kW(e),o=Ht(t),s=f(n,i);if(o)Ft(o,s);else Wt(t,new xW(r,s))}}Ds.register(Lo);var kW=t=>{var e=SW(t),i=CW(e);return e.layers=i||[],e.layers.forEach((t=>{"shape"===t.type&&t.shapeSettings.style?t.style=t.shapeSettings.style:"bubble"===t.type&&t.bubbleSettings.style&&(t.style=t.bubbleSettings.style)})),e},SW=t=>{var e=JSON.parse(t),i=CW(e);return e.layers=i,e},CW=t=>{var e=t.layers||[];return e.forEach((t=>{"string"==typeof t.data&&(t.data=JSON.parse(t.data))})),e};function EW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class TW extends V{constructor(t,e){super(t,e),EW(this,"options",{media:"",jsinterop:{change:""}}),EW(this,"onMediaChange",(t=>{this.invokeMethodAsync(this.options.jsinterop.change,t.matches)})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.mediaQueryList=window.matchMedia(this.options.media),this.mediaQueryList.addEventListener("change",this.onMediaChange)}unbindEvents(){this.mediaQueryList&&this.mediaQueryList.removeEventListener("change",this.onMediaChange)}getMatches(){return this.mediaQueryList.matches}}function AW(t,e){return Nt(TW,t,e),Ht(t).getMatches()}function MW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class OW extends V{constructor(t,e){super(t,e),MW(this,"options",{events:{focusOut:null},focusElementSelector:t=>"[data-index='".concat(t,"']")}),MW(this,"onKeyDown",(t=>{[Zt.ARROWRIGHT,Zt.ARROWLEFT,Zt.ARROWUP,Zt.ARROWDOWN].includes(t.keyCode)&&t.preventDefault()})),MW(this,"onFocusOut",(t=>{H(this.element,t.relatedTarget)||this.trigger("focusOut")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusElement(t){var{index:e}=t,i=this.element.querySelector(this.options.focusElementSelector(e));i&&i.focus()}}function DW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class PW extends V{constructor(t,e){super(t,e),DW(this,"options",{dotNetInstance:null,focusElementSelector:t=>"[data-index='".concat(t,"']"),jsinterop:{focusOut:""}}),DW(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),this.extendOptions(e),this.createNavigationService()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new OW(this.element,{events:{focusOut:this.onNavigationRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusElement(t){this.navigationService&&this.navigationService.focusElement(t)}removeFocus(){setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusOut)}),1)}}function RW(t,e){Nt(PW,t,e)}var IW="keydown",LW=[Zt.ARROWLEFT,Zt.ARROWRIGHT,Zt.ARROWUP,Zt.ARROWDOWN,Zt.HOME,Zt.END,Zt.ENTER,Zt.SPACE];class zW extends V{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{LW.includes(t.keyCode)&&t.target.matches("span.k-link")&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(IW,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(IW,this.onKeyDown)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}}function BW(t,e){Nt(zW,t,e)}const NW="bottom",jW="center",FW="middle",VW="left",HW="right",WW="top";const UW=function(t){var e=t.anchorRect,i=t.anchorAlign,r=t.elementRect,n=t.elementAlign,o=t.margin;void 0===o&&(o={});var s=i.horizontal,a=i.vertical,l=n.horizontal,h=n.vertical,c=o.horizontal||0,p=o.vertical||0,u=e.top,d=e.left;return a===NW&&(u+=e.height),a!==jW&&a!==FW||(u+=Math.round(e.height/2)),h===NW&&(u-=r.height,p*=-1),h!==jW&&h!==FW||(u-=Math.round(r.height/2),p*=-1),s===HW&&(d+=e.width),s!==jW&&s!==FW||(d+=Math.round(e.width/2)),l===HW&&(d-=r.width,c*=-1),l!==jW&&l!==FW||(d-=Math.round(r.width/2),c*=-1),{top:u+p,left:d+c}};function qW(t){return t.ownerDocument||t.document||t}const GW=function(t){return qW(t).documentElement};const $W=function(t){return qW(t).defaultView};function KW(t){var e=GW(t),i=$W(t);return{x:i.pageXOffset||e.scrollLeft||0,y:i.pageYOffset||e.scrollTop||0}}function XW(t){return t===(t.ownerDocument||{}).body?KW(t):{x:t.scrollLeft,y:t.scrollTop}}const YW=function(t){for(var e=t.offsetParent;e&&"static"===e.style.position;)e=e.offsetParent;return e||GW(t)};function ZW(t,e){return t?XW(t):function(t){var e=YW(t);return e?XW(e):{x:0,y:0}}(e)}const JW=function(t){var e=t.getBoundingClientRect(),i=e.left,r=e.top;return e.height||e.width||(e=function(t){var e=t.style,i=e.display,r=e.left,n=e.position;t.style.display="",t.style.left="-10000px",t.style.position="absolute";var o=t.getBoundingClientRect();return t.style.display=i,t.style.left=r,t.style.position=n,o}(t)),{top:r,left:i,height:e.height,width:e.width}};const QW=function(t,e){var i=$W(t),r=i.getComputedStyle(t),n=JW(t),o=e||YW(t),s=t.ownerDocument,a=o!==s.body&&o!==s.documentElement,l={top:0,left:0};if("fixed"!==r.position&&a){var h=i.getComputedStyle(o);(l=JW(o)).top+=parseInt(h.borderTopWidth,10),l.left+=parseInt(h.borderLeftWidth,10)}return{top:n.top-l.top,left:n.left-l.left,height:n.height,width:n.width}};const tU="fit",eU="flip";var iU=function(t,e,i){var r=0;return t+e>i&&(r=i-(t+e)),t<0&&(r=-t),r},rU=function(t){var e=t.offset,i=t.size,r=t.anchorSize,n=t.viewPortSize,o=t.anchorAlignPoint,s=t.elementAlignPoint,a=0,l=2*t.margin;if(s!==o&&!(s===jW||s===FW)&&!(o===jW||o===FW)){var h=o===WW||o===VW;e<0&&h?e+(a=i+r+l)+i>n&&(a=0):e>=0&&!h&&(e+i>n&&(a+=-(r+i+l)),e+a<0&&(a=0))}return a};const nU=function(t){var e=t.anchorRect,i=t.anchorAlign,r=t.elementRect,n=t.elementAlign,o=t.collisions,s=t.viewPort,a=t.margin;void 0===a&&(a={});var l=r.top,h=r.left,c=r.height,p=r.width,u=s.height,d=s.width,f=a.horizontal||0,v=a.vertical||0,m=0,g=0,y=o.horizontal===eU,b=o.vertical===eU;o.vertical===tU&&(g+=iU(l,c,u)),o.horizontal===tU&&(m+=iU(h,p,d)),b&&(g+=rU({margin:v,offset:l,size:c,anchorSize:e.height,viewPortSize:u,anchorAlignPoint:i.vertical,elementAlignPoint:n.vertical})),y&&(m+=rU({margin:f,offset:h,size:p,anchorSize:e.width,viewPortSize:d,anchorAlignPoint:i.horizontal,elementAlignPoint:n.horizontal}));var w=y&&0!==m,x=b&&0!==g;return{flipped:w||x,flip:{horizontal:w,vertical:x},offset:{left:m,top:g}}};function oU(t,e){for(var i=[],r=t.parentNode;r&&(i.push(r),r!==e);)r=r.parentNode;return i}function sU(t){for(var e=[],i=t.parentNode.firstElementChild;i;)i!==t&&e.push(i),i=i.nextElementSibling;return e}function aU(t,e){if(!t||!e)return null;var i=function(t,e){for(var i,r,n=oU(t),o=e;o&&(i=sU(o),!(r=n.reduce((function(t,e){return t.concat(i.filter((function(t){return t===e})))}),[])[0]));)o=o.parentElement;return r}(t,e);if(!i)return null;var r=[t].concat(oU(t,i)).reduce((function(t,e){var i=e.style.zIndex||window.getComputedStyle(e).zIndex,r=parseInt(i,10);return r>t?r:t}),0);return r?r+1:null}var lU=0;function hU(){if(!lU&&"undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),lU=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)}return lU}function cU(t){var e=$W(t),i=GW(t),r={height:e.innerHeight,width:e.innerWidth};return i.scrollHeight-i.clientHeight>0&&(r.width-=hU()),r}function pU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var uU={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},dU=Array.from,fU="mouseleave",vU="mouseover",mU="mousedown",gU="pointerdown",yU="scroll",bU="resize";class wU extends V{constructor(t,e){if(super(t,e),pU(this,"mouseHoverTimeout",null),pU(this,"options",{dotNetInstance:null,anchorSelector:"",dynamicAnchors:!1,anchorRect:uU,toggleElementSelector:"",width:"",anchorAlign:{horizontal:"left",vertical:"bottom"},elementAlign:{horizontal:"left",vertical:"top"},openOn:"click",closeOn:"click",closeParentPopupsUntilSelector:"",jsinterop:{close:"",closeAsync:"",openAsync:"",positionSet:""}}),pU(this,"toggle",(t=>{t.preventDefault(),this._visible?this.closeAsync():this.openAsync(t)})),pU(this,"onCloseEvent",(t=>{!(this.toggleElements&&[...this.toggleElements].includes(t.target))&&t.target!==this.anchor||this.isChild(t.relatedTarget)||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync()}),30))})),pU(this,"onElementMouseOver",(()=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout)})),pU(this,"onMouseDown",(t=>{this.isChild(t.target)||this.closeAsync()})),pU(this,"onElementMouseLeave",(t=>{var e=t.relatedTarget;if(!W(this.element,e)&&!W(this.anchor,e)){var i=e&&e.closest(".k-animation-container"),r=i&&(i.dataset.id===this.element.dataset.id||this.isChild(e));i&&r||t.target!==this.element||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync(),this.options.closeParentPopupsUntilSelector&&this.closeParentPopups()}),30))}})),pU(this,"onScroll",(t=>{this.isChild(t.target)||this.positionElement()})),pU(this,"onResize",(()=>{this.close()})),pU(this,"openAsync",((t,e,i)=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);var r=this.anchor;this.anchors.length>1&&this.anchors.forEach((e=>{W(e,t.target)&&(this.anchor=e)})),r!==this.anchor&&this.closeAsync(),this.options.anchorRect={top:i,left:e,width:0,height:0},this.invokeMethodAsync(this.options.jsinterop.openAsync)})),this.extendOptions(e),this.anchors=this.getAnchorsFromDocument(),this.anchor=this.anchors[0],this.anchors.length>1&&e.toggleElementSelector)throw new Error("Toggle element is not supported when you have more than one anchor");e.toggleElementSelector&&(this.toggleElements=dU(document.querySelectorAll(e.toggleElementSelector))),u()||this.createIntersectionObserver(),this.bindAnchorsEvents(),this.bindElementEvents(),this.initPosition()}destroy(){this.unbindElementEvents(),this.unbindEvents(),this.unbindAnchorsEvents(),this.destroyIntersectionObserver(),super.destroy(),this.toggleElements=null,this.anchor=null}getElementRect(t){var e=t?t.getBoundingClientRect():uU,i=document.body.getBoundingClientRect();return{top:e.top-i.top,left:e.left-i.left,width:e.width,height:e.height}}bindElementEvents(){this.options.closeOn===fU&&(this.element.addEventListener(fU,this.onElementMouseLeave),this.element.addEventListener(vU,this.onElementMouseOver))}unbindElementEvents(){this.element&&(this.element.removeEventListener(fU,this.onElementMouseLeave),this.element.removeEventListener(vU,this.onElementMouseOver))}bindAnchorsEvents(){this.toggleElements&&this.toggleElements.length?this.toggleElements.forEach((t=>{this.bindAnchorEvents(t)})):this.anchors.forEach((t=>{this.bindAnchorEvents(t)}))}unbindAnchorsEvents(){this.toggleElements&&this.toggleElements.forEach((t=>{this.unbindAnchorEvents(t)})),this.anchors.forEach((t=>{this.unbindAnchorEvents(t)}))}bindAnchorEvents(t){if(g(t)){var{openOn:e,closeOn:i}=this.options;e===i?t.addEventListener(e,this.toggle,!0):(t.addEventListener(e,this.openAsync,!0),t.addEventListener(i,this.onCloseEvent,!0))}}unbindAnchorEvents(t){if(g(t)){var{openOn:e,closeOn:i}=this.options;t.removeEventListener(e,this.toggle,!0),t.removeEventListener(e,this.openAsync,!0),t.removeEventListener(i,this.onCloseEvent,!0)}}bindEvents(){this.bound||(this.bound=!0,document.addEventListener(yU,this.onScroll,!0),u()||window.addEventListener(bU,this.onResize),window&&window.PointerEvent?document.addEventListener(gU,this.onMouseDown,!0):document.addEventListener(mU,this.onMouseDown,!0))}unbindEvents(){document.removeEventListener(yU,this.onScroll,!0),document.removeEventListener(mU,this.onMouseDown,!0),document.removeEventListener(gU,this.onMouseDown,!0),window.removeEventListener(bU,this.onResize,!0),this.bound=!1}closeParentPopups(){for(var t=this.element;t&&!t.querySelector(this.options.closeParentPopupsUntilSelector);){var e=Ht(t.getAttribute("data-id")),i=e.anchor;e.close(),t=i&&i.closest(".k-animation-container")}}onOpen(){this._visible=!0,this.bindEvents(),this.options.width||(this.element.style.width=this.getAnchorWidth()),this.anchor&&this.setZIndex(this.anchor),this.positionElement()}getAutoSizePosition(){var t=this.element.children[0];if(t){var e=t.style.display;t.style.visibility="hidden",t.style.display="block";var i=this.getPosition();return t.style.display=e,t.style.visibility="",i}return this.getPosition()}onClose(){this._visible=!1,this.unbindEvents()}initPosition(){this.element&&(this.element.style.left="-10000px",this.element.style.top="0px")}getPosition(){var t=this.getAnchorRect(),e=this.element.style.left,i=this.element.style.top;this.element.style.left="",this.element.style.top="";var r=this.getElementRect(this.element);this.element.style.left=e,this.element.style.top=i;var n,o,s=UW({anchorRect:t,elementRect:r,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,margin:this.options.margin});r.top=s.top,r.left=s.left,n=r,o=KW(this.element),r={top:n.top-o.y,left:n.left-o.x,height:n.height,width:n.width};var a=nU({anchorRect:t,elementRect:r,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,collisions:{horizontal:"fit",vertical:"flip"},viewPort:cU(this.element)});return this.flipped=a.flipped,{top:"".concat(s.top+a.offset.top,"px"),left:"".concat(s.left+a.offset.left,"px"),flipped:a.flipped}}positionElement(){var t=this.getElementPosition();return this.element.style.top=t.top,this.element.style.left=t.left,this.invokePositionSet(),t}getElementPosition(){return!0===this.options.autoSize?this.getAutoSizePosition():this.getPosition()}getAnchorWidth(){if(!this.anchor)return"";var t=this.getElementRect(this.anchor);return"".concat(t.width,"px")}getAnchorRect(){return this.anchor?this.getElementRect(this.anchor):this.options.anchorRect}setZIndex(t){var e;this.element&&(t&&(e=aU(t,this.element)),this.element.style.zIndex=e||10002)}createIntersectionObserver(){this.destroyIntersectionObserver(),this.intersectionObserver=this.initIntersectionObserver(),this.anchors.forEach((t=>{this.observeIntersection(t)}))}initIntersectionObserver(){var t={threshold:this.getIntersectionThreshold()};return new window.IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=0&&t.intersectionRatio<1&&this.onAnchorHide(t.target)}))}),t)}observeIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.observe(t)}unobserveIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.unobserve(t)}canObserveIntersection(t){return this.intersectionObserver&&g(t)}destroyIntersectionObserver(){this.intersectionObserver&&(this.anchors.forEach((t=>{this.unobserveIntersection(t)})),this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect()),this.intersectionObserver=null}onAnchorHide(t){if(this.hasDynamicAnchors()&&this._ignoreFirstIntersectionCheck){if(W(this.anchor,t))return void(this._ignoreFirstIntersectionCheck=!1)}else this.close()}getIntersectionThreshold(){for(var t=[],e=0;e<=1;e+=.1)t.push(e);return t}isElementVisible(){return this.element&&this.element.getElementsByClassName("k-popup")[0]}isChild(t){var e=t;if(J(e,[this.element,this.anchor]))return!0;var i=e instanceof HTMLElement&&e.closest(".k-animation-container");if(i&&i!==this.element){var r=Ht(i.getAttribute("data-id")||i.id);return!!(r&&r.isParent(this.element))||this.isChildOfPopup(e,this.element)}return!1}isChildOfPopup(t,e){var i=t&&t.closest(".k-animation-container");if(i&&i===e)return!0;if(i&&i!==e){var r=Ht(i.getAttribute("data-id")||i.id);if(r)return this.isChildOfPopup(r.anchor,e)}return!1}isParent(t){return t&&H(t,this.anchor)}close(){this.invokeMethodAsync(this.options.jsinterop.close)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}invokePositionSet(){this.options.jsinterop.positionSet&&this.invokeMethodAsync(this.options.jsinterop.positionSet)}get anchors(){return this.hasDynamicAnchors()&&(this.anchors=this.getAnchorsFromDocument()),this._anchors}set anchors(t){var e=this.hasAnyAnchorChanged(t);this.hasDynamicAnchors()&&e&&((this._anchors||[]).forEach((t=>{this.unobserveIntersection(t),this.unbindAnchorEvents(t)})),t.forEach((t=>{this.bindAnchorEvents(t)}))),this._anchors=t}get anchor(){return this._anchor||(this._anchor=this._anchors[0]),this._anchor}set anchor(t){this.unobserveIntersection(this._anchor),this.unbindAnchorEvents(this._anchor),this._anchor=t,this.hasDynamicAnchors()&&(this._ignoreFirstIntersectionCheck=!0,this.observeIntersection(this._anchor),this.bindAnchorEvents(this._anchor))}getAnchorsFromDocument(){return dU(document.querySelectorAll(this.options.anchorSelector))}hasAnyAnchorChanged(t){if(!this.hasDynamicAnchors())return!1;var e=dU(this._anchors||[]);if(!e||e.length!==t.length)return!0;for(var i=0;i<t.length;i++)if(!e.includes(t[i]))return!0;return!1}hasDynamicAnchors(){return this.options.dynamicAnchors}}function xU(t,e){Nt(wU,t,e)}function _U(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class kU extends V{constructor(t,e){super(t,e),_U(this,"options",{events:{removeFocus:null,keyDown:null},appointmentElementSelector:t=>".k-event[data-render-index='".concat(t,"']")}),_U(this,"onKeyDown",(t=>{[Zt.ARROWRIGHT,Zt.ARROWLEFT,Zt.ARROWUP,Zt.ARROWDOWN,Zt.PAGE_DOWN,Zt.PAGE_UP,Zt.HOME,Zt.END,Zt.SPACE].includes(t.keyCode)&&Y("k-state-selected",t.target)&&t.target.matches("div.k-event")&&t.preventDefault(),this.trigger("keyDown",{key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey})})),_U(this,"onFocusOut",(t=>{!t.relatedTarget||this.element.querySelector(".k-scheduler-layout").contains(t.relatedTarget)||t.relatedTarget.closest(".k-window")||this.trigger("removeFocus")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusAppointmentElement(t){var e=this.element.querySelector(this.options.appointmentElementSelector(t));e&&this.focusElement(e)}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}}function SU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class CU extends V{constructor(t,e){super(t,e),SU(this,"options",{dotNetInstance:null,jsinterop:{removeFocus:"",keyDown:""}}),SU(this,"onKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keyDown,t)})),SU(this,"onRemoveFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.removeFocus)})),this.extendOptions(e),this.createNavigationService()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new kU(this.element,{events:{keyDown:this.onKeyDown,removeFocus:this.onRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusAppointmentElement(t){this.navigationService.focusAppointmentElement(t)}focusElement(){this.navigationService.focusElement(this.element)}}function EU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class TU extends V{constructor(t,e){super(t,e),EU(this,"options",{dotNetInstance:null,allowUpdate:!1,jsinterop:{resizeAppointments:""}}),EU(this,"onResize",(()=>{var t=this.element.offsetWidth;t!==this.width&&(this.width=t,this.invokeResizeAppointments())})),EU(this,"renderMoveHints",(t=>{t&&t.length&&this.moveTarget&&(this.destroyHints(),t.forEach((t=>{var e=this.createHint(this.moveTarget);this.renderHintElement(e,t)})))})),EU(this,"renderHintElement",(()=>{throw new Error("You have to implement the method renderHintElement!")})),EU(this,"getSlotUnderCursor",(t=>{var e=Ae(t);if(!e)return null;var i=e.closest(".k-event");return i&&($(i),e=this.getSlotUnderCursor(t),G(i)),e.closest(".k-scheduler-cell.k-slot-cell")})),EU(this,"createHint",(t=>{var e=t.cloneNode();return e.className+=" k-event-drag-hint",e.style.zIndex="2",this.hints[this.hints.length]=e,e})),EU(this,"destroyHints",(()=>{this.hints.forEach((t=>{t.parentNode.removeChild(t)})),this.hints=[]})),this.extendOptions(e),this.bindEvents(),this.createMovable(),this.hints=[],this.width=0}destroy(){this.bodyElement=null,this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){window.addEventListener("resize",this.onResize)}unbindEvents(){window.removeEventListener("resize",this.onResize)}invokeResizeAppointments(){this.invokeMethodAsync(this.options.jsinterop.resizeAppointments,this.getSlotMetrics())}refresh(){this.invokeResizeAppointments()}getSlotMetrics(){var t=this.getFirstCell(),e=this.getContentWidth();return this.setHeadersWidths(),this.slotMetrics={width:e-t.offsetLeft,height:t.offsetHeight,left:t.offsetLeft},this.slotMetrics}createMovable(){this.destroyMovable(),this.options.allowUpdate&&(this.movable=new Xe({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element))}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;if(e&&e.closest(".k-event")){var i=this.getSlotUnderCursor(t);this.moveTarget=e.closest(".k-event"),this.resizeStart=Boolean(e.closest(".k-resize-n, .k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-s, .k-resize-e")),this.lastCellIndex=this.originalCellIndex=this.getCellIndex(i),this.lastRowIndex=this.originalRowIndex=this.getRowIndex(i),this.lastResourceIndex=this.originalResourceIndex=this.getResourceIndex(i)}}onMovableDrag(t){if(this.moveTarget)if(this.dragStarted){var e=this.getSlotUnderCursor(t);if(e){var i=Y("k-scheduler-alldays-slot",e),r=this.getCellIndex(e),n=this.getRowIndex(e),o=this.getResourceIndex(e),s=!1;r!==this.lastCellIndex&&(this.lastCellIndex=r,s=!0),n!==this.lastRowIndex&&(this.lastRowIndex=n,s=!0),o!==this.lastResourceIndex&&(this.resourceRowIndex=o,s=!0),s&&this.invokeMethodAsync(this.options.jsinterop.getMoveHint,{rowIndex:n,cellIndex:r,resourceIndex:o,originalCellIndex:this.originalCellIndex,originalRowIndex:this.originalRowIndex,originalResourceIndex:this.originalResourceIndex,resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,isAllDay:i}).then(this.renderMoveHints)}}else this.dragStarted=!0}onMovableDrop(){this.destroyHints(),this.dragStarted&&this.invokeMethodAsync(this.options.jsinterop.moveAppointment),this.moveTarget=null,this.lastCellIndex=this.lastRowIndex=this.lastResourceIndex=0,this.originalCellIndex=this.originalRowIndex=this.originalResourceIndex=0}getFirstCell(){return this.element.querySelector(".k-first-cell")}getContentWidth(){return this.getBodyElement().offsetWidth}setHeadersWidths(){var t=Array.from(this.element.querySelectorAll(".k-heading-cell.k-group-cell,.k-heading-cell.k-resource-cell")),e=F(t,(t=>t.getAttribute("data-depth-index"))),i=function(t){var i=0;e[t].forEach((t=>{t.style.minWidth="",i=Math.max(t.offsetWidth,i)})),e[t].forEach((t=>{t.style.minWidth=i+"px"}))};for(var r in e)i(r)}getBodyElement(){return this.bodyElement||(this.bodyElement=this.element.querySelector(".k-scheduler-body")),this.bodyElement}getCellIndex(t){return this.getCellDataIndex(t,"data-cell-index")}getRowIndex(t){return this.getCellDataIndex(t,"data-row-index")}getResourceIndex(t){return this.getCellDataIndex(t,"data-resource-index")}getCellDataIndex(t,e){return t?parseInt(t.getAttribute(e),10):-1}}function AU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class MU extends TU{constructor(t,e){super(t,e),AU(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),AU(this,"renderHintElement",((t,e)=>{var i=this.getAllDayRowElement();t.style.left=e.left+"px",t.style.width=e.width+"px",e.isAllDay&&i?(t.style.top="0px",t.style.height="100%",i.appendChild(t)):(t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t))})),this.extendOptions(e)}destroy(){this.allDayRowElement=null,super.destroy()}getAllDayRowElement(){return this.allDayRowElement||(this.allDayRowElement=this.element.querySelector(".k-scheduler-all-day-row")),this.allDayRowElement}}function OU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class DU extends TU{constructor(t,e){super(t,e),OU(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),OU(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function PU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class RU extends TU{constructor(t,e){super(t,e),PU(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),PU(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function IU(t,e){Nt(CU,t,e)}function LU(t,e){Nt(MU,t,e)}function zU(t,e){Nt(DU,t,e)}function BU(t,e){Nt(RU,t,e)}function NU(t){var e=Ht(t);return e?e.getSlotMetrics():{width:0,height:0,left:0}}function jU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var FU=".k-splitbar",VU=".k-splitbar-draggable-horizontal",HU=".k-splitbar-draggable-vertical",WU="horizontal",UU=Number.MAX_SAFE_INTEGER,qU="k-pane-static",GU=".k-collapse-next",$U=".k-collapse-prev",KU=t=>/%$/.test(t),XU=(t,e)=>{var i=parseFloat(t);return KU(t)&&(i=e*i/100),i},YU=(t,e,i)=>t?e===WU?t["".concat(i,"Width")]:t["".concat(i,"Height")]:0;class ZU extends V{constructor(t,e){super(t,e),jU(this,"options",{dotNetInstance:null,orientation:WU,resizable:!0,keyboardResizeDelta:10,panes:[],jsinterop:{resizePane:""}}),jU(this,"onResizableResizeStart",(t=>{t.originalEvent.stopPropagation();var e=Rt(t.originalCurrentTarget,FU);this.resetPaneState(),this.addResizeOverlays(e)})),jU(this,"onResizableResize",(t=>{var e=Rt(t.originalCurrentTarget,FU),i=this.isHorizontal()?t.delta.x:t.delta.y;this.dragSplitterBar(e,i)})),jU(this,"onResizableResizeEnd",(()=>{this.removeResizeOverlays(),this.invokeResizePane()})),jU(this,"onElementKeyDown",(t=>{t.target.closest(FU)&&this.onSplitterBarKeyDown(t)})),this.extendOptions(e),this.resetPaneState(),this.createResizable(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}setOptions(t){this.extendOptions(t);for(var e=0;e<this.options.panes.length;e++){if(this.options.panes[e].forceExpanded){var i=this.getPaneElement(e);X(qU,i)}}}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onElementKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onElementKeyDown)}setState(t){this.state=f(this.state||{},t)}resetPaneState(){this.setState({resizedPanes:{}})}createResizable(){this.options.resizable&&(this.resizable=new jO(this.element,{draggable:{filter:[VU,HU].join(","),ignore:[$U,GU].join(",")},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}dragSplitterBar(t,e){var{leftPane:i,rightPane:r}=this.getAdjacentPanes(t),n=i.computedSize+e,o=n>i.min&&n<i.max,s=this.getPaneElements().filter((t=>!t.style["flex-basis"])),a=(i.size||r.size)&&s.length>1;i.size&&r.size||a?o&&(this.resizePane(i,e),this.resizePane(r,-e)):r.size?this.resizePane(r,-e):this.resizePane(i,e)}resizePane(t,e){var i=Xt(t.computedSize+e,t.min,t.max),r="";if(KU(t.size)){var n=this.getElementClientSize();r="".concat(100*i/n,"%")}else r=(t=>"".concat(t,"px"))(i);this.setPaneSize(t.index,r)}isHorizontal(){return this.options.orientation===WU}getPane(t){return(this.options.panes||[])[t]}getPaneElements(){return Array.from(this.element.children||[]).filter((t=>Y("k-pane",t)))}getPaneElement(t){return this.getPaneElements()[t]}getAdjacentPanes(t){var e=t,i=t+1,r=this.getPaneElement(e),n=this.getPaneElement(i),o=this.getPane(e),s=this.getPane(i),a=this.getPaneOffsetSize(e),l=this.getPaneOffsetSize(i),h=a+l,c=this.getElementClientSize(),p=t=>XU(t,c),{leftPaneMaxSize:u,rightPaneMaxSize:d}=this.getAdjacentPanesMaxSize(t);return{leftPane:{index:e,computedSize:a,min:p(o.min)||h-p(s.max)||0,max:u,size:r.style["flex-basis"],collapsible:o.collapsible},rightPane:{index:i,computedSize:l,min:p(s.min)||h-p(o.max)||0,max:d,size:n.style["flex-basis"],collapsible:s.collapsible}}}getAdjacentPanesMaxSize(t){var{size:e,min:i,max:r}=this.getPaneSizes(t),{size:n,min:o,max:s}=this.getPaneSizes(t+1),a=e+n;return{leftPaneMaxSize:Math.min(r,a-o),rightPaneMaxSize:Math.min(s,a-i)}}getPaneSizes(t){var e=this.getElementClientSize(),i=this.getPane(t);return{size:this.getPaneOffsetSize(t),min:i.min?XU(i.min,e):0,max:i.max?XU(i.max,e):UU}}getPaneOffsetSize(t){var e=((t,e)=>{if(!t)return 0;var i=t.getBoundingClientRect();return e===WU?i.width:i.height})(this.getPaneElement(t),this.options.orientation);return e}getElementClientSize(){var t=((t,e)=>YU(t,e,"client"))(this.element,this.options.orientation);return t}setPaneSize(t,e){var i=this.getPaneElement(t);i&&(this.state.resizedPanes[t]={index:t,size:e},(this.options.panes[t]||{}).forceExpanded||K(qU,i),i.style["flex-basis"]=e)}addResizeOverlays(t){this.addResizeOverlay(t),this.addResizeOverlay(t+1)}addResizeOverlay(t){var e=this.getPaneElement(t);if(e){var i=j('<div class="k-splitter-overlay k-overlay"></div>');e.appendChild(i)}}removeResizeOverlays(){Array.from(this.element.querySelectorAll(".k-splitter-overlay")).forEach((t=>{t.remove()}))}invokeResizePane(){Object.values(this.state.resizedPanes).forEach((t=>{this.invokeMethodAsync(this.options.jsinterop.resizePane,{index:t.index,size:t.size})}))}isSplitterBarDraggable(t){return Y(VU.replace(".",""),t)||Y(HU.replace(".",""),t)}getSplitterBarIndex(t){return Rt(t,FU)}onSplitterBarKeyDown(t){var e=t.target.closest(FU),i=t.key;if(this.isSplitterBarDraggable(e)){var r=Rt(e,FU),n=this.options.keyboardResizeDelta,o=this.isHorizontal(),s=i===Jt.ARROWRIGHT&&o||i===Jt.ARROWDOWN&&!o,a=i===Jt.ARROWLEFT&&o||i===Jt.ARROWUP&&!o,l=s?1:-1;(s||a)&&(t.preventDefault(),this.dragSplitterBar(r,l*n),this.invokeResizePane())}}}function JU(t,e){Nt(ZU,t,e)}function QU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tq=".k-tilelayout-item";class eq extends V{constructor(t,e){super(t,e),QU(this,"options",{dotNetInstance:null,resizable:!1,reorderable:!1,jsinterop:{resizeItem:"",reorderItem:""}}),QU(this,"onResizableResizeStart",(t=>{var e=t.originalCurrentTarget.closest(tq),i=parseInt(e.style.gridColumnEnd.substring(5)),r=parseInt(e.style.gridRowEnd.substring(5)),n=Array.from(this.element.querySelectorAll(tq)).find((t=>"1"===t.style.order)),o=n.offsetTop-this.element.offsetTop,s=n.offsetLeft-this.element.offsetLeft,a=(e.offsetWidth-(i-1)*s)/i,l=(e.offsetHeight-(r-1)*o)/r,h=t.originalCurrentTarget.className;this.resizeState={item:e,columnWidth:a,columnHeight:l,segmentWidth:a+s,segmentHeight:l+o,totalWidth:this.element.offsetWidth,originalWidth:e.offsetWidth,originalHeight:e.offsetHeight,originalColSpan:i,originalRowSpan:r,maxWidth:this.element.offsetWidth-(e.offsetLeft+s),colSpanDelta:0,rowSpanDelta:0,resizeSide:h.indexOf("ew")>-1||h.indexOf("nwse")>-1,resizeDown:h.indexOf("ns")>-1||h.indexOf("nwse")>-1}})),QU(this,"onResizableResize",(t=>{this.pinContainer(this.resizeState.item),this.createResizeHint(this.resizeState.item);var e=()=>{this.resizeState.item.style.top=this.hint.offsetTop+"px",this.resizeState.item.style.left=this.hint.offsetLeft+"px"};if(this.resizeState.resizeSide){var i=this.resizeState.originalWidth+t.initialDelta.x;i<=this.resizeState.maxWidth&&i>=this.resizeState.columnWidth&&(this.resizeState.item.style.width=i+"px",this.resizeState.colSpanDelta=Math.floor((t.initialDelta.x+this.resizeState.segmentWidth/2)/this.resizeState.segmentWidth),this.hint.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),this.resizeState.item.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),e(),this.resizeState.resizeDown||(this.resizeState.item.style.height=this.hint.offsetHeight+"px"))}if(this.resizeState.resizeDown){var r=this.resizeState.originalHeight+t.initialDelta.y;r>=this.resizeState.columnHeight&&(this.resizeState.item.style.height=r+"px",this.resizeState.rowSpanDelta=Math.floor((t.initialDelta.y+this.resizeState.segmentHeight/2)/this.resizeState.segmentHeight),this.hint.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),this.resizeState.item.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),e())}})),QU(this,"onResizableResizeEnd",(()=>{(this.resizeState.colSpanDelta||this.resizeState.rowSpanDelta)&&this.invokeMethodAsync(this.options.jsinterop.resizeItem,{order:parseInt(this.resizeState.item.style.order),colSpan:this.resizeState.originalColSpan+this.resizeState.colSpanDelta,rowSpan:this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta}),this.unpinContainer(this.resizeState.item),this.destroyResizeHint(),this.resizeState=null})),QU(this,"onReorderableDragStart",(t=>{var e=t.originalCurrentTarget.closest(tq),i=parseInt(e.style.order);this.reorderState={item:e,left:e.offsetLeft,top:e.offsetTop,order:i,originalOrder:i}})),QU(this,"onReorderableDrag",(t=>{this.pinContainer(this.reorderState.item),this.createResizeHint(this.reorderState.item),this.reorderState.item.style.left=this.reorderState.left+t.initialDelta.x+"px",this.reorderState.item.style.top=this.reorderState.top+t.initialDelta.y+"px";var e=this.getItemUnderCursor(t,this.reorderState.item);if(e){var i,r,n,o=e.getBoundingClientRect(),s=t.clientX<o.left+o.width/2,a=parseInt(e.style.order),l=a+(s?0:1);if(e===this.reorderState.lastItemUnderCursor&&s===this.reorderState.lastIsLeftOfMiddle)return;if(a>this.reorderState.order?(i=this.reorderState.order+1,r=l,n=-1,this.reorderState.order=l-1):a<this.reorderState.order&&(i=l,r=this.reorderState.order,n=1,this.reorderState.order=l),r>i){this.shiftItemsOrder(i,r,n),this.hint.style.order=this.reorderState.order,this.reorderState.item.style.order=this.reorderState.order;var h=this.getItemUnderCursor(t,this.reorderState.item);if(this.reorderState.lastItemUnderCursor=h,h){var c=h.getBoundingClientRect(),p=t.clientX<c.left+c.width/2;this.reorderState.lastIsLeftOfMiddle=p}}}})),QU(this,"onReorderableDragEnd",(()=>{this.reorderState.order!==this.reorderState.originalOrder&&this.invokeMethodAsync(this.options.jsinterop.reorderItem,{fromOrder:this.reorderState.originalOrder,toOrder:this.reorderState.order}),this.destroyResizeHint(),this.unpinContainer(this.reorderState.item),this.reorderState=null})),QU(this,"pinContainer",(t=>{if("absolute"!==t.style.position){var e=t.offsetLeft,i=t.offsetTop,r=t.offsetWidth,n=t.offsetHeight;t.style.position="absolute",t.style.left=e+"px",t.style.top=i+"px",t.style.width=r+"px",t.style.height=n+"px",t.style.zIndex=2}})),QU(this,"unpinContainer",(t=>{t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.style.zIndex=""})),QU(this,"createResizeHint",(t=>{this.hint||(this.hint=document.createElement("div"),this.hint.className="k-layout-item-hint k-layout-item-hint-resize",this.hint.style.order=t.style.order,this.hint.style.gridColumnEnd=t.style.gridColumnEnd,this.hint.style.gridRowEnd=t.style.gridRowEnd,this.element.appendChild(this.hint))})),QU(this,"destroyResizeHint",(()=>{this.hint&&(this.element.removeChild(this.hint),this.hint=null)})),QU(this,"getElementUnderCursor",((t,e)=>{var i=Ae(t);return e&&e.contains(i)&&($(e),i=Ae(t),G(e)),i})),QU(this,"getItemUnderCursor",((t,e)=>{var i=this.getElementUnderCursor(t,e);return i?i.closest(tq):null})),QU(this,"shiftItemsOrder",((t,e,i)=>{for(var r=this.element.querySelectorAll(tq),n=0;n<r.length;n++){var o=r[n],s=parseInt(o.style.order);s>=t&&s<e&&(o.style.order=s+i)}})),this.extendOptions(e),this.options.resizable&&this.createResizable(),this.options.reorderable&&this.createReorderable(),this.bindEvents()}destroy(){this.destroyResizable(),this.destroyReorderable(),this.unbindEvents(),super.destroy()}bindEvents(){}unbindEvents(){}setOptions(t){this.options.resizable!==t.resizable&&(t.resizable?this.createResizable():this.destroyResizable()),this.options.reorderable!==t.reorderable&&(t.reorderable?this.createReorderable():this.destroyReorderable()),this.extendOptions(t)}createResizable(){this.resizable=new jO(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null,this.destroyResizeHint())}createReorderable(){this.reorderable=new jO(this.element,{draggable:{filter:".k-tilelayout-item-header"},events:{resizeStart:this.onReorderableDragStart,resize:this.onReorderableDrag,resizeEnd:this.onReorderableDragEnd}})}destroyReorderable(){this.reorderable&&(this.reorderable.destroy(),this.reorderable=null)}}function iq(t,e){Nt(eq,t,e)}function rq(t){jt(t)}function nq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var oq="k-active";class sq extends V{constructor(t,e){super(t,e),nq(this,"options",{dotNetInstance:null}),nq(this,"setActive",(()=>(this.element&&!this.element.classList.contains(oq)&&this.element.classList.add(oq),!0))),nq(this,"removeActive",(()=>(this.element&&this.element.classList.contains(oq)&&this.element.classList.remove(oq),!0))),this.extendOptions(e),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.initNavigationService(),this.element.addEventListener("mousedown",this.setActive),this.element.addEventListener("mouseleave",this.removeActive)}unbindEvents(){this.element.removeEventListener("mousedown",this.setActive),this.element.removeEventListener("mouseleave",this.removeActive)}initNavigationService(){this.navigationService=new ie(this.element),this.navigationService.bind(Jt.SPACE,this.setActive)}}function aq(t,e){Nt(sq,t,e)}function lq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var hq="k-callout-n",cq="k-callout-s",pq="hover",uq="bottom",dq="mouseenter",fq="mouseleave",vq="mousedown",mq="click",gq="data-telerik-tooltip-id";class yq extends V{constructor(t,e){super(t,e),lq(this,"options",{dotNetInstance:null,showOn:"",targetSelector:"",popupId:"",jsinterop:{open:"",close:""}}),lq(this,"onMouseDown",(t=>{var e=this.getPopupComponent();e.anchor&&!e.isChild(t.target)&&this.close(e.anchor)})),lq(this,"onClick",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.open(i)}})),lq(this,"onAnyTargetMouseEnter",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.removeTitle(i)}})),lq(this,"onMouseEnter",(t=>{this.onAnyTargetMouseEnter(t);var e=this.getClosestMatchingAnchor(t.target);this.open(e)})),lq(this,"onMouseLeave",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getPopupComponent(),r=t.relatedTarget;if(!W(i.anchor,r)){var n=this.getClosestMatchingAnchor(e);this.close(n)}}})),lq(this,"open",(t=>{if(g(t)&&!this.shouldSkipAnchor(t)){var e=this.getDataAttributes(t),i=this.getPopupComponent();i.anchors.forEach((e=>{W(e,t)&&(i.anchor=e)})),this.invokeMethodAsync(this.options.jsinterop.open,e)}})),lq(this,"close",(t=>{g(t)&&(this.restoreTitle(t),this.invokeMethodAsync(this.options.jsinterop.close))})),this.id=b(),this.options=e,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===pq?(t.addEventListener(dq,this.onMouseEnter,!0),t.addEventListener(fq,this.onMouseLeave,!0)):(t.addEventListener(dq,this.onAnyTargetMouseEnter,!0),t.addEventListener(mq,this.onClick,!0)),t.addEventListener(vq,this.onMouseDown,!0))}unbindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===pq?(t.removeEventListener(dq,this.onMouseEnter,!0),t.removeEventListener(fq,this.onMouseLeave,!0)):(t.removeEventListener(dq,this.onAnyTargetMouseEnter,!0),t.removeEventListener(mq,this.onClick,!0)),t.removeEventListener(vq,this.onMouseDown,!0))}getDataAttributes(t){var e=t.getAttribute("title")||t.getAttribute("data-title"),i=t.getAttribute("alt")||e;return i&&t.setAttribute("data-title",i),t.removeAttribute("title"),t.dataset}restoreTitle(t){if(g(t)){var e=t.getAttribute("data-title")||t.getAttribute("title");e&&t.setAttribute("title",e),t.removeAttribute("data-title"),this.untrackAnchor(t)}}removeTitle(t){if(g(t)){this.trackAnchor(t);var e=t.getAttribute("title")||t.getAttribute("data-title");t.setAttribute("data-title",e),t.removeAttribute("title")}}flipCallout(t){var e=this.getPopupComponent();if(e.flipped){var i=e.element.querySelector(".k-callout");"top"===t?(X(cq,i),K(hq,i)):t===uq&&(X(hq,i),K(cq,i))}}correctCalloutPosition(){var t=this.getPopupComponent(),e=t.getElementRect(t.anchor),i=t.getElementRect(t.element),r=e.left-i.left+.5*e.width,n=t.element.querySelector(".k-callout");n&&(n.style.left=r+"px")}positionCallout(t){this.flipCallout(t),"top"!==t&&t!==uq||this.correctCalloutPosition()}getCalloutSize(){var t=document.createElement("div");t.className="k-callout ".concat(hq),t.style.visibility="hidden",document.body.appendChild(t);var e=window.getComputedStyle(t),i=e.borderWidth||e.borderTopWidth,r=parseFloat(i);return document.body.removeChild(t),r}getPopupComponent(){return Ht(this.options.popupId)}shouldSkipAnchor(t){var e=this.isAnchorTracked(t),i=this.ownsAnchorBySelector(t);return!e&&!i}trackAnchor(t){g(t)&&t.setAttribute(gq,this.id)}untrackAnchor(t){g(t)&&t.removeAttribute(gq)}isAnchorTracked(t){return g(t)&&t.getAttribute(gq)===this.id}ownsAnchorBySelector(t){return g(t)&&Boolean(t.closest(this.options.targetSelector))}getClosestMatchingAnchor(t){var e=this.getClosestTrackedAnchor(t);return e||this.getClosestAnchorBySelector(t)}getClosestTrackedAnchor(t){return g(t)?t.closest(L(gq,this.id)):null}getClosestAnchorBySelector(t){return g(t)?t.closest(this.options.targetSelector):null}repositionPopup(){var t=this.getPopupComponent();t&&t.positionElement()}}function bq(t,e){Ht(t)||Wt(t,new yq(null,e))}class wq extends fi{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!0},componentSelector:".k-treelist",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e),this.options.rowDraggable&&this.createRowDraggable()}destroy(){super.destroy()}}function xq(t,e){Nt(wq,t,e)}function _q(t){jt(t)}var kq=Array.from,Sq=t=>null!=t,Cq=t=>{var e=t.match(/\.([^\.]+)$/);return e?e[0]:""};function Eq(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Tq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Aq="error",Mq=()=>({}),Oq=function(t){return w(t)?t:Mq},Dq=(t,e)=>{var i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Eq(Object(i),!0).forEach((function(e){Tq(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Eq(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({request:Pq(t)},e);return i},Pq=t=>({status:t.status,statusText:t.statusText,responseText:t.responseText,responseType:t.responseType});class Rq{static send(t){var{url:e,method:i,data:r,withCredentials:n=!1,headers:o={},success:s,error:a,progress:l}=t,h=new XMLHttpRequest,c=Oq(s),p=Oq(a),u=Oq(l);return h.withCredentials=n,h.addEventListener("load",(()=>{h.status>=200&&h.status<300?c(Dq(h)):p(Dq(h))})),h.addEventListener(Aq,(()=>{p(Dq(h))})),h.upload.addEventListener(Aq,(()=>{p(Dq(h))})),h.upload.addEventListener("progress",(t=>{u(Dq(h,{progress:Math.round(100*t.loaded/t.total)}))})),h.open(i,e,!0),Object.entries(o).forEach((t=>{var[e,i]=t;h.setRequestHeader(e,i)})),h.send(r),h}}var Iq=0,Lq=1;function zq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Bq extends V{constructor(t){super(null,t),zq(this,"options",{saveUrl:"",saveMethod:"POST",saveField:"files",removeUrl:null,removeMethod:"POST",removeField:"files",withCredentials:!1,events:{uploadProgress:null,uploadSuccess:null,uploadError:null}}),zq(this,"onUploadProgress",(t=>{this.trigger("uploadProgress",t)})),zq(this,"onUploadSuccess",(t=>{this.trigger("uploadSuccess",t)})),zq(this,"onUploadError",(t=>{this.trigger("uploadError",t)})),zq(this,"onRemoveSuccess",(t=>{this.trigger("removeSuccess",t)})),zq(this,"onRemoveError",(t=>{this.trigger("removeError",t)})),this.extendOptions(t),this.resetState()}setOptions(t){this.extendOptions(t)}resetState(){this.setState({fileRequests:{}})}setState(t){this.state=f(this.state||{},t)}uploadFiles(t,e){kq(t).forEach((t=>{this.uploadFile(t,e)}))}uploadFile(t,e){this.sendUploadRequest(t,e)}cancelFile(t){var e=this.state.fileRequests[t];e&&(this.untrackUploadRequest(t),e.abort())}removeFile(t,e){this.sendRemoveRequest(t,e)}sendUploadRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.saveUrl){var i=t.id,r=this.getFileUploadFormData(t.rawFile,e.data),n=Rq.send({url:this.options.saveUrl,method:this.options.saveMethod,withCredentials:this.options.withCredentials,data:r,headers:e.headers,success:t=>{this.onUploadSuccess({operation:Iq,request:t.request,file:{id:i}})},error:t=>{this.onUploadError({operation:Iq,request:t.request,file:{id:i}})},progress:t=>{this.onUploadProgress({file:{id:i,progress:t.progress}})}});this.trackUploadRequest(i,n)}}sendRemoveRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.removeUrl){var i=t.id,r=this.getFileRemoveFormData(t,e.data);Rq.send({url:this.options.removeUrl,method:this.options.removeMethod,withCredentials:this.options.withCredentials,data:r,headers:e.headers,success:t=>{this.onRemoveSuccess({operation:Lq,request:t.request,file:{id:i}})},error:t=>{this.onRemoveError({operation:Lq,request:t.request,file:{id:i}})}})}}trackUploadRequest(t,e){this.state.fileRequests[t]=e}untrackUploadRequest(t){this.state.fileRequests[t]=null}getFileUploadFormData(t,e){return this.getFormData({field:this.options.saveField,data:t,additionalData:e})}getFileRemoveFormData(t,e){return this.getFormData({field:this.options.removeField,data:t.name,additionalData:e})}getFormData(t){var{data:e,field:i,additionalData:r={}}=t,n=new FormData;return Object.keys(r).forEach((t=>{n.append(t,r[t])})),n.append(i,e),n}}var Nq=0,jq=1,Fq=2,Vq=3;class Hq{validateFile(t,e){var{allowedExtensions:i,minFileSize:r,maxFileSize:n}=e;return{validExtension:this.isValidFileExtension(t.extension,i),validMinFileSize:this.isValidMinFileSize(t.size,r),validMaxFileSize:this.isValidMaxFileSize(t.size,n)}}isValidFileExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!Sq(e)||e.map((t=>t.toLowerCase())).includes(t.toLowerCase())}isValidMinFileSize(t,e){return!Sq(e)||t>e}isValidMaxFileSize(t,e){return!Sq(e)||t<e}}class Wq{constructor(t){this.id=b(),this.name=E(t.name),this.size=t.size,this.extension=t.extension,this.progress=t.progress||0,this.rawFile=t.rawFile,this.status=t.status||Nq,this.invalidExtension=t.invalidExtension||!1,this.invalidMinFileSize=t.invalidMinSize||!1,this.invalidMaxFileSize=t.invalidMaxFileSize||!1}isValid(){return!this.invalidExtension&&!this.invalidMinFileSize&&!this.invalidMaxFileSize}}function Uq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qq="change",Gq="keydown",$q="focusout",Kq=[Jt.ARROWLEFT,Jt.ARROWRIGHT,Jt.ARROWUP,Jt.ARROWDOWN],Xq=t=>t?parseInt(t.getAttribute("data-index"),10):null;class Yq extends V{constructor(t,e){super(t,e),Uq(this,"options",{dotNetInstance:null,allowedExtensions:[],minFileSize:null,maxFileSize:null,multiple:!1,jsinterop:{onSelect:null,focusout:null}}),Uq(this,"onInputChange",(t=>{var e=this.getFilesInfo(t.target.files);navigator.userAgent.match(/webkit/i)&&(t.target.type="",t.target.type="file"),this.options.multiple||this.clearFiles(),this.addFiles(e),this.triggerFileSelect(e)})),Uq(this,"onKeyDown",(t=>{Kq.includes(t.key)&&t.preventDefault()})),Uq(this,"onFocusOut",(t=>{var e=t.target.closest(".k-file"),i=Xq(e),r=t.relatedTarget?t.relatedTarget.closest(".k-file"):null,n=Xq(r);this.invokeFocusOut(i,n)})),this.extendOptions(e),this.inputElement=this.element.querySelector("input[type='file']"),this.initValidator(),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents(),this.inputElement=null,this.destroyValidator(),super.destroy()}bindEvents(){this.inputElement&&this.inputElement.addEventListener(qq,this.onInputChange),this.element.addEventListener(Gq,this.onKeyDown),this.element.addEventListener($q,this.onFocusOut)}unbindEvents(){this.inputElement&&this.inputElement.removeEventListener(qq,this.onInputChange),this.element.removeEventListener(Gq,this.onKeyDown),this.element.removeEventListener($q,this.onFocusOut)}resetState(){this.setState({files:[]})}setState(t){this.state=f(this.state||{},t)}initValidator(){this.validator=new Hq}destroyValidator(){this.validator=null}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}addFiles(t){kq(t).forEach((t=>{this.addFile(t)}))}addFile(t){this.getFile(t.id)||(this.validateFile(t),this.state.files.push(t))}removeFileFromState(t){var e=this.state.files.filter((e=>e.id!==t));this.setState({files:e})}getFiles(){return this.state.files}getFile(t){return this.state.files.find((e=>e.id===t))}getFileInfo(t){var e=(t=>({name:t.name,size:t.size,extension:Cq(t.name),rawFile:t}))(t);return new Wq(e)}getFilesInfo(t){return kq(t).map(this.getFileInfo)}clearFiles(){this.setState({files:[]})}validateFile(t){if(this.validator){var e=this.validator.validateFile(t,{allowedExtensions:this.options.allowedExtensions,minFileSize:this.options.minFileSize,maxFileSize:this.options.maxFileSize});t.invalidExtension=!e.validExtension,t.invalidMinFileSize=!e.validMinFileSize,t.invalidMaxFileSize=!e.validMaxFileSize}}invokeFocusOut(t,e){var i;null!==(i=t)&&i>=0&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,{relatedTargetFileIndex:e})}),1)}focusFile(t){var e=Array.from(this.element.querySelectorAll(".k-file")||[])[t];this.focusElement(e)}focusInput(){this.focusElement(this.inputElement)}focusElement(t){t instanceof HTMLElement&&tt(t)}}function Zq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Jq extends Yq{constructor(t,e){super(t,e),Zq(this,"options",{saveUrl:null,saveField:"files",removeUrl:null,removeField:"files",withCredentials:!1,autoUpload:!1,jsinterop:{onProgress:null,onSuccess:null,onError:null}}),Zq(this,"onProgress",(t=>{var e=this.getFile(t.file.id);Sq(e)&&(e.progress=t.file.progress,this.invokeMethodAsync(this.options.jsinterop.onProgress,{files:[e],progress:t.file.progress}))})),Zq(this,"onSuccess",(t=>{var e=[this.getFile(t.file.id)];t.operation===Lq?this.removeFileFromState(t.file.id):this.setFileStatus(e,jq),this.invokeMethodAsync(this.options.jsinterop.onSuccess,{operation:t.operation,files:e,request:t.request})})),Zq(this,"onError",(t=>{var e=[this.getFile(t.file.id)];t.operation===Iq&&this.setFileStatus(e,Vq),this.invokeMethodAsync(this.options.jsinterop.onError,{operation:t.operation,files:e,request:t.request})})),this.extendOptions(e),this.initOrUpdateUploadService(this.options)}destroy(){this.destroyUploadService(),super.destroy()}setOptions(t){this.extendOptions(t),this.initOrUpdateUploadService(this.options)}initOrUpdateUploadService(t){this.uploadService?this.uploadService.setOptions(t):this.uploadService=this.initUploadService(t)}initUploadService(t){return new Bq({saveUrl:t.saveUrl,saveField:t.saveField,removeUrl:t.removeUrl,removeField:t.removeField,withCredentials:t.withCredentials,events:{uploadProgress:this.onProgress,uploadSuccess:this.onSuccess,uploadError:this.onError,removeSuccess:this.onSuccess,removeError:this.onError}})}destroyUploadService(){this.uploadService&&this.uploadService.destroy()}deleteFile(t){var{fileId:e,options:i}=t;this.removeFile(e,i)}removeFile(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getFile(t);i&&(i.status===jq?this.uploadService.removeFile(i,{headers:e.requestHeaders,data:e.requestData}):this.removeFileFromState(t))}uploadFiles(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.files||[]).length>0?t.files:this.getFiles(),i=this.getFilesForUpload(e);this.setFileStatus(i,Fq),this.uploadService.uploadFiles(i,{headers:t.requestHeaders,data:t.requestData})}retryFile(t){var{fileId:e,options:i={}}=t,r=this.getFile(e);r&&r.status===Vq&&this.uploadService.uploadFile(r,{headers:i.requestHeaders,data:i.requestData})}cancelFile(t){this.getFile(t)&&(this.uploadService.cancelFile(t),this.removeFile(t))}focusClearButton(){var t=this.element.querySelector(".k-clear-selected");this.focusElement(t)}getFilesForUpload(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{var i=this.getFile(e.id);this.isFileForUpload(i)&&t.push(i)})),t}isFileForUpload(t){return t.isValid()&&t.status===Nq}setFileStatus(t,e){(Array.isArray(t)?t:[t]).forEach((t=>{Sq(t)&&(t.status=e)}))}openFileSelect(){this.inputElement&&this.inputElement.click()}}class Qq extends Yq{constructor(t,e){super(t,e),this.extendOptions(e)}destroy(){super.destroy()}setOptions(t){this.extendOptions(t)}deleteFile(t){this.removeFileFromState(t)}readBlob(t){return function(t){return new Promise((function(e,i){var r=new FileReader;r.onerror=function(){r.abort(),i("Error reading file.")},r.onload=function(){e(r.result)},t&&r.readAsArrayBuffer(t.rawFile)}))}(t)}readBytes(t){var e=this.getFile(t[0].fileId);return this.readBlob(e).then((function(e){var i=new Uint8Array(e,t[0].start,Math.min(e.byteLength,t[0].count));return btoa(String.fromCharCode.apply(null,i))}))}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}}function tG(t,e){Nt(Jq,t,e)}function eG(t,e){Nt(Qq,t,e)}function iG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var rG=I("data-col-index"),nG=Array.from;class oG extends V{constructor(t,e){super(t,e),iG(this,"options",{dotNetInstance:null,tableSelector:".k-grid-table",debounceDelay:180,headerSelector:"k-grid-header",contentSelector:"k-grid-content",footerSelector:"k-grid-footer",jsinterop:{onScroll:""}}),iG(this,"detectScrollTopChanged",(t=>{this.state.scrollTopChanged=this.state.scrollTop!==t.target.scrollTop,this.state.scrollTop=t.target.scrollTop})),iG(this,"onScroll",(t=>{if(!this.state.scrollTopChanged){var e=document.activeElement?document.activeElement.closest(rG):null,i=e?e.closest(z("k-state-focused"))||e:null,r=i?i.closest([z(this.options.headerSelector),z(this.options.contentSelector),z(this.options.footerSelector)].join(",")):null,n=k(i),o=Et(i,r),s=0;if(i){var a=i.getBoundingClientRect().width,l=i.closest("tr"),h=(l?nG(l.querySelectorAll(rG)):[]).filter(ve);s=h.reduce(((t,e)=>t+e.getBoundingClientRect().width),0),h.length&&s+a>this.element.clientWidth&&(o=!0)}this.invokeScroll({scrollLeft:t.target.scrollLeft,containsActiveElement:n,isActiveCellInView:o})}})),this.extendOptions(e),this.bindEvents(),this.setState({scrollTop:0,scrollTopChanged:!1,scrollLeft:0})}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedScroll=p((t=>{this.onScroll(t)}),this.options.debounceDelay).bind(this),this.element.addEventListener("scroll",this.detectScrollTopChanged),this.element.addEventListener("scroll",this.debouncedScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.detectScrollTopChanged),this.element.removeEventListener("scroll",this.debouncedScroll),this.debouncedScroll=null}setState(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=f(this.state||{},t)}invokeScroll(t){var{scrollLeft:e,containsActiveElement:i,isActiveCellInView:r}=t;this.invokeMethodAsync(this.options.jsinterop.onScroll,{scrollLeft:e,containsActiveElement:i,isActiveCellInView:r})}}function sG(t,e){Nt(oG,Gt(t,"VirtualColumnScroller"),e)}function aG(t){jt(Gt(t,"VirtualColumnScroller"))}function lG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hG extends V{constructor(t,e){super(t,e),lG(this,"options",{skip:0,itemHeight:0,loadingItems:!1,jsinterop:{scroll:""}}),lG(this,"onElementScroll",(()=>{var t=this.options,e=Math.floor(this.element.scrollTop);if(this.scrollTop===e||this.manualSet)this.manualSet=!1;else{clearTimeout(this.timeout),t.loadingItems&&this.scrollLoadingItems(),this.scrollTop=e;var i=Math.floor(e/t.itemHeight);this.timeout=setTimeout((()=>{this.invokeMethodAsync(t.jsinterop.scroll,i)}),66)}})),this.extendOptions(e),this.timeout,this.contentElement=this.element.querySelector(".k-virtual-scroller-content"),this.total=parseInt(this.contentElement.getAttribute("data-total")),this.setScrollbarSize(),this.setPosition(e.skip),this.bindEvents()}destroy(){clearTimeout(this.timeout),this.unbindEvents(),this.contentElement=null,super.destroy()}bindEvents(){this.element.addEventListener("scroll",this.onElementScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.onElementScroll)}setScrollbarSize(){It()}setPosition(t){this.manualSet=!0,this.scrollTop=Math.floor(this.options.itemHeight*t);var e=this.element.parentElement.parentElement.style.display,i=this.element.parentElement.parentElement.parentElement.style.display;this.element.parentElement.parentElement.style.display="",this.element.parentElement.parentElement.parentElement.style.display="",this.element.scrollTop=this.scrollTop,this.element.parentElement.parentElement.style.display=e,this.element.parentElement.parentElement.parentElement.style.display=i}setPositionToIndex(t){this.manualSet=!0;var e=t*this.options.itemHeight,i=e+this.options.itemHeight,r=Math.floor(this.element.scrollTop),n=bt(this.element),o=r+(this.element.offsetHeight-n);i>o?(this.scrollTop+=i-o,this.element.scrollTop=this.scrollTop):i<r&&(this.scrollTop=e,this.element.scrollTop=this.scrollTop)}scrollLoadingItems(){var t=this.options,e=Math.floor(this.element.scrollTop),i=bt(this.element),r=this.element.offsetHeight-i,n=this.contentElement.children[0].offsetHeight,o=2*t.itemHeight,s=parseFloat(this.contentElement.getAttribute("data-translate")),a=s;e<s?a=e-e%o:n+s<r+e&&(a=Math.ceil((r+e-n)/o)*o),this.contentElement.style.setProperty("transform","translateY("+a+"px)")}}function cG(t,e){Nt(hG,t,e)}function pG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class uG extends V{constructor(t,e){super(t,e),pG(this,"options",{dotNetInstance:null,jsinterop:{keydown:"Window_KeyDown"},navigable:!1}),pG(this,"onFocusIn",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusin)})),pG(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==Zt.ESCAPE||this.invokeKeyDown(t)})),pG(this,"onDragStart",(t=>{this.dragStarted=this.allowedDrag(t),this.dragStarted&&(this.setFixedPosition(),this.cursorOffset={top:t.pageY-this.top,left:t.pageX-this.left},je(t),this.startTop=this.top,this.startLeft=this.left,this.element.focus())})),pG(this,"onDrag",(t=>{if(!this.dragStarted)return!0;var e=t.pageY-this.cursorOffset.top,i=t.pageX-this.cursorOffset.left;this.setPosition(e,i)})),pG(this,"onDragEnd",(()=>{this.dragStarted&&(this.startTop===this.top&&this.startLeft===this.left||this.invokeMethodAsync(this.options.jsinterop.dragEnd,{top:"".concat(this.top,"px"),left:"".concat(this.left,"px")}))})),this.extendOptions(e),this.titleBar=this.element.querySelector(".k-window-titlebar"),this.bindEvents(),this.options.navigable&&this.enableTabKeyTrap()}destroy(){this.unbindEvents(),this.options.navigable&&this.disableTabKeyTrap(),this.destroyDraggable(),super.destroy(),this.content=this.titleBar=null}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusin",this.onFocusIn)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusin",this.onFocusIn)}onShow(t){t.length&&this.setOptions(t[0]),this.unbindEvents();var e=this.element.getAttribute("data-id");this.element=q(e),this.titleBar=this.element.querySelector(".k-window-titlebar"),this.content=this.element.querySelector(".k-window-content"),this.bindEvents(),this.initDraggable(),this.formKeyTrap&&(this.formKeyTrap.destroy(),this.enableTabKeyTrap()),this.options.navigable?lt(this.content.id):this.element.focus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,{type:t.type,key:t.key,code:t.keyCode,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})}enableTabKeyTrap(){this.options.modal&&(this.formKeyTrap=new le(this.content),this.formKeyTrap.enableKeyTrap())}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}initDraggable(){this.options.draggable&&this.createDraggable()}createDraggable(){this.titleBar&&(this.draggable=new Xe({press:this.onDragStart,drag:this.onDrag,release:this.onDragEnd}),this.draggable.bindTo(this.titleBar))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}allowedDrag(t){var e=t.originalEvent.target;return!this.isMaximized()&&!e.closest("button")}setFixedPosition(){var t=function(t,e,i){void 0===i&&(i=1);var r=e?YW(e):null,n=QW(t,r),o=n.top,s=n.left,a=n.height,l=n.width,h=ZW(r,t),c=h.x,p=h.y,u=t.ownerDocument,d=r===u.body||r===u.documentElement?1:i;return{top:o+p*d,left:s+c*d,height:a,width:l}}(this.element,this.element.parentElement);X("k-centered",this.element),this.setPosition(t.top,t.left)}setPosition(t,e){this.top=(Math.round(10*t)/10).toFixed(1),this.left=(Math.round(10*e)/10).toFixed(1),this.element&&(this.element.style.top="".concat(t,"px"),this.element.style.left="".concat(e,"px"))}isMaximized(){if(this.element)return"100%"===this.element.style.width&&"100%"===this.element.style.height}}function dG(t,e){Nt(uG,t,e)}})(),r})()}));